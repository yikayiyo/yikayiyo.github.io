<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ä½¿ç”¨React Profiler</title>
      <link href="/2023/05/11/%E4%BD%BF%E7%94%A8React%20Profiler/"/>
      <url>/2023/05/11/%E4%BD%BF%E7%94%A8React%20Profiler/</url>
      
        <content type="html"><![CDATA[<h3 id="å¼€å§‹ä¹‹å‰è®¾ç½®é…ç½®"><a href="#å¼€å§‹ä¹‹å‰è®¾ç½®é…ç½®" class="headerlink" title="å¼€å§‹ä¹‹å‰è®¾ç½®é…ç½®"></a>å¼€å§‹ä¹‹å‰è®¾ç½®é…ç½®</h3><p>æ¸²æŸ“æ—¶é«˜äº®æ˜¾ç¤ºæ›´æ–°çš„å†…å®¹</p><figure>  <img src="/2023/05/11/%E4%BD%BF%E7%94%A8React%20Profiler/config01.png" class="" title="æ¸²æŸ“æ—¶é«˜äº®æ˜¾ç¤ºæ›´æ–°çš„å†…å®¹">  <figcaption>é…ç½®1 - æ¸²æŸ“æ—¶é«˜äº®æ˜¾ç¤ºæ›´æ–°çš„å†…å®¹</figcaption></figure><span id="more"></span>è®°å½•ç»„ä»¶æ¸²æŸ“çš„åŸå› <figure>  <img src="/2023/05/11/%E4%BD%BF%E7%94%A8React%20Profiler/config02.png" class="" title="è®°å½•ç»„ä»¶æ¸²æŸ“çš„åŸå› ">  <figcaption>é…ç½®2 - è®°å½•ç»„ä»¶æ¸²æŸ“çš„åŸå› </figcaption></figure><h3 id="åŠ è½½-App"><a href="#åŠ è½½-App" class="headerlink" title="åŠ è½½ App"></a>åŠ è½½ App</h3><figure>  <img src="/2023/05/11/%E4%BD%BF%E7%94%A8React%20Profiler/reload.png" class="" title="åŠ è½½ App">  <figcaption>é‡æ–°åŠ è½½ App</figcaption></figure><h3 id="åœæ­¢è®°å½•"><a href="#åœæ­¢è®°å½•" class="headerlink" title="åœæ­¢è®°å½•"></a>åœæ­¢è®°å½•</h3><figure>  <img src="/2023/05/11/%E4%BD%BF%E7%94%A8React%20Profiler/stop.png" class="" title="åœæ­¢è®°å½•">  <figcaption>åœæ­¢è®°å½•</figcaption></figure><h3 id="åˆ†ææ•°æ®"><a href="#åˆ†ææ•°æ®" class="headerlink" title="åˆ†ææ•°æ®"></a>åˆ†ææ•°æ®</h3><figure>  <img src="/2023/05/11/%E4%BD%BF%E7%94%A8React%20Profiler/record01.png" class="">  <figcaption>ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“</figcaption></figure><figure>  <img src="/2023/05/11/%E4%BD%BF%E7%94%A8React%20Profiler/record02.png" class="">  <figcaption>ç»„ä»¶æ›´æ–°åŸå› </figcaption></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·¨åŸŸé—®é¢˜å’ŒCORS</title>
      <link href="/2023/02/26/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%92%8CCORS/"/>
      <url>/2023/02/26/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%92%8CCORS/</url>
      
        <content type="html"><![CDATA[<img src="/2023/02/26/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%92%8CCORS/send-a-url.png" class="" title="å½“ä½ åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä¸€ä¸ªurl..."><p>è¯·æ±‚å¾—åˆ°çš„é¡µé¢ä¸­ï¼Œå¯èƒ½åµŒå…¥äº†å¾ˆå¤š CSS æ–‡ä»¶ï¼ŒJavaScript æ–‡ä»¶ï¼Œå›¾ç‰‡æˆ–è€… iframe ã€‚è¿™äº›æ–‡ä»¶æœ‰çš„æ¥è‡ªé¡µé¢æ‰€åœ¨çš„æœåŠ¡å™¨ï¼Œæœ‰çš„æ¥è‡ªå…¶å®ƒæœåŠ¡å™¨ï¼Œå®ƒä»¬ä¹‹é—´å¯èƒ½ä¼šæœ‰ä¸€äº›äº’åŠ¨ã€‚å¦‚æœä¸å¯¹è¿™äº›äº’åŠ¨åšäº›é™åˆ¶ï¼Œå‡è®¾å…¶ä¸­ä¸€ä¸ªæ–‡ä»¶è¢«æ¶æ„æ”»å‡»ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶å°±æœ‰å¯èƒ½æš´éœ²ç”¨æˆ·æµè§ˆå™¨ä¸­çš„ä¸€åˆ‡ã€‚å› æ­¤ï¼Œæµè§ˆå™¨æœ‰è‡ªå·±ä¸¥æ ¼çš„å®‰å…¨ç­–ç•¥ã€‚</p><span id="more"></span><h2 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a>åŒæºç­–ç•¥</h2><p><mark>æµè§ˆå™¨</mark>çš„å®‰å…¨æœºåˆ¶</p><p><mark>åŒæº</mark>æŒ‡çš„æ˜¯ï¼šåè®®ï¼ˆprotocolï¼‰ã€ä¸»æœºåï¼ˆhost nameï¼‰ã€ç«¯å£ï¼ˆportï¼‰è¦ä¸€è‡´</p><p>åŒæºç­–ç•¥é™åˆ¶äº†ä¸€ä¸ªæºä¸Šçš„æ–‡æ¡£æˆ–è€…è„šæœ¬åŒå¦ä¸€ä¸ªæºä¸Šèµ„æºçš„äº¤äº’</p><p>å¯¹äº <code>http://store.company.com/dir/page.html</code>ï¼Œä¸‹é¢çš„è¡¨æ ¼åˆ—å‡ºäº†å„ç§åŒæºæˆ–è·¨æºçš„æƒ…å†µ</p><blockquote><p>è·¨æºå’Œè·¨åŸŸè¯´çš„æ˜¯åŒä¸€ä¸ªä¸œè¥¿</p></blockquote><table><thead><tr><th>URL</th><th>æ˜¯å¦åŒæº</th><th>åŸå› </th></tr></thead><tbody><tr><td><code>http://store.company.com/dir2/other.html</code></td><td>æ˜¯</td><td>åªæœ‰è·¯å¾„ä¸åŒ</td></tr><tr><td><code>http://store.company.com/dir/inner/another.html</code></td><td>æ˜¯</td><td>åªæœ‰è·¯å¾„ä¸åŒ</td></tr><tr><td><code>https://store.company.com/page.html</code></td><td>ä¸æ˜¯</td><td>åè®®ä¸åŒ</td></tr><tr><td><code>http://store.company.com:81/dir/page.html</code></td><td>ä¸æ˜¯</td><td>ç«¯å£ä¸åŒ</td></tr><tr><td><code>http://news.company.com/dir/other.html</code></td><td>ä¸æ˜¯</td><td>ä¸»æœºåä¸åŒ</td></tr></tbody></table><p>å¯¹äºè·¨æºèµ„æºï¼Œä¸€èˆ¬æƒ…å†µä¸‹<strong>å¯ä»¥åµŒå…¥</strong>ï¼Œ<strong>ä¸å¯ä»¥è¯»å–</strong></p><table><thead><tr><th>æ–‡ä»¶ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>script</td><td>è·¨æºè„šæœ¬å¯ä»¥åµŒå…¥ï¼›æŸäº›è¯·æ±‚ä¼šè¢«é˜»æ­¢ï¼ˆæ¯”å¦‚è·¨æºçš„ fetch è¯·æ±‚</td></tr><tr><td>CSS</td><td>è·¨æº CSS å¯ä»¥ä½¿ç”¨ <code>&lt;link&gt;</code> å…ƒç´ æˆ– CSS æ–‡ä»¶ä¸­çš„ <code>@import</code> æ¥åµŒå…¥ï¼Œå¯èƒ½éœ€è¦æ­£ç¡®çš„ <code>Content-Type</code> æ ‡å¤´</td></tr><tr><td>images</td><td>åµŒå…¥è·¨æºå›¾åƒæ˜¯å…è®¸çš„ã€‚ä½†æ˜¯ï¼Œè¯»å–è·¨æºå›¾åƒæ•°æ®ï¼ˆå¦‚ä½¿ç”¨ JavaScript æ£€ç´¢è·¨æºå›¾åƒçš„äºŒè¿›åˆ¶æ•°æ®ï¼‰æ˜¯è¢«ç¦æ­¢çš„</td></tr><tr><td>forms</td><td>è·¨æº URL å¯ä»¥ä½œä¸ºè¡¨å•å…ƒç´  <code>action</code> å±æ€§çš„å€¼ï¼Œç½‘ç»œåº”ç”¨ç¨‹åºå¯ä»¥å°†è¡¨å•æ•°æ®å†™å…¥ä¸€ä¸ªè·¨æºåœ°å€</td></tr><tr><td>multimedia</td><td>è·¨æºçš„éŸ³è§†é¢‘å¯ä»¥é€šè¿‡ <code>&lt;video&gt;</code>, <code>&lt;audio&gt;</code> æ ‡ç­¾åµŒå…¥</td></tr><tr><td>iframes</td><td>è·¨æºåµŒå…¥é€šå¸¸æ˜¯å…è®¸çš„ï¼Œä½†ä¸å…è®¸è·¨æºè¯»å–ï¼ˆå¦‚ä½¿ç”¨ JavaScript è®¿é—® iframe ä¸­çš„æ–‡æ¡£ï¼‰</td></tr></tbody></table><p>å¦‚æœæŸäº›èµ„æºä¸æƒ³è¢«åŒæºç­–ç•¥é™åˆ¶ï¼Œå¸Œæœ›å¯ä»¥è¢«æ‰€æœ‰äººè®¿é—®å‘¢ï¼Ÿ</p><p>CORS (Cross-Origin Resource Sharing) è§£å†³äº†é—®é¢˜ã€‚</p><h2 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h2><p><mark>è·¨æºèµ„æºå…±äº«</mark>æ˜¯åŸºäº <mark> HTTP æ ‡å¤´ï¼ˆheaders)</mark> çš„æœºåˆ¶</p><p><mark>æœåŠ¡å™¨ç«¯</mark>è®¾ç½®<mark>è®¿é—®æ§åˆ¶</mark>ç›¸å…³çš„ HTTP æ ‡å¤´ä¿¡æ¯ï¼Œæµè§ˆå™¨åˆ©ç”¨è¿™äº›ä¿¡æ¯å†³å®šæ˜¯å¦é˜»æ­¢å‰ç«¯ JavaScript ä»£ç çš„è·¨åŸŸè¯·æ±‚</p><p>å€ŸåŠ©è¯¥æœºåˆ¶ï¼ŒæœåŠ¡å™¨å¯ä»¥æŒ‡å®šå“ªäº›æºçš„è¯·æ±‚å¯ä»¥è®¿é—®è‡ªå·±çš„èµ„æº</p><h3 id="ç®€å•è¯·æ±‚"><a href="#ç®€å•è¯·æ±‚" class="headerlink" title="ç®€å•è¯·æ±‚"></a>ç®€å•è¯·æ±‚</h3><p>ç›´æ¥è¯·æ±‚æœåŠ¡å™¨ï¼Œä¸éœ€è¦å‘é€é¢„æ£€è¯·æ±‚ï¼ˆpreflighted requestsï¼‰</p><ul><li>ä½¿ç”¨ä¸‹é¢çš„è¯·æ±‚æ–¹æ³•ä¹‹ä¸€ï¼š<code>GET</code>ï¼Œ<code>POST</code>ï¼Œ<code>HEAD</code></li><li>å…è®¸äººä¸ºè®¾ç½®çš„è¯·æ±‚å¤´ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Accept"><code>Accept</code></a>ï¼Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Accept-Language"><code>Accept-Language</code></a>ï¼Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Language"><code>Content-Language</code></a>ï¼Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Type"><code>Content-Type</code></a>ï¼Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Range"><code>Range</code></a>ï¼ˆåªå…è®¸<a href="https://fetch.spec.whatwg.org/#simple-range-header-value">ç®€å•çš„èŒƒå›´æ ‡å¤´å€¼</a>&nbsp; å¦‚ &nbsp;<code>bytes=256-</code>&nbsp; æˆ– &nbsp;<code>bytes=127-255</code>ï¼‰<ul><li><code>Content-Type</code> ä»…æ”¯æŒ <code>text/plain</code> ã€<code>multipart/form-data</code> ã€<code>application/x-www-form-urlencoded</code></li></ul></li><li>è¯·æ±‚ä¸­çš„ä»»æ„ <code>XMLHttpRequestUpload</code> å¯¹è±¡å‡æ²¡æœ‰æ³¨å†Œäº‹ä»¶ç›‘å¬å™¨<ul><li>å¯¹äºä»»æ„è¯·æ±‚å®ä¾‹ xhr æ²¡æœ‰è°ƒç”¨ <code>xhr.upload.addEventListener()</code></li></ul></li><li>è¯·æ±‚ä¸­æ²¡æœ‰ä½¿ç”¨ <code>ReadableStream</code> å¯¹è±¡</li></ul><p><a href="http://arunranga.com/examples/access-control/simpleXSInvocation.html">æ ·ä¾‹</a></p><h3 id="é¢„æ£€è¯·æ±‚"><a href="#é¢„æ£€è¯·æ±‚" class="headerlink" title="é¢„æ£€è¯·æ±‚"></a>é¢„æ£€è¯·æ±‚</h3><ul><li>å¯¹äºå¯èƒ½å¯¹æœåŠ¡å™¨æ•°æ®äº§ç”Ÿå‰¯ä½œç”¨çš„è¯·æ±‚ï¼Œå¿…é¡»é¦–å…ˆé€šè¿‡ <code>OPTIONS</code> æ–¹æ³•å‘é€ä¸€ä¸ªé¢„æ£€è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ ¹æ®é¢„æ£€è¯·æ±‚å†³å®šæ˜¯å¦å…è®¸çœŸå®è¯·æ±‚</li><li>é¢„æ£€è¯·æ±‚ä¸­çš„ç‰¹æ®Šå¤´å­—æ®µï¼ˆä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®<ul><li><code>Access-Control-Request-Method</code> å‘ŠçŸ¥æœåŠ¡å™¨çœŸå®è¯·æ±‚çš„è¯·æ±‚æ–¹æ³•</li><li><code>Access-Control-Request-Headers</code> å‘ŠçŸ¥æœåŠ¡å™¨çœŸå®è¯·æ±‚æºå¸¦çš„å¤´å­—æ®µ</li></ul></li><li>é¢„æ£€è¯·æ±‚çš„å“åº”ä¸­çš„ç‰¹æ®Šå¤´å­—æ®µ<ul><li><code>Access-Control-Allow-Methods</code> è¡¨ç¤ºæœåŠ¡å™¨å…è®¸çš„è¯·æ±‚æ–¹æ³•åˆ—è¡¨</li><li><code>Access-Control-Allow-Headers</code> è¡¨ç¤ºæœåŠ¡å™¨å…è®¸çš„è¯·æ±‚å¤´å­—æ®µ</li></ul></li></ul><p><a href="http://arunranga.com/examples/access-control/preflightInvocation.html">æ ·ä¾‹</a></p><h2 id="A-Demo"><a href="#A-Demo" class="headerlink" title="A Demo"></a>A Demo</h2><p><a href="https://github.com/yikayiyo/cors">CORS DEMO</a></p><ul><li>å‰ç«¯åº”ç”¨é»˜è®¤è¿è¡Œåœ¨ <code>localhost:5173</code>ï¼Œåç«¯åº”ç”¨é»˜è®¤è¿è¡Œåœ¨ <code>localhost:3010</code></li><li>åç«¯è®¾ç½® CORS ç”¨åˆ°äº†ä¸­é—´ä»¶ <code>express-cors</code>ï¼Œ<a href="https://expressjs.com/en/resources/middleware/cors.html">æ–‡æ¡£</a></li><li>æœ¬åœ°å¼€å‘æ—¶é™¤äº†è®¾ç½® CORSï¼Œè¿˜å¯ä»¥ä¸ºå¼€å‘æœåŠ¡å™¨è®¾ç½®ä»£ç†ä¸­è½¬ HTTP è¯·æ±‚ï¼Œ<a href="https://vitejs.dev/config/server-options.html#server-proxy">æ–‡æ¡£</a></li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS">MDN - CORS</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy">MDN - Same-origin policy</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLIFrameElement/contentDocument">MDN - JS æ“ä½œ iframe å†…éƒ¨å…ƒç´ </a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/CORS_enabled_image">MDN - å…è®¸å›¾ç‰‡å’Œ canvas è·¨æºä½¿ç”¨</a></li><li><a href="https://web.dev/same-origin-policy/">WebDev - Same-origin policy</a></li><li><a href="https://web.dev/codelab-same-origin-fetch/">WebDev - Same Origin Policy &amp; Fetch requests</a></li><li><a href="https://web.dev/codelab-same-origin-iframe/">WebDev - Same Origin Policy &amp; iframe</a></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ç‚¹æ€ç´¢</title>
      <link href="/2023/01/17/%E4%B8%80%E7%82%B9%E6%80%9D%E7%B4%A2/"/>
      <url>/2023/01/17/%E4%B8%80%E7%82%B9%E6%80%9D%E7%B4%A2/</url>
      
        <content type="html"><![CDATA[<p>å‰å‡ å¤©çš„ä¸€ä¸ªæ™šä¸Šï¼Œå¿ƒé‡Œçªç„¶æ„Ÿè§‰å¾ˆä¸èˆ’æœï¼Œä¹Ÿä¸çŸ¥é“å•¥åŸå› ï¼Œå°±æ‹‰æœ‹å‹è§†é¢‘äº†ä¸€å°ä¼šå„¿ã€‚</p><p>åŠå¤œçªç„¶é†’æ¥ï¼Œæƒ³èµ·äº†åŸå› ã€‚</p><p>åŸæ¥æ˜¯å› ä¸ºå¹¿å·æ’äººçš„è§†é¢‘ã€‚</p><p>å¾ˆéš¾å—ã€‚</p><p>æœ¬æ¥åœ¨å»è´­ç‰©è·¯ä¸Šçš„äººï¼Œæœ¬æ¥åœ¨å»çœ‹æœ›æœ‹å‹è·¯ä¸Šçš„äººï¼Œæœ¬æ¥åœ¨å»è§æ‹äººè·¯ä¸Šçš„äººã€‚æœ¬æ¥å°±æ˜¯å¦‚å¸¸è¿‡é©¬è·¯çš„äººï¼Œäººç”Ÿå°±è¿™æ ·ç»“æŸäº†ï¼Œç•™ç»™äº²äººæœ‹å‹çš„ç—›è‹¦å´ä»è¦æŒç»­å¾ˆé•¿æ—¶é—´ã€‚å¿ä¸ä½è¦é—®ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿç”Ÿå‘½å¯ä»¥å†ä¸å…¬å¹³äº›ä¹ˆï¼Ÿ</p><p>æ²¡ä»€ä¹ˆæ–°é—»æŠ¥å¯¼ï¼Œèº«è¾¹ä¹Ÿæ²¡äººæèµ·ã€‚</p><p>ä»Šå¤©ä»¥åŠä»Šå¤©ä¹‹å‰ï¼Œæ¯å¤©éƒ½èƒ½è§åˆ°çš„è¿™äº›äººï¼Œå¯èƒ½ä»æ˜å¤©å¼€å§‹å°±å†ä¹Ÿè§ä¸åˆ°äº†ã€‚</p><p>åœ¨åˆ†å¼€ä¹‹å‰ï¼Œæˆ‘å¹¶æ²¡æœ‰çæƒœæˆ‘ä»¬ç›¸å¤„çš„æ—¶é—´ã€‚</p><p>æ²¡æœ‰å¯’æš„é—®å€™ï¼Œæ²¡æœ‰è®¤çœŸæ³¨è§†ï¼Œæ²¡æœ‰ä»”ç»†è†å¬ï¼Œæ²¡æœ‰åˆ†äº«å¿ƒæƒ…ï¼Œæ²¡æœ‰çº¦è¿‡é¥­ï¼Œæ²¡æœ‰ä¸€èµ·é€›è¡—ï¼Œæ²¡æœ‰åƒéå°åƒæ‘Šï¼Œæ²¡æœ‰ç´§ç´§åœ°æ‹¥æŠ±å½¼æ­¤ã€‚</p><p>ä¸ºä»€ä¹ˆä¸ä¸»åŠ¨åœ°å»èŠèŠå¤©å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸å¥½å¥½çœ‹å¯¹æ–¹çš„è„¸å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸å»åˆ¶é€ ç¾ç»Šå‘¢ï¼Ÿ</p><p>éš¾ä¸æˆæˆ‘æ˜¯ä¸ºäº†é‚£ä¸€å¤©ä¸é‚£ä¹ˆéš¾å—ï¼Œæ•…æ„å’Œæ¯ä¸€ä¸ªäººä¿æŒè·ç¦»ï¼Œæ—¢ç„¶é‚£ä¸€å¤©è¿Ÿæ—©éƒ½ä¼šåˆ°æ¥ã€‚</p><p>å¦‚æœæˆ‘ä¹Ÿæ˜¯é‚£å¤©çš„è·¯äººä¹‹ä¸€å‘¢ï¼Ÿ</p><p>æˆ‘ä¸å¸Œæœ›éš¾è¿‡çš„äººå¯èƒ½éš¾ä»¥æ¥å—äº‹å®ï¼Œæˆ‘å¸Œæœ›ä¸ºæˆ‘ä¼¤å¿ƒçš„äººå¿ƒé‡Œä¼šæœ‰æ³¢æ¾œå—ï¼Ÿ</p><p>æˆ‘æœ‰è¿™ä¸€ä¸çš„å¸Œæœ›ï¼Œç«Ÿç„¶ã€‚</p><p>äººæ­»äº†æˆ–è®¸ä¼šè½¬ç”Ÿæˆä¸€åªç‹—ï¼Œæ¥åˆ°å–œæ¬¢çš„äººèº«è¾¹ã€‚ä¸èƒ½è¯´è¯ï¼Œäºæ˜¯å°±ä½¿åŠ²åœ°å¾€äººèº«ä¸Šæ‰‘ï¼Œä¸€è¾¹å¼€å¿ƒåœ°æ‘‡ç€å°¾å·´ï¼Œä¸€è¾¹å¿ä¸ä½åœ°å“¼å”§ã€‚ç”¨å¤´é¡¶ä½ çš„æ‰‹ï¼Œæ„æ€æ˜¯å¿«æ¥æŠšæ‘¸ã€‚ä½ çœ‹å®ƒä¸€çœ¼ï¼Œå®ƒå°±è¿‡æ¥ç›¯ç€ä½ ï¼Œå¥½åƒè¦å¼¥è¡¥å‰ä¸–æ²¡æœ‰çœ‹å¤Ÿçš„é—æ†¾ã€‚ä½ å¤¸å®ƒä¸€å¥ï¼Œå®ƒå°±ç¬‘äº†ï¼Œä»¿ä½›åœ¨å‘Šè¯‰ä½ ï¼Œå®ƒå¬æ‡‚äº†ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ‚ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueé¡¹ç›®å¼•å…¥Eslint+Prettier</title>
      <link href="/2023/01/10/Vue%E9%A1%B9%E7%9B%AE%E5%BC%95%E5%85%A5Eslint-Prettier/"/>
      <url>/2023/01/10/Vue%E9%A1%B9%E7%9B%AE%E5%BC%95%E5%85%A5Eslint-Prettier/</url>
      
        <content type="html"><![CDATA[<p>ç®¡ç†åå°çš„ä»£ç ä»“åº“ç›®å‰æ²¡æœ‰å¼€å¯è¯­æ³•æ£€æŸ¥ï¼Œå­˜åœ¨ä¸€äº›é”™è¯¯ã€‚å¹¶ä¸”é¡¹ç›®ç”±å¤šäººå¼€å‘ï¼Œä¸åŒé£æ ¼çš„ä»£ç ï¼ˆç¼©è¿›åˆ°åº•æ˜¯ç”¨ 2 ä¸ªç©ºæ ¼è¿˜æ˜¯ç”¨ 4 ä¸ªç©ºæ ¼è¿˜æ˜¯ç”¨ Tab å‘¢ï¼Ÿï¼‰æºæ‚åœ¨ä¸€èµ·ï¼Œç»™é¡¹ç›®ç»´æŠ¤å¢åŠ äº†æ²¡å¿…è¦çš„éš¾åº¦</p><p>æœ¬æ–‡è®°å½•äº†å¯¹é¡¹ç›®ä»£ç è¿›è¡Œè¯­æ³•é”™è¯¯ä¿®æ­£çš„è¿‡ç¨‹ï¼Œä»¥åŠåˆ¶å®šå›¢é˜Ÿå¼€å‘è§„èŒƒæ—¶æ¨èä½¿ç”¨çš„æ’ä»¶å’Œé…ç½®</p><h2 id="å‘½ä»¤è¡Œ"><a href="#å‘½ä»¤è¡Œ" class="headerlink" title="å‘½ä»¤è¡Œ"></a>å‘½ä»¤è¡Œ</h2><h3 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D eslint eslint-plugin-vue prettier eslint-config-prettier</span><br></pre></td></tr></tbody></table></figure><h3 id="åˆ›å»ºã€ç¼–è¾‘é…ç½®æ–‡ä»¶"><a href="#åˆ›å»ºã€ç¼–è¾‘é…ç½®æ–‡ä»¶" class="headerlink" title="åˆ›å»ºã€ç¼–è¾‘é…ç½®æ–‡ä»¶"></a>åˆ›å»ºã€ç¼–è¾‘é…ç½®æ–‡ä»¶</h3><p>åˆ é™¤é¡¹ç›®ä¸­æ—§çš„ <code>.eslintrc.js</code> æ–‡ä»¶ï¼Œä¿®æ”¹ <code>.eslintignore</code> æ–‡ä»¶</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">build/*.js // [!code --]</span><br><span class="line">config/*.js // [!code --]</span><br><span class="line">src/assets</span><br><span class="line">src // [!code --]</span><br></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch .eslintrc.js .prettierrc.js</span><br></pre></td></tr></tbody></table></figure><p>ä¸‹é¢ä¸ºæ ·ä¾‹é…ç½®</p><span id="more"></span><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .eslintrc.js example</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = {</span><br><span class="line">  <span class="attr">root</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">parserOptions</span>: {</span><br><span class="line">    <span class="attr">parser</span>: <span class="string">'babel-eslint'</span>,</span><br><span class="line">    <span class="attr">sourceType</span>: <span class="string">'module'</span></span><br><span class="line">  },</span><br><span class="line">  <span class="attr">env</span>: {</span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">es6</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">jquery</span>: <span class="literal">true</span></span><br><span class="line">  },</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">'plugin:vue/recommended'</span>, <span class="string">'prettier'</span>]</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// prettier example</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = {</span><br><span class="line">  <span class="attr">tabWidth</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">semi</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">singleQuote</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">singleAttributePerLine</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">trailingComma</span>: <span class="string">'es5'</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="åˆ›å»ºå‘½ä»¤"><a href="#åˆ›å»ºå‘½ä»¤" class="headerlink" title="åˆ›å»ºå‘½ä»¤"></a>åˆ›å»ºå‘½ä»¤</h3><p>ä¿®æ”¹ <code>package.json</code></p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">  <span class="attr">"scripts"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">"lint"</span><span class="punctuation">:</span> <span class="string">"eslint --ext .js,.vue src"</span><span class="punctuation">,</span>  <span class="comment">// [!code warning]</span></span><br><span class="line">    <span class="attr">"lint:fix"</span><span class="punctuation">:</span> <span class="string">"eslint --fix --ext .js,.vue src"</span><span class="punctuation">,</span> <span class="comment">// [!code warning]</span></span><br><span class="line">    <span class="attr">"format"</span><span class="punctuation">:</span> <span class="string">"prettier --write src"</span> <span class="comment">// [!code warning]</span></span><br><span class="line">  <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>å…¶ä¸­ <code>lint</code> ç”¨æ¥æ£€æŸ¥è¯­æ³•é”™è¯¯ï¼Œ<code>lint:fix</code> ç”¨æ¥è‡ªåŠ¨ä¿®å¤å¯ä»¥ä¿®å¤çš„é”™è¯¯ï¼Œ<code>format</code> ç”¨æ¥æ ¼å¼åŒ–ä»£ç </p><h3 id="æ‰§è¡Œå‘½ä»¤"><a href="#æ‰§è¡Œå‘½ä»¤" class="headerlink" title="æ‰§è¡Œå‘½ä»¤"></a>æ‰§è¡Œå‘½ä»¤</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run lint</span><br></pre></td></tr></tbody></table></figure><p>å¾—åˆ°ä¸‹é¢çš„ç»“æœ</p><figure>  <img src="/2023/01/10/Vue%E9%A1%B9%E7%9B%AE%E5%BC%95%E5%85%A5Eslint-Prettier/nr-lint.png" class="" title="æ‰§è¡Œ lint å‘½ä»¤">  <figcaption>ğŸ˜±</figcaption></figure><p>è‡ªåŠ¨ä¿®å¤éƒ¨åˆ†é”™è¯¯</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run lint:fix</span><br></pre></td></tr></tbody></table></figure><figure>  <img src="/2023/01/10/Vue%E9%A1%B9%E7%9B%AE%E5%BC%95%E5%85%A5Eslint-Prettier/nr-lint-fix.png" class="" title="æ‰§è¡Œ lint:fix å‘½ä»¤">  <figcaption>ğŸ¥²</figcaption></figure><p>éœ€è¦æ‰‹åŠ¨ä¿®å¤çš„ä¸€äº›é”™è¯¯</p><figure style="border:1px solid #292d3e; margin-bottom: 10px;">  <img src="/2023/01/10/Vue%E9%A1%B9%E7%9B%AE%E5%BC%95%E5%85%A5Eslint-Prettier/lint-error-1.png" class="">  <figcaption style="text-align: center;"><em>pæ ‡ç­¾ç»‘å®šv-model</em></figcaption></figure><figure style="border:1px solid #292d3e; margin-bottom: 10px;">  <img src="/2023/01/10/Vue%E9%A1%B9%E7%9B%AE%E5%BC%95%E5%85%A5Eslint-Prettier/lint-error-2.png" class="">  <figcaption style="text-align: center;"><em>åŒæ—¶ä½¿ç”¨ v-for å’Œ v-if</em></figcaption></figure><figure style="border:1px solid #292d3e; margin-bottom: 10px;">  <img src="/2023/01/10/Vue%E9%A1%B9%E7%9B%AE%E5%BC%95%E5%85%A5Eslint-Prettier/lint-error-3.png" class="">  <figcaption style="text-align: center;"><em>åˆå¹¶ä»£ç æ—¶é—ç•™çš„å¤šä½™æ ‡ç­¾ï¼Ÿ</em></figcaption></figure><figure style="border:1px solid #292d3e; margin-bottom: 10px;">  <img src="/2023/01/10/Vue%E9%A1%B9%E7%9B%AE%E5%BC%95%E5%85%A5Eslint-Prettier/lint-error-7.png" class="">  <figcaption style="text-align: center;"><em>åˆä¸€ä¸ªå¤šä½™çš„æ ‡ç­¾</em></figcaption></figure><figure style="border:1px solid #292d3e; margin-bottom: 10px;">  <img src="/2023/01/10/Vue%E9%A1%B9%E7%9B%AE%E5%BC%95%E5%85%A5Eslint-Prettier/lint-error-4.png" class="">  <figcaption style="text-align: center;"><em>å†—ä½™å±æ€§</em></figcaption></figure><figure style="border:1px solid #292d3e; margin-bottom: 10px;">  <img src="/2023/01/10/Vue%E9%A1%B9%E7%9B%AE%E5%BC%95%E5%85%A5Eslint-Prettier/lint-error-5.png" class="">  <figcaption style="text-align: center;"><em>å®šä¹‰ä½†æ²¡ä½¿ç”¨çš„å­—æ®µ</em></figcaption></figure><figure style="border:1px solid #292d3e; margin-bottom: 10px;">  <img src="/2023/01/10/Vue%E9%A1%B9%E7%9B%AE%E5%BC%95%E5%85%A5Eslint-Prettier/lint-error-6.png" class="">  <figcaption style="text-align: center;"><em>é‡å¤å­—æ®µ</em></figcaption></figure><figure style="border:1px solid #292d3e; margin-bottom: 10px;">  <img src="/2023/01/10/Vue%E9%A1%B9%E7%9B%AE%E5%BC%95%E5%85%A5Eslint-Prettier/lint-error-8.png" class="">  <figcaption style="text-align: center;"><em>å±æ€§æœªå®šä¹‰ç±»å‹</em></figcaption></figure><p>æœ€åæ ¼å¼åŒ–ä»£ç </p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run format</span><br></pre></td></tr></tbody></table></figure><p>ä¸Šé¢çš„æ–¹å¼ä¼šå¤„ç† <code>src</code> ç›®å½•ä¸‹ï¼ˆé™¤äº† <code>src/asset</code> å¤–çš„æ‰€æœ‰ä»£ç ï¼Œåªéœ€è¦è¿›è¡Œä¸€æ¬¡</p><p>å¯¹äºæ–°å¼€å‘çš„ä»£ç ï¼Œå¯ä»¥åˆ©ç”¨æ’ä»¶è¿›è¡Œè¯­æ³•æ£€æŸ¥å’Œæ ¼å¼åŒ–ï¼Œç„¶åå†åˆå¹¶è¿›ä»“åº“</p><h2 id="VSCODE-æ’ä»¶"><a href="#VSCODE-æ’ä»¶" class="headerlink" title="VSCODE æ’ä»¶"></a>VSCODE æ’ä»¶</h2><p>å€ŸåŠ© <a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint">dbaeumer.vscode-eslint</a> å’Œ <a href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode">esbenp.prettier-vscode</a> åœ¨å¼€å‘æ—¶å°±èƒ½å®Œæˆä»£ç çš„è¯­æ³•æ£€æŸ¥å’Œæ ¼å¼åŒ–</p><ul><li>å°† <a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint">prettier</a> è®¾ç½®ä¸ºé»˜è®¤ä»£ç æ ¼å¼åŒ–å·¥å…·</li><li>å–æ¶ˆ <a href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode">eslint</a> çš„ä»£ç æ ¼å¼åŒ–åŠŸèƒ½</li><li>prettier æ’ä»¶è®¾ç½®<ul><li>é…ç½®æ–‡ä»¶è·¯å¾„è®¾ç½®ä¸º <code>./.prettierrc.js</code></li></ul></li></ul><p>æ’ä»¶é…ç½®</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">  <span class="attr">"editor.codeActionsOnSave"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"source.fixAll.eslint"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"editor.formatOnSave"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"eslint.validate"</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">"javascript"</span><span class="punctuation">,</span> <span class="string">"javascriptreact"</span><span class="punctuation">,</span> <span class="string">"vue"</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>ä¿å­˜ä»£ç æ—¶è‡ªåŠ¨è¿›è¡Œè¯­æ³•æ£€æŸ¥ã€ä¿®å¤å’Œæ ¼å¼åŒ–</p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ— éšœç¢å¼€å‘ç¬”è®°</title>
      <link href="/2022/12/06/%E6%97%A0%E9%9A%9C%E7%A2%8D%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/"/>
      <url>/2022/12/06/%E6%97%A0%E9%9A%9C%E7%A2%8D%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="ä½¿ç”¨æ­£ç¡®çš„-HTML-å…ƒç´ "><a href="#ä½¿ç”¨æ­£ç¡®çš„-HTML-å…ƒç´ " class="headerlink" title="ä½¿ç”¨æ­£ç¡®çš„ HTML å…ƒç´ "></a>ä½¿ç”¨æ­£ç¡®çš„ HTML å…ƒç´ </h2><p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ç”¨æ­£ç¡®çš„ HTML æ ‡ç­¾è¡¨è¾¾æ„å›¾ï¼Œå¯ä»¥æå‡ç½‘é¡µçš„æ— éšœç¢ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸€ä¸ªç”¨æ¥æ§åˆ¶è§†é¢‘æ’­æ”¾çš„æŒ‰é’®å¯ä»¥å†™æˆä¸‹é¢çš„å½¢å¼</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Play video<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ä¹Ÿå¯ä»¥å†™æˆä¸‹é¢<strong>æ›´åˆç†</strong>çš„å½¢å¼</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>Play video<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>ä¹‹æ‰€ä»¥åˆç†ï¼Œæ˜¯å› ä¸º <code>&lt;button&gt;</code> æ ‡ç­¾ä¸ä»…æä¾›äº†æŒ‰é’®çš„æ ·å¼ï¼Œè¿˜æä¾›äº†é”®ç›˜çš„æ— éšœç¢è®¿é—®ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ Tab æ›´æ¢æŒ‰é’®ï¼Œä½¿ç”¨ Enter ç‚¹å‡»æŒ‰é’®ã€‚</p><blockquote><p><code>&lt;button&gt;</code> é»˜è®¤æä¾›çš„æ ·å¼å¤§å¤šæ•°æƒ…å†µä¸‹éœ€è¦é‡æ–°ç¼–å†™</p></blockquote><span id="more"></span><h3 id="æ–‡æœ¬å†…å®¹"><a href="#æ–‡æœ¬å†…å®¹" class="headerlink" title="æ–‡æœ¬å†…å®¹"></a>æ–‡æœ¬å†…å®¹</h3><p>æ–‡æœ¬å†…å®¹æ”¾åœ¨è‰¯å¥½çš„ç»“æ„ä¸­ï¼Œé¿å…ä½¿ç”¨è¡¨ç°æ€§ HTML å’Œæ¢è¡Œç¬¦ã€‚</p><p>âœ…Good</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>My heading<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>This is the first section of my document.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>I'll add another paragraph here too.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>Here is<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>a list for<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>you to read<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>My subheading<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  This is the first subsection of my document. I'd love people to be able to</span><br><span class="line">  find this content!</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>My 2nd subheading<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  This is the second subsection of my content. I think is more interesting than</span><br><span class="line">  the last one.</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>âŒBad</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span>=<span class="string">"7"</span>&gt;</span>My heading<span class="tag">&lt;/<span class="name">font</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">This is the first section of my document.</span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">I'll add another paragraph here too.</span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">1. Here is</span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">2. a list for</span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">3. you to read</span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span>=<span class="string">"5"</span>&gt;</span>My subheading<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">This is the first subsection of my document. I'd love people to be able to find</span><br><span class="line">this content!</span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span>=<span class="string">"5"</span>&gt;</span>My 2nd subheading<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">This is the second subsection of my content. I think is more interesting than</span><br><span class="line">the last one.</span><br></pre></td></tr></tbody></table></figure><h3 id="é¡µé¢å¸ƒå±€"><a href="#é¡µé¢å¸ƒå±€" class="headerlink" title="é¡µé¢å¸ƒå±€"></a>é¡µé¢å¸ƒå±€</h3><p>ä½¿ç”¨åˆé€‚çš„æ ‡ç­¾åŒ…è£¹é¡µé¢ä¸»è¦å…ƒç´ ï¼Œå¯ä»¥ç»™å±å¹•é˜…è¯»å™¨é¢å¤–çš„ä¿¡æ¯ã€‚</p><p>âœ…Good</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Header<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- main navigation in here --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Here is our page's main content --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- It contains an article --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">article</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Article heading<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- article content in here --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">aside</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Related<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- aside content in here --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- And here is our main footer that is used across all the pages of our website --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- footer content in here --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="UI-æ§åˆ¶"><a href="#UI-æ§åˆ¶" class="headerlink" title="UI æ§åˆ¶"></a>UI æ§åˆ¶</h3><p>æœ‰æ„ä¹‰çš„æ–‡æœ¬ã€‚</p><p>ç¡®ä¿æŒ‰é’®å’Œé“¾æ¥çš„æ–‡æœ¬æ˜¯å¯ä»¥ç†è§£å’Œç‹¬ç‰¹çš„ã€‚</p><p>âœ…Good</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  Whales are really awesome creatures.</span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"whales.html"</span>&gt;</span>Find out more about whales<span class="tag">&lt;/<span class="name">a</span>&gt;</span>.</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>âŒBad</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  Whales are really awesome creatures. To find more out about whales,</span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"whales.html"</span>&gt;</span>click here<span class="tag">&lt;/<span class="name">a</span>&gt;</span>.</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>è¡¨å•</p><p>âœ…Good</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"name"</span>&gt;</span>Fill in your name:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">"text"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">id</span>=<span class="string">"name"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">name</span>=<span class="string">"name"</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>âŒBad</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Fill in your name:</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">  <span class="attr">type</span>=<span class="string">"text"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">"name"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">name</span>=<span class="string">"name"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="æ–‡æœ¬æ›¿ä»£"><a href="#æ–‡æœ¬æ›¿ä»£" class="headerlink" title="æ–‡æœ¬æ›¿ä»£"></a>æ–‡æœ¬æ›¿ä»£</h3><p>å¯¹äºå¤šåª’ä½“å†…å®¹ï¼Œä¾‹å¦‚å›¾ç‰‡ã€éŸ³è§†é¢‘å…ƒç´ ï¼Œå¯ä»¥æä¾›æè¿°æ–‡æœ¬ã€‚</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"dinosaur.png"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">"dinosaur.png"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">alt</span>=<span class="string">"A red Tyrannosaurus Rex: A two legged dinosaur standing upright like a human, with small arms, and a large head with lots of sharp teeth."</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">"dinosaur.png"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">alt</span>=<span class="string">"A red Tyrannosaurus Rex: A two legged dinosaur standing upright like a human, with small arms, and a large head with lots of sharp teeth."</span></span></span><br><span class="line"><span class="tag">  <span class="attr">title</span>=<span class="string">"The Mozilla red dinosaur"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">"dinosaur.png"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">aria-labelledby</span>=<span class="string">"dino-label"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"dino-label"</span>&gt;</span></span><br><span class="line">  The Mozilla red Tyrannosaurus Rex: A two legged dinosaur standing upright like</span><br><span class="line">  a human, with small arms, and a large head with lots of sharp teeth.</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><ul><li>ç¬¬ä¸€å¼ å›¾ç‰‡æ²¡æœ‰æä¾›æ–‡å­—æè¿°</li><li>ç¬¬äºŒå¼ å›¾ç‰‡çš„ <code>alt</code> å±æ€§ä¼šè¢«å±å¹•é˜…è¯»å™¨è¯»åˆ°</li><li>ç¬¬ä¸‰å¼ å›¾ç‰‡æä¾›äº†é¢å¤–çš„ <code>title</code> å±æ€§</li><li>ç¬¬å››å¼ å›¾ç‰‡æ²¡æœ‰æä¾› <code>alt</code> å±æ€§ï¼Œä½†æ˜¯é€šè¿‡ <code>aria-labelledby</code> å±æ€§å°†é¡µé¢ä¸­å·²ç»å­˜åœ¨çš„æ–‡æœ¬ä½œä¸ºå›¾ç‰‡æè¿°</li></ul><blockquote><p>ä½¿ç”¨ CSS æ¥æ˜¾ç¤ºåªèµ·è£…é¥°ä½œç”¨çš„å›¾åƒ</p></blockquote><h2 id="CSS-å’Œ-JavaScript-æ— éšœç¢æœ€ä½³å®è·µ"><a href="#CSS-å’Œ-JavaScript-æ— éšœç¢æœ€ä½³å®è·µ" class="headerlink" title="CSS å’Œ JavaScript æ— éšœç¢æœ€ä½³å®è·µ"></a>CSS å’Œ JavaScript æ— éšœç¢æœ€ä½³å®è·µ</h2><h2 id="ARIA-æ ‡ç­¾"><a href="#ARIA-æ ‡ç­¾" class="headerlink" title="ARIA æ ‡ç­¾"></a>ARIA æ ‡ç­¾</h2><h2 id="ç§»åŠ¨ç«¯æ— éšœç¢"><a href="#ç§»åŠ¨ç«¯æ— éšœç¢" class="headerlink" title="ç§»åŠ¨ç«¯æ— éšœç¢"></a>ç§»åŠ¨ç«¯æ— éšœç¢</h2><h2 id="å¤šåª’ä½“æ— éšœç¢"><a href="#å¤šåª’ä½“æ— éšœç¢" class="headerlink" title="å¤šåª’ä½“æ— éšœç¢"></a>å¤šåª’ä½“æ— éšœç¢</h2><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/Accessibility">MDN æ–‡æ¡£</a></li><li><a href="https://m3.material.io/foundations/accessible-design/overview">Accessible design</a></li><li><a href="https://www.bbc.co.uk/accessibility/forproducts/">BBC Accessibility for Products</a></li><li><a href="https://accessibility.huit.harvard.edu/">Digital Accessibility</a></li><li><a href="https://cn.vuejs.org/guide/best-practices/accessibility.html#standards">Vue.js æ— éšœç¢è®¿é—®</a></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é‡å†™duozhuavueä¹¦æ¶</title>
      <link href="/2022/03/26/%E9%87%8D%E5%86%99duozhuavue%E4%B9%A6%E6%9E%B6/"/>
      <url>/2022/03/26/%E9%87%8D%E5%86%99duozhuavue%E4%B9%A6%E6%9E%B6/</url>
      
        <content type="html"><![CDATA[<a href="/2022/03/14/Apollo%20Client%20%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86%E5%B0%8F%E7%BB%93/" title="Apollo Client ç¼“å­˜å¤„ç†å°ç»“">Apollo Client ç¼“å­˜å¤„ç†å°ç»“</a> ä¸­æåˆ°äº†ä¹¦æ¶åŠŸèƒ½å­˜åœ¨çš„é—®é¢˜ï¼š<p>æ¯ä¸€æœ¬ä¹¦ç±å¯¹åº”ä¸€ä¸ªæŸ¥è¯¢ï¼ˆå³ä¸€ä¸ª HTTP è¯·æ±‚ï¼‰ï¼Œå½“ä»æœªç™»å½•çŠ¶æ€åˆ‡æ¢åˆ°ç™»å½•çŠ¶æ€æ—¶ï¼Œä¸»é¡µæ‰€æœ‰å·²ç»åŠ è½½çš„ä¹¦ç±éƒ½ä¼šå‘é€è¯·æ±‚ï¼Œåˆ¤æ–­å®ƒæ˜¯å¦åœ¨å½“å‰ç”¨æˆ·çš„ä¹¦æ¶ä¸Šã€‚</p><p>ç†æƒ³çš„å®ç°ä¸­ï¼Œåœ¨ç”¨æˆ·ç™»å½•åï¼Œåº”è¯¥åªå‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œç”¨äºè·å–ä¹¦å•ä¿¡æ¯æµã€‚</p><h2 id="æ”¹è¿›"><a href="#æ”¹è¿›" class="headerlink" title="æ”¹è¿›"></a>æ”¹è¿›</h2><h3 id="åç«¯"><a href="#åç«¯" class="headerlink" title="åç«¯"></a>åç«¯</h3><ol><li>å°†æŸ¥è¯¢ <code>isBookInBookshelf</code> ç§»åŠ¨åˆ° <code>Book</code> ç±»å‹ä¸‹</li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bookType = <span class="string">`</span></span><br><span class="line"><span class="string">  type Book {</span></span><br><span class="line"><span class="string">    ...</span></span><br><span class="line"><span class="string">    isBookInBookshelf(userId: ID!): Boolean!</span></span><br><span class="line"><span class="string">  }</span></span><br><span class="line"><span class="string">`</span>;</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>å®ç°è¯¥å­—æ®µçš„ <code>resolver</code> å‡½æ•°</li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bookResolver = {</span><br><span class="line">  ...</span><br><span class="line">  <span class="title class_">Book</span>: {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">isBookInBookshelf</span>: <span class="title function_">async</span>({ id }, { userId } , { models }) =&gt; {</span><br><span class="line">      <span class="keyword">if</span>(userId === <span class="string">""</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">const</span> user = <span class="keyword">await</span> models.<span class="property">User</span>.<span class="title function_">findById</span>(userId);</span><br><span class="line">      <span class="keyword">return</span> user.<span class="property">bookShelf</span>.<span class="title function_">indexOf</span>(id) !== -<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure><span id="more"></span><h3 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h3><ol start="3"><li>ä¿®æ”¹ <code>GET_CATEGORY_FEED schema</code>ï¼Œæ¥æ”¶ <code>userId</code> å‚æ•°ï¼Œè¿”å›çš„ä¹¦ç±ä¸­åŒ…å« <code>isBookInBookshelf</code> å­—æ®µ</li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">GET_CATEGORY_FEED</span> = gql`<span class="language-graphql"></span></span><br><span class="line"><span class="language-graphql">  <span class="keyword">query</span> getCategoryFeed<span class="punctuation">(</span></span></span><br><span class="line"><span class="language-graphql">    <span class="punctuation">...</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$userId</span>: ID<span class="punctuation">!</span></span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">)</span> <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">    categoryFeed<span class="punctuation">(</span><span class="symbol">first</span><span class="punctuation">:</span> <span class="variable">$first</span>, <span class="symbol">after</span><span class="punctuation">:</span> <span class="variable">$after</span>) <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">      pageInfo <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">        hasNextPage</span></span><br><span class="line"><span class="language-graphql">        endCursor</span></span><br><span class="line"><span class="language-graphql">      <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">      edges <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">        node <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">          id</span></span><br><span class="line"><span class="language-graphql">          name</span></span><br><span class="line"><span class="language-graphql">          items<span class="punctuation">(</span><span class="symbol">first</span><span class="punctuation">:</span> <span class="variable">$itemsFirst</span>, <span class="symbol">after</span><span class="punctuation">:</span> <span class="variable">$itemsAfter</span>) <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">            pageInfo <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">              endCursor</span></span><br><span class="line"><span class="language-graphql">              hasNextPage</span></span><br><span class="line"><span class="language-graphql">            <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">            edges <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">              node <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">                id</span></span><br><span class="line"><span class="language-graphql">                <span class="punctuation">...</span></span></span><br><span class="line"><span class="language-graphql">                isBookInBookshelf<span class="punctuation">(</span><span class="symbol">userId</span><span class="punctuation">:</span> <span class="variable">$userId</span>)</span></span><br><span class="line"><span class="language-graphql">              <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">            <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">          <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">        <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">      <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">    <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">`</span>;</span><br></pre></td></tr></tbody></table></figure><ol start="4"><li>åœ¨ç»„ä»¶ä¸­ä¿®æ”¹æŸ¥è¯¢ï¼Œä¼ å…¥å‚æ•° <code>userId</code></li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> userId = <span class="title function_">useLoggedInUserId</span>();</span><br><span class="line"><span class="keyword">const</span> {</span><br><span class="line">  <span class="attr">result</span>: categoryFeedResult,</span><br><span class="line">  <span class="attr">loading</span>: categoryFeedLoading,</span><br><span class="line">  <span class="attr">error</span>: categoryFeedError,</span><br><span class="line">  fetchMore,</span><br><span class="line">  networkStatus,</span><br><span class="line">} = <span class="title function_">useQuery</span>(</span><br><span class="line">  <span class="variable constant_">GET_CATEGORY_FEED</span>,</span><br><span class="line">  <span class="function">() =&gt;</span> ({</span><br><span class="line">    <span class="attr">after</span>: after.<span class="property">value</span>,</span><br><span class="line">    <span class="attr">first</span>: first.<span class="property">value</span>,</span><br><span class="line">    <span class="attr">itemsAfter</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">itemsFirst</span>: <span class="number">3</span>,</span><br><span class="line">    userId</span><br><span class="line">  }),</span><br><span class="line">  {</span><br><span class="line">    <span class="attr">notifyOnNetworkStatusChange</span>: <span class="literal">true</span>,</span><br><span class="line">  }</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure><ol start="5"><li>ä¿®æ”¹ç¼“å­˜çš„å¤„ç†æ–¹å¼</li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cache = <span class="keyword">new</span> <span class="title class_">InMemoryCache</span>({</span><br><span class="line">  <span class="attr">typePolicies</span>: {</span><br><span class="line">    ...</span><br><span class="line">    <span class="title class_">Book</span>: {</span><br><span class="line">      <span class="attr">fields</span>: {</span><br><span class="line">        <span class="attr">isBookInBookshelf</span>: {</span><br><span class="line">          <span class="attr">keyArgs</span>: [<span class="string">"userId"</span>]</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><center style="display: flex; justify-content: space-between;"><div><img src="/2022/03/26/%E9%87%8D%E5%86%99duozhuavue%E4%B9%A6%E6%9E%B6/after.png" class="" width="300" title="ä¿®æ”¹åçš„è¯·æ±‚æ•°é‡"></div><div><img src="/2022/03/26/%E9%87%8D%E5%86%99duozhuavue%E4%B9%A6%E6%9E%B6/cache-after.png" class="" width="300" title="ä¿®æ”¹åçš„ç¼“å­˜"></div></center><ol start="6"><li>ä¿®æ”¹æ·»åŠ ä¹¦ç±æˆ–åˆ é™¤ä¹¦ç±æ—¶çš„é€»è¾‘<br> <strong>ä¹è§‚æ›´æ–°</strong>ï¼šå…ˆä¿®æ”¹å®¢æˆ·ç«¯çŠ¶æ€ï¼Œå†å‘é€ç½‘ç»œè¯·æ±‚ã€‚å¦‚æœè¯·æ±‚å¤±è´¥ï¼Œé‡ç½®å®¢æˆ·ç«¯çŠ¶æ€ã€‚</li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">addToBookShelf</span> = (<span class="params"></span>) =&gt; {</span><br><span class="line">  <span class="comment">// ä¹è§‚æ›´æ–°ï¼Œå…ˆä¿®æ”¹å®¢æˆ·ç«¯çŠ¶æ€</span></span><br><span class="line">  isInBookshelf.<span class="property">value</span> = !isInBookshelf.<span class="property">value</span>;</span><br><span class="line">  <span class="comment">// å†å‘é€è¯·æ±‚ï¼ˆsend mutation</span></span><br><span class="line">  <span class="title function_">toggleBookshelf</span>();</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> { <span class="attr">mutate</span>: toggleBookshelf, <span class="attr">onDone</span>: onToggle } = <span class="title function_">useMutation</span>(</span><br><span class="line">  <span class="variable constant_">TOGGLE_BOOKSHELF_MUTATION</span>,</span><br><span class="line">  <span class="function">() =&gt;</span> ({</span><br><span class="line">    <span class="attr">variables</span>: {</span><br><span class="line">      <span class="attr">bookId</span>: bookId.<span class="property">value</span>,</span><br><span class="line">      userId,</span><br><span class="line">    },</span><br><span class="line">  })</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="title function_">onToggle</span>(<span class="function">(<span class="params">{ data: { toggleBookshelf } }</span>) =&gt;</span> {</span><br><span class="line">  <span class="keyword">if</span> (toggleBookshelf.<span class="property">success</span> === <span class="literal">true</span>) {</span><br><span class="line">    toast.<span class="title function_">success</span>(toggleBookshelf.<span class="property">message</span>);</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">// è¯·æ±‚å¤±è´¥ï¼Œé‡ç½®å®¢æˆ·ç«¯çŠ¶æ€</span></span><br><span class="line">    isInBookshelf.<span class="property">value</span> = !isInBookshelf.<span class="property">value</span>;</span><br><span class="line">    toast.<span class="title function_">info</span>(toggleBookshelf.<span class="property">message</span>);</span><br><span class="line">  }</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> graphql </tag>
            
            <tag> duozhuavue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Apollo Client ç¼“å­˜å¤„ç†å°ç»“</title>
      <link href="/2022/03/14/Apollo%20Client%20%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86%E5%B0%8F%E7%BB%93/"/>
      <url>/2022/03/14/Apollo%20Client%20%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86%E5%B0%8F%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>è®°å½•å¼€å‘ <a href="https://duozhuavue.vercel.app/book">duozhuavueğŸ’š</a> æ—¶å¯¹ <a href="https://www.apollographql.com/docs/react/caching/overview/">Apollo Client</a> ç¼“å­˜çš„å¤„ç†æ–¹æ³•ã€‚</p><h2 id="ä¸ºä»€ä¹ˆè¦å¤„ç†ç¼“å­˜ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦å¤„ç†ç¼“å­˜ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å¤„ç†ç¼“å­˜ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦å¤„ç†ç¼“å­˜ï¼Ÿ</h2><p>ä¿®æ”¹æ•°æ®åï¼Œå¦‚æœä¸å¯¹ç¼“å­˜ä¸­çš„æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œé‚£ä¹ˆä¼šé€ æˆæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯çš„<strong>æ•°æ®ä¸ä¸€è‡´</strong>ï¼Œä¿®æ”¹ä¹Ÿä¸èƒ½åœ¨å‰ç«¯å¾—åˆ°ä½“ç°ã€‚</p><p>åœ¨ <a href="https://duozhuavue.vercel.app/book">duozhuavueğŸ’š</a> ä¸­ï¼Œéœ€è¦å¤„ç†ç¼“å­˜çš„åœ°æ–¹æœ‰ä¹¦ç±è¯„è®ºï¼Œç”¨æˆ·ä¹¦æ¶ï¼Œä¸»é¡µä¿¡æ¯æµåˆ†é¡µã€‚</p><h2 id="ç¼“å­˜å¤„ç†æ–¹æ³•"><a href="#ç¼“å­˜å¤„ç†æ–¹æ³•" class="headerlink" title="ç¼“å­˜å¤„ç†æ–¹æ³•"></a>ç¼“å­˜å¤„ç†æ–¹æ³•</h2><p> <a href="https://www.apollographql.com/docs/react/caching/overview/">Apollo Client</a> æä¾›äº†å‡ ç§æ–¹å¼ä¸ç¼“å­˜æ•°æ®äº¤äº’</p><ul><li><a href="https://www.apollographql.com/docs/react/caching/cache-interaction#using-graphql-queries">ä½¿ç”¨ GraphQL queries</a></li><li><a href="https://www.apollographql.com/docs/react/caching/cache-interaction#using-graphql-fragments">ä½¿ç”¨ GraphQL fragments</a></li><li><a href="https://www.apollographql.com/docs/react/caching/cache-interaction#using-cachemodify">ç›´æ¥ä¿®æ”¹ç¼“å­˜å¯¹è±¡çš„å­—æ®µ</a></li><li><a href="https://www.apollographql.com/docs/react/caching/cache-field-behavior">é…ç½®ç¼“å­˜å­—æ®µç­–ç•¥</a></li></ul><p>ç»“åˆå¼€å‘è¿‡ç¨‹ä¸­çš„å…·ä½“æƒ…å†µï¼Œå¤„ç†ç¼“å­˜æ•°æ®æ—¶å¯ä»¥é‡‡å–ä¸åŒçš„æ–¹å¼ã€‚</p><h2 id="ä¹¦ç±è¯„è®º"><a href="#ä¹¦ç±è¯„è®º" class="headerlink" title="ä¹¦ç±è¯„è®º"></a>ä¹¦ç±è¯„è®º</h2><h3 id="åç«¯å®šä¹‰"><a href="#åç«¯å®šä¹‰" class="headerlink" title="åç«¯å®šä¹‰"></a>åç«¯å®šä¹‰</h3><p>åç«¯ä»£ç ä¸­ <code>Book</code> çš„ <code>schema</code> å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Book</span> {</span><br><span class="line">  <span class="attr">id</span>: <span class="variable constant_">ID</span>!</span><br><span class="line">  <span class="attr">title</span>: <span class="title class_">String</span>!</span><br><span class="line">    ...</span><br><span class="line">  <span class="attr">comments</span>: [<span class="title class_">Comment</span>!]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æœ‰ç”¨çš„ä¿¡æ¯æ˜¯ï¼Œ<code>Book</code> çš„ <code>comments</code> å­—æ®µè¿”å›è¯¥ä¹¦çš„è¯„è®ºåˆ—è¡¨ã€‚</p><span id="more"></span><p>å’Œè¯„è®ºç›¸å…³çš„å‡ ä¸ª <code>mutation</code> å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Mutation</span>{</span><br><span class="line">    ...</span><br><span class="line">    <span class="title function_">addComment</span>(<span class="attr">bookId</span>: <span class="variable constant_">ID</span>!, <span class="attr">userId</span>: <span class="variable constant_">ID</span>!, <span class="attr">content</span>: <span class="title class_">String</span>!, <span class="attr">rating</span>: <span class="title class_">Int</span>, <span class="attr">created</span>: <span class="title class_">DateTime</span>!): addCommentResponse!</span><br><span class="line">    <span class="title function_">deleteComment</span>(<span class="attr">bookId</span>: <span class="variable constant_">ID</span>!, <span class="attr">commentId</span>: <span class="variable constant_">ID</span>!): deleteCommentResponse!</span><br><span class="line">    <span class="title function_">updateComment</span>(<span class="attr">commentId</span>: <span class="variable constant_">ID</span>!, <span class="attr">rating</span>: <span class="title class_">Int</span>!, <span class="attr">content</span>: <span class="title class_">String</span>, <span class="attr">updatedAt</span>: <span class="title class_">DateTime</span>!): updateCommentResponse!</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">type addCommentResponse implements <span class="title class_">MutationResponse</span> {</span><br><span class="line">    <span class="attr">code</span>: <span class="title class_">String</span>!</span><br><span class="line">    <span class="attr">success</span>: <span class="title class_">Boolean</span>!</span><br><span class="line">    <span class="attr">message</span>: <span class="title class_">String</span>!</span><br><span class="line">    <span class="attr">book</span>: <span class="title class_">Book</span></span><br><span class="line">    <span class="attr">comment</span>: <span class="title class_">Comment</span></span><br><span class="line">}</span><br><span class="line">type deleteCommentResponse implements <span class="title class_">MutationResponse</span> {</span><br><span class="line">    <span class="attr">code</span>: <span class="title class_">String</span>!</span><br><span class="line">    <span class="attr">success</span>: <span class="title class_">Boolean</span>!</span><br><span class="line">    <span class="attr">message</span>: <span class="title class_">String</span>!</span><br><span class="line">    <span class="attr">book</span>: <span class="title class_">Book</span></span><br><span class="line">}</span><br><span class="line">type updateCommentResponse implements <span class="title class_">MutationResponse</span> {</span><br><span class="line">    <span class="attr">code</span>: <span class="title class_">String</span>!</span><br><span class="line">    <span class="attr">success</span>: <span class="title class_">Boolean</span>!</span><br><span class="line">    <span class="attr">message</span>: <span class="title class_">String</span>!</span><br><span class="line">    <span class="attr">comment</span>: <span class="title class_">Comment</span></span><br><span class="line">}</span><br><span class="line"> </span><br></pre></td></tr></tbody></table></figure><p>ä»ä»£ç å¯ä»¥çŸ¥é“ï¼š</p><ul><li><code>addComment</code> çš„è¿”å›å€¼ä¸­åŒ…å«æ–°ç”Ÿæˆçš„ <code>Comment</code> å¯¹è±¡å’Œæ›´æ–°åçš„ <code>Book</code> å¯¹è±¡</li><li><code>deleteComment</code> çš„è¿”å›å€¼ä¸­åŒ…å«æ›´æ–°åçš„ <code>Book</code> å¯¹è±¡</li><li><code>updateComment</code> çš„è¿”å›å€¼ä¸­åŒ…å«æ›´æ–°åçš„ <code>Comment</code> å¯¹è±¡</li></ul><h3 id="å‘é€-Mutation"><a href="#å‘é€-Mutation" class="headerlink" title="å‘é€ Mutation"></a>å‘é€ Mutation</h3><p>å®¢æˆ·ç«¯åˆ©ç”¨ <code>vue-apollo</code> å‘é€ <code>Mutation</code> è¯·æ±‚ã€‚</p><p>å¯¹ç¼“å­˜çš„æ“ä½œä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><ul><li><code>Comment</code> å¯¹è±¡</li><li><code>Book</code> å¯¹è±¡çš„ <code>comments</code> å­—æ®µ</li></ul><h4 id="æ·»åŠ è¯„è®º"><a href="#æ·»åŠ è¯„è®º" class="headerlink" title="æ·»åŠ è¯„è®º"></a>æ·»åŠ è¯„è®º</h4><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">ADD_COMMENT_MUTATION</span> = gql`<span class="language-graphql"></span></span><br><span class="line"><span class="language-graphql">  <span class="keyword">mutation</span> addComment<span class="punctuation">(</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$bookId</span>: ID<span class="punctuation">!</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$userId</span>: ID<span class="punctuation">!</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$content</span>: String<span class="punctuation">!</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$created</span>: DateTime<span class="punctuation">!</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$rating</span>: Int</span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">)</span> <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">    addComment<span class="punctuation">(</span></span></span><br><span class="line"><span class="language-graphql">      <span class="symbol">bookId</span><span class="punctuation">:</span> <span class="variable">$bookId</span></span></span><br><span class="line"><span class="language-graphql">      <span class="symbol">userId</span><span class="punctuation">:</span> <span class="variable">$userId</span></span></span><br><span class="line"><span class="language-graphql">      <span class="symbol">content</span><span class="punctuation">:</span> <span class="variable">$content</span></span></span><br><span class="line"><span class="language-graphql">      <span class="symbol">created</span><span class="punctuation">:</span> <span class="variable">$created</span></span></span><br><span class="line"><span class="language-graphql">      <span class="symbol">rating</span><span class="punctuation">:</span> <span class="variable">$rating</span></span></span><br><span class="line"><span class="language-graphql">    <span class="punctuation">)</span> <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">      code</span></span><br><span class="line"><span class="language-graphql">      success</span></span><br><span class="line"><span class="language-graphql">      message</span></span><br><span class="line"><span class="language-graphql">      comment <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">        id</span></span><br><span class="line"><span class="language-graphql">        content</span></span><br><span class="line"><span class="language-graphql">        commenter <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">          name</span></span><br><span class="line"><span class="language-graphql">        <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">      <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">      book <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">        id</span></span><br><span class="line"><span class="language-graphql">        comments <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">          content</span></span><br><span class="line"><span class="language-graphql">          createdAt</span></span><br><span class="line"><span class="language-graphql">        <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">      <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">    <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> {</span><br><span class="line">    <span class="attr">mutate</span>: addComment,</span><br><span class="line">    <span class="attr">loading</span>: addCommentLoading,</span><br><span class="line">    onDone,</span><br><span class="line">} = <span class="title function_">useMutation</span>(<span class="variable constant_">ADD_COMMENT_MUTATION</span>, <span class="function">() =&gt;</span> ({</span><br><span class="line">    <span class="attr">variables</span>: {</span><br><span class="line">        bookId,</span><br><span class="line">        userId,</span><br><span class="line">        <span class="attr">content</span>: content.<span class="property">value</span>,</span><br><span class="line">        <span class="attr">created</span>: <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toISOString</span>(),</span><br><span class="line">        <span class="attr">rating</span>: rating.<span class="property">value</span>,</span><br><span class="line">    },</span><br><span class="line">}));</span><br><span class="line"><span class="title function_">onDone</span>(<span class="function">(<span class="params">{ data: { addComment } }</span>) =&gt;</span> {</span><br><span class="line">    router.<span class="title function_">replace</span>(<span class="string">"/books/"</span> + bookId + <span class="string">"?target=book-comment-wrapper"</span>);</span><br><span class="line">    rating.<span class="property">value</span> = <span class="number">0</span>;</span><br><span class="line">    content.<span class="property">value</span> = <span class="string">""</span>;</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><p>è¿™é‡Œæ²¡æœ‰å®šä¹‰ç¼“å­˜å¤„ç†æ–¹æ³•ã€‚åŸå› æ˜¯ï¼š</p><ul><li>æ–°ç”Ÿæˆçš„ <code>Comment</code> å¯¹è±¡ï¼Œä¼šè‡ªåŠ¨ä¿å­˜åœ¨ç¼“å­˜ä¸­</li><li>å¯¹äº <code>Book</code> æ¥è¯´ï¼Œç”±äºè¿”å›äº†ä¸€ä¸ªç›¸åŒ <code>id</code> çš„ <code>Book</code> æ•°æ®ï¼Œè¯¥æ•°æ®ä¼šè‡ªåŠ¨è¦†ç›–ç¼“å­˜ä¸­çš„æ—§æ•°æ®ï¼ˆBook ä¸­çš„å„ä¸ªå­—æ®µéƒ½ä¼šè¢«è¦†ç›–</li></ul><blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ç¼“å­˜ä¸­ä½¿ç”¨å¯¹è±¡çš„ç±»å‹å+â€:â€+<code>id</code> å”¯ä¸€æ ‡è¯†ä¸€ä¸ªç¼“å­˜å¯¹è±¡</p></blockquote><img src="/2022/03/14/Apollo%20Client%20%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86%E5%B0%8F%E7%BB%93/%E7%BC%93%E5%AD%98%E6%A0%87%E8%AF%86%E7%AC%A6.png" class="" title="é»˜è®¤æƒ…å†µä¸‹ï¼Œç¼“å­˜æ ‡è¯†ç¬¦æœ‰ç±»å‹å+`:`+`id`æ„æˆ"><h4 id="åˆ é™¤è¯„è®º"><a href="#åˆ é™¤è¯„è®º" class="headerlink" title="åˆ é™¤è¯„è®º"></a>åˆ é™¤è¯„è®º</h4><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">DELETE_COMMENT_MUTATION</span> = gql`<span class="language-graphql"></span></span><br><span class="line"><span class="language-graphql">  <span class="keyword">mutation</span> deleteComment<span class="punctuation">(</span><span class="variable">$bookId</span>: ID<span class="punctuation">!</span>, <span class="variable">$commentId</span>: ID<span class="punctuation">!</span><span class="punctuation">)</span> <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">    deleteComment<span class="punctuation">(</span><span class="symbol">bookId</span><span class="punctuation">:</span> <span class="variable">$bookId</span>, <span class="symbol">commentId</span><span class="punctuation">:</span> <span class="variable">$commentId</span>) <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">      code</span></span><br><span class="line"><span class="language-graphql">      success</span></span><br><span class="line"><span class="language-graphql">      message</span></span><br><span class="line"><span class="language-graphql">      book <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">        id</span></span><br><span class="line"><span class="language-graphql">        comments <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">          id</span></span><br><span class="line"><span class="language-graphql">          content</span></span><br><span class="line"><span class="language-graphql">          createdAt</span></span><br><span class="line"><span class="language-graphql">        <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">      <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">    <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> { <span class="attr">mutate</span>: deleteComment, <span class="attr">onDone</span>: onCommentDelete } = <span class="title function_">useMutation</span>(</span><br><span class="line">    <span class="variable constant_">DELETE_COMMENT_MUTATION</span>,</span><br><span class="line">    <span class="function">() =&gt;</span> ({</span><br><span class="line">        <span class="attr">variables</span>: {</span><br><span class="line">            bookId,</span><br><span class="line">            commentId,</span><br><span class="line">        },</span><br><span class="line">        <span class="attr">update</span>: <span class="function">(<span class="params">cache</span>) =&gt;</span> {</span><br><span class="line">            <span class="comment">// åˆ é™¤cacheä¸­çš„è¯¥æ¡comment</span></span><br><span class="line">            <span class="keyword">const</span> normalizedId = cache.<span class="title function_">identify</span>({</span><br><span class="line">                <span class="attr">id</span>: commentId,</span><br><span class="line">                <span class="attr">__typename</span>: <span class="string">"Comment"</span>,</span><br><span class="line">            });</span><br><span class="line">            cache.<span class="title function_">evict</span>({ <span class="attr">id</span>: normalizedId });</span><br><span class="line">            cache.<span class="title function_">gc</span>();</span><br><span class="line">        },</span><br><span class="line">    })</span><br><span class="line">);</span><br><span class="line"><span class="title function_">onCommentDelete</span>(<span class="function">(<span class="params">{ data: { deleteComment } }</span>) =&gt;</span> {</span><br><span class="line">    toast.<span class="title function_">success</span>(deleteComment.<span class="property">message</span>);</span><br><span class="line">    router.<span class="title function_">go</span>(-<span class="number">1</span>);</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><p>è¿™é‡Œå®šä¹‰äº†ç¼“å­˜å¤„ç†æ–¹æ³•</p><ul><li>æ‰¾åˆ°è¯¥ <code>comment</code> åœ¨ç¼“å­˜ä¸­çš„å¯¹åº”æ•°æ®ï¼Œåˆ é™¤</li></ul><p>å¯¹äº <code>Book.comments</code> ç¼“å­˜ï¼Œè¿”å›çš„æ–°æ•°æ®ä¼šè‡ªåŠ¨è¦†ç›–æ—§æ•°æ®ã€‚</p><p><span class="emoji" alias="eye" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f441.png?v8">ğŸ‘</span> å½“ä½ è¿™æ ·å¤„ç†æ—¶ï¼Œæ§åˆ¶å°ä¼šå‘å‡ºè­¦å‘Šï¼Œæç¤º</p><img src="/2022/03/14/Apollo%20Client%20%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86%E5%B0%8F%E7%BB%93/console-warning.png" class="" title="æç¤ºç¼“å­˜æ•°æ®å¯èƒ½ä¸¢å¤±"><p><a href="https://community.apollographql.com/t/reasons-of-cache-data-may-be-lost-when-replacing-warning/1766">å…³äºæ§åˆ¶å°è­¦å‘Š</a>è¿™é‡Œæè¿°äº†ç±»ä¼¼çš„é—®é¢˜ï¼Œå› ä¸ºé»˜è®¤è¡Œä¸ºç¬¦åˆéœ€æ±‚ï¼Œæ‰€ä»¥ä¸éœ€è¦é¢å¤–çš„<a href="https://www.apollographql.com/docs/react/caching/cache-field-behavior/">å­—æ®µç­–ç•¥</a>è®¾ç½®ï¼Œå¯ä»¥å¿½ç•¥è¯¥è­¦å‘Šã€‚</p><h4 id="æ›´æ–°è¯„è®º"><a href="#æ›´æ–°è¯„è®º" class="headerlink" title="æ›´æ–°è¯„è®º"></a>æ›´æ–°è¯„è®º</h4><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">UPDATE_COMMENT_MUTATION</span> = gql`<span class="language-graphql"></span></span><br><span class="line"><span class="language-graphql">  <span class="keyword">mutation</span> UpdateComment<span class="punctuation">(</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$commentId</span>: ID<span class="punctuation">!</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$rating</span>: Int<span class="punctuation">!</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$updatedAt</span>: DateTime<span class="punctuation">!</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$content</span>: String</span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">)</span> <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">    updateComment<span class="punctuation">(</span></span></span><br><span class="line"><span class="language-graphql">      <span class="symbol">commentId</span><span class="punctuation">:</span> <span class="variable">$commentId</span></span></span><br><span class="line"><span class="language-graphql">      <span class="symbol">rating</span><span class="punctuation">:</span> <span class="variable">$rating</span></span></span><br><span class="line"><span class="language-graphql">      <span class="symbol">updatedAt</span><span class="punctuation">:</span> <span class="variable">$updatedAt</span></span></span><br><span class="line"><span class="language-graphql">      <span class="symbol">content</span><span class="punctuation">:</span> <span class="variable">$content</span></span></span><br><span class="line"><span class="language-graphql">    <span class="punctuation">)</span> <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">      code</span></span><br><span class="line"><span class="language-graphql">      success</span></span><br><span class="line"><span class="language-graphql">      message</span></span><br><span class="line"><span class="language-graphql">      comment <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">        id</span></span><br><span class="line"><span class="language-graphql">        rating</span></span><br><span class="line"><span class="language-graphql">        content</span></span><br><span class="line"><span class="language-graphql">        createdAt</span></span><br><span class="line"><span class="language-graphql">        updatedAt</span></span><br><span class="line"><span class="language-graphql">      <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">    <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">`</span>;</span><br><span class="line"><span class="keyword">const</span> {</span><br><span class="line">    <span class="attr">mutate</span>: updateComment,</span><br><span class="line">    <span class="attr">loading</span>: isUpdating,</span><br><span class="line">    <span class="attr">onDone</span>: onCommentUpdate,</span><br><span class="line">} = <span class="title function_">useMutation</span>(<span class="variable constant_">UPDATE_COMMENT_MUTATION</span>, <span class="function">() =&gt;</span> ({</span><br><span class="line">    <span class="attr">variables</span>: {</span><br><span class="line">        commentId,</span><br><span class="line">        <span class="attr">rating</span>: rating.<span class="property">value</span>,</span><br><span class="line">        <span class="attr">content</span>: content.<span class="property">value</span>,</span><br><span class="line">        <span class="attr">updatedAt</span>: <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toISOString</span>(),</span><br><span class="line">    },</span><br><span class="line">}));</span><br><span class="line"><span class="title function_">onCommentUpdate</span>(<span class="function">(<span class="params">{ data: { updateComment } }</span>) =&gt;</span> {</span><br><span class="line">    <span class="keyword">if</span> (updateComment.<span class="property">success</span>) {</span><br><span class="line">        content.<span class="property">value</span> = <span class="string">""</span>;</span><br><span class="line">        rating.<span class="property">value</span> = <span class="number">0</span>;</span><br><span class="line">        toast.<span class="title function_">success</span>(updateComment.<span class="property">message</span>);</span><br><span class="line">        router.<span class="title function_">go</span>(-<span class="number">1</span>);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        toast.<span class="title function_">warning</span>(updateComment.<span class="property">message</span>);</span><br><span class="line">    }</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><p>è¿™é‡Œä¹Ÿæ²¡æœ‰å®šä¹‰ç¼“å­˜å¤„ç†æ–¹æ³•ï¼ŒåŸå› æ˜¯ï¼š</p><ul><li>æ›´æ–° <code>id</code> ä¸º <code>c1</code> çš„è¯„è®ºæˆåŠŸåï¼Œä¼šè¿”å› <code>c1</code> å¯¹åº”çš„æ–°æ•°æ®ï¼Œè¯¥æ•°æ®ä¼šè‡ªåŠ¨è¦†ç›–æ—§æ•°æ®</li><li>å¯¹äº <code>Book</code> ç¼“å­˜æ¥è¯´ï¼Œç”±äº <code>comments</code> å­—æ®µä¸­ä¿å­˜çš„æ˜¯éƒ½æ˜¯æ•°æ®å¼•ç”¨ï¼Œå› æ­¤ä¸éœ€è¦é¢å¤–çš„æ“ä½œ</li></ul><img src="/2022/03/14/Apollo%20Client%20%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86%E5%B0%8F%E7%BB%93/%E5%BC%95%E7%94%A8%E6%95%B0%E7%BB%84.png" class="" title="å­—æ®µå€¼ä¸ºå¯¹è±¡çš„ä¿å­˜çš„æ˜¯å¯¹è±¡å¼•ç”¨"><h2 id="æ›´æ–°ä¹¦æ¶"><a href="#æ›´æ–°ä¹¦æ¶" class="headerlink" title="æ›´æ–°ä¹¦æ¶"></a>æ›´æ–°ä¹¦æ¶</h2><h3 id="åç«¯å®šä¹‰-1"><a href="#åç«¯å®šä¹‰-1" class="headerlink" title="åç«¯å®šä¹‰"></a>åç«¯å®šä¹‰</h3><p><code>User</code> çš„ <code>schema</code> å®šä¹‰å¦‚ä¸‹</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">User</span> {</span><br><span class="line">    <span class="attr">id</span>: <span class="variable constant_">ID</span>!</span><br><span class="line">    <span class="attr">name</span>: <span class="title class_">String</span>!</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">bookShelf</span>: [<span class="title class_">Book</span>!]</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><code>Query</code> ä¸­å®šä¹‰äº†ä¸€ä¸ªæŸ¥è¯¢ï¼Œåˆ¤æ–­ä¹¦ç±æ˜¯å¦åœ¨ä¹¦æ¶ä¸­ï¼š</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Query</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="title function_">isBookInBookshelf</span>(<span class="attr">bookId</span>: <span class="variable constant_">ID</span>!, <span class="attr">userId</span>: <span class="variable constant_">ID</span>!): <span class="title class_">Boolean</span>!</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä¹¦æ¶ <code>Mutation</code> å®šä¹‰å¦‚ä¸‹</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Mutation</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="title function_">toggleBookshelf</span>(<span class="attr">userId</span>: <span class="variable constant_">ID</span>!, <span class="attr">bookId</span>: <span class="variable constant_">ID</span>!): toggleBookshelfResponse!</span><br><span class="line">}</span><br><span class="line">type toggleBookshelfResponse implements <span class="title class_">MutationResponse</span> {</span><br><span class="line">    <span class="attr">code</span>: <span class="title class_">String</span>!</span><br><span class="line">    <span class="attr">success</span>: <span class="title class_">Boolean</span>!</span><br><span class="line">    <span class="attr">message</span>: <span class="title class_">String</span>!</span><br><span class="line">    <span class="attr">user</span>: <span class="title class_">User</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä»å®šä¹‰å¯çŸ¥ï¼š</p><ul><li>æ›´æ–°ä¹¦æ¶åï¼Œä¼šè¿”å›ä¸€ä¸ªæ–°çš„ <code>user</code> æ•°æ®</li><li><code>user.bookShelf</code> ä¸­ä¿å­˜ç”¨æˆ·ä¹¦æ¶åˆ—è¡¨</li></ul><h3 id="å‘é€-Mutation-1"><a href="#å‘é€-Mutation-1" class="headerlink" title="å‘é€ Mutation"></a>å‘é€ Mutation</h3><p>éœ€è¦å¤„ç†çš„ç¼“å­˜å†…å®¹æœ‰ï¼š</p><ul><li><code>isBookInBookshelf</code> æŸ¥è¯¢çš„ç¼“å­˜ç»“æœ</li><li><code>User</code> çš„ <code>bookShelf</code> å­—æ®µ</li></ul><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">GET_IS_BOOK_IN_BOOKSHELF</span> = gql`<span class="language-graphql"></span></span><br><span class="line"><span class="language-graphql">  <span class="keyword">query</span> isBookInBookshelf<span class="punctuation">(</span><span class="variable">$bookId</span>: ID<span class="punctuation">!</span>, <span class="variable">$userId</span>: ID<span class="punctuation">!</span><span class="punctuation">)</span> <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">    isBookInBookshelf<span class="punctuation">(</span><span class="symbol">bookId</span><span class="punctuation">:</span> <span class="variable">$bookId</span>, <span class="symbol">userId</span><span class="punctuation">:</span> <span class="variable">$userId</span>)</span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">TOGGLE_BOOKSHELF_MUTATION</span> = gql`<span class="language-graphql"></span></span><br><span class="line"><span class="language-graphql">  <span class="keyword">mutation</span> toggleBookshelf<span class="punctuation">(</span><span class="variable">$bookId</span>: ID<span class="punctuation">!</span>, <span class="variable">$userId</span>: ID<span class="punctuation">!</span><span class="punctuation">)</span> <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">    toggleBookshelf<span class="punctuation">(</span><span class="symbol">bookId</span><span class="punctuation">:</span> <span class="variable">$bookId</span>, <span class="symbol">userId</span><span class="punctuation">:</span> <span class="variable">$userId</span>) <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">      message</span></span><br><span class="line"><span class="language-graphql">      success</span></span><br><span class="line"><span class="language-graphql">      user <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">          id</span></span><br><span class="line"><span class="language-graphql">        bookShelf <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">          title</span></span><br><span class="line"><span class="language-graphql">          id</span></span><br><span class="line"><span class="language-graphql">          rawAuthor</span></span><br><span class="line"><span class="language-graphql">          publisher</span></span><br><span class="line"><span class="language-graphql">          publishDate</span></span><br><span class="line"><span class="language-graphql">          doubanRating</span></span><br><span class="line"><span class="language-graphql">          summary</span></span><br><span class="line"><span class="language-graphql">          image</span></span><br><span class="line"><span class="language-graphql">          isbn13</span></span><br><span class="line"><span class="language-graphql">        <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">      <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">    <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> { <span class="attr">mutate</span>: toggleBookshelf, <span class="attr">onDone</span>: onToggle } = <span class="title function_">useMutation</span>(</span><br><span class="line">    <span class="variable constant_">TOGGLE_BOOKSHELF_MUTATION</span>,</span><br><span class="line">    <span class="function">() =&gt;</span> ({</span><br><span class="line">        <span class="attr">variables</span>: {</span><br><span class="line">            <span class="attr">bookId</span>: bookId.<span class="property">value</span>,</span><br><span class="line">            userId,</span><br><span class="line">        },</span><br><span class="line">        <span class="attr">update</span>: <span class="function">(<span class="params">cache, { data: { toggleBookshelf } }</span>) =&gt;</span> {</span><br><span class="line">            <span class="keyword">const</span> oldData = cache.<span class="title function_">readQuery</span>({</span><br><span class="line">                <span class="attr">query</span>: <span class="variable constant_">GET_IS_BOOK_IN_BOOKSHELF</span>,</span><br><span class="line">                <span class="attr">variables</span>: {</span><br><span class="line">                    <span class="attr">bookId</span>: bookId.<span class="property">value</span>,</span><br><span class="line">                    userId,</span><br><span class="line">                },</span><br><span class="line">            });</span><br><span class="line">            <span class="keyword">if</span> (toggleBookshelf.<span class="property">success</span> === <span class="literal">true</span>) {</span><br><span class="line">                cache.<span class="title function_">writeQuery</span>({</span><br><span class="line">                    <span class="attr">query</span>: <span class="variable constant_">GET_IS_BOOK_IN_BOOKSHELF</span>,</span><br><span class="line">                    <span class="attr">variables</span>: {</span><br><span class="line">                        <span class="attr">bookId</span>: bookId.<span class="property">value</span>,</span><br><span class="line">                        userId,</span><br><span class="line">                    },</span><br><span class="line">                    <span class="attr">data</span>: {</span><br><span class="line">                        <span class="attr">isBookInBookshelf</span>: !oldData.<span class="property">isBookInBookshelf</span>,</span><br><span class="line">                    },</span><br><span class="line">                });</span><br><span class="line">            }</span><br><span class="line">        },</span><br><span class="line">    })</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure><p>æ›´æ–°å‘ç”Ÿååšäº†ä¸¤ä»¶äº‹ï¼š</p><ul><li>åˆ©ç”¨ <code>cache.writeQuery</code> æ›´æ–° <code>isBookInBookshelf</code> æŸ¥è¯¢çš„ç¼“å­˜ç»“æœ</li><li>å¯¹äº <code>User.bookShelf</code> å­—æ®µï¼Œç”±äºæ–°çš„ <code>user</code> æ•°æ®ä¼šè¦†ç›–ç¼“å­˜ä¸­çš„æ—§æ•°æ®ï¼Œå› æ­¤å¯ä»¥ä¸åšå¤„ç†</li></ul><h3 id="x1f4a5-å½“å‰å®ç°çš„é—®é¢˜"><a href="#x1f4a5-å½“å‰å®ç°çš„é—®é¢˜" class="headerlink" title="ğŸ’¥å½“å‰å®ç°çš„é—®é¢˜"></a><span class="emoji" alias="boom" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a5.png?v8">ğŸ’¥</span>å½“å‰å®ç°çš„é—®é¢˜</h3><ul><li>æ¯ä¸€æœ¬ä¹¦éƒ½éœ€è¦å‘é€ä¸€ä¸ªé¢å¤–çš„æŸ¥è¯¢ï¼Œåˆ¤æ–­å…¶æ˜¯å¦å·²ç»åœ¨ä¹¦æ¶ä¸­</li><li>ä»æœªç™»å½•çŠ¶æ€åˆ‡æ¢åˆ°ç™»å½•çŠ¶æ€æ—¶ï¼Œæ‰€æœ‰å·²ç»åŠ è½½çš„ä¹¦ç±éƒ½ä¼šå‘é€ <code>isBookInBookshelf</code> æŸ¥è¯¢ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·ç™»å½•ä¼´éšç€ N ä¸ªé¢å¤–è¯·æ±‚ï¼ˆä¸å¯æ¥å—ï¼</li></ul><img src="/2022/03/14/Apollo%20Client%20%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86%E5%B0%8F%E7%BB%93/checkBook.png" class="" title="ä¸€æœ¬ä¹¦ä¸€ä¸ªè¯·æ±‚"><a href="/2022/03/26/%E9%87%8D%E5%86%99duozhuavue%E4%B9%A6%E6%9E%B6/" title="é‡å†™duozhuavueä¹¦æ¶">é‡å†™duozhuavueä¹¦æ¶</a><h2 id="ä¸»é¡µä¿¡æ¯æµåˆ†é¡µ"><a href="#ä¸»é¡µä¿¡æ¯æµåˆ†é¡µ" class="headerlink" title="ä¸»é¡µä¿¡æ¯æµåˆ†é¡µ"></a>ä¸»é¡µä¿¡æ¯æµåˆ†é¡µ</h2><p>å¼€å‘<a href="/2021/12/09/%E5%88%86%E9%A1%B5/" title="åˆ†é¡µ">åˆ†é¡µ</a>åŠŸèƒ½æ—¶ï¼Œä¹Ÿè¿›è¡Œäº†ä¸€äº›ç¼“å­˜åˆå¹¶ã€‚ç­–ç•¥å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Query</span>: {</span><br><span class="line">    <span class="attr">fields</span>: {</span><br><span class="line">        <span class="attr">categoryFeed</span>: <span class="title function_">relayStylePagination</span>()</span><br><span class="line">    }</span><br><span class="line">},</span><br><span class="line"><span class="title class_">Category</span>: {</span><br><span class="line">    <span class="attr">fields</span>: {</span><br><span class="line">        <span class="attr">items</span>: <span class="title function_">relayStylePagination</span>()</span><br><span class="line">    }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p>è¿™é‡Œåˆ©ç”¨äº† <code>Apollo Client</code> æä¾›çš„ <code>relayStylePagination()</code> å·¥å…·å‡½æ•°ï¼Œå®ƒå·²ç»å®ç°äº†ç¼“å­˜åˆå¹¶ç­–ç•¥ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>å¯¹äºç¼“å­˜ä¸­çš„æŸ¥è¯¢ï¼Œå¯ä»¥åˆ©ç”¨ <code>cache.readQuery</code> å’Œ <code>cache.writeQuery</code> è¿›è¡Œæ›´æ–°</li><li>å¯¹äºç¼“å­˜ä¸­çš„å¯¹è±¡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¿”å›çš„æ–°æ•°æ®ä¼šè‡ªåŠ¨è¦†ç›–æ—§æ•°æ®ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨ <code>cache.modify</code> ä¿®æ”¹</li><li>ä¸ºäº†è®©è¿”å›çš„æ–°å¯¹è±¡è‡ªåŠ¨æ›¿ä»£ç¼“å­˜ä¸­çš„å¯¹è±¡ï¼Œå¿…é¡»åœ¨å®¢æˆ·ç«¯çš„ <code>schema</code> å®šä¹‰ä¸­è¿”å› <code>id</code> å­—æ®µ</li><li>å¯¹äºåˆ†é¡µä¿¡æ¯çš„ç¼“å­˜ï¼Œå°½å¯èƒ½åœ¨è®¾ç½®å­—æ®µç­–ç•¥æ—¶ä½¿ç”¨ <code>Apollo Client</code> æä¾›çš„å·¥å…·å‡½æ•°ï¼Œå¦‚ <code>offsetLimitPagination()</code>, <code>relayStylePagination()</code></li><li>åˆ é™¤ç¼“å­˜ä¸­çš„å¯¹è±¡æ—¶ï¼Œå…ˆåˆ©ç”¨ <code>cache.identify</code> ç¡®å®šç¼“å­˜å¯¹åº”çš„æ ‡è¯†ç¬¦ï¼Œç„¶åä½¿ç”¨ <code>cache.evict</code> å’Œ <code>cache.gc</code></li><li><code>useMutation</code> å¤„ç†ç¼“å­˜çš„é€»è¾‘å†™åœ¨ <code>update</code> å‡½æ•°ä¸­</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> graphql </tag>
            
            <tag> apollo client </tag>
            
            <tag> vue-apollo </tag>
            
            <tag> duozhuavue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡æœ¬æº¢å‡ºæ”»å‡»</title>
      <link href="/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/"/>
      <url>/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/</url>
      
        <content type="html"><![CDATA[<p>ä¸»è¦è®°å½•å¼€å‘<a href="https://duozhuavue.vercel.app/book">duozhuavue<span class="emoji" alias="green_heart" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f49a.png?v8">ğŸ’š</span></a>æ—¶å¯¹ä¸€äº›æ–‡æœ¬è¿‡é•¿æƒ…å†µçš„å¤„ç†æ–¹æ³•ã€‚</p><h3 id="å‡è®¾"><a href="#å‡è®¾" class="headerlink" title="å‡è®¾"></a>å‡è®¾</h3><ul><li>åå°æœåŠ¡å™¨å¯¹æ•°æ®çš„æ–‡æœ¬é•¿åº¦æ²¡æœ‰é™åˆ¶ã€å¤„ç†</li><li>åœ¨å‰ç«¯é¡µé¢åˆ©ç”¨ CSS å¤„ç†æ–‡æœ¬æº¢å‡º</li></ul><h3 id="å¤šæŠ“é±¼"><a href="#å¤šæŠ“é±¼" class="headerlink" title="å¤šæŠ“é±¼"></a>å¤šæŠ“é±¼</h3><p>ä»¥ä¸‹æ˜¯<a href="www.duozhuayu.com">å¤šæŠ“é±¼</a>éƒ¨åˆ†é¡µé¢é‡åˆ°è¿‡é•¿ç”¨æˆ·åæ—¶çš„æƒ…å†µã€‚<br>æµ‹è¯•æ–‡æœ¬ï¼šâ€œè¿™æ˜¯ä¸€ä¸ªéå¸¸é•¿çš„IDç”¨æ¥æµ‹è¯•å¸ƒå±€æº¢å‡ºï¼Œæ­£å¸¸æƒ…å†µæœ€åä¼šå‡ºç°ä¸‰ä¸ªç‚¹ï¼Œè€Œä¸”ä¸ä¼šæŠŠå…¶å®ƒå†…å®¹æ¨å‡ºå±å¹•â€ã€‚</p><center style="display: flex; justify-content: space-between; flex-wrap: wrap;">  <div><img src="/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/duozhuayu-oc-page-header.png" class="" width="300" title="ä¹¦å•é¡µé¡¶éƒ¨"></div>  <div><img src="/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/duozhuayu-book-page-comment.png" class="" width="300" title="ä¹¦ç±é¡µè¯„è®ºåŒº"></div>  <div><img src="/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/duozhuayu-user-page-header.png" class="" width="300" title="ç”¨æˆ·é¡µé¡¶éƒ¨"></div>  <div><img src="/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/duozhuayu-user-page-activity.png" class="" width="300" title="ç”¨æˆ·é¡µæ´»åŠ¨åŒº"></div></center><span id="more"></span><h3 id="duozhuavue"><a href="#duozhuavue" class="headerlink" title="duozhuavue"></a>duozhuavue</h3><p>ä»¥ä¸‹æ˜¯<a href="https://duozhuavue.vercel.app/book">duozhuavue<span class="emoji" alias="green_heart" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f49a.png?v8">ğŸ’š</span></a>å¤„ç†åçš„æ ·å­</p><center style="display: flex; justify-content: space-between; flex-wrap: wrap;">  <div><img src="/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/oc-page-header.png" class="" width="300" title="ä¹¦å•é¡µé¡¶éƒ¨"></div>  <div><img src="/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/book-page-comment.png" class="" width="300" title="ä¹¦ç±é¡µè¯„è®ºåŒº"></div>  <div><img src="/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/user-page-header.png" class="" width="300" title="ç”¨æˆ·é¡µé¡¶éƒ¨"></div>  <div><img src="/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/user-page-douban-like.png" class="" width="300" title="ç”¨æˆ·é¡µä¹¦æ¶åŒºï¼ˆè‡ªå®šä¹‰ï¼‰"></div></center><h3 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h3><iframe src="https://codesandbox.io/embed/chu-li-wen-ben-yi-chu-94p4fk?fontsize=14&amp;theme=dark" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="å¤„ç†æ–‡æœ¬æº¢å‡º" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>å¯¹äºå—å…ƒç´ å†…çš„å•è¡Œæ–‡æœ¬ï¼Œæ³¨æ„æ–‡æœ¬æ‰€åœ¨å®¹å™¨çš„å®½åº¦</li><li>å¯¹äºå¼¹æ€§ç›’å­å†…çš„æ–‡æœ¬ï¼Œå¿…é¡»å…ˆç¡®å®šç›’å­çš„å®½åº¦ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæ‰èƒ½å¤„ç†æº¢å‡ºæƒ…å†µ</li><li>å¯¹äºå¤šè¡Œæ–‡æœ¬ï¼Œå¯ä»¥å‚è€ƒ <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/-webkit-line-clamp">MDN</a> çš„è¯´æ˜å’Œæ ·ä¾‹</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> duozhuavue </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†é¡µ</title>
      <link href="/2021/12/09/%E5%88%86%E9%A1%B5/"/>
      <url>/2021/12/09/%E5%88%86%E9%A1%B5/</url>
      
        <content type="html"><![CDATA[<p>è®°å½•å¼€å‘<a href="https://duozhuavue.vercel.app/book">duozhuavue<span class="emoji" alias="green_heart" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f49a.png?v8">ğŸ’š</span></a>ä¸»é¡µçš„åˆ†é¡µåŠŸèƒ½æ—¶çš„å®è·µã€‚</p><h1 id="å…³äºåˆ†é¡µ"><a href="#å…³äºåˆ†é¡µ" class="headerlink" title="å…³äºåˆ†é¡µ"></a>å…³äºåˆ†é¡µ</h1><h2 id="åˆ†é¡µçš„æ ·å­"><a href="#åˆ†é¡µçš„æ ·å­" class="headerlink" title="åˆ†é¡µçš„æ ·å­"></a>åˆ†é¡µçš„æ ·å­</h2><ol><li><p>æœ‰ç¼–å·çš„åˆ†é¡µ</p><img src="/2021/12/09/%E5%88%86%E9%A1%B5/page1.png" class="" width="500" title="æœ‰ç¼–å·çš„åˆ†é¡µ"></li><li><p>æ— ç¼–å·ï¼Œç‚¹å‡»åŠ è½½</p><img src="/2021/12/09/%E5%88%86%E9%A1%B5/page2.png" class="" width="500" title="ç‚¹å‡»è·å–ä¸‹ä¸€é¡µæ•°æ®"></li><li><p>æ— ç¼–å·ï¼Œæ»šåŠ¨åŠ è½½</p><img src="/2021/12/09/%E5%88%86%E9%A1%B5/page3.png" class="" width="500" title="æ»šåŠ¨åˆ°ç‰¹å®šä½ç½®è·å–ä¸‹ä¸€é¡µæ•°æ®"></li></ol><span id="more"></span><h2 id="è·³è½¬åˆ°ä¸‹ä¸€é¡µæ—¶è¦åšä»€ä¹ˆ"><a href="#è·³è½¬åˆ°ä¸‹ä¸€é¡µæ—¶è¦åšä»€ä¹ˆ" class="headerlink" title="è·³è½¬åˆ°ä¸‹ä¸€é¡µæ—¶è¦åšä»€ä¹ˆ"></a>è·³è½¬åˆ°ä¸‹ä¸€é¡µæ—¶è¦åšä»€ä¹ˆ</h2><ol><li><p>è·å–æ•°æ®</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¹æ®ä¼ å…¥çš„å‚æ•°è·å–æ–°æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> incoming = <span class="title function_">getNextPage</span>(...);</span><br></pre></td></tr></tbody></table></figure></li><li><p>æ›´æ–°ç¼“å­˜</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¯ä¸ªå­—æ®µéƒ½å¯ä»¥æœ‰è‡ªå·±çš„ merge() å‡½æ•°ç”¨äºé…ç½®ç¼“å­˜åˆå¹¶ç­–ç•¥</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">merge</span>(<span class="params">existing, incoming</span>) {</span><br><span class="line">    ...</span><br><span class="line">    existing = [...existing, ...incoming];</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> existing;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ol><h2 id="æƒ³è¦çš„åŠŸèƒ½"><a href="#æƒ³è¦çš„åŠŸèƒ½" class="headerlink" title="æƒ³è¦çš„åŠŸèƒ½"></a>æƒ³è¦çš„åŠŸèƒ½</h2><p>åœ¨å·²ç»<strong>æœ‰ç¼“å­˜</strong>çš„æƒ…å†µä¸‹ï¼Œ<strong>åˆ†é¡µè¯»å–ã€æ˜¾ç¤º</strong>ï¼ˆpaginated readï¼‰ç¼“å­˜æ•°æ®ã€‚</p><h1 id="å°è¯•"><a href="#å°è¯•" class="headerlink" title="å°è¯•"></a>å°è¯•</h1><h2 id="åŸºæœ¬é…ç½®"><a href="#åŸºæœ¬é…ç½®" class="headerlink" title="åŸºæœ¬é…ç½®"></a>åŸºæœ¬é…ç½®</h2><h3 id="graphql-æŸ¥è¯¢è®¾ç½®"><a href="#graphql-æŸ¥è¯¢è®¾ç½®" class="headerlink" title="graphql æŸ¥è¯¢è®¾ç½®"></a><code>graphql</code> æŸ¥è¯¢è®¾ç½®</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// first: è·å–å‡ ä¸ªåˆ†ç±»</span></span><br><span class="line"><span class="comment">// after: ä»å“ªä¸ªåˆ†ç±»å¼€å§‹è·å–åˆ†ç±»</span></span><br><span class="line"><span class="comment">// itemsFirst: æ¯ä¸ªåˆ†ç±»ä¸‹è·å–å‡ æœ¬å›¾ä¹¦</span></span><br><span class="line"><span class="comment">// itemsAfter: ä»å“ªä¸ªåœ°æ–¹å¼€å§‹è·å–å›¾ä¹¦</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">GET_CATEGORY_FEED</span> = gql`<span class="language-graphql"></span></span><br><span class="line"><span class="language-graphql">  <span class="keyword">query</span> getCategoryFeed<span class="punctuation">(</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$first</span>: Int</span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$after</span>: String</span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$itemsFirst</span>: Int</span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$itemsAfter</span>: String</span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">)</span> <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">    categoryFeed<span class="punctuation">(</span><span class="symbol">first</span><span class="punctuation">:</span> <span class="variable">$first</span>, <span class="symbol">after</span><span class="punctuation">:</span> <span class="variable">$after</span>) <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">      pageInfo <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">        hasNextPage</span></span><br><span class="line"><span class="language-graphql">        endCursor</span></span><br><span class="line"><span class="language-graphql">      <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">      edges <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">        node <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">          id</span></span><br><span class="line"><span class="language-graphql">          name</span></span><br><span class="line"><span class="language-graphql">          items<span class="punctuation">(</span><span class="symbol">first</span><span class="punctuation">:</span> <span class="variable">$itemsFirst</span>, <span class="symbol">after</span><span class="punctuation">:</span> <span class="variable">$itemsAfter</span>) <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">            pageInfo <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">              endCursor</span></span><br><span class="line"><span class="language-graphql">              hasNextPage</span></span><br><span class="line"><span class="language-graphql">            <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">            edges <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">              node <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">                id</span></span><br><span class="line"><span class="language-graphql">                title</span></span><br><span class="line"><span class="language-graphql">                rawAuthor</span></span><br><span class="line"><span class="language-graphql">                doubanRating</span></span><br><span class="line"><span class="language-graphql">                originalPrice</span></span><br><span class="line"><span class="language-graphql">                image</span></span><br><span class="line"><span class="language-graphql">              <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">            <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">          <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">        <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">      <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">    <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">`</span></span><br></pre></td></tr></tbody></table></figure><p>å…³äº <code>categoryFeed</code> ä¸­çš„ <code>pageInfo</code> å’Œ <code>edges</code>ï¼Œå¯ä»¥å‚è€ƒ <a href="https://relay.dev/graphql/connections.htm#">GraphQL Cursor Connections Specification</a></p><h3 id="è®¾ç½®ç¼“å­˜åˆå¹¶ç­–ç•¥"><a href="#è®¾ç½®ç¼“å­˜åˆå¹¶ç­–ç•¥" class="headerlink" title="è®¾ç½®ç¼“å­˜åˆå¹¶ç­–ç•¥"></a>è®¾ç½®ç¼“å­˜åˆå¹¶ç­–ç•¥</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Query</span>: {</span><br><span class="line">    <span class="attr">fields</span>: {</span><br><span class="line">        <span class="attr">categoryFeed</span>: {</span><br><span class="line">            ...<span class="title function_">relayStylePagination</span>(),</span><br><span class="line">            <span class="attr">keyArgs</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="comment">// è‡ªå®šä¹‰readå‡½æ•°ï¼Œå®ç°åˆ†é¡µè¯»å–ç¼“å­˜</span></span><br><span class="line">            <span class="title function_">read</span>(<span class="params">existing, {args: {first, after}}</span>) {</span><br><span class="line">                <span class="keyword">const</span> res = {};</span><br><span class="line">                <span class="comment">// æ ¹æ® after å‚æ•°é€‰æ‹©ç¼“å­˜ä¸­çš„æ•°æ®è¿”å›</span></span><br><span class="line">                res = {...}</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            }</span><br><span class="line">        },</span><br><span class="line">    },</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p>ç¼“å­˜çš„åˆå¹¶ç­–ç•¥ï¼Œå¯ä»¥å‚è€ƒ <a href="https://www.apollographql.com/docs/react/caching/cache-field-behavior/">Customizing the behavior of cached fields</a></p><p><code>relayStylePagination</code> å¯ä»¥å‚è€ƒ <a href="https://www.apollographql.com/docs/react/pagination/cursor-based/#relay-style-cursor-pagination">Relay-style cursor pagination</a></p><h2 id="ä½¿ç”¨-fetchMore"><a href="#ä½¿ç”¨-fetchMore" class="headerlink" title="ä½¿ç”¨ fetchMore()"></a>ä½¿ç”¨ fetchMore()</h2><h3 id="æŸ¥è¯¢è®¾ç½®"><a href="#æŸ¥è¯¢è®¾ç½®" class="headerlink" title="æŸ¥è¯¢è®¾ç½®"></a>æŸ¥è¯¢è®¾ç½®</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> after = <span class="title function_">ref</span>(<span class="string">''</span>) <span class="comment">// ä»å“ªé‡Œå¼€å§‹è·å–æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> first = <span class="title function_">ref</span>(<span class="number">1</span>) <span class="comment">// è·å–å‡ æ¡æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> {</span><br><span class="line">  <span class="attr">result</span>: categoryFeedResult,</span><br><span class="line">  <span class="attr">loading</span>: categoryFeedLoading,</span><br><span class="line">  <span class="attr">error</span>: categoryFeedError,</span><br><span class="line">  fetchMore</span><br><span class="line">} = <span class="title function_">useQuery</span>(<span class="variable constant_">GET_CATEGORY_FEED</span>, <span class="function">() =&gt;</span> ({</span><br><span class="line">  <span class="attr">after</span>: after.<span class="property">value</span>,</span><br><span class="line">  <span class="attr">first</span>: first.<span class="property">value</span>,</span><br><span class="line">  <span class="attr">itemsAfter</span>: <span class="string">''</span>,</span><br><span class="line">  <span class="attr">itemsFirst</span>: <span class="number">3</span></span><br><span class="line">}))</span><br></pre></td></tr></tbody></table></figure><h3 id="é¦–æ¬¡ä½¿ç”¨"><a href="#é¦–æ¬¡ä½¿ç”¨" class="headerlink" title="é¦–æ¬¡ä½¿ç”¨"></a>é¦–æ¬¡ä½¿ç”¨</h3><ol><li><p>é¡µé¢åŠ è½½</p><p>è¯·æ±‚ç¬¬ä¸€æ¡æ•°æ®ï¼Œç¼“å­˜ä¸ºç©ºï¼Œäºæ˜¯è¯·æ±‚æœåŠ¡å™¨ï¼Œè·å¾—ç¬¬ä¸€æ¡æ•°æ®ï¼Œå†™å…¥ç¼“å­˜ï¼Œè¿”å›ç»™é¡µé¢</p></li><li><p>ç‚¹å‡»<u>åŠ è½½æ›´å¤šåˆ†ç±»</u></p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loadMoreCategories = <span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">  <span class="title function_">fetchMore</span>({</span><br><span class="line">    <span class="attr">variables</span>: {</span><br><span class="line">      <span class="attr">after</span>: cursor.<span class="property">value</span> <span class="comment">// è¿™é‡Œçš„cursoræ˜¯ç¬¬ä¸€é¡µæ•°æ®çš„ pageInfo ä¸­çš„ä¿¡æ¯</span></span><br><span class="line">    }</span><br><span class="line">  }).<span class="title function_">then</span>(<span class="function">(<span class="params">{ data: { categoryFeed } }</span>) =&gt;</span> {</span><br><span class="line">    after.<span class="property">value</span> = categoryFeed.<span class="property">pageInfo</span>.<span class="property">endCursor</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">      <span class="string">'$after is updated, there will be a new categoryFeed query...'</span></span><br><span class="line">    )</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è°ƒç”¨ <code>loadMoreCategories()</code> ï¼Œæ‰§è¡Œå¸¦æœ‰æ–°å‚æ•°çš„ <code>fetchMore()</code></p><p>æ–°æ•°æ®ä¼šä¾ç…§åˆå¹¶ç­–ç•¥å†™å…¥ç¼“å­˜</p><p><span class="emoji" alias="eyes" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f440.png?v8">ğŸ‘€</span> ä¸ºäº†è¯»å–æ›´æ–°åçš„ç¼“å­˜ï¼Œéœ€è¦åœ¨ <code>then()</code> ä¸­æ›´æ–° <code>after</code> çš„å€¼ï¼ˆæ›´æ–°ä¼šè§¦å‘æŸ¥è¯¢æ‰§è¡Œï¼Œè¯¥ <code>after</code> å‚æ•°å¯ä»¥ç”¨äºè¯·æ±‚ç¼“å­˜ä¸­ç‰¹å®šéƒ¨åˆ†çš„æ•°æ®</p></li><li><p>å†æ¬¡ç‚¹å‡»<u>åŠ è½½æ›´å¤šåˆ†ç±»</u></p></li></ol><h3 id="åˆ·æ–°é¡µé¢å"><a href="#åˆ·æ–°é¡µé¢å" class="headerlink" title="åˆ·æ–°é¡µé¢å"></a>åˆ·æ–°é¡µé¢å</h3><ol><li>é¡µé¢åŠ è½½</li><li>ç‚¹å‡»<u>åŠ è½½æ›´å¤šåˆ†ç±»</u></li><li>å†æ¬¡ç‚¹å‡»<u>åŠ è½½æ›´å¤šåˆ†ç±»</u></li></ol><h3 id="æ•ˆæœåŠé—®é¢˜"><a href="#æ•ˆæœåŠé—®é¢˜" class="headerlink" title="æ•ˆæœåŠé—®é¢˜"></a>æ•ˆæœåŠé—®é¢˜</h3><center style="display: flex; justify-content: space-between;">  <div><img src="/2021/12/09/%E5%88%86%E9%A1%B5/fetchMore-no-cache.gif" class="" width="375" title="æ²¡æœ‰ç¼“å­˜çš„æƒ…å†µä¸‹è¯·æ±‚"></div>  <div style="margin-left: 10px;"><img src="/2021/12/09/%E5%88%86%E9%A1%B5/fetchMore-with-cache.gif" class="" width="375" title="æœ‰ç¼“å­˜çš„æƒ…å†µä¸‹è¯·æ±‚"></div></center><p>çœ‹èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜ï¼ä½†æ˜¯é—®é¢˜å‘ç”Ÿåœ¨<u>æœ‰ç¼“å­˜æ—¶çš„ç¬¬ä¸€æ¬¡ç‚¹å‡»</u>ä¹‹å</p><p>ç¼“å­˜ä¸­çš„åˆ†ç±»å¦‚ä»Šæœ‰ä¸‰æ¡æ•°æ®</p><p>åˆ·æ–°é¡µé¢ï¼Œé¡µé¢åŠ è½½ï¼Œokï¼</p><img src="/2021/12/09/%E5%88%86%E9%A1%B5/cache-ok.png" class="" width="500" title="okï¼ç¼“å­˜ä¸å—å½±å“ï¼"><p>ç‚¹å‡»<u>åŠ è½½æ›´å¤šåˆ†ç±»</u>ï¼Œopsï¼ç¼“å­˜ä¸­çš„åˆ†ç±»å˜æˆä¸¤æ¡äº†ï¼ï¼</p><img src="/2021/12/09/%E5%88%86%E9%A1%B5/cache-ops.png" class="" width="500" title="opsï¼cacheè¢«ä¿®æ”¹äº†ï¼"><h4 id="é—®é¢˜åˆ†æ"><a href="#é—®é¢˜åˆ†æ" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h4><p>åœ¨æœ‰ç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œæˆ‘çš„æœŸæœ›æ˜¯<strong>ä»ç¼“å­˜è¯»å–æ•°æ®</strong>ã€‚ä½†æ˜¯å®é™…æƒ…å†µæ˜¯ï¼Œæ¯æ¬¡è°ƒç”¨ <code>fetchMore()</code> éƒ½ä¼šè¯·æ±‚æœåŠ¡å™¨æ•°æ®ã€‚</p><p>çœ‹äº†ä¸€ä¸‹ <code>fetchMore()</code> çš„<a href="https://github.com/apollographql/apollo-client/blob/main/src/core/ObservableQuery.ts">æºç </a>ï¼Œå®ƒæ˜¯è¿™ä¹ˆå®šä¹‰çš„</p><img src="/2021/12/09/%E5%88%86%E9%A1%B5/fetchMore.png" class="" width="600" title="fetchMore() å¿…ç„¶è¯·æ±‚æœåŠ¡å™¨"><h4 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h4><ul><li><input checked="" disabled="" type="checkbox"> ä¸ç”¨<code>fetchMore()</code></li><li><input disabled="" type="checkbox"> é‡æ–°å®šä¹‰ç¼“å­˜åˆå¹¶ç­–ç•¥ï¼Œå¦‚æœæ–°ç»“æœå·²ç»è¢«ç¼“å­˜ï¼Œå°±ä¸æ‰§è¡Œ<code>merge()</code>å‡½æ•°ï¼ˆ<code>...relayStylePagination()</code>ä¸­æœ‰é»˜è®¤çš„ <code>merge()</code>å‡½æ•°</li></ul><h2 id="ä½¿ç”¨-useQuery"><a href="#ä½¿ç”¨-useQuery" class="headerlink" title="ä½¿ç”¨ useQuery"></a>ä½¿ç”¨ useQuery</h2><p>ä¸ºäº†ä¸ä½¿ç”¨ <code>fetchMore()</code> ï¼Œåˆšå¼€å§‹æˆ‘ä½¿ç”¨äº† <code>useLazyQuery()</code>, å®ƒä¼šè¿”å›ä¸€ä¸ªéœ€è¦ä¸»åŠ¨è°ƒç”¨è·å–æ•°æ®çš„ <code>load()</code> å‡½æ•°ã€‚æˆ‘åœ¨é¡µé¢æŒ‚è½½åï¼Œè°ƒç”¨ <code>load()</code> è·å–ç¬¬ä¸€é¡µæ•°æ®ï¼Œåœ¨ç‚¹å‡»å‘ç”Ÿæ—¶å†æ¬¡è°ƒç”¨ <code>load()</code> å¹¶ä¼ å…¥ç›¸åº”çš„å‚æ•°ï¼Œè·å–æ–°æ•°æ®ã€‚è¿™ç§å®ç°æ»¡è¶³äº†ä¸€äº›éœ€æ±‚ï¼Œä½†æ˜¯ä¹Ÿæœ‰å®ƒçš„é—®é¢˜ã€‚äºæ˜¯æˆ‘åˆå»è€ƒè™‘åˆ«çš„ç­–ç•¥ï¼Œå¾ˆå¿«å°±æ„è¯†åˆ°ï¼Œç›¸åŒçš„é€»è¾‘å…¶å®åˆ©ç”¨ <code>useQuery()</code> ä¹Ÿå¯ä»¥å®ç°ï¼Œå°½ç®¡å®ƒä»¬å­˜åœ¨ç›¸åŒçš„é—®é¢˜ã€‚</p><p>ç»™æŸ¥è¯¢ä¼ å…¥å“åº”å¼å˜é‡ï¼Œæƒ³è¦è·å–ä¸‹ä¸€é¡µæ•°æ®æ—¶ï¼Œåªéœ€è¦<strong>æ›´æ”¹å˜é‡çš„å€¼</strong>ï¼ˆæŸ¥è¯¢ä¼šè‡ªåŠ¨æ›´æ–°</p><h3 id="æŸ¥è¯¢è®¾ç½®-1"><a href="#æŸ¥è¯¢è®¾ç½®-1" class="headerlink" title="æŸ¥è¯¢è®¾ç½®"></a>æŸ¥è¯¢è®¾ç½®</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> after = <span class="title function_">ref</span>(<span class="string">''</span>) <span class="comment">// ä»å“ªé‡Œå¼€å§‹è·å–æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> first = <span class="title function_">ref</span>(<span class="number">1</span>) <span class="comment">// è·å–å‡ æ¡æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> {</span><br><span class="line">  <span class="attr">result</span>: categoryFeedResult,</span><br><span class="line">  <span class="attr">loading</span>: categoryFeedLoading,</span><br><span class="line">  <span class="attr">error</span>: categoryFeedError</span><br><span class="line">} = <span class="title function_">useQuery</span>(<span class="variable constant_">GET_CATEGORY_FEED</span>, <span class="function">() =&gt;</span> ({</span><br><span class="line">  <span class="attr">after</span>: after.<span class="property">value</span>,</span><br><span class="line">  <span class="attr">first</span>: first.<span class="property">value</span>,</span><br><span class="line">  <span class="attr">itemsAfter</span>: <span class="string">''</span>,</span><br><span class="line">  <span class="attr">itemsFirst</span>: <span class="number">3</span></span><br><span class="line">}))</span><br></pre></td></tr></tbody></table></figure><h3 id="é¦–æ¬¡ä½¿ç”¨-1"><a href="#é¦–æ¬¡ä½¿ç”¨-1" class="headerlink" title="é¦–æ¬¡ä½¿ç”¨"></a>é¦–æ¬¡ä½¿ç”¨</h3><ol><li><p>é¡µé¢åŠ è½½</p><p>è¯·æ±‚ç¬¬ä¸€æ¡æ•°æ®ï¼Œç¼“å­˜ä¸ºç©ºï¼Œäºæ˜¯è¯·æ±‚æœåŠ¡å™¨ï¼Œè·å–ç¬¬ä¸€æ¡æ•°æ®ï¼Œå†™å…¥ç¼“å­˜ï¼Œè¿”å›åˆ°é¡µé¢</p></li><li><p>ç‚¹å‡»åŠ è½½æ›´å¤šåˆ†ç±»</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loadMoreCategories = <span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">  after.<span class="property">value</span> = cursor.<span class="property">value</span> <span class="comment">// åªéœ€è¦æ›´æ–° after çš„å€¼</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è°ƒç”¨ <code>loadMoreCategories()</code></p><p>æŸ¥è¯¢å†æ¬¡æ‰§è¡Œï¼Œç¼“å­˜æœªå‘½ä¸­ï¼Œè¯·æ±‚æœåŠ¡å™¨ï¼Œå¾—åˆ°ç¬¬äºŒæ¡æ•°æ®ï¼Œå†™å…¥ç¼“å­˜ï¼Œè¿”å›åˆ°é¡µé¢</p></li></ol><h3 id="åˆ·æ–°é¡µé¢"><a href="#åˆ·æ–°é¡µé¢" class="headerlink" title="åˆ·æ–°é¡µé¢"></a>åˆ·æ–°é¡µé¢</h3><ol><li><p>é¡µé¢åŠ è½½</p><p><code>after</code> å‚æ•°ä¸º <code>""</code></p><p>è¯·æ±‚ç¬¬ä¸€æ¡æ•°æ®ï¼Œç¼“å­˜å‘½ä¸­ï¼Œè¿”å›åˆ°é¡µé¢</p></li><li><p>ç‚¹å‡»åŠ è½½æ›´å¤šåˆ†ç±»</p><p>è°ƒç”¨ <code>loadMoreCategories()</code></p><p>æŸ¥è¯¢å†æ¬¡æ‰§è¡Œï¼Œå‘½ä¸­ç¼“å­˜ï¼Œå¾—åˆ°ä¸¤æ¡æ•°æ®ï¼Œè¿”å›åˆ°é¡µé¢</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå®šä¹‰ç¼“å­˜çš„ read() å‡½æ•°</span></span><br><span class="line">res.<span class="property">edges</span> = [</span><br><span class="line">  ...existing.<span class="property">edges</span>.<span class="title function_">slice</span>(<span class="number">0</span>, startIndex + first); <span class="comment">// æ€»æ˜¯ä»å¤´å¼€å§‹è¯»å–æ•°æ®</span></span><br><span class="line">];</span><br></pre></td></tr></tbody></table></figure></li></ol><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p><span class="emoji" alias="raised_eyebrow" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f928.png?v8">ğŸ¤¨</span> åœ¨æ²¡æœ‰ç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œè¯·æ±‚æ–°æ•°æ®æ—¶ï¼Œè¯¥ç»„ä»¶ä¼šæ•´ä½“<strong>åˆ·æ–°</strong></p><center style="display: flex; justify-content: space-evenly;">  <div><img src="/2021/12/09/%E5%88%86%E9%A1%B5/without-cache.gif" class="" width="375" title="æ²¡æœ‰ç¼“å­˜çš„æƒ…å†µä¸‹è¯·æ±‚ä¸‹ä¸€æ¡æ•°æ®"></div>  <div style="margin-left: 10px;"><img src="/2021/12/09/%E5%88%86%E9%A1%B5/with-cache.gif" class="" width="375" title="æœ‰ç¼“å­˜çš„æƒ…å†µä¸‹è¯·æ±‚ä¸‹ä¸€æ¡æ•°æ®"></div></center><p>å› ä¸º <code>categoryFeed</code> æŸ¥è¯¢ç¡®å®æ˜¯é‡æ–°æ‰§è¡Œäº†ä¸€æ¬¡ï¼Œæ‰€ä»¥æ•´ä½“åˆ·æ–°æ˜¯æ­£å¸¸ç°è±¡ã€‚è¿™ç§æ­£å¸¸ç°è±¡ä¸æ˜¯æˆ‘è¦çš„æ•ˆæœã€‚</p><h2 id="é‡æ–°å®šä¹‰ç¼“å­˜åˆå¹¶ç­–ç•¥"><a href="#é‡æ–°å®šä¹‰ç¼“å­˜åˆå¹¶ç­–ç•¥" class="headerlink" title="é‡æ–°å®šä¹‰ç¼“å­˜åˆå¹¶ç­–ç•¥"></a>é‡æ–°å®šä¹‰ç¼“å­˜åˆå¹¶ç­–ç•¥</h2><ul><li><input disabled="" type="checkbox"> TODO</li></ul><h2 id="trade-off"><a href="#trade-off" class="headerlink" title="trade-off"></a>trade-off</h2><p><code>relayStylePagination()</code> çš„é»˜è®¤è®¾ç½®ä¸­ï¼Œå¯¹ç¼“å­˜çš„è¯»å–æ˜¯å…¨éƒ¨è¯»å–ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ ä»åˆ«çš„é¡µé¢å›åˆ°ä¸»é¡µï¼Œä½ å¯ä»¥çœ‹åˆ°ä¹‹å‰å¾—åˆ°çš„æ‰€æœ‰æ•°æ®ï¼Œå¹¶æ²¡æœ‰åˆ†é¡µåœ°è¯»å–ç¼“å­˜æ•°æ®ã€‚</p><p>æˆ‘ä¹Ÿåœ¨æƒ³ï¼Œåœ¨ä¸»é¡µè¿™æ ·æ»šåŠ¨æµè§ˆçš„æƒ…å¢ƒä¸‹ï¼Œ<strong>åˆ†é¡µè¯»å–</strong>åˆ°åº•æœ‰æ²¡æœ‰å¿…è¦ï¼Œæƒ³äº†åŠå¤©ï¼Œå¥½åƒæ˜¯æ²¡å¿…è¦å•Šï¼</p><h2 id="å›åˆ°æœ€åˆçš„èµ·ç‚¹"><a href="#å›åˆ°æœ€åˆçš„èµ·ç‚¹" class="headerlink" title="å›åˆ°æœ€åˆçš„èµ·ç‚¹"></a>å›åˆ°æœ€åˆçš„èµ·ç‚¹</h2><p>æœ€ç»ˆæˆ‘è¿˜æ˜¯å†³å®šé‡‡ç”¨ä½¿ç”¨ <code>fetchMore()</code> çš„æ–¹æ³•ã€‚è™½ç„¶ç»•äº†ä¸€åœˆï¼Œä½†æ˜¯è¿™æ®µæ—¶é—´ä¸ºäº†è§£å†³åˆ†é¡µé—®é¢˜ä¸åœæ¢ç´¢ï¼Œè¿˜æ˜¯å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ã€‚</p><p><span class="emoji" alias="flags" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f38f.png?v8">ğŸ</span> å†™å®Œ<a href="https://duozhuavue.vercel.app/book">duozhuavue</a>å°±å»é¢<a href="https://www.duozhuayu.com/">duozhuayu</a>ï¼</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.apollographql.com/docs/react/pagination/overview/">Doc - apollo åˆ†é¡µ</a></p><p><a href="https://www.apollographql.com/docs/react/caching/advanced-topics/#incremental-loading-fetchmore">Doc - apollo ä½¿ç”¨ <code>fetchMore</code> å¢é‡åŠ è½½</a></p><p><a href="https://v4.apollo.vuejs.org/zh-cn/guide-composable/pagination.html#%E4%BD%BF%E7%94%A8-fetchmore">Doc - Vue Apollo åˆ†é¡µ</a></p><p><a href="https://www.apollographql.com/blog/graphql/pagination/understanding-pagination-rest-graphql-and-relay/">Blog - Understanding pagination</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> graphql </tag>
            
            <tag> apollo client </tag>
            
            <tag> vue-apollo </tag>
            
            <tag> duozhuavue </tag>
            
            <tag> pagination </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç²˜æ€§å®šä½ç”Ÿæ•ˆæ—¶æ·»åŠ æ ·å¼</title>
      <link href="/2021/11/28/%E7%B2%98%E6%80%A7%E5%AE%9A%E4%BD%8D%E7%94%9F%E6%95%88%E6%97%B6%E6%B7%BB%E5%8A%A0%E6%A0%B7%E5%BC%8F/"/>
      <url>/2021/11/28/%E7%B2%98%E6%80%A7%E5%AE%9A%E4%BD%8D%E7%94%9F%E6%95%88%E6%97%B6%E6%B7%BB%E5%8A%A0%E6%A0%B7%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>å†™ <a href="https://duozhuavue.vercel.app/book">duozhuavue<span class="emoji" alias="green_heart" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f49a.png?v8">ğŸ’š</span></a> ä¸»é¡µé¢æ—¶ï¼Œå¸Œæœ›ä¹¦ç±ç±»åˆ«çš„ <code>Title</code> åœ¨ <code>sticky</code> ç”Ÿæ•ˆæ—¶ï¼Œæ·»åŠ ä¸€ä¸ª<u>ä¸‹è¾¹ç•Œ</u>ã€‚</p><h3 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h3><img src="/2021/11/28/%E7%B2%98%E6%80%A7%E5%AE%9A%E4%BD%8D%E7%94%9F%E6%95%88%E6%97%B6%E6%B7%BB%E5%8A%A0%E6%A0%B7%E5%BC%8F/duozhuavue.gif" class="" width="500" title="ç²˜æ€§å®šä½ç”Ÿæ•ˆæ—¶æ·»åŠ ä¸‹è¾¹ç•Œ"><!--  more  --><h3 id="æ ·ä¾‹é¢„è§ˆ"><a href="#æ ·ä¾‹é¢„è§ˆ" class="headerlink" title="æ ·ä¾‹é¢„è§ˆ"></a><a href="https://0uhwu.csb.app/">æ ·ä¾‹é¢„è§ˆ</a></h3><iframe src="https://codesandbox.io/embed/add-style-when-sticky-is-active-0uhwu?fontsize=14&amp;hidenavigation=1&amp;module=%2Fmain.js&amp;theme=dark&amp;view=editor" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="add style when sticky is active" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><blockquote><p>Intersection Observer API æä¾›äº†ä¸€ç§å¼‚æ­¥æ£€æµ‹ç›®æ ‡å…ƒç´ ä¸ç¥–å…ˆå…ƒç´ æˆ– viewport ç›¸äº¤æƒ…å†µå˜åŒ–çš„æ–¹æ³•ã€‚</p></blockquote><h3 id="åŸºæœ¬æ­¥éª¤"><a href="#åŸºæœ¬æ­¥éª¤" class="headerlink" title="åŸºæœ¬æ­¥éª¤"></a>åŸºæœ¬æ­¥éª¤</h3><ol><li>ç¡®å®šç›®æ ‡å…ƒç´ ã€æ ¹å…ƒç´ </li><li>è®¾ç½®ç›‘å¬å›è°ƒï¼ˆåˆ©ç”¨ç›¸äº¤çš„<u><strong>æ¯”ä¾‹</strong></u>æˆ–è€…<u><strong>å˜åŒ–</strong></u>ï¼‰</li><li>ç›‘å¬</li></ol><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><ul><li>è®¾ç½®æ ¹å…ƒç´ æ—¶ä½¿ç”¨äº†å›ºå®šå¤§å°çš„åƒç´ ï¼Œæ„å‘³ç€åªæœ‰åœ¨<strong>å…¨å±</strong>ä¸‹æ ·å¼æ‰ä¼šç”Ÿæ•ˆ</li><li>ç¬¬äºŒä¸ªç²˜æ€§å…ƒç´ ç”Ÿæ•ˆæ—¶ï¼Œç¬¬ä¸€ä¸ªç²˜æ€§å…ƒç´ çš„æ ·å¼å¹¶æ²¡æœ‰ç§»é™¤ï¼Œæ ·ä¾‹ä¸­å®ƒè—åœ¨äº† <code>.dogs</code> å…ƒç´ çš„ä¸‹é¢ï¼Œä¸ä¼šå½±å“è§‚æ„Ÿã€‚</li></ul><p>å‚è€ƒ</p><ul><li><a href="https://css-tricks.com/how-to-detect-when-a-sticky-element-gets-pinned/">css tricks</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API">Intersection Observer API</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/isIntersecting">IntersectionObserverEntry.isIntersecting</a></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> duozhuavue </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³ç²˜æ€§å®šä½çš„ä¸€äº›é—®é¢˜</title>
      <link href="/2021/11/27/%E8%A7%A3%E5%86%B3%E7%B2%98%E6%80%A7%E5%AE%9A%E4%BD%8D%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/"/>
      <url>/2021/11/27/%E8%A7%A3%E5%86%B3%E7%B2%98%E6%80%A7%E5%AE%9A%E4%BD%8D%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ­£å¸¸å·¥ä½œçš„ç²˜æ€§å®šä½çš„ä¾‹å­ï¼Œå½“ä½ æ»šåŠ¨é¡µé¢ï¼Œ<code>sticky part1</code> å’Œ <code>sticky part2</code> ä¼šå›ºå®šåœ¨<u>é¡µé¢é¡¶éƒ¨</u>ã€‚</p><span id="more"></span><iframe src="https://codesandbox.io/embed/dang-position-sticky-bu-sheng-xiao-k6yl8?fontsize=14&amp;hidenavigation=1&amp;theme=dark&amp;view=preview" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="å½“ position: sticky; ä¸ç”Ÿæ•ˆ" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><p>ä½†æ˜¯å¸¦æœ‰èƒŒæ™¯çš„è¾¹æ¡†å‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™ä¸œè¥¿æº¢å‡ºäº†ã€‚å°è¯•éšè—è¿™äº›æº¢å‡ºï¼Œå»ä¸‹ä¸ªé¡µé¢çœ‹çœ‹æ•ˆæœã€‚</p><p>ç²˜æ€§å®šä½å¤±æ•ˆäº†ï¼ç›¸å…³å…ƒç´ å¹¶æ²¡æœ‰å›ºå®šåœ¨<strong>é¡µé¢é¡¶éƒ¨</strong>ã€‚</p><p>å½“ç„¶ï¼Œå¦‚æœå¤„ç†æº¢å‡ºæ—¶ï¼Œ<code>overflow</code> å±æ€§çš„å€¼è®¾ç½®ä¸º <code>scroll</code> æˆ–è€… <code>auto</code>ï¼Œä½ å†å»æ»šåŠ¨å†…éƒ¨å…ƒç´ æ—¶ä¼šå‘ç°ï¼šç›¸å…³å…ƒç´ ç²˜åœ¨äº†å®ƒä»¬çš„ç¥–å…ˆå…ƒç´  <code>&lt;div class="container overflow"&gt;</code> ä¸Šã€‚</p><p>å¯¹æ­¤ç°è±¡ï¼Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/position">MDN</a> è¿™ä¹ˆè§£é‡Šï¼š</p><blockquote><p>a sticky element â€œsticksâ€ to its nearest ancestor that has a â€œscrolling mechanismâ€ (created when <code>overflow</code> is <code>hidden</code>, <code>scroll</code>, <code>auto</code>, or <code>overlay</code>), even if that ancestor isnâ€™t the nearest actually scrolling ancestor.</p></blockquote><p>æ€»ä¹‹ï¼š<br><span class="emoji" alias="star" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2b50.png?v8">â­</span> ä½¿ç”¨ <code>sticky</code> å®šä½å±æ€§æ—¶ï¼Œå°å¿ƒ <code>overflow</code></p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> duozhuavue </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å½“flex-1æ²¡æœ‰æŒ‰é¢„æœŸå·¥ä½œ</title>
      <link href="/2021/09/29/%E5%BD%93flex-1%E6%B2%A1%E6%9C%89%E6%8C%89%E9%A2%84%E6%9C%9F%E5%B7%A5%E4%BD%9C/"/>
      <url>/2021/09/29/%E5%BD%93flex-1%E6%B2%A1%E6%9C%89%E6%8C%89%E9%A2%84%E6%9C%9F%E5%B7%A5%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<p>å†™<a href="https://duozhuavue.vercel.app/search/clothing">duozhuavue<span class="emoji" alias="green_heart" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f49a.png?v8">ğŸ’š</span></a>æœè£…æœç´¢é¡µé¢æ—¶é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼š<code>flex</code> å®¹å™¨å†…ï¼Œä¸¤ä¸ªè®¾ç½®äº† <code>flexï¼š1</code> çš„é¡¹ç›®ï¼Œæœ€åå®½åº¦ç«Ÿç„¶ä¸æ˜¯ç›¸ç­‰çš„ã€‚</p><img src="/2021/09/29/%E5%BD%93flex-1%E6%B2%A1%E6%9C%89%E6%8C%89%E9%A2%84%E6%9C%9F%E5%B7%A5%E4%BD%9C/flex-problem.png" class="" width="375" height="667" title="é—®é¢˜å¤§æ¦‚é•¿è¿™æ ·"><span id="more"></span><h3 id="é—®é¢˜å¤ç°"><a href="#é—®é¢˜å¤ç°" class="headerlink" title="é—®é¢˜å¤ç°"></a>é—®é¢˜å¤ç°</h3><iframe src="https://codesandbox.io/embed/du-shi-flex-1zen-me-kuan-du-bu-yi-yang-j3olm?fontsize=14&amp;hidenavigation=1&amp;theme=dark&amp;view=preview" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="éƒ½æ˜¯flex-1æ€ä¹ˆå®½åº¦ä¸ä¸€æ ·" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><h3 id="æ ·ä¾‹ä»£ç "><a href="#æ ·ä¾‹ä»£ç " class="headerlink" title="æ ·ä¾‹ä»£ç "></a>æ ·ä¾‹ä»£ç </h3><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span>One<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span></span><br><span class="line">    Two has more content xxxxxxxxxxxxxxxxxxxxxxxxxx ssssss</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> {</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ç­‰ä»·äº flex: 1 1 0; */</span></span><br><span class="line"><span class="comment">/* å…ƒç´ å®½åº¦ç”±å†…å®¹å®½åº¦å†³å®šï¼Œä¸ä¸€å®šç­‰å®½ */</span></span><br><span class="line"><span class="selector-class">.inner</span> {</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å…ƒç´ å®½åº¦æ˜¾å¼è®¾ç½®ä¸º0ï¼Œè¦†ç›–äº†flex-basis: 0; ï¼Œflex-growèµ·ä½œç”¨ï¼Œå„ä¸ªåˆ—ç­‰å®½ï¼Œå†…å®¹å¯èƒ½æº¢å‡º */</span></span><br><span class="line"><span class="selector-class">.inner</span> {</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="comment">/* min-width: 0;*/</span></span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.inner</span> {</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="comment">/* flex-growèµ·ä½œç”¨ï¼Œå„ä¸ªåˆ—ç­‰å®½ */</span></span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="comment">/* ä¸‹é¢çš„ä»£ç è¯´æ˜ï¼Œåˆ›å»ºBFCåï¼Œå†…å®¹å®½åº¦ä¸å½±å“å®¹å™¨å®½åº¦ï¼Œå®¹å™¨å®½åº¦ä¸º0 */</span></span><br><span class="line">  <span class="comment">/* flex: 0 1 0; */</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ol><li>æ°´å¹³æ–¹å‘çš„ <code>flex</code> ç›’å­ï¼Œå¯ä»¥ç”¨æ¥åˆ›å»º<strong>ç­‰é«˜åˆ—</strong>ï¼Œå„ä¸ªåˆ—çš„å®½åº¦ï¼ˆå°ºå¯¸ï¼‰ä¸ä¸€å®šç›¸ç­‰ï¼›</li><li>å„ä¸ªåˆ—çš„æœ€ç»ˆå®½åº¦ç”±<code>åˆ—çš„åˆå§‹å°ºå¯¸</code>å’Œ<code>å®¹å™¨çš„å‰©ä½™å¯ç”¨ç©ºé—´</code>å…±åŒå†³å®šï¼›</li><li><strong>åˆå§‹å°ºå¯¸</strong>ç”±æ˜¾å¼è®¾ç½®çš„å®½åº¦å†³å®šã€‚å¦‚æœæ²¡æœ‰æ˜¾å¼è®¾ç½®å®½åº¦ï¼Œåˆ™ç”±å®ƒä»¬çš„å†…å®¹å®½åº¦å†³å®šã€‚å¦‚æœæ²¡æœ‰å†…å®¹ï¼Œåˆ™å®½åº¦ä¸º 0ï¼›</li><li><code>flex</code> <strong>å®¹å™¨çš„å‰©ä½™å¯ç”¨ç©ºé—´</strong>ï¼ˆå¯æ­£å¯è´Ÿï¼‰ï¼Œæ ¹æ®å„ä¸ªåˆ—çš„ <code>flex-grow</code> å’Œ <code>flex-shrink</code> å±æ€§åˆ†é…ç»™å„ä¸ªåˆ—ï¼›</li><li><code>overflow: hidden;</code> åˆ›å»º <code>BFC</code> å®¹å™¨åï¼Œ<code>BFC</code> å®¹å™¨å†…éƒ¨å†…å®¹çš„å®½åº¦ä¸ä¼šå½±å“å®¹å™¨å®½åº¦ï¼›</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> duozhuavue </tag>
            
            <tag> BFC </tag>
            
            <tag> flexbox </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¶ˆå¤±çš„XXX</title>
      <link href="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/"/>
      <url>/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¶ˆå¤±çš„æ’­å®¢"><a href="#æ¶ˆå¤±çš„æ’­å®¢" class="headerlink" title="æ¶ˆå¤±çš„æ’­å®¢"></a>æ¶ˆå¤±çš„æ’­å®¢</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/boke.png" class="" title="å‰©ä½™ä»·å€¼"><center>2020å¹´å¬åˆ°ä¸€åŠè¢«ä¸‹æ¶çš„æ’­å®¢ã€‚</center><ul><li><a href="https://www.youtube.com/watch?v=ghx4l0Cp9o0">ã€051ã€‘ç˜Ÿç–«ã€è¯­è¨€å’Œå…·ä½“çš„äººï¼šä¸å†å²å­¦å®¶ç½—æ–°çš„èŠå¤©</a></li><li><a href="https://www.youtube.com/watch?v=mdTxI-H59K0">ã€å‰©ä½™æ¦¨å€¼ 023ã€‘åœ¨å·¨å¤§çš„ shock åï¼Œæˆ‘ä»¬æ‰€æ€è€ƒçš„ã€æ‰€åšçš„ä¸€åˆ‡éƒ½å°†ä¸æ­¤æœ‰å…³</a></li></ul><span id="more"></span><h1 id="æ¶ˆå¤±çš„äºº"><a href="#æ¶ˆå¤±çš„äºº" class="headerlink" title="æ¶ˆå¤±çš„äºº"></a>æ¶ˆå¤±çš„äºº</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/haohd.png" class="" title="(1)"><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/yzy.png" class="" title="(2)"><center>2020å¹´6æœˆ4å·ä¹‹åï¼Œä¸­å›½æ²¡æœ‰äº†éƒå¶å¤«å¦‡ã€‚</center><h1 id="æ¶ˆå¤±çš„ç¤ºå¨"><a href="#æ¶ˆå¤±çš„ç¤ºå¨" class="headerlink" title="æ¶ˆå¤±çš„ç¤ºå¨"></a>æ¶ˆå¤±çš„ç¤ºå¨</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/hk.png" class="" title="2019å¹´é¦™æ¸¯è¡—å¤´ç¤ºå¨æ¸¸è¡Œ"><center>åæ¥ç—…æ¯’æ¥äº†ã€‚</center><h1 id="æ¶ˆå¤±çš„æˆ¿æº"><a href="#æ¶ˆå¤±çš„æˆ¿æº" class="headerlink" title="æ¶ˆå¤±çš„æˆ¿æº"></a>æ¶ˆå¤±çš„æˆ¿æº</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/dk.png" class="" title="åœ¨è›‹å£³Appæœç´¢æˆ¿æºå¾—åˆ°çš„ç»“æœ"><center>ç§Ÿå®¢ã€æˆ¿ä¸œéƒ½æ˜¯å—å®³è€…ã€‚</center><h1 id="æ¶ˆå¤±çš„çˆ±"><a href="#æ¶ˆå¤±çš„çˆ±" class="headerlink" title="æ¶ˆå¤±çš„çˆ±"></a>æ¶ˆå¤±çš„çˆ±</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/lwl.png" class="" title="ææ–‡äº®åŒ»ç”Ÿæœ€åä¸€æ¡å¾®åš"><center>ä»–çˆ±èº«è¾¹çš„äººï¼Œä¸æ­¢å°å®¶ï¼ŒåŒ…æ‹¬å¤§å®¶ã€‚</center><h1 id="æ¶ˆå¤±çš„å‹è°Š"><a href="#æ¶ˆå¤±çš„å‹è°Š" class="headerlink" title="æ¶ˆå¤±çš„å‹è°Š"></a>æ¶ˆå¤±çš„å‹è°Š</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/TAX.png" class="" title="(1)"><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/TAX2.png" class="" title="(2)"><center>æ³¨å®šè¦å‘ç”Ÿå—ï¼Ÿ</center><h1 id="æ¶ˆå¤±çš„å´‡æ‹œ"><a href="#æ¶ˆå¤±çš„å´‡æ‹œ" class="headerlink" title="æ¶ˆå¤±çš„å´‡æ‹œ"></a>æ¶ˆå¤±çš„å´‡æ‹œ</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/my1.png" class="" title="å¹´åˆ"><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/my2.png" class="" title="å¹´æœ«"><center>é©¬äº‘ï¼šå˜äº†çš„ä¸æ˜¯æˆ‘</center><h1 id="æ¶ˆå¤±çš„çº¢é˜Ÿ"><a href="#æ¶ˆå¤±çš„çº¢é˜Ÿ" class="headerlink" title="æ¶ˆå¤±çš„çº¢é˜Ÿ"></a>æ¶ˆå¤±çš„çº¢é˜Ÿ</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/rck09.png" class="" title="9æœˆä»½"><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/rck12.png" class="" title="12æœˆä»½"><center>ç«ç®­ã€çº¢é˜Ÿã€ç«ç®­â€¦â€¦ï¼Œå¸Œæœ›ä¸æ˜¯å¾ªç¯</center><h1 id="æ¶ˆå¤±çš„éŸ³ä¹-äºº"><a href="#æ¶ˆå¤±çš„éŸ³ä¹-äºº" class="headerlink" title="æ¶ˆå¤±çš„éŸ³ä¹(äºº)"></a>æ¶ˆå¤±çš„éŸ³ä¹(äºº)</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/lz.png" class="" title="qqéŸ³ä¹å¾ˆæŠ±æ­‰"><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/lz2.png" class="" title="ç½‘æ˜“äº‘å¾ˆæŠ±æ­‰"><center>å¤§å®¶éƒ½å¾ˆæŠ±æ­‰ï¼Œæˆ‘ä¹ŸçŸ¥é“ä¸æ€ªä½ ä»¬</center><h1 id="æ¶ˆå¤±çš„è‡ªä¿¡"><a href="#æ¶ˆå¤±çš„è‡ªä¿¡" class="headerlink" title="æ¶ˆå¤±çš„è‡ªä¿¡"></a>æ¶ˆå¤±çš„è‡ªä¿¡</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/bzx.png" class="" title="æŠµåˆ¶åœ£è¯èŠ‚">]]></content>
      
      
      
        <tags>
            
            <tag> æ‚ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>styled-components + formå°é—®é¢˜</title>
      <link href="/2020/09/01/styled-components%20+%20form%E5%B0%8F%E9%97%AE%E9%A2%98/"/>
      <url>/2020/09/01/styled-components%20+%20form%E5%B0%8F%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>å¼‚å¸¸ä»£ç ï¼š</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¡¨å•ä¸èƒ½è¾“å…¥å€¼</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">SignUp</span> = props =&gt; {</span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">Wrapper</span> = styled.<span class="property">div</span><span class="string">`</span></span><br><span class="line"><span class="string">    border: 1px solid #f5f4f0;</span></span><br><span class="line"><span class="string">    max-width: 500px;</span></span><br><span class="line"><span class="string">    padding: 1em;</span></span><br><span class="line"><span class="string">    margin: 0 auto;</span></span><br><span class="line"><span class="string">  `</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">Form</span> = styled.<span class="property">form</span><span class="string">`</span></span><br><span class="line"><span class="string">    label,</span></span><br><span class="line"><span class="string">    input {</span></span><br><span class="line"><span class="string">      display: block;</span></span><br><span class="line"><span class="string">      line-height: 2em;</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    input {</span></span><br><span class="line"><span class="string">      width: 100%;</span></span><br><span class="line"><span class="string">      margin-bottom: 1em;</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">  `</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Wrapper</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Sign Up<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Form</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onSubmit</span>=<span class="string">{...}</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">"username"</span>&gt;</span>Username:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">"email"</span>&gt;</span>Email:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">"password"</span>&gt;</span>Password:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Wrapper</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure><p>å°† <code>styled-components</code> éƒ¨åˆ†çš„ä»£ç æ”¾åœ¨ç»„ä»¶çš„<strong>å¤–éƒ¨</strong>ï¼Œä»£ç å°±æ­£å¸¸äº†â€¦</p><p><a href="https://styled-components.com/docs/basics#define-styled-components-outside-of-the-render-method">å®˜æ–¹è¯´æ˜</a></p><blockquote><p>It is important to define your styled components outside of the render method, otherwise it will be recreated on every single render pass. Defining a styled component within the render method will thwart caching and drastically slow down rendering speed, and should be avoided.</p></blockquote><p>å°¤å…¶åœ¨å¤„ç†è¡¨å•æ—¶ï¼Œå¦‚æœæ¯è¾“å…¥ä¸€ä¸ªå­—ç¬¦å°±<code>re-render</code>ç»„ä»¶ï¼Œçš„ç¡®ä¼šå¾ˆå¥‡æ€ªã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> React </tag>
            
            <tag> styled-components </tag>
            
            <tag> è¡¨å• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç«™æ€§èƒ½æå‡æœ€ä½³å®è·µå››</title>
      <link href="/2020/06/30/%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E5%9B%9B/"/>
      <url>/2020/06/30/%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E5%9B%9B/</url>
      
        <content type="html"><![CDATA[<p><a href="https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink">https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink</a></p><ul><li>Content</li><li>Server</li><li>Cookie</li><li>CSS</li><li>JavaScript</li><li>Images</li><li>Mobile</li></ul><p>åŸæ–‡ä»ä¸ƒä¸ªæ–¹é¢æ€»ç»“ç½‘ç«™æ€§èƒ½æå‡ã€‚</p><p>æœ¬ç¯‡æ€»ç»“Javascriptã€Imagesæ–¹é¢ã€‚</p><h2 id="Javascript"><a href="#Javascript" class="headerlink" title="Javascript"></a>Javascript</h2><h3 id="Put-Scripts-at-Bottom-è„šæœ¬æ”¾åœ¨åº•éƒ¨"><a href="#Put-Scripts-at-Bottom-è„šæœ¬æ”¾åœ¨åº•éƒ¨" class="headerlink" title="Put Scripts at Bottom è„šæœ¬æ”¾åœ¨åº•éƒ¨"></a><a href="https://developer.yahoo.com/performance/rules.html#js_bottom">Put Scripts at Bottom</a> è„šæœ¬æ”¾åœ¨åº•éƒ¨</h3><p>è„šæœ¬ä¼šé˜»å¡å¹¶è¡Œä¸‹è½½</p><p><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1.4">HTTP / 1.1è§„èŒƒ</a>å»ºè®®æµè§ˆå™¨æ¯ä¸ªä¸»æœºåå¹¶è¡Œä¸‹è½½æœ€å¤šä¸¤ä¸ªç»„ä»¶</p><p>å¦‚æœæœ‰å¤šä¸ªä¸»æœºåæä¾›<strong>å›¾åƒ</strong>ï¼Œåˆ™å¯ä»¥å¹¶è¡Œè¿›è¡Œä¸¤ä¸ªä»¥ä¸Šçš„ä¸‹è½½ï¼Œä½†æ˜¯åœ¨ä¸‹è½½<strong>è„šæœ¬</strong>æ—¶ï¼Œå³ä½¿ä½¿ç”¨ä¸åŒçš„ä¸»æœºåï¼Œæµè§ˆå™¨ä¹Ÿä¸ä¼šå¯åŠ¨ä»»ä½•å…¶ä»–ä¸‹è½½</p><p>deferè„šæœ¬è¡¨ç¤ºè„šæœ¬ä¸åŒ…å«document.writeï¼Œæµè§ˆå™¨å¯ä»¥ç»§ç»­æ¸²æŸ“</p><p>é€šå¸¸ä¸€ä¸ªè„šæœ¬å¦‚æœå¯ä»¥deferedï¼Œé‚£å®ƒä¹Ÿå¯ä»¥ç§»åŠ¨åˆ°é¡µé¢åº•éƒ¨</p><h3 id="Make-JavaScript-and-CSS-External-ä»å¤–éƒ¨å¼•ç”¨jsè„šæœ¬å’Œcssæ–‡ä»¶"><a href="#Make-JavaScript-and-CSS-External-ä»å¤–éƒ¨å¼•ç”¨jsè„šæœ¬å’Œcssæ–‡ä»¶" class="headerlink" title="Make JavaScript and CSS External ä»å¤–éƒ¨å¼•ç”¨jsè„šæœ¬å’Œcssæ–‡ä»¶"></a><a href="https://developer.yahoo.com/performance/rules.html#external">Make JavaScript and CSS External</a> ä»å¤–éƒ¨å¼•ç”¨jsè„šæœ¬å’Œcssæ–‡ä»¶</h3><p>åœ¨HTMLæ–‡æ¡£ä¸­å†…åµŒçš„JavaScriptå’ŒCSSä¼šåœ¨æ¯æ¬¡è¯·æ±‚HTMLæ–‡æ¡£æ—¶è¢«ä¸‹è½½</p><p>ä½¿ç”¨å¤–éƒ¨æ–‡ä»¶é€šå¸¸ä¼šäº§ç”Ÿæ›´å¿«çš„é¡µé¢ï¼Œå› ä¸ºJavaScriptå’ŒCSSæ–‡ä»¶è¢«æµè§ˆå™¨ç¼“å­˜</p><p>å¦‚æœJavaScriptå’ŒCSSåœ¨å¤–éƒ¨æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”è¢«æµè§ˆå™¨ç¼“å­˜ï¼Œåˆ™åœ¨ä¸å¢åŠ HTTPè¯·æ±‚æ¬¡æ•°çš„æƒ…å†µä¸‹å‡å°äº†HTMLæ–‡æ¡£çš„å¤§å°</p><p>å¦‚æœç”¨æˆ·æ¯æ¬¡ä¼šè¯éƒ½æœ‰å¤šä¸ªé¡µé¢æµè§ˆï¼Œå¹¶ä¸”è®¸å¤šé¡µé¢é‡å¤ä½¿ç”¨ç›¸åŒçš„è„šæœ¬å’Œæ ·å¼è¡¨ï¼Œé‚£ä¹ˆç¼“å­˜å¤–éƒ¨æ–‡ä»¶çš„æ½œåœ¨å¥½å¤„å°±æ›´å¤§</p><p>å¯¹äºä¸»é¡µï¼Œè¿™ç§æ¯æ¬¡ä¼šè¯åªè®¿é—®ä¸€æ¬¡çš„é¡µé¢ï¼Œå°†jså’Œcsså†…è”å¯èƒ½æ›´å¥½</p><p>ä¸€ä¸ªæ ·ä¾‹ï¼š</p><p>å¯¹äºè®¸å¤šæµè§ˆé¡µé¢çš„ç¬¬ä¸€ä¸ªé¡µé¢ï¼Œå†…è”jså’Œcssï¼ˆå‡å°‘è¯·æ±‚æ¬¡æ•°ï¼Œè¯¥é¡µé¢<strong>åŠ è½½å®ŒååŠ¨æ€ä¸‹è½½</strong>å¤–éƒ¨æ–‡ä»¶ï¼Œéšåè®¿é—®çš„é¡µé¢ä¼šä½¿ç”¨è¿™äº›<strong>ç¼“å­˜</strong></p><h3 id="Minify-JavaScript-and-CSS-å‹ç¼©JavaScriptå’ŒCSS"><a href="#Minify-JavaScript-and-CSS-å‹ç¼©JavaScriptå’ŒCSS" class="headerlink" title="Minify JavaScript and CSS å‹ç¼©JavaScriptå’ŒCSS"></a><a href="https://developer.yahoo.com/performance/rules.html#minify">Minify JavaScript and CSS</a> å‹ç¼©JavaScriptå’ŒCSS</h3><p>å‹ç¼©ä»£ç æŒ‡çš„æ˜¯åˆ é™¤ä¸å¿…è¦çš„ä»£ç ï¼Œå‡å°ä»£ç ä½“ç§¯ï¼ˆå› æ­¤å¯ä»¥æå‡å“åº”æ€§èƒ½</p><p>æ··æ·†ä»£ç ä¹Ÿæ˜¯å‡å°ä»£ç ä½“ç§¯çš„æ–¹æ³•ï¼Œä½†æ˜¯is more risky</p><p>é™¤äº†å‹ç¼©å¤–éƒ¨è„šæœ¬å’Œæ ·å¼ä¹‹å¤–ï¼Œå¯ä»¥å¹¶ä¸”ä¹Ÿåº”è¯¥å‹ç¼©å†…è”çš„<code>&lt;script&gt;</code>å’Œ<code>&lt;style&gt;</code>å—ã€‚</p><p>å³ä½¿è„šæœ¬å’Œcssæ–‡ä»¶å·²ç»è¢«gzipäº†ï¼Œå‹ç¼©è¿˜èƒ½è®©å®ƒä»¬çš„ä½“ç§¯å‡å°‘5%ä»¥ä¸Š</p><p><a href="https://tool.oschina.net/jscompress">åœ¨çº¿å‹ç¼©å·¥å…·</a></p><span id="more"></span><h3 id="Remove-Duplicate-Scripts-åˆ é™¤é‡å¤è„šæœ¬"><a href="#Remove-Duplicate-Scripts-åˆ é™¤é‡å¤è„šæœ¬" class="headerlink" title="Remove Duplicate Scripts åˆ é™¤é‡å¤è„šæœ¬"></a><a href="https://developer.yahoo.com/performance/rules.html#js_dupes">Remove Duplicate Scripts</a> åˆ é™¤é‡å¤è„šæœ¬</h3><p>é‡å¤è„šæœ¬å‡ºç°çš„ä¸¤ä¸ªå…³é”®å› ç´ ï¼š</p><ul><li>è„šæœ¬æ•°é‡å¤ªå¤š</li><li>å›¢é˜Ÿäººæ•°å¤ªå¤š</li></ul><p>é‡å¤è„šæœ¬å› ä¸ºæµªè´¹HTTPè¯·æ±‚å’ŒJsæ‰§è¡Œè€ŒæŸå®³æ€§èƒ½</p><p>é¿å…æ–¹æ³•ï¼š</p><ul><li><p>ä½¿ç”¨scriptæ ‡ç­¾å¼•å…¥jsè„šæœ¬ï¼ˆä¸éƒ½æ˜¯è¿™ä¹ˆåšçš„å—ï¼Ÿ</p></li><li><p>phpä»£ç </p><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">insertScript</span>(<span class="string">"menu.js"</span>) <span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure></li></ul><h3 id="Minimize-DOM-Access-æœ€å°åŒ–DOMè®¿é—®"><a href="#Minimize-DOM-Access-æœ€å°åŒ–DOMè®¿é—®" class="headerlink" title="Minimize DOM Access æœ€å°åŒ–DOMè®¿é—®"></a><a href="https://developer.yahoo.com/performance/rules.html#dom_access">Minimize DOM Access</a> æœ€å°åŒ–DOMè®¿é—®</h3><p>ä½¿ç”¨JavaScriptè®¿é—®DOMå…ƒç´ çš„é€Ÿåº¦å¾ˆæ…¢ï¼Œå› æ­¤ï¼Œä¸ºäº†ä½¿é¡µé¢æ›´å…·å“åº”æ€§ï¼Œåº”è¯¥ï¼š</p><ul><li><p>ç¼“å­˜å¯¹å·²è®¿é—®å…ƒç´ çš„å¼•ç”¨</p></li><li><p>â€œç¦»çº¿â€æ›´æ–°èŠ‚ç‚¹ï¼Œç„¶åå°†å…¶æ·»åŠ åˆ°æ ‘ä¸­</p></li><li><p>é¿å…ä½¿ç”¨JavaScriptä¿®å¤å¸ƒå±€</p></li></ul><h3 id="Develop-Smart-Event-Handlers-å¼€å‘èªæ˜çš„äº‹ä»¶å¤„ç†ç¨‹åº"><a href="#Develop-Smart-Event-Handlers-å¼€å‘èªæ˜çš„äº‹ä»¶å¤„ç†ç¨‹åº" class="headerlink" title="Develop Smart Event Handlers å¼€å‘èªæ˜çš„äº‹ä»¶å¤„ç†ç¨‹åº"></a><a href="https://developer.yahoo.com/performance/rules.html#events">Develop Smart Event Handlers</a> å¼€å‘èªæ˜çš„äº‹ä»¶å¤„ç†ç¨‹åº</h3><p>å¦‚æœdivä¸­æœ‰10ä¸ªæŒ‰é’®ï¼Œåˆ™ä»…å°†ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºé™„åŠ åˆ°divåŒ…è£…å™¨ä¸Šï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªæŒ‰é’®é™„åŠ ä¸€ä¸ªå¤„ç†ç¨‹åº</p><p>æ— éœ€ç­‰å¾…onloadäº‹ä»¶å³å¯å¼€å§‹å¯¹DOMæ ‘è¿›è¡Œæ“ä½œ</p><p>DOMContentLoadedå¯èƒ½æ›´é€‚åˆä½¿ç”¨</p><h2 id="Images"><a href="#Images" class="headerlink" title="Images"></a>Images</h2><h3 id="Optimize-Images-ä¼˜åŒ–å›¾ç‰‡"><a href="#Optimize-Images-ä¼˜åŒ–å›¾ç‰‡" class="headerlink" title="Optimize Images ä¼˜åŒ–å›¾ç‰‡"></a><a href="https://developer.yahoo.com/performance/rules.html#opt_images">Optimize Images</a> ä¼˜åŒ–å›¾ç‰‡</h3><p>æ£€æŸ¥GIFï¼Œçœ‹çœ‹å®ƒä»¬æ˜¯å¦ä½¿ç”¨äº†ä¸å›¾åƒä¸­é¢œè‰²æ•°é‡ç›¸å¯¹åº”çš„è°ƒè‰²æ¿å¤§å°</p><p>å°è¯•å°†GIFsè½¬æ¢ä¸ºPNGs</p><p>ä½¿ç”¨<a href="https://pmt.sourceforge.io/pngcrush/">pngcrush</a>å‹ç¼©PNG</p><p>ä½¿ç”¨<a href="https://jpegclub.org/">jpegtran</a>å¤„ç†JPEG</p><h3 id="Optimize-CSS-Sprites-ä¼˜åŒ–CSS-Sprites"><a href="#Optimize-CSS-Sprites-ä¼˜åŒ–CSS-Sprites" class="headerlink" title="Optimize CSS Sprites ä¼˜åŒ–CSS Sprites"></a><a href="https://developer.yahoo.com/performance/rules.html#opt_sprites">Optimize CSS Sprites</a> ä¼˜åŒ–CSS Sprites</h3><p>å°†spriteä¸­çš„å›¾åƒæ°´å¹³æ’åˆ—ï¼Œè€Œä¸æ˜¯å‚ç›´æ’åˆ—ï¼Œé€šå¸¸ä¼šç”Ÿæˆè¾ƒå°çš„æ–‡ä»¶</p><p>å°†spriteä¸­ç›¸è¿‘çš„é¢œè‰²ç»„åˆï¼Œæœ‰åŠ©äºä¿æŒè¾ƒä½çš„é¢œè‰²æ•°é‡</p><p>â€œè¦mobile-friendlyâ€ï¼Œä¸è¦åœ¨spriteä¸­çš„å›¾åƒä¹‹é—´ç•™ä¸‹å¤§çš„ç©ºéš™</p><h3 id="Do-Not-Scale-Images-in-HTML-ä¸åœ¨HTMLä¸­ç¼©æ”¾å›¾ç‰‡"><a href="#Do-Not-Scale-Images-in-HTML-ä¸åœ¨HTMLä¸­ç¼©æ”¾å›¾ç‰‡" class="headerlink" title="Do Not Scale Images in HTML ä¸åœ¨HTMLä¸­ç¼©æ”¾å›¾ç‰‡"></a><a href="https://developer.yahoo.com/performance/rules.html#no_scale">Do Not Scale Images in HTML</a> ä¸åœ¨HTMLä¸­ç¼©æ”¾å›¾ç‰‡</h3><p>éœ€è¦å¤šå¤§çš„å›¾ç‰‡å°±ä½¿ç”¨å¤šå¤§çš„å›¾ç‰‡</p><p>ä¾‹å­ï¼š</p><p>éœ€è¦ä¸€ä¸ª100x100çš„å›¾ç‰‡ï¼Œä¸è¦æ¥ä¸ª500x500çš„å›¾ç‰‡ç„¶åå»å‹ç¼©å®ƒ</p><h3 id="Make-favicon-ico-Small-and-Cacheable-å›¾æ ‡è¦å°ã€å¯ç¼“å­˜"><a href="#Make-favicon-ico-Small-and-Cacheable-å›¾æ ‡è¦å°ã€å¯ç¼“å­˜" class="headerlink" title="Make favicon.ico Small and Cacheable å›¾æ ‡è¦å°ã€å¯ç¼“å­˜"></a><a href="https://developer.yahoo.com/performance/rules.html#favicon">Make favicon.ico Small and Cacheable</a> å›¾æ ‡è¦å°ã€å¯ç¼“å­˜</h3><p>favicon.ico å³ä½¿ä½ ä¸å…³å¿ƒå®ƒï¼Œæµè§ˆå™¨ä¹Ÿä¼šè¯·æ±‚å®ƒï¼Œæœ€å¥½ä¸è¦ä½¿ç”¨404å“åº”å®ƒ</p><p>ç”±äºå®ƒåœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œå› æ­¤æ¯æ¬¡è¯·æ±‚æ—¶éƒ½ä¼šå‘é€cookie</p><p>å®ƒè¿˜ä¼šå¹²æ‰°ä¸‹è½½é¡ºåº</p><p>ä¸ºäº†å…‹æœå¼Šç«¯ï¼š</p><ul><li>ä¿è¯å®ƒå°½å¯èƒ½å°ï¼Œæœ€å¥½å°äº1K</li><li>æ ¹æ®éœ€è¦è®¾ç½®Expiresè¿‡æœŸå¤´ï¼ˆå›¾æ ‡çš„åå­—ä¸èƒ½æ”¹</li></ul><p><a href="http://www.imagemagick.org/">Imagemagick</a> å¯ä»¥å¸®åŠ©ä½ åˆ›å»ºå°å›¾æ ‡</p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> ç¿»è¯‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç«™æ€§èƒ½æå‡æœ€ä½³å®è·µä¸‰</title>
      <link href="/2020/06/30/%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B8%89/"/>
      <url>/2020/06/30/%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B8%89/</url>
      
        <content type="html"><![CDATA[<p><a href="https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink">https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink</a></p><ul><li>Content</li><li>Server</li><li>Cookie</li><li>CSS</li><li>JavaScript</li><li>Images</li><li>Mobile</li></ul><p>åŸæ–‡ä»ä¸ƒä¸ªæ–¹é¢æ€»ç»“ç½‘ç«™æ€§èƒ½æå‡ã€‚</p><p>æœ¬ç¯‡æ€»ç»“Cookieã€CSSã€Mobileæ–¹é¢ã€‚</p><h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><h3 id="Reduce-Cookie-Size-å‡å°cookieå¤§å°"><a href="#Reduce-Cookie-Size-å‡å°cookieå¤§å°" class="headerlink" title="Reduce Cookie Size å‡å°cookieå¤§å°"></a><a href="https://developer.yahoo.com/performance/rules.html#cookie_size">Reduce Cookie Size</a> å‡å°cookieå¤§å°</h3><p>ä½¿ç”¨HTTP cookieçš„åŸå› æœ‰å¤šç§ï¼Œä¾‹å¦‚èº«ä»½éªŒè¯å’Œä¸ªæ€§åŒ–</p><p>æœåŠ¡å™¨å’Œæµè§ˆå™¨é€šè¿‡HTTP headersäº¤æ¢æœ‰å…³cookieçš„ä¿¡æ¯</p><p>å°½å¯èƒ½å‡å°cookieçš„å¤§å°ï¼Œæœ‰åŠ©äºå‡å°‘å¯¹ç”¨æˆ·å“åº”æ—¶é—´çš„å½±å“</p><h3 id="Use-Cookie-Free-Domains-for-Components-å°½å¯èƒ½ä¸ä½¿ç”¨cookie"><a href="#Use-Cookie-Free-Domains-for-Components-å°½å¯èƒ½ä¸ä½¿ç”¨cookie" class="headerlink" title="Use Cookie-Free Domains for Components å°½å¯èƒ½ä¸ä½¿ç”¨cookie"></a><a href="https://developer.yahoo.com/performance/rules.html#cookie_free">Use Cookie-Free Domains for Components</a> å°½å¯èƒ½ä¸ä½¿ç”¨cookie</h3><p>ç¡®ä¿ä½¿ç”¨æ— Cookieçš„è¯·æ±‚æ¥è¯·æ±‚é™æ€ç»„ä»¶</p><p>åˆ›å»ºä¸€ä¸ªå­åŸŸå¹¶åœ¨å…¶ä¸­æ‰˜ç®¡æ‰€æœ‰é™æ€ç»„ä»¶</p><p>ä¸€äº›ä»£ç†å¯èƒ½æ‹’ç»ç¼“å­˜å¸¦cookieçš„è¯·æ±‚å¾—åˆ°çš„ç»„ä»¶</p><h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><h3 id="Put-Stylesheets-at-Top-æ ·å¼æ–‡ä»¶æ”¾åˆ°é¡¶éƒ¨"><a href="#Put-Stylesheets-at-Top-æ ·å¼æ–‡ä»¶æ”¾åˆ°é¡¶éƒ¨" class="headerlink" title="Put Stylesheets at Top æ ·å¼æ–‡ä»¶æ”¾åˆ°é¡¶éƒ¨"></a><a href="https://developer.yahoo.com/performance/rules.html#css_top">Put Stylesheets at Top</a> æ ·å¼æ–‡ä»¶æ”¾åˆ°é¡¶éƒ¨</h3><p>å°†æ ·å¼è¡¨æ”¾åˆ°HEADå¯ä»¥è®©é¡µé¢é€æ­¥å‘ˆç°</p><h3 id="Avoid-CSS-Expressions-é¿å…ä½¿ç”¨CSSè¡¨è¾¾å¼"><a href="#Avoid-CSS-Expressions-é¿å…ä½¿ç”¨CSSè¡¨è¾¾å¼" class="headerlink" title="Avoid CSS Expressions é¿å…ä½¿ç”¨CSSè¡¨è¾¾å¼"></a><a href="https://developer.yahoo.com/performance/rules.html#css_expressions">Avoid CSS Expressions</a> é¿å…ä½¿ç”¨CSSè¡¨è¾¾å¼</h3><p>cssè¡¨è¾¾å¼å¯ä»¥åŠ¨æ€çš„è®¾ç½®csså±æ€§</p><span id="more"></span><p>ä½†æ˜¯å…¶è°ƒç”¨æ¬¡æ•°è¿‡å¤šï¼Œä¾‹å¦‚é¼ æ ‡åœ¨é¡µé¢ä¸Šç§»åŠ¨ã€æ”¾å¤§ç¼©å°äº†çª—å£ã€é¡µé¢æ»šåŠ¨ç­‰</p><p>å¯ä»¥ä½¿ç”¨event handlersä½œä¸ºæ›¿ä»£</p><h3 id="Choose-Over-import-ä½¿ç”¨linkè€Œä¸æ˜¯-import"><a href="#Choose-Over-import-ä½¿ç”¨linkè€Œä¸æ˜¯-import" class="headerlink" title="Choose <link> Over @import ä½¿ç”¨linkè€Œä¸æ˜¯@import"></a><a href="https://developer.yahoo.com/performance/rules.html#csslink">Choose <code>&lt;link&gt;</code> Over @import</a> ä½¿ç”¨linkè€Œä¸æ˜¯@import</h3><p>In IE <code>@import</code> behaves the same as using <code>&lt;link&gt;</code> at the bottom of the page, so itâ€™s best not to use it.</p><h3 id="Avoid-Filters-é¿å…ä½¿ç”¨Filters"><a href="#Avoid-Filters-é¿å…ä½¿ç”¨Filters" class="headerlink" title="Avoid Filters é¿å…ä½¿ç”¨Filters"></a><a href="https://developer.yahoo.com/performance/rules.html#no_filters">Avoid Filters</a> é¿å…ä½¿ç”¨Filters</h3><p>IEä¸“æœ‰çš„AlphaImageLoaderè¿‡æ»¤å™¨æ—¨åœ¨è§£å†³IEç‰ˆæœ¬&lt;7çš„åŠé€æ˜çœŸå½©è‰²PNGçš„é—®é¢˜ã€‚è¯¥è¿‡æ»¤å™¨çš„é—®é¢˜æ˜¯ï¼Œå½“å›¾åƒè¢«ä¸‹è½½æ—¶ï¼Œå®ƒä¼šé˜»æ­¢æ¸²æŸ“å¹¶å†»ç»“æµè§ˆå™¨ã€‚å®ƒè¿˜ä¼šå¢åŠ å†…å­˜æ¶ˆè€—ï¼Œè€Œä¸”æ˜¯æŒ‰æ¯ä¸ªå…ƒç´ åº”ç”¨ï¼Œè€Œä¸æ˜¯æŒ‰æ¯å¼ å›¾ç‰‡åº”ç”¨ï¼Œæ‰€ä»¥é—®é¢˜ä¼šæˆå€å¢åŠ ã€‚</p><p>æœ€å¥½çš„åŠæ³•æ˜¯å®Œå…¨é¿å…ä½¿ç”¨AlphaImageLoaderï¼Œè€Œä½¿ç”¨ä¼˜é›…é™çº§çš„PNG8ä»£æ›¿ï¼Œè¿™äº›åœ¨IEä¸­éƒ½æ˜¯å¯ä»¥çš„ã€‚å¦‚æœä½ å®åœ¨éœ€è¦AlphaImageLoaderï¼Œè¯·ä½¿ç”¨<code>_filter</code>ï¼Œä»¥å…å½±å“IE7ä»¥ä¸Šç”¨æˆ·ã€‚</p><h2 id="Mobile"><a href="#Mobile" class="headerlink" title="Mobile"></a>Mobile</h2><h3 id="Keep-Components-Under-25-KB-ç»„ä»¶ä¸è¶…è¿‡25KB"><a href="#Keep-Components-Under-25-KB-ç»„ä»¶ä¸è¶…è¿‡25KB" class="headerlink" title="Keep Components Under 25 KB ç»„ä»¶ä¸è¶…è¿‡25KB"></a><a href="https://developer.yahoo.com/performance/rules.html#under25">Keep Components Under 25 KB</a> ç»„ä»¶ä¸è¶…è¿‡25KB</h3><p>æ­¤é™åˆ¶ä¸ä»¥ä¸‹äº‹å®æœ‰å…³ï¼šiPhoneä¸ä¼šç¼“å­˜å¤§äº25Kçš„ç»„ä»¶ã€‚</p><p>è¯·æ³¨æ„ï¼Œè¿™æ˜¯<strong>æœªå‹ç¼©çš„å¤§å°</strong>ã€‚</p><p>ç¼©å°åœ¨è¿™é‡Œéå¸¸é‡è¦ï¼Œå› ä¸ºä»…ä½¿ç”¨gzipå¯èƒ½è¿˜ä¸å¤Ÿã€‚</p><h3 id="Pack-Components-Into-a-Multipart-Document-æ‰“åŒ…ç»„ä»¶"><a href="#Pack-Components-Into-a-Multipart-Document-æ‰“åŒ…ç»„ä»¶" class="headerlink" title="Pack Components Into a Multipart Document æ‰“åŒ…ç»„ä»¶"></a><a href="https://developer.yahoo.com/performance/rules.html#multipart">Pack Components Into a Multipart Document</a> æ‰“åŒ…ç»„ä»¶</h3><p>å°†ç»„ä»¶æ‰“åŒ…åˆ°ä¸€ä¸ªå¤šéƒ¨åˆ†çš„æ–‡æ¡£ä¸­ï¼Œå°±åƒä¸€å°å¸¦æœ‰é™„ä»¶çš„ç”µå­é‚®ä»¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ <strong>ç”¨ä¸€ä¸ªHTTPè¯·æ±‚è·å–å¤šä¸ªç»„ä»¶</strong></p><p>HTTP requests are expensiveï¼</p><p>ä½¿ç”¨è¿™é¡¹æŠ€æœ¯æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥ç”¨æˆ·ä»£ç†æ˜¯å¦æ”¯æŒï¼ˆiphoneå°±ä¸æ”¯æŒ</p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> ç¿»è¯‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç«™æ€§èƒ½æå‡æœ€ä½³å®è·µäºŒ</title>
      <link href="/2020/06/29/%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%BA%8C/"/>
      <url>/2020/06/29/%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%BA%8C/</url>
      
        <content type="html"><![CDATA[<p><a href="https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink">https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink</a></p><ul><li>Content</li><li>Server</li><li>Cookie</li><li>CSS</li><li>JavaScript</li><li>Images</li><li>Mobile</li></ul><p>åŸæ–‡ä»ä¸ƒä¸ªæ–¹é¢æ€»ç»“ç½‘ç«™æ€§èƒ½æå‡ã€‚</p><p>æœ¬ç¯‡æ€»ç»“Serveræ–¹é¢ã€‚</p><h3 id="Use-a-Content-Delivery-Network-CDN-ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œ"><a href="#Use-a-Content-Delivery-Network-CDN-ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œ" class="headerlink" title="Use a Content Delivery Network (CDN)ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œ"></a><a href="https://developer.yahoo.com/performance/rules.html#cdn">Use a Content Delivery Network (CDN)</a>ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œ</h3><p>ç”¨æˆ·åˆ°æœåŠ¡å™¨çš„è·ç¦»ä¼šå½±å“å“åº”æ—¶é—´ï¼Œæ¯”å¦‚å½“æˆ‘ä»¬è®¿é—®ç¾å›½çš„æœåŠ¡å™¨å’Œä¸­å›½çš„æœåŠ¡å™¨<br>ç”¨æˆ·80%-90%çš„<strong>å“åº”æ—¶é—´</strong>ç”¨æ¥ä¸‹è½½é¡µé¢ä¸Šçš„å†…å®¹<br>ä¸ºäº†åŠ é€Ÿè¿™ä¸ªï¼š</p><ul><li><p>ä¸è¦è½»æ˜“å°è¯•å°†webåº”ç”¨æ”¹ä¸ºåˆ†å¸ƒå¼æ¶æ„</p></li><li><p>å¯ä»¥å°è¯•ä½¿ç”¨CDNï¼Œå°†é™æ€å†…å®¹åˆ†æ•£ï¼ˆåˆ‡æ¢åˆ°CDNæ˜¯ä¸ªç›¸å¯¹ç®€å•çš„ä»£ç å˜åŒ–ï¼Œå°†æå¤§åœ°æé«˜ç½‘ç«™é€Ÿåº¦</p></li></ul><p>ä¸€ä¸ªå†…å®¹åˆ†å‘ç½‘ç»œæ˜¯<strong>åˆ†å¸ƒåœ¨å¤šåœ°çš„æœåŠ¡å™¨é›†åˆ</strong>ï¼Œå¯ä»¥æ›´æœ‰æ•ˆåœ°å‘ç”¨æˆ·æä¾›å†…å®¹</p><h3 id="Add-Expires-or-Cache-Control-Headeræ·»åŠ Expiresæˆ–Cache-Controlå¤´"><a href="#Add-Expires-or-Cache-Control-Headeræ·»åŠ Expiresæˆ–Cache-Controlå¤´" class="headerlink" title="Add Expires or Cache-Control Headeræ·»åŠ Expiresæˆ–Cache-Controlå¤´"></a><a href="https://developer.yahoo.com/performance/rules.html#expires">Add Expires or Cache-Control Header</a>æ·»åŠ Expiresæˆ–Cache-Controlå¤´</h3><ol><li>å¯¹äºé™æ€ç»„ä»¶ï¼Œè®¾ç½®ä¸€ä¸ªé•¿æœŸçš„Expireså¤´ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚â€œæ°¸ä¸è¿‡æœŸâ€</li><li>å¯¹äºåŠ¨æ€ç»„ä»¶ï¼Œä½¿ç”¨é€‚å½“çš„Cache-Controlå¤´ï¼Œæ¥å¸®åŠ©æµè§ˆå™¨æœ‰æ¡ä»¶çš„è¿›è¡Œè¯·æ±‚</li></ol><p>ç½‘é¡µè¢«é¦–æ¬¡è®¿é—®æ—¶éœ€è¦å¤§é‡çš„HTTPè¯·æ±‚ï¼Œé€šè¿‡ä½¿ç”¨Expireså¤´ï¼Œå¯ä»¥ä½¿è¯·æ±‚è¿‡çš„ç»„ä»¶<u>å¯ç¼“å­˜</u>ï¼Œé¿å…åç»­è®¿é—®æ—¶çš„é‡å¤è¯·æ±‚ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªæ“ä½œæ˜¯å¯¹åç»­çš„è¯·æ±‚æœ‰å½±å“</p><p>å¯¹äºæ€§èƒ½çš„æå‡ï¼Œå–å†³ä½ å¯¹è¿™ä¸ªç½‘ç«™çš„è®¿é—®é¢‘ç‡</p><p>WebæœåŠ¡å™¨åœ¨<strong>HTTPå“åº”</strong>ä¸­æ·»åŠ çš„Expireså¤´å‘Šè¯‰å®¢æˆ·ç«¯å¯ä»¥å°†ç»„ä»¶ç¼“å­˜å¤šé•¿æ—¶é—´</p><p>å¦‚æœä½¿ç”¨äº†é•¿æœŸçš„Expireså¤´ï¼Œå½“ç»„ä»¶å‘ç”Ÿæ”¹å˜æ—¶ï¼Œç»„ä»¶ååº”è¯¥æ”¹å˜ï¼ˆæ„å»ºé˜¶æ®µå¤„ç†ï¼šå°†ç»„ä»¶ç‰ˆæœ¬å·åŠ åˆ°ç»„ä»¶åä¸­</p><h3 id="Gzip-Componentså‹ç¼©ç»„ä»¶"><a href="#Gzip-Componentså‹ç¼©ç»„ä»¶" class="headerlink" title="Gzip Componentså‹ç¼©ç»„ä»¶"></a><a href="https://developer.yahoo.com/performance/rules.html#gzip">Gzip Components</a>å‹ç¼©ç»„ä»¶</h3><p>é€šè¿‡<strong>å‹ç¼©HTTPå“åº”</strong>æ¥å‡å°‘å“åº”æ—¶é—´</p><span id="more"></span><p>HTTPè¯·æ±‚å¤´ä¸­è¦æ·»åŠ </p><figure class="highlight http"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Accept-Encoding</span><span class="punctuation">: </span>gzip, deflate</span><br></pre></td></tr></tbody></table></figure><p>æœåŠ¡å™¨æ ¹æ®ä¸Šé¢åˆ—å‡ºçš„æ–¹æ³•ä¹‹ä¸€å‹ç¼©å“åº”ï¼Œå¹¶åœ¨å“åº”å¤´ä¸­æ·»åŠ ä¸‹é¢çš„å­—æ®µæé†’å®¢æˆ·ç«¯</p><figure class="highlight http"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Content-Encoding</span><span class="punctuation">: </span>gzip</span><br></pre></td></tr></tbody></table></figure><p>æœåŠ¡å™¨æ ¹æ®æ–‡ä»¶ç±»å‹é€‰æ‹©è¦å‹ç¼©çš„å†…å®¹ï¼Œä½†é€šå¸¸éå¸¸æœ‰é™</p><p>ä»»ä½•æ–‡æœ¬ç±»å‹çš„å“åº”éƒ½å€¼å¾—å‹ç¼©</p><p>å›¾ç‰‡å’ŒPDFä¸åº”è¯¥å‹ç¼©ï¼ˆå› ä¸ºå·²ç»å‹ç¼©è¿‡äº†</p><p>å‹ç¼©å°½å¯èƒ½å¤šçš„æ–‡ä»¶ç±»å‹æ˜¯å‡å°‘é¡µé¢é‡é‡page weightï¼ŒåŠ é€Ÿç”¨æˆ·ä½“éªŒçš„ç®€å•æ–¹æ³•</p><h3 id="Configure-ETagsé…ç½®å®ä½“æ ‡ç­¾"><a href="#Configure-ETagsé…ç½®å®ä½“æ ‡ç­¾" class="headerlink" title="Configure ETagsé…ç½®å®ä½“æ ‡ç­¾"></a><a href="https://developer.yahoo.com/performance/rules.html#etags">Configure ETags</a>é…ç½®å®ä½“æ ‡ç­¾</h3><p>å½“è¦ç¡®å®šç¼“å­˜çš„å†…å®¹å’ŒæœåŠ¡å™¨ä¸­çš„å†…å®¹æ˜¯å¦ä¸€è‡´æ—¶ï¼Œå®ä½“æ ‡ç­¾æ˜¯æ¯”æœ€åä¿®æ”¹æ—¶é—´ï¼ˆlast-modified dateï¼‰æ›´å®Œå¤‡çš„æœºåˆ¶</p><p>å®ä½“æ ‡ç­¾æ˜¯å”¯ä¸€æ ‡è¯†ç‰¹å®šç‰ˆæœ¬ç»„ä»¶çš„å­—ç¬¦ä¸²ï¼Œå”¯ä¸€æ ¼å¼é™åˆ¶æ˜¯è¦ä½¿ç”¨å¼•å·å¼•èµ·æ¥</p><p>ä¸€ä¸ªä¾‹å­ï¼š</p><p>æœåŠ¡å™¨å‘å›å“åº”å¦‚ä¸‹</p><figure class="highlight http"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">200</span> OK</span><br><span class="line"><span class="attribute">Last-Modified</span><span class="punctuation">: </span>Tue, 12 Dec 2006 03:03:59 GMT</span><br><span class="line"><span class="attribute">ETag</span><span class="punctuation">: </span>"10c24bc-4ab-457e1c1f"</span><br><span class="line"><span class="attribute">Content-Length</span><span class="punctuation">: </span>12195</span><br></pre></td></tr></tbody></table></figure><p>è¿‡ä¸€ä¼šå®¢æˆ·ç«¯è¦éªŒè¯å†…å®¹ï¼Œå°±å‘é€ä¸‹é¢çš„è¯·æ±‚ï¼Œå…¶ä¸­If-None-Matchä¸­å°±æ˜¯è¦éªŒè¯çš„å®ä½“æ ‡ç­¾</p><figure class="highlight http"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/i/yahoo.gif</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>us.yimg.com</span><br><span class="line"><span class="attribute">If-Modified-Since</span><span class="punctuation">: </span>Tue, 12 Dec 2006 03:03:59 GMT</span><br><span class="line"><span class="attribute">If-None-Match</span><span class="punctuation">: </span>"10c24bc-4ab-457e1c1f"</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœæ ‡ç­¾å¾—åˆ°åŒ¹é…ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ª304å“åº”ï¼Œè¡¨ç¤ºNot Modified</p><p>ç½‘ç«™æœåŠ¡å™¨æ˜¯é›†ç¾¤çš„æƒ…å†µï¼Œè¿™é¡¹æŠ€æœ¯ä¸æ¨èä½¿ç”¨ï¼Œå› ä¸ºï¼š</p><blockquote><p>The problem with ETags is that they typically are constructed using attributes that make them unique to a specific server hosting a site. ETags wonâ€™t match when a browser gets the original component from one server and later tries to validate that component on a different server, a situation that is all too common on Web sites that use a cluster of servers to handle requests. By default, both Apache and IIS embed data in the ETag that dramatically reduces the odds of the validity test succeeding on web sites with multiple servers.</p></blockquote><p>ApacheæœåŠ¡å™¨åˆ é™¤ETagçš„æ–¹æ³•ï¼š</p><ul><li><p>åœ¨é…ç½®æ–‡ä»¶æ·»åŠ ä¸€è¡Œ </p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FileETag none</span><br></pre></td></tr></tbody></table></figure></li></ul><h3 id="Flush-Buffer-Earlyå°½æ—©åˆ·æ–°è¾“å‡ºç¼“å­˜"><a href="#Flush-Buffer-Earlyå°½æ—©åˆ·æ–°è¾“å‡ºç¼“å­˜" class="headerlink" title="Flush Buffer Earlyå°½æ—©åˆ·æ–°è¾“å‡ºç¼“å­˜"></a><a href="https://developer.yahoo.com/performance/rules.html#flush">Flush Buffer Early</a>å°½æ—©åˆ·æ–°è¾“å‡ºç¼“å­˜</h3><p><a href="https://www.php.net/flush">flush()</a> å‡½æ•°å…è®¸å°†éƒ¨åˆ†å°±ç»ªçš„HTMLå“åº”å‘é€å›æµè§ˆå™¨ï¼Œä»¥ä¾¿æµè§ˆå™¨å¯ä»¥åœ¨æœåŠ¡å™¨å¿™äºå¤„ç†å…¶å®ƒHTMLæ—¶å°±å¼€å§‹è·å–ç»„ä»¶</p><p>flushingçš„æœ€ä½³ä½ç½®æ˜¯headæ ‡ç­¾ä¹‹åï¼Œå¦‚ä¸‹</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  ... &lt;!-- css, js --&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;?php flush(); ?&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  ... &lt;!-- content --&gt;</span><br></pre></td></tr></tbody></table></figure><h3 id="Use-GET-for-Ajax-Requests-ä½¿ç”¨GETå¤„ç†Ajaxè¯·æ±‚"><a href="#Use-GET-for-Ajax-Requests-ä½¿ç”¨GETå¤„ç†Ajaxè¯·æ±‚" class="headerlink" title="Use GET for Ajax Requests ä½¿ç”¨GETå¤„ç†Ajaxè¯·æ±‚"></a><a href="https://developer.yahoo.com/performance/rules.html#ajax_get">Use GET for Ajax Requests</a> ä½¿ç”¨GETå¤„ç†Ajaxè¯·æ±‚</h3><p>åœ¨ä½¿ç”¨XMLHttpRequestæ—¶ï¼ŒPOSTåœ¨æµè§ˆå™¨ä¸­çš„å®ç°åˆ†ä¸ºä¸¤æ­¥ï¼šå…ˆå‘é€å¤´æ–‡ä»¶ï¼Œå†å‘é€æ•°æ®ã€‚</p><p>å› æ­¤æœ€å¥½ä½¿ç”¨GETè¯·æ±‚ï¼Œå®ƒåªä½¿ç”¨ä¸€ä¸ªTCPåŒ…å°±å¯ä»¥å‘é€ï¼ˆé™¤éæœ‰å¾ˆå¤šcookie</p><p>POST without posting any data behaves like GET.</p><h3 id="Avoid-Empty-Image-src-é¿å…ç©ºsrcå±æ€§"><a href="#Avoid-Empty-Image-src-é¿å…ç©ºsrcå±æ€§" class="headerlink" title="Avoid Empty Image src é¿å…ç©ºsrcå±æ€§"></a><a href="https://developer.yahoo.com/performance/rules.html#emptysrc">Avoid Empty Image src</a> é¿å…ç©ºsrcå±æ€§</h3><p>ä¸¤ç§å½¢å¼çš„ç©ºsrcå±æ€§</p><ol><li><p>html</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">""</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>js</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">img.<span class="property">src</span> = <span class="string">""</span>;</span><br></pre></td></tr></tbody></table></figure></li></ol><p>éƒ½ä¼šå¯¼è‡´ï¼šæµè§ˆå™¨å†æ¬¡å‘æœåŠ¡å™¨å‘é€ä¸€æ¬¡è¯·æ±‚</p><p>é€ æˆè¿™ä¸ªè¡Œä¸ºçš„æ ¹æœ¬åŸå› æ˜¯ï¼šåœ¨æµè§ˆå™¨ä¸­æ‰§è¡ŒURIè§£æçš„æ–¹å¼ï¼Œæµè§ˆå™¨ä¼šå°†ç©ºå­—ç¬¦ä¸²è§†ä¸ºä¸€æ¡ç›¸å¯¹URIï¼Œç„¶åè¿›è¡Œè§£æ</p><p>HTML5å¢åŠ äº†çº¦æŸï¼Œsrcå±æ€§å¿…é¡»éç©º</p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> ç¿»è¯‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç«™æ€§èƒ½æå‡æœ€ä½³å®è·µä¸€</title>
      <link href="/2020/06/22/%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B8%80/"/>
      <url>/2020/06/22/%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<p><a href="https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink">https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink</a></p><ul><li>Content</li><li>Server</li><li>Cookie</li><li>CSS</li><li>JavaScript</li><li>Images</li><li>Mobile</li></ul><p>åŸæ–‡ä»ä¸ƒä¸ªæ–¹é¢æ€»ç»“ç½‘ç«™æ€§èƒ½æå‡ã€‚</p><p>æœ¬ç¯‡æ€»ç»“Contentæ–¹é¢ã€‚</p><h3 id="Make-Fewer-HTTP-Requests-å‡å°‘HTTPè¯·æ±‚"><a href="#Make-Fewer-HTTP-Requests-å‡å°‘HTTPè¯·æ±‚" class="headerlink" title="Make Fewer HTTP Requests å‡å°‘HTTPè¯·æ±‚"></a><a href="https://developer.yahoo.com/performance/rules.html#num_http">Make Fewer HTTP Requests</a> å‡å°‘HTTPè¯·æ±‚</h3><p>å‡å°‘é¡µé¢çš„ç»„ä»¶æ•°é‡ï¼Œå¯ä»¥å‡å°‘HTTPè¯·æ±‚æ•°é‡ã€‚</p><p>å‡å°‘é¡µé¢ç»„ä»¶çš„æ–¹æ³•ï¼š</p><ul><li><p>ç²¾ç®€é¡µé¢è®¾è®¡</p></li><li><p>ä¸ç®€åŒ–è®¾è®¡çš„æƒ…å†µä¸‹ï¼š</p><ul><li>æ–‡ä»¶ç»„åˆï¼ˆjsæ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªé‡Œé¢ï¼Œcssæ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªé‡Œé¢ï¼‰</li></ul></li><li><p><a href="https://css-tricks.com/css-sprites/">CSS Sprites</a>ï¼šèƒŒæ™¯å›¾ç‰‡åˆå¹¶æˆä¸€å¼ ï¼Œåˆ©ç”¨csså±æ€§è®¾ç½®å„ä¸ªéƒ¨åˆ†åˆ°ç›¸å¯¹åº”çš„é¡µé¢</p><ul><li><a href="https://css-tricks.com/examples/CSSClip/">CSS Sprites with Inline Images</a> ä¹Ÿå¯ä»¥ç”¨æ¥å¤„ç†å›¾ç‰‡</li></ul></li><li><p>å°†å†…è”å›¾ç‰‡æ”¾åˆ°cssæ–‡ä»¶ä¸­ï¼ˆ Combining inline images into your cached stylesheets is a way to reduce HTTP requests and avoid increasing the size of your pages ï¼ŸHow ? ( Todo: find demo</p></li></ul><h3 id="Reduce-DNS-Lookups-å‡å°‘DNSæŸ¥è¯¢"><a href="#Reduce-DNS-Lookups-å‡å°‘DNSæŸ¥è¯¢" class="headerlink" title="Reduce DNS Lookups å‡å°‘DNSæŸ¥è¯¢"></a><a href="https://developer.yahoo.com/performance/rules.html#dns_lookups">Reduce DNS Lookups</a> å‡å°‘DNSæŸ¥è¯¢</h3><p>å‡å°‘ç½‘ç«™çš„ä¸»æœºåï¼ˆhostnamesï¼‰ï¼Œå¯ä»¥å‡å°‘DNSæŸ¥è¯¢æ¬¡æ•°</p><p>ä½†æ˜¯å‡å°‘ç½‘ç«™ä¸»æœºåä¼šå‡å°‘é¡µé¢çš„å¹¶å‘ä¸‹è½½é‡</p><blockquote><p>Trade-offï¼šAvoiding DNS lookups cuts response times, but reducing parallel downloads may increase response times. </p></blockquote><p> Guideï¼šSplit components across <strong>at least two but no more than four</strong> hostnames.</p><h3 id="Avoid-Redirects-é¿å…ç½‘ç«™é‡å®šå‘"><a href="#Avoid-Redirects-é¿å…ç½‘ç«™é‡å®šå‘" class="headerlink" title="Avoid Redirects é¿å…ç½‘ç«™é‡å®šå‘"></a><a href="https://developer.yahoo.com/performance/rules.html#redirects">Avoid Redirects</a> é¿å…ç½‘ç«™é‡å®šå‘</h3><p>æœ€ç»å¸¸å‘ç”Ÿçš„é‡å®šå‘ï¼šåº”è¯¥åŠ /çš„åœ°æ–¹æ²¡æœ‰åŠ /</p><p>é‡å®šå‘å¯ä»¥ç”¨æ¥ä»æ—§ç½‘ç«™è·³è½¬åˆ°æ–°ç½‘ç«™</p><p>é‡å®šå‘ä¹Ÿå¯ä»¥ç”¨æ¥è¿æ¥ç½‘ç«™çš„ä¸åŒéƒ¨åˆ†ã€æ ¹æ®ç‰¹å®šæƒ…å†µè®©ç”¨æˆ·è·³è½¬</p><p>è§£å†³åŠæ³•ï¼š</p><ul><li><p>å¦‚æœä¸¤ä¸ªç½‘ç«™åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨ï¼Œä½¿ç”¨ <code>Alias and mod_rewrite</code></p></li><li><p>å¦‚æœæ˜¯ç½‘ç«™æ¢äº†ä¸ªæ–°åŸŸåï¼Œåˆ›å»ºä¸€ä¸ªCNAME (a DNS record that creates an alias pointing from one domain name to another)ï¼Œç»“åˆ<code>Alias or mod_rewrite</code></p></li></ul><h3 id="Make-Ajax-Cacheable-ç¼“å­˜Ajaxè¯·æ±‚"><a href="#Make-Ajax-Cacheable-ç¼“å­˜Ajaxè¯·æ±‚" class="headerlink" title="Make Ajax Cacheable ç¼“å­˜Ajaxè¯·æ±‚"></a><a href="https://developer.yahoo.com/performance/rules.html#cacheajax">Make Ajax Cacheable</a> ç¼“å­˜Ajaxè¯·æ±‚</h3><p><strong>å¼‚æ­¥ä¸ç­‰äºå³æ—¶</strong></p><p>ä¼˜åŒ–å¼‚æ­¥è¯·æ±‚ï¼š</p><ul><li>ç¼“å­˜Ajaxè¯·æ±‚</li></ul><span id="more"></span><h4 id="ä½•æ—¶ä½¿ç”¨æ—§çš„å“åº”ï¼Œä½•æ—¶å‘é€æ–°çš„è¯·æ±‚ï¼Ÿ"><a href="#ä½•æ—¶ä½¿ç”¨æ—§çš„å“åº”ï¼Œä½•æ—¶å‘é€æ–°çš„è¯·æ±‚ï¼Ÿ" class="headerlink" title="ä½•æ—¶ä½¿ç”¨æ—§çš„å“åº”ï¼Œä½•æ—¶å‘é€æ–°çš„è¯·æ±‚ï¼Ÿ"></a>ä½•æ—¶ä½¿ç”¨æ—§çš„å“åº”ï¼Œä½•æ—¶å‘é€æ–°çš„è¯·æ±‚ï¼Ÿ</h4><blockquote><p>This could be done by adding a timestamp to the address book Ajax URL indicating the last time the user modified her address book, for example, &amp;t=1190241612. If the address book hasnâ€™t been modified since the last download, the timestamp will be the same and the address book will be read from the browserâ€™s cache eliminating an extra HTTP roundtrip. If the user has modified her address book, the timestamp ensures the new URL doesnâ€™t match the cached response, and the browser will request the updated address book entries.</p></blockquote><h3 id="Postload-Components"><a href="#Postload-Components" class="headerlink" title="Postload Components"></a><a href="https://developer.yahoo.com/performance/rules.html#postload">Postload Components</a></h3><p>éå¿…é¡»çš„ç»„ä»¶å»¶è¿ŸåŠ è½½ï¼Œæ¯”å¦‚ä¸€äº›jsä»£ç ã€ç”¨æˆ·ç‚¹å‡»åæ‰æ˜¾ç¤ºçš„å†…å®¹ã€æ–‡ä»¶å¤¹é‡Œé¢çš„å›¾ç‰‡</p><p>ç¡®ä¿é¡µé¢æ­£å¸¸å·¥ä½œï¼Œç„¶åé€šè¿‡ä¸€äº›å»¶è¿ŸåŠ è½½çš„è„šæœ¬å¢å¼ºé¡µé¢ä¸Šçš„ä½“éªŒï¼Œæ¯”å¦‚åŠ¨ç”»ã€æ‹–æ”¾</p><h3 id="Preload-Components"><a href="#Preload-Components" class="headerlink" title="Preload Components"></a><a href="https://developer.yahoo.com/performance/rules.html#preload">Preload Components</a></h3><p>åˆ©ç”¨è®¡ç®—æœºçš„é—²ç½®æ—¶é—´ï¼Œé¢„åŠ è½½å°†æ¥éœ€è¦çš„å†…å®¹</p><ol><li><p>æ— æ¡ä»¶çš„</p><p>åªè¦æ‰“å¼€æŸç½‘ç«™å°±åŠ è½½ä¸€äº›é¢å¤–çš„ç»„ä»¶ã€‚</p><p>æ‰“å¼€google.comï¼Œæ€»ä¼šé¢„åŠ è½½ä¹‹åæœç´¢ç•Œé¢çš„å›¾ç‰‡</p></li><li><p>æœ‰æ¡ä»¶çš„</p><p>æœç´¢æ¡†è¾“å…¥å†…å®¹å°±ä¼šé¢„åŠ è½½å†…å®¹</p></li><li><p>é¢„æœŸä¸­çš„</p><p>ä¸Šçº¿ç½‘ç«™æ–°è®¾è®¡æ—¶é¢„åŠ è½½å¯ä»¥ä¸å½±å“ç”¨æˆ·ä½“éªŒ</p></li></ol><h3 id="Reduce-the-Number-of-DOM-Elements"><a href="#Reduce-the-Number-of-DOM-Elements" class="headerlink" title="Reduce the Number of DOM Elements"></a><a href="https://developer.yahoo.com/performance/rules.html#min_dom">Reduce the Number of DOM Elements</a></h3><p>é¡µé¢tagæ•°é‡</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">'*'</span>).<span class="property">length</span></span><br></pre></td></tr></tbody></table></figure><p>åªæœ‰åœ¨è¯­ä¹‰ä¸Šæœ‰æ„ä¹‰æ—¶ï¼Œæ‰ä½¿ç”¨<code>&lt;div&gt;</code>ï¼ˆ å› ä¸ºå®ƒæ€»ä¼šæ·»åŠ ä¸€è¡Œ</p><h4 id="æœ‰å¤šå°‘ä¸ªDOMå…ƒç´ æ‰ç®—å¤šå‘¢ï¼Ÿ"><a href="#æœ‰å¤šå°‘ä¸ªDOMå…ƒç´ æ‰ç®—å¤šå‘¢ï¼Ÿ" class="headerlink" title="æœ‰å¤šå°‘ä¸ªDOMå…ƒç´ æ‰ç®—å¤šå‘¢ï¼Ÿ"></a>æœ‰å¤šå°‘ä¸ªDOMå…ƒç´ æ‰ç®—å¤šå‘¢ï¼Ÿ</h4><p>æ£€æŸ¥å…¶ä»–ç±»ä¼¼çš„é¡µé¢ï¼Œç„¶åæ¯”è¾ƒã€‚</p><h3 id="Split-Components-Across-Domains"><a href="#Split-Components-Across-Domains" class="headerlink" title="Split Components Across Domains"></a><a href="https://developer.yahoo.com/performance/rules.html#split">Split Components Across Domains</a></h3><p>æ‹†åˆ†ç»„ä»¶å¯ä»¥æœ€å¤§é™åº¦åœ°å®ç°å¹¶è¡Œä¸‹è½½</p><p>ç¡®ä¿ä½¿ç”¨çš„åŸŸåæ•°é‡ä¸è¶…è¿‡2-4ä¸ªï¼Œå› ä¸ºDNSæŸ¥è¯¢æƒ©ç½š</p><p>ä¾‹å­ï¼š</p><p>å°†HTMLæ–‡ä»¶å’ŒåŠ¨æ€å†…å®¹æ‰˜ç®¡åœ¨<a href="http://www.example.org,å¹¶åœ¨static1.example.orgå’Œstatic2.example.orgä¸Šæ‹†åˆ†éƒ¨ç½²é™æ€ç»„ä»¶/">www.example.orgï¼Œå¹¶åœ¨static1.example.orgå’Œstatic2.example.orgä¸Šæ‹†åˆ†éƒ¨ç½²é™æ€ç»„ä»¶</a></p><h3 id="Minimize-Number-of-iframes"><a href="#Minimize-Number-of-iframes" class="headerlink" title="Minimize Number of iframes"></a><a href="https://developer.yahoo.com/performance/rules.html#iframes">Minimize Number of iframes</a></h3><p><code>&lt;iframe&gt;</code> ä¼˜ç‚¹ï¼š</p><ul><li>Helps with slow third-party content like badges and ads</li><li>Security sandbox</li><li>Download scripts in parallel</li></ul><p><code>&lt;iframe&gt;</code> ç¼ºç‚¹ï¼š</p><ul><li>Costly even if blank</li><li>Blocks page onload</li><li>Non-semantic</li></ul><h3 id="Avoid-404s"><a href="#Avoid-404s" class="headerlink" title="Avoid 404s"></a><a href="https://developer.yahoo.com/performance/rules.html#no404">Avoid 404s</a></h3><p>HTTPè¯·æ±‚æ˜¯å¾ˆæ˜‚è´µçš„ï¼Œæå‡ºHTTPè¯·æ±‚ï¼Œå¾—åˆ°ä¸€ä¸ªæ— ç”¨çš„å“åº”ï¼ˆå³404 Not Foundï¼‰æ˜¯å®Œå…¨æ²¡æœ‰å¿…è¦çš„ï¼Œè€Œä¸”ä¼šæ‹–æ…¢ç”¨æˆ·ä½“éªŒï¼Œæ²¡æœ‰ä»»ä½•å¥½å¤„ã€‚</p><p><strong>Particularly bad</strong> is when the link to an external JavaScript is wrong and the result is a 404. First, this download will block parallel downloads. Next the browser may try to parse the 404 response body as if it were JavaScript code, trying to find something usable in it.</p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> ç¿»è¯‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>surfaceæµ‹è¯•</title>
      <link href="/2020/06/18/surface%E6%B5%8B%E8%AF%95/"/>
      <url>/2020/06/18/surface%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<p>surfaceä¸Šå†™åšå®¢ï¼Œå®Œäº‹ä¹‹åå„ç«¯åŒæ­¥æµ‹è¯•ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ‚ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitä¿®æ”¹æœ€è¿‘ä¸€æ¬¡commitçš„ä¿¡æ¯</title>
      <link href="/2020/06/18/git%E4%BF%AE%E6%94%B9%E6%9C%80%E8%BF%91%E4%B8%80%E6%AC%A1commit%E7%9A%84%E4%BF%A1%E6%81%AF/"/>
      <url>/2020/06/18/git%E4%BF%AE%E6%94%B9%E6%9C%80%E8%BF%91%E4%B8%80%E6%AC%A1commit%E7%9A%84%E4%BF%A1%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘ä¸€æ¬¡æäº¤çš„ä¿¡æ¯ä¸å¤ªå¯¹ï¼Œå·²ç»pushåˆ°è¿œç«¯ã€‚</p><img src="/2020/06/18/git%E4%BF%AE%E6%94%B9%E6%9C%80%E8%BF%91%E4%B8%80%E6%AC%A1commit%E7%9A%84%E4%BF%A1%E6%81%AF/xiugaiqian.png" class="" title="ä¿®æ”¹å‰"><p>ä¿®æ”¹æ­¥éª¤ï¼š</p><ol><li><p>è¾“å…¥å‘½ä»¤ï¼Œä¼šè¿›å…¥ç¼–è¾‘å™¨</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend</span><br></pre></td></tr></tbody></table></figure></li><li><p>ä¿®æ”¹commitä¿¡æ¯ï¼Œé€€å‡ºç¼–è¾‘å™¨</p></li><li><p>å¼ºåˆ¶æ¨é€</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -f</span><br></pre></td></tr></tbody></table></figure></li></ol><p>ä¿®æ”¹åï¼š</p><img src="/2020/06/18/git%E4%BF%AE%E6%94%B9%E6%9C%80%E8%BF%91%E4%B8%80%E6%AC%A1commit%E7%9A%84%E4%BF%A1%E6%81%AF/xiugaihou.png" class="" title="ä¿®æ”¹å"><p>æ³¨æ„åˆ°ï¼š<strong>commitå·æ”¹å˜äº†</strong></p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‡ åˆ™ç¬‘è¯</title>
      <link href="/2020/02/22/%E5%87%A0%E5%88%99%E7%AC%91%E8%AF%9D/"/>
      <url>/2020/02/22/%E5%87%A0%E5%88%99%E7%AC%91%E8%AF%9D/</url>
      
        <content type="html"><![CDATA[<img src="/2020/02/22/%E5%87%A0%E5%88%99%E7%AC%91%E8%AF%9D/0222fig1.png" class="" title="weibo"><img src="/2020/02/22/%E5%87%A0%E5%88%99%E7%AC%91%E8%AF%9D/0222fig2.png" class="" title="weiboJinggao"><p>çœ‹åˆ°è¿™åˆ™ä¿¡æ¯ï¼Œä¸‹é¢æœ‰äººä¸¾äº†å‡ ä¸ªå‰è‹è”çš„ç¬‘è¯ï¼Œæ„Ÿè§‰å¾ˆæœ‰æ„æ€ï¼Œäºæ˜¯å°±å»æ‰¾äº†å‡ ä¸ªï¼Œç¬‘å¾—è‚šå­ç–¼ã€‚</p><blockquote><p>æœ‰ä¸ªäººåœ¨çº¢åœºæ•£å‘ä¼ å•ï¼Œè¢«å…‹æ ¼å‹ƒé€®ä½äº†ã€‚é‚£äººè¾©è§£ï¼Œæˆ‘å‘çš„éƒ½æ˜¯ç™½çº¸ã€‚å…‹æ ¼å‹ƒå†·ç¬‘é“ï¼Œä½ ä»¥ä¸ºæˆ‘ä¸çŸ¥é“ä½ ä»€ä¹ˆæ„æ€ï¼Ÿ</p></blockquote><blockquote><p>åœ¨è‹å…±äºŒåä¸‰æ¬¡ä»£è¡¨å¤§ä¼šä¸Šï¼Œå‹ƒåˆ—æ—¥æ¶…å¤«ä½œæŠ¥å‘Šï¼Œä»–é—®ï¼šâ€œæˆ‘ä»¬è¿™é‡Œæœ‰æ²¡æœ‰æ•Œäººï¼Ÿâ€ä¸€ä¸ªäººå›ç­”ï¼šâ€œæœ‰ä¸€ä¸ªï¼Œä»–ååœ¨ç¬¬å››æ’ç¬¬åå…«å·ä½å­ä¸Šã€‚â€å‹ƒé—®ï¼šâ€œä¸ºä»€ä¹ˆä»–æ˜¯æ•Œäººï¼Ÿâ€å›ç­”ï¼šâ€œåˆ—å®è¯´è¿‡æ•Œäººæ˜¯ä¸ä¼šæ‰“çŒç¡çš„ï¼Œæˆ‘å‘ç°å…¨åœºåªæœ‰ä»–ä¸€ä¸ªäººæ²¡æœ‰æ‰“çŒç¡ï¼â€</p></blockquote><blockquote><p>â€œåœ¨è‹è”æ˜¯å¦å¯ä»¥å­˜åœ¨ä¸¤å…šåˆ¶ï¼Ÿâ€â€œä¸ï¼Œä¸å¯èƒ½ï¼Œå› ä¸ºæˆ‘ä»¬å…»ä¸èµ·ã€‚â€</p></blockquote><blockquote><p>è‹è”ç‰¹å·¥å¯¹ç¾å›½ç‰¹å·¥å¤¸å£é“ï¼šâ€œæˆ‘ä»¬çŸ¥é“ä½ ä»¬å›½å®¶æ‰€æœ‰æ ¸å¯¼å¼¹å‘å°„äº•çš„ä½ç½®ã€‚â€ç¾å›½ç‰¹å·¥è¯´ï¼šâ€œé‚£åˆæœ‰ä»€ä¹ˆï¼Œæˆ‘ä»¬çŸ¥é“ä½ ä»¬æœªæ¥20å¹´å…¨ä½“æ”¿æ²»å±€å§”å‘˜åå•ã€‚â€</p></blockquote><blockquote><p>ä¸€å¤©æˆˆå°”å·´ä¹”å¤«åˆ°ä¸€ä¸ªå†œåœºè§†å¯Ÿï¼Œçœ‹åˆ°æœ‰å‡ å¤´çŒªï¼Œå°±åˆ°çŒªæ—è¾¹æ‹äº†ä¸€å¼ ç…§ç‰‡ã€‚éšè¡Œäººå‘˜åœ¨ç…§ç‰‡ä¸Šå†™ä¸Šï¼šæˆˆå°”å·´ä¹”å¤«å’ŒçŒªåœ¨ä¸€èµ·ï¼Œä½†åˆæ„Ÿåˆ°ä¸å¦¥ã€‚äºæ˜¯æ”¹æˆï¼šçŒªå’Œæˆˆå°”å·´ä¹”å¤«åœ¨ä¸€èµ·ï¼Œå¯è¿˜æ˜¯æ„Ÿè§‰ä¸å¯¹ã€‚æœ€åæŠŠç…§ç‰‡ä¸Šçš„å­—æ”¹æˆï¼šå·¦èµ·ç¬¬ä¸‰ä½æ˜¯æˆˆå°”å·´ä¹”å¤«ã€‚</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> æ‚ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¥åº·çš„æ­¦æ±‰</title>
      <link href="/2020/02/11/%E5%81%A5%E5%BA%B7%E7%9A%84%E6%AD%A6%E6%B1%89/"/>
      <url>/2020/02/11/%E5%81%A5%E5%BA%B7%E7%9A%84%E6%AD%A6%E6%B1%89/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¸€ä¸ªå¥åº·çš„ç¤¾ä¼šä¸è¯¥åªæœ‰ä¸€ç§å£°éŸ³ã€‚</p></blockquote><p>å“ªé‡Œä¹Ÿå»ä¸äº†ï¼Œå°±ä¸åœåœ°åˆ·å±ã€‚</p><p>åŒ»æŠ¤äººå‘˜åœ¨åŒ»é™¢ä¼‘æ¯å®¤åšå••å¤§å“­ï¼Œç«åŒ–å·¥äººåœ¨æ®¡ä»ªé¦†å”±æ­Œç»™è‡ªå·±æ‰“æ°”ï¼Œä¸»å¦‡åœ¨é˜³å°ä¸Šç»æœ›åœ°å“­å–Šæ•‘å‘½ï¼Œç”µè¯é‡Œå¿«è¦å´©æºƒçš„å‘è‡ªå…šæ€§çš„å’†å“®â€¦</p><p>æˆ¿é—´çš„é—¨è¢«ç„Šè¢«é”è¢«å µï¼Œå¤–å‡ºçš„è½¦é˜Ÿåœ¨é«˜é€Ÿä¸Šæ’æˆé•¿é¾™ï¼Œä¸ºäº†æ´»å‘½æƒ³å·æ¸¡åˆ°éš”å£çœå´å‘ç°æ²³å¯¹å²¸ä¸€æ’ä¸€æ’çš„äººåœ¨å›´è¿½å µæˆªâ€¦</p><p>å’Œæ–°é—»é‡Œçš„å®Œå…¨ä¸ä¸€æ ·ã€‚</p><p>æˆ‘å¬åˆ°äº†ä¸¤ç§å£°éŸ³ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ‚ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Data flow Synchronization and Pipelining</title>
      <link href="/2020/01/16/Pipelining/"/>
      <url>/2020/01/16/Pipelining/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.coursera.org/learn/parallel-programming-in-java/">https://www.coursera.org/learn/parallel-programming-in-java/</a></p><h3 id="Split-phase-Barriers-with-Java-Phasers"><a href="#Split-phase-Barriers-with-Java-Phasers" class="headerlink" title="Split-phase Barriers with Java Phasers"></a>Split-phase Barriers with Java Phasers</h3>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> å¹¶è¡Œç¼–ç¨‹ </tag>
            
            <tag> å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Loop Parallelism</title>
      <link href="/2020/01/13/Loop%20Parallelism/"/>
      <url>/2020/01/13/Loop%20Parallelism/</url>
      
        <content type="html"><![CDATA[<h3 id="Parallel-Loops"><a href="#Parallel-Loops" class="headerlink" title="Parallel Loops"></a>Parallel Loops</h3><p>æœªçŸ¥å¾ªç¯æ¬¡æ•°ï¼Œåˆ©ç”¨äº†æŒ‡é’ˆçš„forå¾ªç¯<br>æ¯ä¸€ä¸ªè¿­ä»£å½“ä½œä¸€ä¸ªå­ä»»åŠ¡ï¼Œ<code>finish</code>çº¦æŸæ•´ä¸ªå¾ªç¯</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">finish {</span><br><span class="line">    <span class="keyword">for</span> (p = head; p != <span class="literal">null</span> ; p = p.next) </span><br><span class="line">        async <span class="title function_">compute</span><span class="params">(p)</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å·²çŸ¥å¾ªç¯æ¬¡æ•°nï¼Œå¯ä»¥åˆ©ç”¨<code>forall</code></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vector addition</span></span><br><span class="line">forall (i : [<span class="number">0</span>:n-<span class="number">1</span>]) </span><br><span class="line">    a[i] = b[i] + c[i]</span><br></pre></td></tr></tbody></table></figure><p>åˆ©ç”¨ Java streamsï¼Œä¸Šè¿°åŠŸèƒ½æœ‰æ›´åŠ ç®€æ´çš„è¡¨è¾¾æ–¹å¼</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">a = IntStream.rangeClosed(<span class="number">0</span>, N-<span class="number">1</span>).parallel().toArray(i -&gt; b[i] + c[i]);</span><br></pre></td></tr></tbody></table></figure><span id="more"></span><h3 id="Parallel-Matrix-Multiplication"><a href="#Parallel-Matrix-Multiplication" class="headerlink" title="Parallel Matrix Multiplication"></a>Parallel Matrix Multiplication</h3><p>å‡è®¾ä¸¤ä¸ª<code>n*n</code>çš„çŸ©é˜µç›¸ä¹˜ï¼Œæœ‰</p><p>$$<br>c[i][j] = \sum_{k=0}^{n-1} a[i][k] * b[k][j]<br>$$<br>ä¼ªä»£ç è¡¨ç¤ºä¸º</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i : [<span class="number">0</span>:n-<span class="number">1</span>]) {</span><br><span class="line">  <span class="keyword">for</span>(j : [<span class="number">0</span>:n-<span class="number">1</span>]) { c[i][j] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(k : [<span class="number">0</span>:n-<span class="number">1</span>]) {</span><br><span class="line">      c[i][j] = c[i][j] + a[i][k]*b[k][j]</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¦æ›¿æ¢æˆå¹¶è¡Œè®¡ç®—ï¼Œå¯ä»¥ç®€å•åœ°å°†å¤–ä¸¤å±‚çš„forå¾ªç¯æ”¹æˆ<code>forall</code></p><p>for-k å¿…é¡»æ˜¯çº¿æ€§çš„ï¼Œå› ä¸ºè¿™é‡Œæœ‰å†™æ•°æ®ï¼ˆdata race</p><h3 id="Barriers-in-Parallel-Loops"><a href="#Barriers-in-Parallel-Loops" class="headerlink" title="Barriers in Parallel Loops"></a>Barriers in Parallel Loops</h3><p>ä¸‹é¢æœ‰ä¸€ä¸ªç®€å•çš„å¹¶è¡Œä»»åŠ¡</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">forall (i : [<span class="number">0</span>:n-<span class="number">1</span>]) {</span><br><span class="line">    myId = lookup(i); <span class="comment">// convert int to a string </span></span><br><span class="line">    print HELLO, myId;</span><br><span class="line">    print BYE, myId;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>åœ¨ä¸åŒçš„æ‰§è¡Œä¸‹ä¼šæœ‰ä¸åŒé¡ºåºçš„ç»“æœï¼ˆç›¸åŒmyIdå¯¹åº”çš„HELLOä¸€å®šåœ¨BYEä¹‹å‰</p><p>barrierså¯ä»¥å°†ä¸€ä¸ªparallel loopåˆ†ä¸ºä¸åŒçš„é˜¶æ®µ</p><p>åœ¨ä¸¤ä¸ªprintä¹‹é—´æ’å…¥ä¸€ä¸ªbarrierï¼Œå¯ä»¥ä¿è¯æ‰€æœ‰çš„HELLOå‡ºç°åœ¨BYEä¹‹å‰</p><p>ä¸¤ç§å†™æ³•ï¼š</p><ul><li><p>åœ¨ä¸€ä¸ª<code>forall</code>å¾ªç¯ä¸­æ’å…¥barriersåˆ†ä¸ºä¸åŒçš„é˜¶æ®µ (ä¸¤ä¸ªå¯¹åº”çš„printå…±äº«myId</p></li><li><p>ä¸ºæ¯ä¸ªé˜¶æ®µå†™è‡ªå·±çš„<code>forall</code>å¾ªç¯ (å€ŸåŠ© intermediate data structure  to communicate the myId values from one <em>forall</em> to another <em>forall</em></p></li></ul><h3 id="Parallel-One-Dimensional-Iterative-Averaging"><a href="#Parallel-One-Dimensional-Iterative-Averaging" class="headerlink" title="Parallel One-Dimensional Iterative Averaging"></a>Parallel One-Dimensional Iterative Averaging</h3><p>Solve the recurrence<br>$$<br>X_i=\frac{X_{i-1}+X_{i+1}}2<br>$$</p><p>with boundary conditions<br>$$<br>X_0=0\ and\ X_n=1<br>$$</p><p><a href="https://en.wikipedia.org/wiki/Jacobi_method">Jacobi method</a>åˆ©ç”¨ä¸¤ä¸ªæ•°ç»„oldX[] and newX[]è¿­ä»£æ±‚è§£è¯¥é—®é¢˜ï¼Œå¹¶è¡Œä¼ªä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (iter: [<span class="number">0</span>:nsteps-<span class="number">1</span>]) {</span><br><span class="line">  forall (i: [<span class="number">1</span>:n-<span class="number">1</span>]) {</span><br><span class="line">    newX[i] = (oldX[i-<span class="number">1</span>] + oldX[i+<span class="number">1</span>]) / <span class="number">2</span>;</span><br><span class="line">  }</span><br><span class="line">  swap pointers newX and oldX;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä¸Šè¿°æ–¹æ³•åˆ›å»ºäº† <em>nsteps</em> <em>Ã—</em> (<em>n</em> <em>âˆ’</em> 1) ä¸ªä»»åŠ¡</p><p><strong>ä½¿ç”¨Barrierså¯ä»¥å‡å°‘éœ€è¦åˆ›å»ºçš„ä»»åŠ¡ä¸ªæ•°</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">forall ( i: [<span class="number">1</span>:n-<span class="number">1</span>]) {</span><br><span class="line">  <span class="keyword">for</span> (iter: [<span class="number">0</span>:nsteps-<span class="number">1</span>]) {</span><br><span class="line">    newX[i] = (oldX[i-<span class="number">1</span>] + oldX[i+<span class="number">1</span>]) / <span class="number">2</span>;</span><br><span class="line">    NEXT; <span class="comment">// Barrier</span></span><br><span class="line">    swap pointers newX and oldX;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä¸Šè¿°æ–¹æ³•åªéœ€è¦åˆ›å»º <em>(n-1)</em> ä¸ªä»»åŠ¡</p><p>This is a significant improvement since creating tasks is usually more expensive than performing barrier operations.</p><h3 id="Iteration-Grouping-Chunking-in-Parallel-Loops"><a href="#Iteration-Grouping-Chunking-in-Parallel-Loops" class="headerlink" title="Iteration Grouping/Chunking in Parallel Loops"></a>Iteration Grouping/Chunking in Parallel Loops</h3><p>å¯¹äºå‘é‡ç›¸åŠ é—®é¢˜</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">forall (i : [<span class="number">0</span>:n-<span class="number">1</span>]) a[i] = b[i] + c[i]</span><br></pre></td></tr></tbody></table></figure><p>ä¸Šè¿°æ–¹æ³•åˆ›å»ºäº†nä¸ªä»»åŠ¡ï¼Œå½“nå¾ˆå¤§æ—¶overheadsä¹Ÿä¼šå¾ˆå¤§</p><p>è§£å†³æ–¹æ³•</p><p><strong>åˆ†ç»„</strong>ï¼ˆ<em>loop</em> <em>chunking</em> or <em>iteration grouping</em></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">forall (g:[<span class="number">0</span>:ng-<span class="number">1</span>])</span><br><span class="line">  <span class="keyword">for</span> (i : mygroup(g, ng, [<span class="number">0</span>:n-<span class="number">1</span>])) a[i] = b[i] + c[i]</span><br></pre></td></tr></tbody></table></figure><p>ä¸Šè¿°æ–¹æ³•å°†ä»»åŠ¡ä¸ªæ•°ä» <strong>n</strong> é™åˆ°äº† <strong>ng</strong>ï¼ˆåˆ†ç»„ä¸ªæ•°</p><p>åˆ†ç»„æ–¹æ³•æœ‰ä¸¤ç§ï¼š</p><ul><li>block<ul><li>å°†è¿ç»­çš„è¿­ä»£åˆ†ä¸ºä¸€ç»„</li></ul></li><li>cyclic<ul><li>å°†åŒä½™ç±»è¿­ä»£ï¼ˆ iterations in the same congruence classï¼Œåˆ†ä¸ºä¸€ç»„</li></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> java </tag>
            
            <tag> å¹¶è¡Œç¼–ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Functional Parallelism</title>
      <link href="/2020/01/10/Functional-Parallelism/"/>
      <url>/2020/01/10/Functional-Parallelism/</url>
      
        <content type="html"><![CDATA[<h3 id="Future-Tasks"><a href="#Future-Tasks" class="headerlink" title="Future Tasks"></a><strong>Future Tasks</strong></h3><p><code>future tasks</code></p><ul><li>tasks with <strong>return values</strong></li></ul><p><code>future objects</code>ï¼ˆalso known as <code>promise objects</code></p><ul><li><p>a â€œhandleâ€ for accessing a taskâ€™s return value</p></li><li><p>ä¸¤ä¸ªä¸»è¦æ“ä½œï¼š</p><ul><li><p>Assignmentï¼Œå½¢å¼å¦‚ä¸‹</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A = future {</span><br><span class="line">    âŸ¨ task-with-<span class="keyword">return</span>-value âŸ©</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>future object è¢«é™åˆ¶ä¸ºåªèƒ½ä¸€æ¬¡èµ‹å€¼ï¼ˆ_single assignment_ï¼Œç±»ä¼¼äº final å˜é‡</p><p>future task å®Œæˆå future object å°±ä¸èƒ½ä¿®æ”¹äº†</p></li><li><p>Blocking read</p><ul><li>A.get() è¯»æ“ä½œä¼šç­‰å¾…ï¼Œç›´åˆ°ä¸ future object å…³è”çš„ task å®Œæˆï¼Œå°†è¯¥ä»»åŠ¡çš„è¿”å›å€¼ä½œä¸º A.get() çš„å€¼</li><li>A.get() ä¹‹åçš„ä»»ä½• statement S å¼€å§‹æ‰§è¡Œæ—¶ä¸ A å…³è”çš„ä»»åŠ¡å·²ç»å®Œæˆ</li></ul></li></ul></li></ul><span id="more"></span><h3 id="Creating-Future-Tasks-in-Javaâ€™s-Fork-Join-Framework"><a href="#Creating-Future-Tasks-in-Javaâ€™s-Fork-Join-Framework" class="headerlink" title="Creating Future Tasks in Javaâ€™s Fork/Join Framework"></a><strong>Creating Future Tasks in Javaâ€™s Fork/Join Framework</strong></h3><p>future tasks å’Œ regular tasks çš„ä¸€äº›å…³é”®ä¸åŒï¼š</p><ol><li>future tasks ç»§æ‰¿è‡ª FJ æ¡†æ¶çš„ <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/RecursiveTask.html">RecursiveTask</a> ç±»ï¼Œregular tasks ç»§æ‰¿è‡ª <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/RecursiveAction.html">RecursiveAction</a> ç±»</li><li>future task çš„ <strong>compute()</strong> æ–¹æ³•å¿…é¡»æœ‰ non-void çš„è¿”å›å€¼</li><li><strong>left.join()</strong> è¿™æ ·çš„æ–¹æ³•è°ƒç”¨éƒ½ä¼šç­‰ left æŒ‡å‘çš„ä»»åŠ¡æ‰§è¡Œï¼Œåªæ˜¯ future task æœ‰è¿”å›å€¼</li></ol><h3 id="Memoization"><a href="#Memoization" class="headerlink" title="Memoization"></a><strong>Memoization</strong></h3><p>è®°å½• f(x) çš„æ‰§è¡Œç»“æœï¼Œé˜²æ­¢é‡å¤è®¡ç®—</p><ol><li><p>åˆ›å»ºç‰¹å®šçš„æ•°æ®ç»“æ„ï¼Œè®°å½•</p><p>$$<br>{(x_1,y_1=f(x_1)),(x_2,y_2=f(x_2)),â€¦}<br>$$</p></li><li><p>å½“å‡ºç° f çš„è°ƒç”¨æ—¶å…ˆåœ¨è®°å½•ä¸­æŸ¥æ‰¾</p></li></ol><p>future task åœ¨è¿™é‡Œéå¸¸é€‚åˆï¼Œè®°å½•çš„å½¢å¼å˜ä¸ºäº†</p><p>$$<br>{(x_1,y_1=future(f(x_1))),(x_2,y_2=future(f(x_2))),â€¦}<br>$$</p><p>å¯¹äºè¾“å…¥ xï¼Œå¦‚æœå¯¹åº”çš„ future å¯¹è±¡å·²ç»åˆ›å»ºï¼Œåˆ™å¯ä»¥è°ƒç”¨è¯¥å¯¹è±¡çš„ get() æ–¹æ³•</p><h3 id="Java-Streams"><a href="#Java-Streams" class="headerlink" title="Java Streams"></a><strong>Java Streams</strong></h3><p>æ“ä½œé›†åˆå¯¹è±¡é™¤äº†<code>for loop</code>è¿˜å¯ä»¥åˆ©ç”¨<code>Java streams</code>æä¾›çš„ API</p><p>ä¸‹é¢çš„ä¾‹å­æ±‚æ³¨å†Œå­¦ç”Ÿçš„å¹³å‡å¹´é¾„</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">students.stream()</span><br><span class="line">    .filter(s -&gt; s.getStatus() == Student.ACTIVE)</span><br><span class="line">    .mapToInt(a -&gt; a.getAge())</span><br><span class="line">    .average();</span><br></pre></td></tr></tbody></table></figure><p>Java streams æä¾›äº†å¹¶è¡Œç¼–ç¨‹çš„ API</p><p>ä¸Šé¢ä»£ç çš„ <code>students.stream()</code> æ›¿æ¢ä¸º <code>students.parallelStream()</code> æˆ–è€… <code>Stream.of(students).parallel()</code> å°±å¯ä»¥äº†</p><h3 id="Determinism-and-Data-Races"><a href="#Determinism-and-Data-Races" class="headerlink" title="Determinism and Data Races"></a><strong>Determinism and Data Races</strong></h3><p><em>functionally deterministic</em></p><ul><li>A parallel program is said to be <em>functionally deterministic</em> if it always computes the same answer when given the same input</li></ul><p><em>structurally deterministic</em></p><ul><li>It always computes the same computation graph, when given the same input.</li></ul><p>æ²¡æœ‰æ•°æ®ç«äº‰ä¸è¶³ä»¥ä¿è¯ç¡®å®šæ€§</p><p>æœ‰æ•°æ®ç«äº‰ä¹Ÿä¸æ„å‘³ç€ç¨‹åºçš„ä¸ç¡®å®šæ€§</p><p>å¸¦æœ‰æ•°æ®ç«äº‰çš„ä¸ç¡®å®šç¨‹åºï¼Œæ¯æ¬¡äº§ç”Ÿçš„ç»“æœä¸åŒï¼Œä½†æ˜¯å¯èƒ½æ¯ä¸ªç»“æœéƒ½æ˜¯å¯æ¥å—çš„ï¼ï¼e.g., different locations for a search pattern in a target string</p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> java </tag>
            
            <tag> å¹¶è¡Œç¼–ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Task Parallelism</title>
      <link href="/2020/01/08/Task%20Parallelism/"/>
      <url>/2020/01/08/Task%20Parallelism/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.coursera.org/learn/parallel-programming-in-java/">https://www.coursera.org/learn/parallel-programming-in-java/</a></p><h3 id="Task-Creation-and-Termination-Async-Finish"><a href="#Task-Creation-and-Termination-Async-Finish" class="headerlink" title="Task Creation and Termination (Async, Finish)"></a>Task Creation and Termination (Async, Finish)</h3><p>ä»¥æ•°ç»„æ±‚å’Œä½œä¸ºä¾‹å­</p><p>ä¸ºäº†æ±‚å¾—æ•°ç»„çš„å’Œï¼Œå¯ä»¥å°†æ•°ç»„åˆ†ä¸ºå‰åä¸¤ä¸ªéƒ¨åˆ†ã€‚ä¸¤éƒ¨åˆ†çš„æ±‚å’Œå¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œä½†æ˜¯åœ¨æ±‚æ€»å’Œä¹‹å‰è¦ä¿è¯ä¸¤ä¸ªå­ä»»åŠ¡å·²ç»å®Œæˆã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">finish {</span><br><span class="line">  async SUM1;  <span class="comment">// asynchronously compute sum of the lower half of the array</span></span><br><span class="line">  SUM2;  <span class="comment">// compute sum of the upper half of the array in parallel with SUM1</span></span><br><span class="line">}</span><br><span class="line">SUM;  <span class="comment">// combine the two partial sums after both SUM1 and SUM2 have finished</span></span><br></pre></td></tr></tbody></table></figure><p><code>async &lt;stmt1&gt;</code> ï¼šçˆ¶ä»»åŠ¡åˆ›å»ºå­ä»»åŠ¡æ‰§è¡Œ<code>&lt;stmt1&gt;</code>ï¼Œå¹¶ä¸”æ˜¯å¹¶è¡Œäºçˆ¶ä»»åŠ¡çš„å…¶ä½™éƒ¨åˆ†æ‰§è¡Œ</p><p>ä¸Šé¢çš„ä¼ªä»£ç ä¸­ï¼Œ<code>async SUM1;</code>åˆ›å»ºå­ä»»åŠ¡SUM1ï¼Œå’ŒSUM2å¹¶è¡Œæ‰§è¡Œ</p><p><code>finish &lt;stmt2&gt;</code>ï¼šçˆ¶ä»»åŠ¡æ‰§è¡Œ<code>&lt;stmt2&gt;</code>ï¼Œå¹¶ä¸”ç­‰å¾…<code>&lt;stmt2&gt;ä»¥åŠå…¶ä¸­åˆ›å»ºçš„å¼‚æ­¥ä»»åŠ¡</code>å®Œæˆ</p><p>ä¸Šä¾‹ä¸­ï¼Œçˆ¶ä»»åŠ¡ç­‰å¾…SUM1å’ŒSUM2å®Œæˆï¼Œæ‰èƒ½æ‰§è¡ŒSUM</p><h3 id="Tasks-in-Javaâ€™s-Fork-Join-Framework"><a href="#Tasks-in-Javaâ€™s-Fork-Join-Framework" class="headerlink" title="Tasks in Javaâ€™s Fork/Join Framework"></a>Tasks in Javaâ€™s Fork/Join Framework</h3><p>æ•°ç»„æ±‚å’Œçš„<strong>åˆ†æ²»</strong>å†™æ³•<span id="more"></span></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ASum</span>{</span><br><span class="line">  <span class="type">int</span>[] A; <span class="comment">// input array</span></span><br><span class="line">  <span class="type">int</span> LO, HI; <span class="comment">// subrange</span></span><br><span class="line">  <span class="type">int</span> SUM; <span class="comment">// return value</span></span><br><span class="line">  ASum(<span class="type">int</span>[] array, <span class="type">int</span> low, <span class="type">int</span> high){</span><br><span class="line">    <span class="built_in">this</span>.A = array;</span><br><span class="line">    <span class="built_in">this</span>.LO = low;</span><br><span class="line">    <span class="built_in">this</span>.HI = high;</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">compute</span><span class="params">()</span> {</span><br><span class="line">    <span class="keyword">if</span> (LO==HI) SUM = A[LO];</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(LO&gt;HI) SUM = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">      <span class="type">int</span> <span class="variable">MID</span> <span class="operator">=</span> (LO+HI)/<span class="number">2</span>;</span><br><span class="line">      L = <span class="keyword">new</span> <span class="title class_">ASum</span>(A, LO, MID);</span><br><span class="line">      R = <span class="keyword">new</span> <span class="title class_">ASum</span>(A, MID, HI);</span><br><span class="line">      L.compute();</span><br><span class="line">      R.compute();</span><br><span class="line">      SUM = L.SUM + R.SUM;</span><br><span class="line">    }</span><br><span class="line">  } <span class="comment">// compute()</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å¹¶è¡Œå†™æ³•</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.ForkJoinPool;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.RecursiveTask;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ASum</span> <span class="keyword">extends</span> <span class="title class_">RecursiveTask</span>&lt;Integer&gt; {  <span class="comment">//æ²¡æœ‰è¿”å›å€¼çš„ç»§æ‰¿RecursiveActionï¼Œæ¯”å¦‚å¯¹æ•°ç»„æ’åº</span></span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">seqThreshold</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">    <span class="type">int</span>[] array;</span><br><span class="line">    <span class="type">int</span> lo, hi;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ASum</span><span class="params">(<span class="type">int</span>[] array, <span class="type">int</span> low, <span class="type">int</span> high)</span> {</span><br><span class="line">        <span class="built_in">this</span>.array = array;</span><br><span class="line">        <span class="built_in">this</span>.lo = low;</span><br><span class="line">        <span class="built_in">this</span>.hi = high;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Integer <span class="title function_">compute</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> ((hi - lo) &lt;= seqThreshold) {  <span class="comment">//ä¸å†åˆ‡åˆ†ä¸ºå­ä»»åŠ¡</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> lo; i &lt; hi; i++)</span><br><span class="line">                res += array[i];</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (lo + hi) / <span class="number">2</span>;</span><br><span class="line">            <span class="type">ASum</span> <span class="variable">L</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ASum</span>(array, lo, mid);</span><br><span class="line">            <span class="type">ASum</span> <span class="variable">R</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ASum</span>(array, mid, hi);</span><br><span class="line">            <span class="comment">// L.fork();</span></span><br><span class="line">            <span class="comment">// R.fork();</span></span><br><span class="line">            invokeAll(L, R);  <span class="comment">//å’Œä¸Šé¢çš„ä¸¤å¥ç­‰ä»·</span></span><br><span class="line">            res += L.join() + R.join();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">sumOfInts</span><span class="params">(ForkJoinPool pool, <span class="type">int</span>[] array)</span> {</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> array.length;</span><br><span class="line">        <span class="type">ASum</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ASum</span>(array, <span class="number">0</span>, n);</span><br><span class="line">        <span class="keyword">return</span> pool.invoke(a);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(<span class="keyword">final</span> String[] args)</span> {</span><br><span class="line">        <span class="type">int</span>[] nums = { <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span> };</span><br><span class="line">        <span class="type">ForkJoinPool</span> <span class="variable">pool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ForkJoinPool</span>();</span><br><span class="line">        System.out.println(sumOfInts(pool, nums));</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="Computation-Graphs-Work-Span"><a href="#Computation-Graphs-Work-Span" class="headerlink" title="Computation Graphs, Work, Span"></a>Computation Graphs, Work, Span</h3><h4 id="Computation-Graphs"><a href="#Computation-Graphs" class="headerlink" title="Computation Graphs"></a>Computation Graphs</h4><p>Computation Graphs (CGs) model the execution of a parallel program as a <a href="http://en.wikipedia.org/wiki/Partially_ordered_set">partially ordered set</a>.</p><p>A CG consist of:</p><ul><li>A set of <em>vertices</em> or <em>nodes</em>, in which each node represents a <em>step</em> consisting of an <strong>arbitrary sequential computation</strong>.</li><li>A set of <em>directed</em> <em>edges</em> that represent <strong>ordering constraints</strong> among steps.</li></ul><p>å¯¹äºfork-joinæ¡†æ¶ï¼Œå¯ä»¥å°†è¿™äº›æœ‰å‘è¾¹åˆ†ä¸ºä¸‰ç±»ï¼š</p><ul><li><em>Continue</em> edgesï¼Œè¿æ¥ä»»åŠ¡ä¸­é¡ºåºæ‰§è¡Œçš„æ­¥éª¤</li><li>Fork edgesï¼Œå°†forkæ“ä½œè¿æ¥åˆ°å­ä»»åŠ¡çš„ç¬¬ä¸€ä¸ªæ­¥éª¤</li><li>join edges connect the last step of a task to all <em>join</em> operations on that task</li></ul><p>ä¸€ä¸ªå°ä¾‹å­</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">S1</span><br><span class="line">fork S2</span><br><span class="line">S3</span><br><span class="line">join S2  <span class="comment">// è¿™é‡Œjoin S2å‘ç”Ÿåœ¨S4ä¹‹å‰</span></span><br><span class="line">S4</span><br><span class="line"><span class="comment">// S5 å¦‚æœæœ‰çš„è¯ï¼Œè¿æ¥åˆ°S4ä¹‹å</span></span><br></pre></td></tr></tbody></table></figure><p>å¯¹åº”çš„CGä¸º</p><img src="/2020/01/08/Task%20Parallelism/image-20200108094903279.png" class=""><h4 id="CGsä¸Šçš„data-race"><a href="#CGsä¸Šçš„data-race" class="headerlink" title="CGsä¸Šçš„data race"></a>CGsä¸Šçš„data race</h4><p>æ²¡æœ‰è¾¹è¿æ¥çš„ä¸¤ä¸ªèŠ‚ç‚¹åŒæ—¶å†™æˆ–è€…è¯»å†™ç›¸åŒçš„ä½ç½®æ—¶å‘ç”Ÿdata race</p><h4 id="CGsä¸Šçš„ç†æƒ³å¹¶è¡Œç¨‹åº¦-ï¼ˆideal-parallelismï¼‰"><a href="#CGsä¸Šçš„ç†æƒ³å¹¶è¡Œç¨‹åº¦-ï¼ˆideal-parallelismï¼‰" class="headerlink" title="CGsä¸Šçš„ç†æƒ³å¹¶è¡Œç¨‹åº¦ ï¼ˆideal parallelismï¼‰"></a>CGsä¸Šçš„ç†æƒ³å¹¶è¡Œç¨‹åº¦ ï¼ˆ<em>ideal parallelism</em>ï¼‰</h4><p>ä¸è®¡ç®—æœºçš„å®é™…å¹¶è¡Œæ€§æ— å…³<br>$$<br>ideal,parallelism = \frac{WORK(G)}{SPAN(G)} \tag{1}<br>$$</p><p>å…¶ä¸­ï¼š</p><ul><li>WORK(G)ä¸ºGä¸­æ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œæ—¶é—´ä¹‹å’Œ</li><li>SPAN(G)ä¸ºGä¸­å…³é”®è·¯å¾„ä¸ŠèŠ‚ç‚¹çš„æ‰§è¡Œæ—¶é—´ä¹‹å’Œï¼Œä¸Šä¾‹ä¸­SPAN(G)ä¸º <strong>max((S1,S3,S4), (S1,S2,S4))</strong></li></ul><h3 id="Multiprocessor-Scheduling-Parallel-Speedup"><a href="#Multiprocessor-Scheduling-Parallel-Speedup" class="headerlink" title="Multiprocessor Scheduling, Parallel Speedup"></a>Multiprocessor Scheduling, Parallel Speedup</h3><h4 id="å‡è®¾"><a href="#å‡è®¾" class="headerlink" title="å‡è®¾"></a>å‡è®¾</h4><p>æœ‰Pä¸ªå¤„ç†å™¨ï¼Œæ¯ä¸ªå¤„ç†å™¨éƒ½ç›¸åŒï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹çš„æ‰§è¡Œæ—¶é—´éƒ½æ˜¯å›ºå®šçš„ï¼ˆä¸ç®¡åœ¨é‚£ä¸ªå¤„ç†å™¨ä¸Šï¼‰ï¼Œå¤„ç†å™¨éƒ½æ˜¯<strong>è´ªå¿ƒ</strong>åœ°æ‰§è¡Œä»»åŠ¡<br>T_pè¡¨ç¤ºåœ¨pä¸ªå¤„ç†å™¨ä¸Šæ‰§è¡Œä¸€ä¸ªCGæ‰€èŠ±çš„æ—¶é—´,<br>ç›¸åŒçš„Pä¸ªå¤„ç†å™¨ï¼Œç›¸åŒçš„CGï¼Œä¸åŒçš„è°ƒåº¦ç®—æ³•ä¹Ÿå¯èƒ½å¯¹åº”ä¸åŒçš„T_p</p><p>$$<br>T_{\infty} \le T_p \le T_1<br>$$</p><h4 id="Speedup-P"><a href="#Speedup-P" class="headerlink" title="Speedup(P)"></a>Speedup(P)</h4><p>the parallel speedup for a given schedule of a CG on <em>P</em> processorsï¼Œæ»¡è¶³ä¸‹é¢ï¼š<br>$$<br>Speedup(P) = \frac{T_1}{T_P} \tag{2}<br>$$</p><p>$$<br>Speedup(P) \le P \tag{3}<br>$$</p><p>$$<br>Speedup(P) \le \frac {WORK}{SPAN} \tag{4}<br>$$</p><p>ï¼ˆ3ï¼‰è¡¨ç¤ºPä¸ªå¤„ç†å™¨ä¸èƒ½å¸¦æ¥På€çš„åŠ é€Ÿ</p><p>ï¼ˆ4ï¼‰è¡¨ç¤ºç°å®éª¨æ„Ÿï¼Œç†æƒ³ä¸°æ»¡</p><h3 id="Amdahlâ€™s-Law"><a href="#Amdahlâ€™s-Law" class="headerlink" title="Amdahlâ€™s Law"></a><strong>Amdahlâ€™s Law</strong></h3><p>if <em>q</em> <em>â‰¤</em> 1 is the fraction of <em>WORK</em> in a parallel program that must be executed <em>sequentially</em>, then the best speedup that can be obtained for that program for any number of processors, <em>P</em> , is <em>Speedup(P)</em> <em>â‰¤</em> 1*/q*.</p><p>ä¾‹å¦‚ï¼Œå¦‚æœçº¿æ€§å·¥ä½œå æ¯”ä¸º0.5ï¼Œåˆ™ä¸ç®¡å¤„ç†å™¨ä¸ªæ•°å†å¤šï¼Œæœ‰<em>Speedup(P)</em> <em>â‰¤</em> 2</p><p>å› ä¸ºæœ‰<br>$$<br>WORK(G)*q \leq SPAN(G) \tag{5}\<br>==&gt;  \frac{WORK(G)}{SPAN(G)} \leq \frac{1}{q}<br>$$<br>ä¸Šå¼è¡¨ç¤ºå…³é”®è·¯å¾„ç”¨æ—¶ä¸å°äºä»»åŠ¡ä¸­çº¿æ€§éƒ¨åˆ†çš„ç”¨æ—¶</p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> java </tag>
            
            <tag> å¹¶è¡Œç¼–ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdownæ˜¾ç¤º__init__.py</title>
      <link href="/2019/12/25/Markdown%E6%98%BE%E7%A4%BA__/"/>
      <url>/2019/12/25/Markdown%E6%98%BE%E7%A4%BA__/</url>
      
        <content type="html"><![CDATA[<p>Markdownè¯­æ³•ä¸­åŒä¸‹åˆ’çº¿ <code>__</code> å’ŒåŒæ˜Ÿ <code>**</code> éƒ½æ˜¯å¼ºè°ƒä½œç”¨<br>pythonä¸­çš„ <strong>init</strong>.pyå°±æ˜¾ç¤ºæˆè¿™ä¸ªæ ·å­äº† <span class="emoji" alias="unamused" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f612.png?v8">ğŸ˜’</span></p><p>å¯ä»¥ä½¿ç”¨åå¼•å·å°†å…¶åŒ…å«ï¼Œæ˜¾ç¤ºæ•ˆæœ: <code>__init__.py</code> <span class="emoji" alias="yum" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f60b.png?v8">ğŸ˜‹</span></p>]]></content>
      
      
      
        <tags>
            
            <tag> æ‚ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°å½•ä¸€æ¬¡æºç é˜…è¯»</title>
      <link href="/2019/05/12/requests%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/"/>
      <url>/2019/05/12/requests%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/</url>
      
        <content type="html"><![CDATA[<img src="/2019/05/12/requests%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/requests%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB.svg" class="" title="è®°å½•ä¸€æ¬¡æºç é˜…è¯»">]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> pythonï¼Œè¯»ä¹¦ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DevOps for dummies</title>
      <link href="/2019/02/25/devops/"/>
      <url>/2019/02/25/devops/</url>
      
        <content type="html"><![CDATA[<h3 id="å…³é”®è¯"><a href="#å…³é”®è¯" class="headerlink" title="å…³é”®è¯"></a>å…³é”®è¯</h3><p>business-driven, people, practice, tools</p><h3 id="åŸåˆ™"><a href="#åŸåˆ™" class="headerlink" title="åŸåˆ™"></a>åŸåˆ™</h3><ul><li>Develop and test against production-like systems </li><li>Deploy with repeatable, reliable processes</li><li>Monitor and validate operational quality</li><li>Amplify feedback loops<span id="more"></span></li></ul><h3 id="æ¶æ„"><a href="#æ¶æ„" class="headerlink" title="æ¶æ„"></a>æ¶æ„</h3><img src="/2019/02/25/devops/devops.png" class="" title="devops"><h3 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h3><ul><li><p>DevOps isnâ€™t the goal. It helps you reach your goals</p></li><li><p>Any kind of system that needs <strong>rapid</strong> delivery of <strong>innovation</strong> requires DevOps</p></li><li><p>In broad terms, DevOps is an approach based on <strong>lean and agile principles</strong> in which business owners and the development, operations, and quality assurance departments collaborate to deliver software <strong>in a continuous manner</strong> that enables the business to more quickly seize market opportunities and reduce the time to include customer feedback</p></li><li><p>A true DevOps approach includes lines of business, practitioners, executives, partners, suppliers, and so on</p></li><li><p><strong>Continuous testing</strong> is facilitated by adopting capabilities like <strong>automated testing</strong> and <strong>service virtualization</strong></p></li><li><p>software-defined environments enable you to capture infrastructure as a kind of programmable and repeatable pattern, thereby accelerating deployments</p></li><li><p>Collaboration and communication across stakeholders â€” thatâ€™s the culture of DevOps.</p></li><li><p>Giving all stakeholders <strong>visibility</strong> into a projectâ€™s goals and status is crucial for building a DevOps culture based on trust and collaboration.</p></li><li><p>Processes define what those people do. Your organization can have a great culture of collaboration, but if people are doing the wrong things or doing the right things in the wrong way, failure is still likely.</p></li><li><p>Adopting continuous delivery typically is the most critical part of adopting DevOps.</p></li><li><p>From a process perspective, you need to adopt processes in three areas to enable <strong>continuous testing</strong>:</p><p>âœ“ Test environment provisioning and configuration</p><p>âœ“ Test data management</p><p>âœ“ Test integration, function, performance, and security</p></li><li><p>If an organization is building or maintaining multiple applications, everything it does has to be repeatable, in a reliable manner, to ensure quality across all applications</p></li><li><p>Start by focusing on the critical parts of organization â€” not everything all at once â€” and then gradually broaden to include all stages</p></li><li><p>The build stage is where the code is compiled to create and unit test the binaries to be deployed. Multiple build tools may be used in this stage, based on cross-platform and cross-technology needs</p></li><li><p>Development organizations typically use <strong>build servers</strong> to facilitate the large number of builds required on an ongoing basis to enable continuous integration</p></li><li><p>For any organization that wants to enable <strong>continuous testing</strong>, <strong>managing test data</strong> is an essential function</p></li><li><p>end-to-end Develop/Test environments =  cloud environments + deployment automation + service virtualization</p></li><li><p>Cloud without DevOps means not leveraging all the benefits of cloud</p></li><li><p>When adopting cloud, you first want to decide on the scope of responsibility that you plan to hand over to the cloud platform and what responsibility you want to take on yourself</p></li><li><p>two primary service models for cloud: Infrastructure as a Service (<strong>IaaS</strong>) and Platform as a Service (<strong>PaaS</strong>)</p></li><li><p>treats infrastructure as code best practicesï¼š</p><ul><li>Treat pattern definitions, script packages, and services as code</li><li>version everything</li><li>Automate deployment of topology patterns to the cloud</li><li>Manage versions of patterns across multiple cloud environments</li><li>Automate the testing of patterns</li><li>Cleanup catalog resources to avoid sprawl</li></ul></li><li><p>Ten DevOps myths:</p><ul><li>DevOps Is Only for â€œBorn on the Webâ€ Shops</li><li>DevOps Is Operations Learning How to Code</li><li>DevOps Is Just for Development and Operations</li><li>DevOps Isnâ€™t for ITIL Shops</li><li>DevOps Isnâ€™t for Regulated Industries</li><li>DevOps Isnâ€™t for Outsourced Development</li><li>No Cloud Means No DevOps</li><li>DevOps Isnâ€™t for Large, Complex Systems</li><li>DevOps Is Only about Communication</li><li>DevOps Means Continuous Change Deployment</li></ul></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è¯»ä¹¦ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¼‚æ­¥ç½‘ç»œç¼–ç¨‹</title>
      <link href="/2018/11/25/python%E5%BC%82%E6%AD%A5/"/>
      <url>/2018/11/25/python%E5%BC%82%E6%AD%A5/</url>
      
        <content type="html"><![CDATA[<h3 id="å…³é”®è¯"><a href="#å…³é”®è¯" class="headerlink" title="å…³é”®è¯"></a>å…³é”®è¯</h3><p>åç¨‹ã€ç”Ÿæˆå™¨</p><h3 id="ç¬”è®°"><a href="#ç¬”è®°" class="headerlink" title="ç¬”è®°"></a>ç¬”è®°</h3><ul><li><p>åç¨‹ï¼šåˆç§°ä½œCoroutineã€‚ä»å­—é¢ä¸Šæ¥ç†è§£ï¼Œå³ååŒè¿è¡Œçš„ä¾‹ç¨‹ï¼Œå®ƒæ˜¯æ¯”æ˜¯çº¿ç¨‹ï¼ˆthreadï¼‰æ›´ç»†é‡çº§çš„ç”¨æˆ·æ€çº¿ç¨‹ï¼Œç‰¹ç‚¹æ˜¯å…è®¸ç”¨æˆ·çš„ä¸»åŠ¨è°ƒç”¨å’Œä¸»åŠ¨é€€å‡ºï¼ŒæŒ‚èµ·å½“å‰çš„ä¾‹ç¨‹ç„¶åè¿”å›å€¼æˆ–å»æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œæ¥ç€è¿”å›åˆ°åŸæ¥åœä¸‹çš„ç‚¹ç»§ç»­æ‰§è¡Œ</p></li><li><p>æœ‰æ—¶é—´å†å†™ã€‚ã€‚ã€‚</p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>éå†äºŒå‰æ ‘</title>
      <link href="/2018/06/19/%E9%81%8D%E5%8E%86%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
      <url>/2018/06/19/%E9%81%8D%E5%8E%86%E4%BA%8C%E5%8F%89%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<p><span class="emoji" alias="star" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2b50.png?v8">â­</span>éé€’å½’å®ç°</p><h3 id="ä¸­åºéå†"><a href="#ä¸­åºéå†" class="headerlink" title="ä¸­åºéå†"></a>ä¸­åºéå†</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inorderTraversal</span>(<span class="params">self, root: TreeNode</span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        cur = root  <span class="comment">#å€ŸåŠ©ä¸´æ—¶çš„curï¼Œä¸è¦ä¿®æ”¹root</span></span><br><span class="line">        res = []</span><br><span class="line">        stack = []</span><br><span class="line">        <span class="keyword">while</span> cur <span class="keyword">or</span> stack:</span><br><span class="line">            <span class="keyword">if</span> cur:  <span class="comment"># ä¸€ç›´å¾€å·¦èµ°ï¼Œå…¨éƒ¨å…¥æ ˆ</span></span><br><span class="line">                stack.append(cur) </span><br><span class="line">                cur = cur.left</span><br><span class="line">            <span class="keyword">else</span>:  <span class="comment"># å–å‡ºæ ˆé¡¶èŠ‚ç‚¹ï¼Œå¤„ç†ï¼Œå†å¤„ç†è¯¥èŠ‚ç‚¹çš„å³å­æ ‘   </span></span><br><span class="line">                cur = stack.pop()</span><br><span class="line">                res.append(cur.val)  </span><br><span class="line">                cur = cur.right</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></tbody></table></figure><h3 id="å‰åºéå†"><a href="#å‰åºéå†" class="headerlink" title="å‰åºéå†"></a>å‰åºéå†</h3><p>å†™æ³•ä¸€</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">preorderTraversal</span>(<span class="params">self, root: TreeNode</span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        cur = root</span><br><span class="line">        res = []</span><br><span class="line">        stack = []</span><br><span class="line">        <span class="keyword">while</span> cur <span class="keyword">or</span> stack:</span><br><span class="line">            <span class="keyword">if</span> cur:</span><br><span class="line">                stack.append(cur)  <span class="comment"># æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ”¾å…¥æ ˆä¸­</span></span><br><span class="line">                res.append(cur.val)</span><br><span class="line">                cur = cur.left</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                cur = stack.pop()  <span class="comment"># è¿™é‡Œpopå‡ºæ¥çš„æ˜¯å·²ç»è®¿é—®è¿‡çš„èŠ‚ç‚¹</span></span><br><span class="line">                cur = cur.right  <span class="comment"># è¿˜éœ€è¦æŒ‡å‘å³å­æ ‘</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></tbody></table></figure><p><span class="emoji" alias="heart" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png?v8">â¤</span>å†™æ³•äºŒï¼š<span id="more"></span></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">preorderTraversal</span>(<span class="params">self, root: TreeNode</span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        cur = root</span><br><span class="line">        res = []</span><br><span class="line">        stack = []</span><br><span class="line">        <span class="keyword">while</span> cur <span class="keyword">or</span> stack:</span><br><span class="line">            <span class="keyword">if</span> cur:</span><br><span class="line">                stack.append(cur.right)  <span class="comment"># æ ˆä¸­ç›´æ¥æ”¾å…¥å·²è®¿é—®èŠ‚ç‚¹çš„å³å­æ ‘</span></span><br><span class="line">                res.append(cur.val)</span><br><span class="line">                cur = cur.left</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                cur = stack.pop()  <span class="comment"># å–åˆ°çš„å°±æ˜¯å³å­æ ‘æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></tbody></table></figure><p> <span class="emoji" alias="neutral_face" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f610.png?v8">ğŸ˜</span>å†™æ³•ä¸‰ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">preorderTraversal</span>(<span class="params">self, root</span>):</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type root: TreeNode</span></span><br><span class="line"><span class="string">        :rtype: List[int]</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> root <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        stack, output = [root], []</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> stack:</span><br><span class="line">            root = stack.pop()</span><br><span class="line">            <span class="keyword">if</span> root <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                output.append(root.val)</span><br><span class="line">                <span class="keyword">if</span> root.right <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:  <span class="comment">#å³å­æ ‘å…ˆå…¥æ ˆï¼Œå·¦å­æ ‘åå…¥æ ˆ</span></span><br><span class="line">                    stack.append(root.right)</span><br><span class="line">                <span class="keyword">if</span> root.left <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                    stack.append(root.left)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> output</span><br></pre></td></tr></tbody></table></figure><h3 id="ååºéå†"><a href="#ååºéå†" class="headerlink" title="ååºéå†"></a>ååºéå†</h3><p><a href="https://leetcode-cn.com/problems/binary-tree-postorder-traversal/">https://leetcode-cn.com/problems/binary-tree-postorder-traversal/</a></p><p>å¯¹äºå½“å‰èŠ‚ç‚¹ï¼Œåªæœ‰å…¶<strong>å³å­æ ‘å·²ç»å¤„ç†</strong>æˆ–<strong>æ²¡æœ‰å³å­æ ‘</strong>æ—¶ï¼Œæ‰èƒ½å¤„ç†å®ƒã€‚</p><p><span class="emoji" alias="eyes" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f440.png?v8">ğŸ‘€</span>è¿™é‡Œè¦è®°å½•ä¸€ä¸ªlast_visitedèŠ‚ç‚¹â€‹â€‹</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">postorderTraversal</span>(<span class="params">self, root: TreeNode</span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        cur = root</span><br><span class="line">        res = []</span><br><span class="line">        stack = []</span><br><span class="line">        last_visited = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">while</span> cur <span class="keyword">or</span> stack:</span><br><span class="line">            <span class="keyword">if</span> cur:</span><br><span class="line">                stack.append(cur)</span><br><span class="line">                cur = cur.left</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                tmp = stack[-<span class="number">1</span>]  <span class="comment"># å®šä½æ ¹èŠ‚ç‚¹ï¼Œè¿™ä¸ªåœ°æ–¹ä¸èƒ½pop(),å› ä¸ºå¯èƒ½æœ‰å³å­æ ‘</span></span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> tmp.right <span class="keyword">or</span> tmp.right == last_visited:  </span><br><span class="line">                    <span class="comment"># æ²¡æœ‰å³å­æ ‘æˆ–è€…å·²ç»è®¿é—®è¿‡äº†ï¼Œå¤„ç†å½“å‰æ ¹èŠ‚ç‚¹</span></span><br><span class="line">                    res.append(tmp.val)</span><br><span class="line">                    last_visited = tmp</span><br><span class="line">                    stack.pop()</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    cur = tmp.right  <span class="comment"># å³å­æ ‘æœªè®¿é—®ï¼Œå¤„ç†å³å­æ ‘</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></tbody></table></figure><p><span class="emoji" alias="heart" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png?v8">â¤</span>ååºéå†å¯ä»¥å€Ÿå‰åºéå†çš„ä¸€ä¸ªå˜ä½“å®ç°ï¼Œ<strong>å…ˆæ ¹å³å·¦,å†å€’ç½®</strong>ã€‚</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">preorderTraversal</span>(<span class="params">self, root: TreeNode</span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        cur = root</span><br><span class="line">        res = []</span><br><span class="line">        stack = []</span><br><span class="line">        <span class="keyword">while</span> cur <span class="keyword">or</span> stack:</span><br><span class="line">            <span class="keyword">if</span> cur:</span><br><span class="line">                stack.append(cur.left)  <span class="comment"># æ ˆä¸­ç›´æ¥æ”¾å…¥å·²è®¿é—®èŠ‚ç‚¹çš„å·¦å­æ ‘</span></span><br><span class="line">                res.append(cur.val)</span><br><span class="line">                cur = cur.right</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                cur = stack.pop()  <span class="comment"># å–åˆ°çš„å°±æ˜¯å·¦å­æ ‘æ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> res[::-<span class="number">1</span>]</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®°ï¼ŒäºŒå‰æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>word2vec + manage experiments</title>
      <link href="/2018/04/05/%E8%AF%8D%E5%90%91%E9%87%8F/"/>
      <url>/2018/04/05/%E8%AF%8D%E5%90%91%E9%87%8F/</url>
      
        <content type="html"><![CDATA[<p>å…³é”®è¯ï¼šmodel base, variable sharing, model sharing</p><h4 id="word2vec"><a href="#word2vec" class="headerlink" title="word2vec"></a>word2vec</h4><ul><li>æ–‡æœ¬çš„åˆ†å¸ƒå¼è¡¨ç¤ºæ˜¯è®¸å¤šè‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡çš„åŸºç¡€</li><li>word2vecæ˜¯ç”¨æ¥ç”Ÿæˆè¯è¯­åˆ†å¸ƒå¼è¡¨ç¤ºçš„ä¸€ç»„æ¨¡å‹</li><li>ä¸»è¦æœ‰ä¸¤ç§æ¨¡å‹ï¼šskip-gramå’ŒCBOW</li><li>ç®—æ³•è§’åº¦ï¼šCBOWæ¨¡å‹ä»ä¸Šä¸‹æ–‡è¯é¢„æµ‹ç›®æ ‡è¯ï¼Œskip-gramæ¨¡å‹ä»ç›®æ ‡è¯é¢„æµ‹ä¸Šä¸‹æ–‡è¯<span id="more"></span></li><li>ç»Ÿè®¡è§’åº¦ï¼šCBOWæ¨¡å‹å°†an entire context as one observationï¼Œè¿™æ ·åšsmoothes overäº†è®¸å¤šåˆ†å¸ƒä¿¡æ¯ï¼Œé€‚åˆå°ä¸€äº›çš„æ•°æ®é›†ä¸Šï¼›skip-gramæ¨¡å‹åˆ™æ˜¯å°†<strong>each</strong> context-target pair as a new observationï¼Œåœ¨larger datasetsä¸Šè¡¨ç°æ›´å¥½</li><li>è®­ç»ƒè¯å‘é‡ï¼šå®šä¹‰ä¸€ä¸ªå•å±‚ç½‘ç»œï¼Œä»»åŠ¡æ˜¯ç»™å®šä¸­å¿ƒè¯é¢„æµ‹è¯å…¸ä¸­çš„è¯ä½œä¸ºä¸Šä¸‹æ–‡è¯çš„æ¦‚ç‡ï¼Œæˆ‘ä»¬æœ€åè¦çš„æ˜¯éšå«å±‚çš„æƒé‡å‚æ•°</li><li>ä½¿ç”¨ softmax æ¥è·å¾—å¯èƒ½çš„ç›®æ ‡è¯çš„åˆ†å¸ƒï¼Œåˆ†æ¯è¦å¯¹å­—å…¸ä¸­çš„æ‰€æœ‰è¯å–æŒ‡æ•°å†æ±‚å’Œï¼Œè®¡ç®—æ˜¯ç“¶é¢ˆ</li><li>è§„é¿ç“¶é¢ˆçš„æ–¹æ³•ï¼šå±‚æ¬¡åŒ–çš„softmax å’ŒåŸºäºé‡‡æ ·çš„ softmax </li><li>æ–‡ç« **Distributed Representations of Words and Phrases and their Compositionality **æŒ‡å‡ºï¼Œè®­ç»ƒskip-gramæ¨¡å‹æ—¶ï¼Œä¸æ›´å¤æ‚çš„åˆ†å±‚softmaxç›¸æ¯”ï¼Œè´Ÿé‡‡æ ·å¯ä»¥åŠ å¿«è®­ç»ƒé€Ÿåº¦ï¼Œä¸ºé¢‘ç¹è¯æ±‡æä¾›æ›´å¥½çš„å‘é‡è¡¨ç¤º</li><li>è´Ÿé‡‡æ ·å®é™…ä¸Šæ˜¯ä¸€ç§ç§°ä¸ºå™ªå£°å¯¹æ¯”ä¼°è®¡ï¼ˆNCEï¼‰çš„ç®€åŒ–æ¨¡å‹ï¼ŒåŸºäºå‡è®¾ï¼Œå¦‚å™ªå£°æ ·æœ¬çš„æ•°é‡kå’Œå™ªå£°æ ·æœ¬çš„åˆ†å¸ƒQæ»¡è¶³kQ(w) = 1ï¼Œæ¥ç®€åŒ–è®¡ç®—ï¼›ç†è®ºä¸Šä¸èƒ½ä¿è¯å…¶å¯¼æ•°å’Œsoftmaxæ¢¯åº¦ä¸€è‡´</li><li>NCEåˆ™éšç€noiseæ ·æœ¬å¢å¤šï¼Œæä¾›äº†è¿™ç§ä¿è¯</li><li>è´Ÿé‡‡æ ·å’ŒNCEåªåœ¨è®­ç»ƒæ—¶æœ‰ç”¨</li></ul><h4 id="Implementing"><a href="#Implementing" class="headerlink" title="Implementing"></a>Implementing</h4><ul><li>è¯çš„indicesä½œä¸ºè¾“å…¥ï¼ˆä¸€ä¸ªscalarï¼‰ï¼Œ</li><li>BATCH_SIZEçš„æ ·æœ¬ï¼Œè¾“å…¥ç»´åº¦ä¸º[BATCH_SIZE]ï¼Œè¾“å‡ºç»´åº¦ä¸º[BATCH_SIZE,1]</li><li>è¯å‘é‡çŸ©é˜µç»´åº¦ä¸º[VOCAB_SIZE,EMBED_SIZE]ï¼Œæ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªè¯å‘é‡</li><li>åˆ©ç”¨tf.nn.embedding_lookup()æ‰¾ä¸­å¿ƒè¯å¯¹åº”çš„å‘é‡ï¼Œå…å»äº†ä¸å¿…è¦çš„è®¡ç®—ï¼ˆmatrix and onehot vectorï¼‰</li><li>lossä½¿ç”¨tf.nn.nce_loss()ï¼Œoptimizerä½¿ç”¨GradientDescentOptimizer</li></ul><h4 id="Structure-TF-models"><a href="#Structure-TF-models" class="headerlink" title="Structure TF models"></a>Structure TF models</h4><p>å®šä¹‰å›¾</p><ul><li>å¯¼å…¥æ•°æ®ï¼ˆplaceholder or tf.dataï¼‰</li><li>å®šä¹‰æƒé‡</li><li>å®šä¹‰æ¨¡å‹</li><li>å®šä¹‰æŸå¤±å‡½æ•°</li><li>å®šä¹‰ä¼˜åŒ–å™¨</li></ul><p>æ‰§è¡Œå›¾</p><ul><li>åˆå§‹åŒ–æ‰€æœ‰å˜é‡</li><li>åˆå§‹åŒ–è¿­ä»£å™¨æˆ–è€…feed inè®­ç»ƒæ•°æ®</li><li>æ•°æ®ç»è¿‡æ¨¡å‹å¾—åˆ°ç»“æœ</li><li>è®¡ç®—cost</li><li>è°ƒæ•´æ¨¡å‹å‚æ•°ä½¿å¾—costæœ€å°æˆ–è€…æœ€å¤§</li></ul><p>build model as a class in order to reuse easily.</p><h4 id="Variable-sharing"><a href="#Variable-sharing" class="headerlink" title="Variable sharing"></a>Variable sharing</h4><p>Name scope</p><p>å°†ç›¸å…³çš„opsæ”¾åœ¨ä¸€ä¸ªname_scopeä¸‹ï¼Œè¿™æ ·å¾—åˆ°çš„å›¾åœ¨TensorBoardä¸Šæ˜¯ä¸€å—ä¸€å—çš„ï¼Œæ›´åŠ æ•´æ´ã€‚<br>TensorBoardå›¾ä¸­ä¸‰ç§è¾¹ï¼š</p><ol><li>ç°å®è¾¹ï¼šæ•°æ®æµ</li><li>æ©™å®è¾¹ï¼šå‚è€ƒè¾¹ï¼Œop_lestå½±å“op_right</li><li>ç°è™šè¾¹ï¼šæ§åˆ¶ä¾èµ–è¾¹ï¼Œop_leftä¾èµ–äºop_right</li></ol><p>Variable scope</p><p>å’ŒName scopeä¸€æ ·éƒ½åˆ›å»ºäº†namespaceï¼Œè°ƒç”¨tf.variable_scope(â€œnameâ€)ä¼šéšå¼åœ°è°ƒç”¨tf.name_scope(â€œnameâ€)ï¼ŒVariable scopeä¸»è¦åŠŸèƒ½æ˜¯ä¿ƒè¿›å˜é‡å…±äº«ï¼ˆfacilitate variable sharing)<br>ä¸ºå®ç°å˜é‡å…±äº«:</p><ol><li>ä½¿ç”¨ <strong>tf.get_variable()</strong>,å®ƒä¼šåœ¨åˆ›å»ºå˜é‡ä¹‹å‰æ£€æŸ¥å…¶æ˜¯å¦å­˜åœ¨</li><li>å°†æ‰€ç”¨åˆ°çš„å˜é‡æ”¾åˆ°ä¸€ä¸ªVarScopeï¼Œå°†è¿™ä¸ªVarScopeè®¾ç½®ä¸ºå¯å¤ç”¨çš„ï¼ˆreusableï¼‰</li></ol><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fully_connected</span>(<span class="params">x,output_dim,scope_name</span>): <span class="comment">#  åŸºç¡€ç»„ä»¶ï¼šå…¨è¿æ¥å±‚</span></span><br><span class="line">    <span class="keyword">with</span> tf.variable_scope(scope_name):</span><br><span class="line">        w = tf.get_variable(<span class="string">"weights"</span>,[x.shape[<span class="number">1</span>],output_dim],initializer=tf.random_normal_initializer())</span><br><span class="line">        b = tf.get_variable(<span class="string">"bias"</span>,[output_dim],initializer= tf.constant_initializer(<span class="number">0.0</span>))</span><br><span class="line">        <span class="keyword">return</span> tf.matmul(x,w) + b</span><br><span class="line">        </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">two_hidden_layer</span>(<span class="params">x</span>):  <span class="comment">#ç½‘ç»œç»“æ„ï¼šä¸¤ä¸ªå…¨è¿æ¥å±‚</span></span><br><span class="line">    h1 = fully_connected(x,<span class="number">50</span>,<span class="string">'h1'</span>)</span><br><span class="line">    h2 = fully_connected(h1,<span class="number">10</span>,<span class="string">'h2'</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">with</span> tf.variable_scope(<span class="string">'two_layers'</span>) <span class="keyword">as</span> scope: <span class="comment">#è°ƒç”¨ç½‘ç»œï¼Œè¾“å…¥x1ï¼Œx2</span></span><br><span class="line">    logits1 = two_hidden_layer(x1)</span><br><span class="line">    scope.reuse_variables()</span><br><span class="line">    logits2 = two_hidden_layer(x2ï¼‰</span><br></pre></td></tr></tbody></table></figure><p>ä»¥ä¸Šä»£ç æ¨¡å¼ï¼ŒåŸºç¡€ç»„ä»¶å¯ä»¥å®šä¹‰æ›´å¤šï¼Œæ¯”å¦‚convï¼Œreluï¼Œç½‘ç»œç»“æ„å¯ä»¥æ›´å¤æ‚ï¼Œæ¯”å¦‚æ”¾ä¸€ä¸ªResNetï¼Œéå¸¸å®¹æ˜“scaleã€‚<br>ç”±äºä½¿ç”¨äº†å˜é‡å…±äº«ï¼Œå¤šæ¬¡ä¼ å…¥xï¼Œç½‘ç»œTensorBoardå›¾çš„å¤æ‚ç¨‹åº¦ä¸ä¼šçˆ†ç‚¸å¼å¢åŠ ã€‚</p><p>Graph collections</p><p>ä½¿ç”¨è¿™ä¸ªï¼Œå¯ä»¥è·å–æ»¡è¶³ä¸€å®šæ¡ä»¶çš„æ‰€æœ‰å˜é‡ï¼Œtf.get_collection(key,scope=None)<br>æ¯”å¦‚æ‰§è¡Œoptimizerçš„æ—¶å€™ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒä¼šè·å–key=tf.GraphKeys.TRAINABLE_VARIABLESçš„å˜é‡ï¼Œå³æ‰€æœ‰å¯è®­ç»ƒçš„å˜é‡ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥ä¼ å…¥æŒ‡å®šçš„ã€è¦è®­ç»ƒçš„å˜é‡<br>è·å–æŸä¸ªscopeä¸‹çš„æ‰€æœ‰å˜é‡ï¼Œtf.get_collection(tf.GraphKeys.GLOBAL_VARIABLES,scope=â€™scope_nameâ€™)<br>keyè¿˜æœ‰è®¸å¤šå…¶å®ƒçš„å€¼ï¼Œè§å®˜ç½‘ã€‚</p><h4 id="Manage-experiments"><a href="#Manage-experiments" class="headerlink" title="Manage experiments"></a>Manage experiments</h4><p>å®éªŒæ€»æ˜¯å¾ˆä¹…ï¼Œä¸­æ–­éšæ—¶å‘ç”Ÿï¼Œå› æ­¤è®­ç»ƒå¯ä»¥éšæ—¶éšåœ°åœæ­¢ã€åƒæ²¡äº‹ä¸€æ ·æ¢å¤ï¼Œéå¸¸é‡è¦ã€‚<br>å¦å¤–ä¸€ä¸ªé—®é¢˜æ˜¯è®ºæ–‡ç»“æœå¤ç°ï¼Œæ§åˆ¶å®éªŒçš„éšæœºå› å­å¯¹å¤ç°ç»“æœéå¸¸å…³é”®ã€‚</p><p>tf.train.Saver()</p><p><strong>å‘¨æœŸæ€§åœ°ä¿å­˜æ¨¡å‹å‚æ•°</strong>æ˜¯ä¸ªå¥½ä¹ æƒ¯<br>tf.train.Saver()ç±»å°†å›¾çš„<strong>å˜é‡ä¿å­˜</strong>ï¼ˆä¸æ˜¯æ•´å¼ å›¾ï¼‰åˆ°äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªcheckpointï¼ˆå˜é‡ååˆ°tensorsçš„æ˜ å°„ï¼‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®šä¹‰æ¨¡å‹</span></span><br><span class="line">...</span><br><span class="line">global_steps = tf.Variable(<span class="number">0</span>, trainable=<span class="literal">False</span>ï¼Œname=<span class="string">'global_steps'</span>)</span><br><span class="line">optimizer = tf.train.GradientDescentOptimizer(lr).minimize(loss,global_step=global_steps)</span><br><span class="line"><span class="comment">#åˆ›å»ºä¸€ä¸ªsaverå¯¹è±¡</span></span><br><span class="line">saver = tf.train.Saver()</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯åŠ¨ä¸€ä¸ªä¼šè¯æ¥æ‰§è¡Œè®¡ç®—</span></span><br><span class="line"><span class="keyword">with</span> tf.session() <span class="keyword">as</span> sess:</span><br><span class="line">  <span class="keyword">for</span> step <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,training_steps):</span><br><span class="line">        sess.run([optimizer]) <span class="comment">#global_stepä¼šåœ¨æ¯ä¸€æ­¥è®­ç»ƒåè‡ªåŠ 1</span></span><br><span class="line">        <span class="keyword">if</span> step%<span class="number">1000</span>==<span class="number">0</span>:</span><br><span class="line">            <span class="comment">#è¿™é‡Œä¼ å…¥stepä¹Ÿå·®ä¸å¤šå§...é»˜è®¤ä¿å­˜å›¾ä¸­æ‰€æœ‰å˜é‡</span></span><br><span class="line">            saver.save(sess,<span class="string">'checkpoints/model-name'</span>,global_step=global_steps)</span><br></pre></td></tr></tbody></table></figure><p>ç”Ÿæˆçš„checkpointåï¼Œåƒè¿™æ ·ï¼Œâ€™checkpoints/skip-gram-10000â€™<br>åœ¨æ¢å¤æ¨¡å‹æ—¶å¯ä»¥ç›´æ¥ä¼ å…¥checkpointåï¼ˆå¦‚æœæœ‰çš„è¯</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ckpt = tf.train.get_checkpoint_state(os.path.dirname(<span class="string">'checkpoints/model-name'</span>))</span><br><span class="line"><span class="keyword">if</span> ckpt <span class="keyword">and</span> ckpt.model_checkpoint_path:</span><br><span class="line">    saver.restore(sess,ckpt.model_checkpoint_path) <span class="comment">#æ¢å¤çš„æ˜¯æœ€è¿‘çš„ä¸€ä¸ªcheck point</span></span><br></pre></td></tr></tbody></table></figure><p>æ¢å¤çš„æ—¶å€™ï¼Œç½‘ç»œå›¾è¿˜å¾—è‡ªå·±é‡æ–°æ­ï¼ˆstill have to create the graph ourselvesï¼‰ä¹‹åå†åŠ è½½å˜é‡<br>å½“ç„¶ï¼Œç»å¸¸çš„åšæ³•æ˜¯åˆ°ç›®å‰ä¸ºæ­¢è¡¨ç°æœ€å¥½çš„å‚æ•°ä¹Ÿä¿å­˜ä¸‹æ¥ï¼ˆä¸æ­¢æ˜¯æœ€è¿‘çš„ä¸€æ¬¡ï¼‰</p><p>tf.summary</p><p>è®°å½•æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­æŒ‡æ ‡å˜åŒ–ï¼ŒåŒ…æ‹¬lossï¼Œaccuracyç­‰ç­‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºsummaries</span></span><br><span class="line"><span class="keyword">with</span> tf.name_scope(<span class="string">"summaries"</span>):</span><br><span class="line">    tf.summary.scalar(<span class="string">"loss"</span>,loss)</span><br><span class="line">    tf.summary.histogram(<span class="string">"histogram loss"</span>,loss)</span><br><span class="line">    tf.summary.scalar(<span class="string">"accuracy"</span>,accuracy)</span><br><span class="line">    summary_op = tf.summary.merge_all()</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰§è¡Œsummary op</span></span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="keyword">for</span> step <span class="keyword">in</span> <span class="built_in">range</span>(steps):</span><br><span class="line">        _loss,_,summary = sess.run([model.loss,model.optimizer,model.summary_op],feed_dict={...})</span><br><span class="line">        writer = tf.summary.FileWriter(<span class="string">'path'</span>+<span class="built_in">str</span>(lr),sess.graph) <span class="comment">#å°†lrå†™å…¥è·¯å¾„ï¼Œæ–¹ä¾¿tensorboardå¯¹æ¯”</span></span><br><span class="line">        writer.add(summary,global_step=step) <span class="comment">#è®°å½•æ¯ä¸€ä¸ªstepçš„summary</span></span><br><span class="line">    writer.close()</span><br></pre></td></tr></tbody></table></figure><p>control randomization</p><p>ä¸ºäº†ä½¿å¾—åˆ«äººåœ¨å®éªŒæ—¶ç»“æœä¼šä¸ä½ ä¸€è‡´</p><ol><li><p>opçº§åˆ«<br>æ‰€æœ‰çš„tensoråˆå§‹åŒ–æ—¶éƒ½ä¼ å…¥seedå‚æ•°<br>sessionè®°å½•äº†éšæœºçŠ¶æ€ï¼Œæ¯ä¸€ä¸ªæ–°çš„sessionéƒ½ä¼šé‡æ–°start the random state</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">c = tf.random_uniform([],-<span class="number">10</span>,<span class="number">10</span>,seed=<span class="number">2</span>)</span><br><span class="line">d = tf.random_uniform([],-<span class="number">10</span>,<span class="number">10</span>,seed=<span class="number">2</span>)</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="built_in">print</span>(sess.run(c)) <span class="comment">#value: a</span></span><br><span class="line">    <span class="built_in">print</span>(sess.run(d)) <span class="comment">#same value: a</span></span><br><span class="line">    <span class="built_in">print</span>(sess.run(c)) <span class="comment">#value: b</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>graphçº§åˆ«<br>æ¯”å¦‚demo1.pyå’Œdemo2.pyä»£ç ç›¸åŒï¼Œè®¾ç½®äº†tf.set_random_seed(seed)çš„è¯æ‰§è¡Œç»“æœæ˜¯ç›¸åŒçš„</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tf.set_random_seed(<span class="number">2</span>)</span><br><span class="line">c = tf.random_uniform([],-<span class="number">10</span>,<span class="number">10</span>)</span><br><span class="line">d = tf.random_uniform([],-<span class="number">10</span>,<span class="number">10</span>)</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="built_in">print</span>(sess.run(c)) <span class="comment"># éƒ½æ˜¯a</span></span><br><span class="line">    <span class="built_in">print</span>(sess.run(d)) <span class="comment"># éƒ½æ˜¯b</span></span><br></pre></td></tr></tbody></table></figure></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> machine learning </tag>
            
            <tag> TensorFlow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linear and logistic regression in TensorFlow</title>
      <link href="/2018/03/29/TensorFlow02/"/>
      <url>/2018/03/29/TensorFlow02/</url>
      
        <content type="html"><![CDATA[<h3 id="Linear-Regression"><a href="#Linear-Regression" class="headerlink" title="Linear Regression"></a>Linear Regression</h3><h4 id="é—®é¢˜å®šä¹‰ï¼š"><a href="#é—®é¢˜å®šä¹‰ï¼š" class="headerlink" title="é—®é¢˜å®šä¹‰ï¼š"></a>é—®é¢˜å®šä¹‰ï¼š</h4><p>è®¾Xä¸ºç”Ÿè‚²ç‡ï¼ŒYä¸ºé¢„æœŸå¯¿å‘½ï¼Œèƒ½å¦æ‰¾åˆ°ä¸€ä¸ªçº¿æ€§å‡½æ•°fä½¿å¾—Y = f(X)ï¼Ÿ</p><img src="/2018/03/29/TensorFlow02/f1.png" class=""><span id="more"></span><p>æ•°æ®é›†æè¿°ï¼š</p><p>åç§°: Birth rate - life expectancy in 2010<br>X = ç”Ÿè‚²ç‡. Type: float.<br>Y = é¢„æœŸå¯¿å‘½. Type: foat.<br>æ•°æ®é‡: 190<br>æ•°æ®å½¢å¼: (X,Y)</p><h4 id="æ–¹æ³•1ï¼š"><a href="#æ–¹æ³•1ï¼š" class="headerlink" title="æ–¹æ³•1ï¼š"></a>æ–¹æ³•1ï¼š</h4><p><strong>å‡è®¾</strong>Xå’ŒYä¹‹é—´çš„å…³ç³»æ˜¯çº¿æ€§çš„ï¼Œè¿™æ„å‘³ç€æœ‰wå’Œbï¼Œæ»¡è¶³ï¼šY_pred = wX + b.<br>æœ¬ä¾‹ä¸­wï¼Œbéƒ½æ˜¯scalarï¼Œ</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">w = tf.get_variable(<span class="string">'weights'</span>,initializer=tf.constant(<span class="number">0.0</span>))</span><br><span class="line">b = tf.get_variable(<span class="string">'bias'</span>,initializer=tf.constant(<span class="number">0.0</span>))</span><br></pre></td></tr></tbody></table></figure><p>æŸå¤±å‡½æ•°ä½¿ç”¨å‡æ–¹è¯¯å·®</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Y_pred = w*X+b</span><br><span class="line">loss = tf.square(Y-Y_pred,name=<span class="string">'loss'</span>)</span><br></pre></td></tr></tbody></table></figure><p>å®Œæ•´ä»£ç ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> utils</span><br><span class="line"></span><br><span class="line">DATA_FILE = <span class="string">"data/birth_life_2010.txt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 1: åŠ è½½æ•°æ®ï¼Œå½¢å¼ä¸ºï¼ˆ190ï¼Œ2ï¼‰çš„numpyæ•°ç»„ï¼Œæ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªç‚¹</span></span><br><span class="line">data, n_samples = utils.read_birth_life_data(DATA_FILE)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 2: åˆ›å»ºplaceholders</span></span><br><span class="line">X = tf.placeholder(tf.float32, name=<span class="string">'X'</span>)</span><br><span class="line">Y = tf.placeholder(tf.float32, name=<span class="string">'Y'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 3: åˆ›å»ºå˜é‡ï¼Œåˆå§‹åŒ–ä¸º0</span></span><br><span class="line">w = tf.get_variable(<span class="string">'weights'</span>, initializer=tf.constant(<span class="number">0.0</span>))</span><br><span class="line">b = tf.get_variable(<span class="string">'bias'</span>, initializer=tf.constant(<span class="number">0.0</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 4: æ¨¡å‹</span></span><br><span class="line">Y_predicted = w * X + b </span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 5: æŸå¤±å‡½æ•°</span></span><br><span class="line">loss = tf.square(Y - Y_predicted, name=<span class="string">'loss'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 6: GDæœ€å°åŒ–loss</span></span><br><span class="line">optimizer = tf.train.GradientDescentOptimizer(learning_rate=<span class="number">0.001</span>).minimize(loss)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">  <span class="comment"># Step 7: å˜é‡åˆå§‹åŒ–</span></span><br><span class="line">  sess.run(tf.global_variables_initializer()) </span><br><span class="line">  </span><br><span class="line">  <span class="comment"># Step 8: è®­ç»ƒ100å›</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>): <span class="comment"># run 100 epochs</span></span><br><span class="line">    <span class="comment"># æ¯æ¬¡ä¼ å…¥ä¸€ä¸ªæ•°æ®ç‚¹ï¼Œäº‹å®ä¸Šï¼Œä½¿ç”¨batches of dataæ›´å¥½ä¸€ç‚¹ã€‚</span></span><br><span class="line">        <span class="keyword">for</span> x, y <span class="keyword">in</span> data:</span><br><span class="line">      <span class="comment"># Session runs train_op to minimize loss</span></span><br><span class="line">      sess.run(optimizer, feed_dict={X: x, Y:y}) </span><br><span class="line">  </span><br><span class="line">  <span class="comment"># Step 9: output the values of w and b</span></span><br><span class="line">  w_out, b_out = sess.run([w, b]) </span><br></pre></td></tr></tbody></table></figure><p>ç»“è®ºï¼š<br>ç»è¿‡100æ¬¡è®­ç»ƒåï¼Œå¹³å‡æŸå¤±ä¸º30.04ï¼Œw = -6.07ï¼Œb = 84.93ã€‚<br>è¿™è¯å®äº†æˆ‘ä»¬çš„å‡è®¾ï¼Œå³å‡ºç”Ÿç‡ä¸ä¸€ä¸ªå›½å®¶äººå£çš„é¢„æœŸå¯¿å‘½ä¹‹é—´å­˜åœ¨è´Ÿç›¸å…³å…³ç³»ã€‚ ä½†æ˜¯ï¼Œè¿™å¹¶ä¸æ„å‘³ç€å¤šä¸€ä¸ªå­©å­ä¼šå‡å°‘6å¹´çš„å¯¿å‘½ã€‚</p><h4 id="æ–¹æ³•2ï¼š"><a href="#æ–¹æ³•2ï¼š" class="headerlink" title="æ–¹æ³•2ï¼š"></a>æ–¹æ³•2ï¼š</h4><p>å‡è®¾Xå’ŒYæ»¡è¶³ï¼šY_pred = wX^2 + uX + b</p><p>åªéœ€ä¿®æ”¹éƒ¨åˆ†ä»£ç ï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Step 3: åˆ›å»ºå˜é‡ï¼Œåˆå§‹åŒ–ä¸º0</span></span><br><span class="line">w = tf.get_variable(<span class="string">'weights_1'</span>, initializer=tf.constant(<span class="number">0.0</span>))</span><br><span class="line">u = tf.get_variable(<span class="string">'weights_2'</span>, initializer=tf.constant(<span class="number">0.0</span>))</span><br><span class="line">b = tf.get_variable(<span class="string">'bias'</span>, initializer=tf.constant(<span class="number">0.0</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 4: æ¨¡å‹</span></span><br><span class="line">Y_predicted = w * X * X + X * u + b </span><br></pre></td></tr></tbody></table></figure><p>ç”±äºå¹³æ–¹æŸå¤±ä¼šç»™ç¦»ç¾¤ç‚¹å¤ªå¤šçš„æƒé‡ï¼Œè¿™é‡ŒæŸå¤±å‡½æ•°è€ƒè™‘ä½¿ç”¨Huber lossï¼š</p><img src="/2018/03/29/TensorFlow02/f2.png" class=""><p>tensorflowæä¾›äº†ä¸€äº›æ§åˆ¶æµæ“ä½œï¼š</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…·ä½“å®ç°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">huber_loss</span>(<span class="params">labels, predictions, delta=<span class="number">14.0</span></span>):</span><br><span class="line">    residual = tf.<span class="built_in">abs</span>(labels - predictions)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f1</span>(): <span class="keyword">return</span> <span class="number">0.5</span> * tf.square(residual)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>(): <span class="keyword">return</span> delta * residual - <span class="number">0.5</span> * tf.square(delta)</span><br><span class="line">    <span class="keyword">return</span> tf.cond(residual &lt; delta, f1, f2)</span><br></pre></td></tr></tbody></table></figure><p>æœ€åç»“æœä¸ºï¼š<strong>w: -5.883589, b: 85.124306.</strong></p><h4 id="which-one-is-betterï¼Ÿ"><a href="#which-one-is-betterï¼Ÿ" class="headerlink" title="which one is betterï¼Ÿ"></a>which one is betterï¼Ÿ</h4><p>we do need test data setï¼ï¼ï¼</p><h3 id="tf-data"><a href="#tf-data" class="headerlink" title="tf.data"></a>tf.data</h3><p>ä½¿ç”¨placeholderå’Œfeed_dictsçš„å¥½å¤„æ˜¯å°†æ•°æ®å¤„ç†ä¸TensorFlowåˆ†ç¦»ï¼Œä½¿ç”¨pythonå°±å¯ä»¥è½»æ¾åœ°shuffle, batch, generate arbitrary data. ä¸å¥½çš„åœ°æ–¹æ˜¯ï¼Œæ•°æ®å¤„ç†çš„çº¿ç¨‹å¾ˆæœ‰å¯èƒ½æ˜¯ç“¶é¢ˆï¼Œä½¿æ•´ä¸ªç¨‹åºslow downã€‚</p><p>ä½¿ç”¨é˜Ÿåˆ—ä¹Ÿæ˜¯TFä¸­å¤„ç†æ•°æ®çš„ä¸€ä¸ªé€‰é¡¹ï¼Œé˜Ÿåˆ—å…è®¸pipeliningã€threadingæ“ä½œï¼Œå‡å°‘äº†æ•°æ®åŠ è½½åˆ°placeholdersçš„æ—¶é—´ï¼Œä½†æ˜¯éš¾ä»¥ä½¿ç”¨ä¸”å®¹æ˜“å´©æºƒã€‚</p><p>tf.dataæ¯”placeholderæ›´å¿«ï¼Œæ¯”é˜Ÿåˆ—æ›´å®¹æ˜“ä½¿ç”¨ï¼Œè€Œä¸”ä¸ä¼šcrashã€‚</p><p>æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªtf.data.Datasetå¯¹è±¡ä¸­ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªnon-TensorFLowå¯¹è±¡ï¼ˆnumpy arrayï¼‰</p><h4 id="tf-dataåŸºæ“ï¼š"><a href="#tf-dataåŸºæ“ï¼š" class="headerlink" title="tf.dataåŸºæ“ï¼š"></a>tf.dataåŸºæ“ï¼š</h4><ol><li><p>åˆ›å»ºDataSet</p><ol><li><p>ä»tensoråˆ›å»º</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># features,labelséƒ½æ˜¯tensorsï¼Œä¹Ÿå¯ä»¥æ˜¯numpy arrays</span></span><br><span class="line">tf.data.DataSet.from_tensor_slice((features,labels))</span><br></pre></td></tr></tbody></table></figure></li><li><p>ä»fileåˆ›å»º</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–‡ä»¶æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªæ•°æ®ï¼Œä¾‹å¦‚csvæ–‡ä»¶</span></span><br><span class="line">tf.data.TextLineDataset(filenames)</span><br><span class="line"><span class="comment"># æ¯ä¸€ä¸ªæ–‡ä»¶é•¿åº¦éƒ½å›ºå®šï¼Œæ¯”å¦‚éƒ½æ˜¯28*28çš„å›¾ç‰‡</span></span><br><span class="line">tf.data.FixedLengthRecordDataset([file1,file2,file3,file4,...])</span><br><span class="line"><span class="comment"># tfrecordæ ¼å¼ï¼Œï¼ˆè¿˜æ²¡ç”¨è¿‡</span></span><br><span class="line">tf.data.TFRecordDataset(filenames)</span><br></pre></td></tr></tbody></table></figure></li></ol></li><li><p>åˆ›å»ºIterator</p><p>å–datasetä¸­çš„æ•°æ®éœ€è¦ç”¨åˆ°è¿­ä»£å™¨</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åªèƒ½éå†ä¸€é</span></span><br><span class="line">iterator = dataset.make_one_shot_iterator()</span><br><span class="line"><span class="comment"># å¤šæ¬¡åˆå§‹åŒ–ï¼Œå¤šæ¬¡éå†</span></span><br><span class="line">iterator = dataset.make_initializable_iterator()</span><br><span class="line"><span class="comment"># è¿”å›ä¸€ä¸ªæˆ–è€…ä¸€ç»„æ ·æœ¬</span></span><br><span class="line">iterator.get_next() </span><br></pre></td></tr></tbody></table></figure></li><li><p>è®­ç»ƒ</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">iterator = dataset.make_initializable_iterator()</span><br><span class="line">...</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>): </span><br><span class="line">        <span class="comment"># æ¯ä¸€ä¸ªepochéƒ½è¦åˆå§‹åŒ–iterator</span></span><br><span class="line">        sess.run(iterator.initializer) </span><br><span class="line">        total_loss = <span class="number">0</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">                sess.run([optimizer]) </span><br><span class="line">        <span class="keyword">except</span> tf.errors.OutOfRangeError:</span><br><span class="line">            <span class="keyword">pass</span></span><br></pre></td></tr></tbody></table></figure></li></ol><h4 id="å…¶å®ƒæ“ä½œ"><a href="#å…¶å®ƒæ“ä½œ" class="headerlink" title="å…¶å®ƒæ“ä½œ"></a>å…¶å®ƒæ“ä½œ</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç®€å•çš„å‘½ä»¤æ“ä½œdataset</span></span><br><span class="line">dataset = dataset.shuffle(<span class="number">1000</span>)</span><br><span class="line">dataset = dataset.repeat(<span class="number">100</span>)</span><br><span class="line">dataset = dataset.batch(<span class="number">128</span>)</span><br><span class="line">dataset = dataset.<span class="built_in">map</span>(<span class="keyword">lambda</span> x: tf.one_hot(x, <span class="number">10</span>)) </span><br><span class="line"><span class="comment"># convert each element of dataset to one_hot vector</span></span><br></pre></td></tr></tbody></table></figure><h3 id="Logistic-Regression-with-MINIST"><a href="#Logistic-Regression-with-MINIST" class="headerlink" title="Logistic Regression with MINIST"></a>Logistic Regression with MINIST</h3><h4 id="ä¸€ä¸ªé—®é¢˜ï¼š"><a href="#ä¸€ä¸ªé—®é¢˜ï¼š" class="headerlink" title="ä¸€ä¸ªé—®é¢˜ï¼š"></a>ä¸€ä¸ªé—®é¢˜ï¼š</h4><p>è¿™ä¸ªå®éªŒæœ‰å¤šä¸ªæ•°æ®é›†ï¼Œè®­ç»ƒé›†ã€éªŒè¯é›†å’Œæµ‹è¯•é›†ï¼Œå¦‚æœæ¯ä¸ªæ•°æ®é›†éƒ½æœ‰å„è‡ªçš„iteratorï¼Œé‚£æˆ‘ä»¬å°±å¾—ä¸ºæ¯ä¸€ä¸ªiteratoråˆ›å»ºä¸€ä¸ªgraphã€‚</p><p> ä¸ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªè¿­ä»£å™¨ï¼Œç”¨ä¸åŒçš„æ•°æ®åˆå§‹åŒ–å®ƒ</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">iterator = tf.data.Iterator.from_structure(train_data.output_types,</span><br><span class="line">                                           train_data.output_shapes)</span><br><span class="line"><span class="comment"># æ¯ä¸€ä¸ªepochçš„è®­ç»ƒå‰ï¼Œéƒ½è¦sess.run(train_init)</span></span><br><span class="line">train_init = iterator.make_initializer(train_data)</span><br><span class="line">test_init = iterator.make_initializer(test_data)</span><br></pre></td></tr></tbody></table></figure><p><a href="https://github.com/yikayiyo/stanford-tensorflow-tutorials/blob/master/examples/03_logreg.py">å®Œæ•´ä»£ç </a>, tensorboardå›¾ç¤ºå¦‚ä¸‹ï¼š</p><img src="/2018/03/29/TensorFlow02/f3.png" class=""><p>ä¸‹ä¸€æ­¥ï¼Œå°è¯•å°†è¿™ä¸ªgraphæ”¹é€ å¾—æœ‰æ¡ç†ä¸€äº›ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> machine learning </tag>
            
            <tag> TensorFlow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TensorFlow Ops</title>
      <link href="/2018/03/28/TensorFlow01/"/>
      <url>/2018/03/28/TensorFlow01/</url>
      
        <content type="html"><![CDATA[<h4 id="ä¸€èˆ¬æµç¨‹ï¼š"><a href="#ä¸€èˆ¬æµç¨‹ï¼š" class="headerlink" title="ä¸€èˆ¬æµç¨‹ï¼š"></a>ä¸€èˆ¬æµç¨‹ï¼š</h4><h4 id="TFboyåŸºæ“ï¼š"><a href="#TFboyåŸºæ“ï¼š" class="headerlink" title="TFboyåŸºæ“ï¼š"></a>TFboyåŸºæ“ï¼š</h4><ul><li>å®šä¹‰å›¾<span id="more"></span></li><li>åˆ›å»ºwriterï¼Œä¸¤ç§æ–¹å¼<ul><li>tf.get_default_graph()</li><li>sess.graph</li></ul></li><li>åˆ›å»ºsessionæ‰§è¡Œå›¾</li><li>å…³é—­writer</li><li>TensorBoardå¯è§†åŒ–</li></ul><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"></span><br><span class="line">a = tf.constant(<span class="number">2</span>, name=<span class="string">'a'</span>)</span><br><span class="line">b = tf.constant(<span class="number">3</span>, name=<span class="string">'b'</span>)</span><br><span class="line">x = tf.add(a, b, name=<span class="string">'add'</span>)</span><br><span class="line"><span class="comment"># ç¬¬ä¸€ç§</span></span><br><span class="line">writer = tf.summary.FileWriter(<span class="string">'./graphs/low'</span>, tf.get_default_graph()) </span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="comment"># ç¬¬äºŒç§</span></span><br><span class="line">    <span class="comment"># writer = tf.summary.FileWriter('./graphs', sess.graph) </span></span><br><span class="line">    <span class="built_in">print</span>(sess.run(x))</span><br><span class="line">writer.close() <span class="comment"># close the writer when youâ€™re done using it</span></span><br></pre></td></tr></tbody></table></figure><p>writerä¼šå°†å›¾ï¼ˆåŒ…å«çš„å„ç§opsï¼‰ä»¥æ—¥å¿—æ–‡ä»¶çš„å½¢å¼å†™å…¥æŒ‡å®šç›®å½•ï¼Œtensorboardå¯ä»¥å°†è¿™äº›æ–‡ä»¶å¯è§†åŒ–å‡ºæ¥</p><p>ä¸Šé¢çš„ç¨‹åºæ¯è·‘ä¸€æ¬¡å°±ä¼šäº§ç”Ÿä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œä¸ç”¨çš„æ—¥å¿—åŠæ—¶åˆ é™¤</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">tensorboard --logdir=<span class="string">'./graphs/low'</span> --port=6006</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ³¨æ„è·¯å¾„ä¸è¦æé”™</span></span><br></pre></td></tr></tbody></table></figure><img src="/2018/03/28/TensorFlow01/ex1.png" class=""><h4 id="æ²¡è®°ä½çš„"><a href="#æ²¡è®°ä½çš„" class="headerlink" title="æ²¡è®°ä½çš„"></a>æ²¡è®°ä½çš„</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tf.fill([<span class="number">2</span>,<span class="number">3</span>],<span class="number">8</span>) ===&gt; [[<span class="number">8</span>,<span class="number">8</span>,<span class="number">8</span>],[<span class="number">8</span>,<span class="number">8</span>,<span class="number">8</span>]]</span><br><span class="line">tf.lin_space(<span class="number">10.0</span>,<span class="number">13.0</span>,<span class="number">4</span>,name=<span class="literal">None</span>) ===&gt;[<span class="number">10.0</span> <span class="number">11.0</span> <span class="number">12.0</span> <span class="number">13.0</span>]</span><br><span class="line"><span class="comment">#å„ç§åˆ†å¸ƒ</span></span><br><span class="line">tf.random_normal</span><br><span class="line">...</span><br><span class="line"><span class="comment">#add multiple tensors</span></span><br><span class="line">tf.add_n([a,b,b]) ====&gt; a+b+b</span><br></pre></td></tr></tbody></table></figure><h4 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h4><h5 id="å˜é‡å®šä¹‰"><a href="#å˜é‡å®šä¹‰" class="headerlink" title="å˜é‡å®šä¹‰"></a>å˜é‡å®šä¹‰</h5><p>è®­ç»ƒä¸­éœ€è¦æ›´æ–°çš„å‚æ•°å®šä¹‰ä¸ºå˜é‡</p><p>å¸¸é‡å­˜å‚¨åœ¨å›¾ä¸­ï¼Œå˜é‡åˆ™å¯èƒ½åœ¨parameter serverä¸Š</p><p>å¸¸é‡å äº†å¾ˆå¤šå­˜å‚¨æ—¶ï¼ŒåŠ è½½å›¾ä¼šå¾ˆæ…¢</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># old way</span></span><br><span class="line">tf.Variable(&lt;initial-value&gt;,name=&lt;optional-name&gt;)</span><br><span class="line"><span class="comment"># now</span></span><br><span class="line">tf.get_variable(...)</span><br><span class="line"><span class="comment"># å½“initializeræ—¶tf.constantæ—¶ï¼Œä¸éœ€è¦å‚æ•°shape</span></span><br><span class="line">s = tf.get_variable(<span class="string">"scalar"</span>, initializer=tf.constant(<span class="number">2</span>)) </span><br><span class="line">m = tf.get_variable(<span class="string">"matrix"</span>, initializer=tf.constant([[<span class="number">0</span>, <span class="number">1</span>], [<span class="number">2</span>, <span class="number">3</span>]]))</span><br><span class="line">W = tf.get_variable(<span class="string">"big_matrix"</span>, shape=(<span class="number">784</span>, <span class="number">10</span>), initializer=tf.zeros_initializer())</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h5 id="å˜é‡åˆå§‹åŒ–"><a href="#å˜é‡åˆå§‹åŒ–" class="headerlink" title="å˜é‡åˆå§‹åŒ–"></a>å˜é‡åˆå§‹åŒ–</h5><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸€æ¬¡æ€§åˆå§‹åŒ–æ‰€æœ‰å˜é‡</span></span><br><span class="line">sess.run(tf.global_variables_initializer())</span><br><span class="line"><span class="comment">#åˆå§‹åŒ–éƒ¨åˆ†å˜é‡</span></span><br><span class="line">sess.run(tf.variables_initializer([a, b]))</span><br><span class="line"><span class="comment">#å•ç‹¬åˆå§‹åŒ–</span></span><br><span class="line">sess.run(W.initializer)</span><br><span class="line"><span class="comment">#ä»æ–‡ä»¶åŠ è½½</span></span><br><span class="line">Todo...</span><br></pre></td></tr></tbody></table></figure><h5 id="å˜é‡çš„å€¼"><a href="#å˜é‡çš„å€¼" class="headerlink" title="å˜é‡çš„å€¼"></a>å˜é‡çš„å€¼</h5><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸¤ç§æ–¹å¼</span></span><br><span class="line"><span class="built_in">print</span>(sess.run(W))</span><br><span class="line"><span class="built_in">print</span>(W.<span class="built_in">eval</span>())</span><br></pre></td></tr></tbody></table></figure><h5 id="å˜é‡èµ‹å€¼"><a href="#å˜é‡èµ‹å€¼" class="headerlink" title="å˜é‡èµ‹å€¼"></a>å˜é‡èµ‹å€¼</h5><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># èµ‹å€¼ä¼šå®Œæˆåˆå§‹åŒ–çš„å·¥ä½œ</span></span><br><span class="line">W.assign(<span class="number">100</span>)</span><br><span class="line"><span class="comment"># è‡ªå¢è‡ªå‡ä¸ä¼šåˆå§‹åŒ–å˜é‡</span></span><br><span class="line">W.assign_add(<span class="number">10</span>)</span><br><span class="line">W.assing_sub(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># å˜é‡ä¾èµ–,ä½¿ç”¨initialized_value()ä¿è¯ç”¨Wçš„å€¼æ¥åˆå§‹åŒ–V</span></span><br><span class="line">V = tf.Variable(W.initialized_value()*<span class="number">2</span>)</span><br></pre></td></tr></tbody></table></figure><h4 id="æ§åˆ¶ä¾èµ–"><a href="#æ§åˆ¶ä¾èµ–" class="headerlink" title="æ§åˆ¶ä¾èµ–"></a>æ§åˆ¶ä¾èµ–</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># g has 5 ops: a,b,c,d,e</span></span><br><span class="line"><span class="comment"># è¿˜æ²¡ç”¨åˆ°è¿‡</span></span><br><span class="line"><span class="keyword">with</span> g.control_dependencies([a,b,c]):</span><br><span class="line">    <span class="comment"># d,e only run after a,b,c have executed</span></span><br><span class="line">    d = ...</span><br><span class="line">    e = ...</span><br></pre></td></tr></tbody></table></figure><h4 id="æ•°æ®å¯¼å…¥"><a href="#æ•°æ®å¯¼å…¥" class="headerlink" title="æ•°æ®å¯¼å…¥"></a>æ•°æ®å¯¼å…¥</h4><ol><li><p>old wayï¼šplaceholders and feed_dict</p><p>ä¾‹å¦‚ï¼Œå¯¹äºf(x,y) = 2x + yï¼Œx y å°±æ˜¯çœŸå®å€¼çš„å ä½ç¬¦</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#shape=None æ„å‘³ç€æ¥æ”¶ä»»æ„shapeçš„å¼ é‡</span></span><br><span class="line">tf.placeholder(dtype,shape=<span class="literal">None</span>,name=<span class="literal">None</span>)</span><br><span class="line"><span class="comment">#any tensors that are feedable can be fed</span></span><br><span class="line">tf.Graph.is_feedable(tensor)</span><br><span class="line"><span class="comment">#feed_dictå¯ä»¥ç”¨æ¥æµ‹è¯•æ¨¡å‹ï¼Œ</span></span><br><span class="line"><span class="comment">#ç›´æ¥ä¼ å…¥æŸäº›å€¼å…å»äº†å¤§é‡çš„è®¡ç®—</span></span><br><span class="line">a = tf.add(<span class="number">2</span>, <span class="number">5</span>)</span><br><span class="line">b = tf.multiply(a, <span class="number">3</span>)</span><br><span class="line"><span class="keyword">with</span> tf.Session() <span class="keyword">as</span> sess:</span><br><span class="line">    <span class="built_in">print</span>(sess.run(b))                                 <span class="comment"># &gt;&gt; 21</span></span><br><span class="line">    <span class="comment"># compute the value of b given the value of a is 15</span></span><br><span class="line">    <span class="built_in">print</span>(sess.run(b, feed_dict={a: <span class="number">15</span>}))              <span class="comment"># &gt;&gt; 45</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>new way: tf.data</p><p>[ ] todoâ€¦</p></li></ol><h4 id="lazy-loading"><a href="#lazy-loading" class="headerlink" title="lazy loading"></a>lazy loading</h4><p>éœ€è¦è®¡ç®—opçš„æ—¶å€™æ‰åˆ›å»º</p><p>å› ä¸ºè®­ç»ƒç»å¤§æ•°æƒ…å†µéƒ½è¦è®¡ç®—å¤šæ¬¡ï¼Œæ‰€ä»¥lazy loadingä¼šäº§ç”Ÿå¤§é‡çš„å†—ä½™èŠ‚ç‚¹</p><p>è§£å†³åŠæ³•ï¼š</p><ol><li>å°½å¯èƒ½çš„å°†opsçš„å®šä¹‰å’Œè®¡ç®—åˆ†å¼€ï¼ˆä¸è¦åœ¨è®¡ç®—çš„æ—¶å€™åˆ›å»ºop</li><li>å½“ä½ å°†ç›¸å…³opsç»„åˆåœ¨ä¸€èµ·ï¼ˆæ¯”å¦‚ï¼Œ1ä¸­çš„æ­¥éª¤åœ¨ä¸€ä¸ªç±»é‡Œé¢ï¼‰å¯ä»¥ä½¿ç”¨pythonçš„@propertyæœºåˆ¶ç¡®ä¿æŸäº›åŠŸèƒ½åªæ‰§è¡Œä¸€æ¬¡ï¼ˆ!!!æœ‰å¾…ç ”ç©¶ï¼‰</li></ol><p>ç›¸å…³åšå®¢<a href="http://danijar.com/structuring-your-tensorflow-models/">http://danijar.com/structuring-your-tensorflow-models/</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> machine learning </tag>
            
            <tag> TensorFlow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sparql ç¬”è®°</title>
      <link href="/2018/03/26/sparql/"/>
      <url>/2018/03/26/sparql/</url>
      
        <content type="html"><![CDATA[<h3 id="Jumping-Right-In"><a href="#Jumping-Right-In" class="headerlink" title="Jumping Right In"></a>Jumping Right In</h3><ul><li>FROMæŒ‡å®šçš„æ•°æ®é›†ä¼šè¢«è°ƒç”¨SPARQLå¤„ç†å™¨æ—¶æŒ‡å®šçš„æ•°æ®é›†è¦†ç›–ï¼ˆå¦‚æœéƒ½æŒ‡å®šäº†</li><li>RDFä¸æ˜¯æ•°æ®æ ¼å¼ï¼Œè€Œæ˜¯æ•°æ®æ¨¡å‹ï¼Œå®ƒå¯ä»¥é€‰æ‹©å­˜å‚¨æ•°æ®æ–‡ä»¶çš„è¯­æ³•</li><li>å¦‚æœæˆ‘ä»¬å°†æ•°æ®ä¸å…¶å®ƒæ•°æ®ç»“åˆèµ·æ¥ï¼Œé‚£ä¹ˆRDFä¸‰å…ƒç»„çš„ä¸»è¯­å’Œè°“è¯­éƒ½å¿…é¡»å±äºç‰¹å®šçš„åç§°ç©ºé—´ï¼Œä»¥é˜²æ­¢ç±»ä¼¼åç§°ä¹‹é—´çš„æ··æ·†ï¼Œäºæ˜¯æˆ‘ä»¬ä½¿ç”¨URIæ¥è¡¨ç¤ºå®ƒä»¬</li><li>å½“ä½¿ç”¨å®Œæ•´çš„URIæ—¶ï¼Œå°†å…¶æ”¾åœ¨å°–æ‹¬å·ä¸­ä»¥å‘å¤„ç†å™¨æ˜¾ç¤ºå®ƒæ˜¯ä¸€ä¸ªURI</li><li>åœ¨semantic webå¼€å‘ä¸­ï¼Œè¯æ±‡è¡¨æ˜¯ä¸€ç»„ä½¿ç”¨æ ‡å‡†æ ¼å¼å­˜å‚¨çš„æœ¯è¯­ï¼Œä¾›äººä»¬é‡å¤ä½¿ç”¨</li><li>å‘ç°ä¸åŒæ¥æºä¸‰å…ƒç»„ä¹‹é—´è”ç³»çš„èƒ½åŠ›æ˜¯SPARQLçš„æœ€ä½³ç‰¹æ€§ä¹‹ä¸€</li><li>çº¦å®šï¼šä¸»è°“å®¾åˆ†åˆ«ç”¨?s,?p,?oè¡¨ç¤º</li><li>åªæœ‰æ»¡è¶³å›¾æ¨¡å¼ä¸­æ‰€æœ‰ä¸‰å…ƒç»„çš„æ•°æ®æ‰ä¼šè¢«è¿”å›<span id="more"></span></li></ul><h3 id="The-Semantic-Web-RDF-and-Linked-Data-and-SPARQL"><a href="#The-Semantic-Web-RDF-and-Linked-Data-and-SPARQL" class="headerlink" title="The Semantic Web,RDF,and Linked Data(and SPARQL)"></a>The Semantic Web,RDF,and Linked Data(and SPARQL)</h3><ul><li>the semantic web isnâ€™t about the query language or about the modelâ€”itâ€™s about the data</li><li>RDFä¸­åŸºæœ¬çš„ä¿¡æ¯å•å…ƒæ˜¯ä¸‰å…ƒç»„</li><li>å°†RDFä½œä¸ºä¸€ä¸²å­—èŠ‚ä¿å­˜åœ¨ç£ç›˜ä¸Šçš„æŠ€æœ¯æœ¯è¯­æ˜¯åºåˆ—åŒ–</li><li>RDFS gives people a way to describe vocabularies. It is itself a vocabulary with a schema whose triples declare facts.</li><li>Linked Dataï¼š<ul><li>Use URIs as names for things.</li><li>Use HTTP URIs so that people can look up those names.</li><li>When someone looks up a URI, provide useful information, using the standards (RDF*, SPARQL).</li><li>Include links to other URIs so that they can discover more things.</li></ul></li></ul><h3 id="SPARQL-Queries"><a href="#SPARQL-Queries" class="headerlink" title="SPARQL Queries"></a>SPARQL Queries</h3><p>ä»‹ç»SPARQLæŸ¥è¯¢è¯­è¨€æ›´å¤šæ›´æœ‰ç”¨çš„ç‰¹å¾</p><h4 id="More-Readable-Query-Results"><a href="#More-Readable-Query-Results" class="headerlink" title="More Readable Query Results"></a>More Readable Query Results</h4><ul><li><strong>åˆ†å·</strong>è¡¨ç¤ºæ¥ä¸‹æ¥çš„è°“è¯­-å®¾è¯­å¯¹ä¸ä¹‹å‰çš„å…±æœ‰ä¸€ä¸ªä¸»è¯­  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ?<span class="keyword">first</span> ?<span class="keyword">last</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">  ?person ab:firstName ?<span class="keyword">first</span>;</span><br><span class="line">          ab:lastName  ?last.</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li>ä½¿ç”¨é‚£äº›å¯è¯»æ€§å¼ºçš„å±æ€§ï¼Œæ¯”å¦‚æ ‡ç­¾ã€æè¿°ç­‰ç­‰ï¼ˆå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯URI</li><li><strong>rdfs:label</strong> æ˜¯ç¬¬ä¸€ä¸ªåº”è¯¥æ³¨æ„çš„å±æ€§ï¼Œåˆ«çš„ï¼Œ<strong>rdfs:comment</strong>,<strong>skos:prefLabel</strong>ï¼ˆé¦–é€‰æ ‡ç­¾ï¼‰,<strong>skos:altLabel</strong>ï¼ˆå¤‡é€‰æ ‡ç­¾ï¼‰</li><li>ç»™å®šçš„èµ„æºå¹¶ä¸æ€»å¿…é¡»æ˜¯ä¸»è¯­ã€è°“è¯­æˆ–è€…å®¾è¯­ï¼Œåœ¨ä¸åŒçš„ä¸‰å…ƒç»„ä¸­å®ƒå¯ä»¥æ˜¯ä¸åŒçš„ï¼ˆå¤šä¸ªï¼‰è§’è‰²</li></ul><h4 id="Data-That-Might-Not-Be-There"><a href="#Data-That-Might-Not-Be-There" class="headerlink" title="Data That Might Not Be There"></a>Data That Might Not Be There</h4><ul><li>å°†triple patternæ”¾å…¥åˆ°OPTIONAL graph patternsä¸­ï¼Œè¡¨ç¤ºâ€œå¦‚æœæœ‰çš„è¯ï¼Œæ£€ç´¢è¯¥å€¼â€</li><li>OPTIONAL{t1.t2.t3}åŒ…å«ä¸‰ä¸ªä¸‰å…ƒç»„ï¼Œè¿™äº›ä¸‰å…ƒç»„éœ€è¦åŒæ—¶æ»¡è¶³</li><li>OPTIONAL{t1} OPTIONAL{t2} OPTIONAL{t3}åˆ™æ˜¯ä¸‰ä¸ªç‹¬ç«‹çš„æ¡ä»¶</li><li>OPTIONAL graph patternsçš„é¡ºåºå¾ˆé‡è¦  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># ä¼˜å…ˆä½¿ç”¨nickä½œä¸º?<span class="keyword">first</span></span><br><span class="line"><span class="keyword">SELECT</span> ?<span class="keyword">first</span> ?<span class="keyword">last</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    ?s ab:lastName ?last.</span><br><span class="line">    OPTIONAL {?s ab:nick ?<span class="keyword">first</span>}</span><br><span class="line">    OPTIONAL {?s ab:firstName ?<span class="keyword">first</span>}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Finding-Data-That-Doesnâ€™t-Meet-Certain-Conditions"><a href="#Finding-Data-That-Doesnâ€™t-Meet-Certain-Conditions" class="headerlink" title="Finding Data That Doesnâ€™t Meet Certain Conditions"></a>Finding Data That Doesnâ€™t Meet Certain Conditions</h4><ul><li>SPARQL1.0  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># åˆ©ç”¨<span class="keyword">FILTER</span>å’Œboundï¼Œ?væ²¡æœ‰ç»‘å®šå€¼æ—¶è¿”å›<span class="literal">true</span>ï¼Œç„¶åè¾“å‡º</span><br><span class="line">OPTIONAL {?s ?p ?v}</span><br><span class="line"><span class="keyword">FILTER</span>(<span class="operator">!</span>bound(?v))</span><br></pre></td></tr></tbody></table></figure></li><li>SPARQL1.1  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># å½“æŒ‡å®šçš„<span class="keyword">pattern</span>ä¸å­˜åœ¨æ—¶è¿”å›ture</span><br><span class="line"><span class="keyword">NOT</span> <span class="keyword">EXISTS</span> {?s ?p ?v}</span><br></pre></td></tr></tbody></table></figure>  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#å¦ä¸€ç§æ–¹å¼ï¼Œå‡å»æ»¡è¶³<span class="keyword">pattern</span>çš„èµ„æºï¼ˆå¤šæ•°æƒ…å†µä¸‹è¡¨ç°ç›¸åŒ</span><br><span class="line">MINUS {?s ?p ?v}</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Serching-Futher-In-The-Data"><a href="#Serching-Futher-In-The-Data" class="headerlink" title="Serching Futher In The Data"></a>Serching Futher In The Data</h4><ul><li>RDFä¸‰å…ƒç»„ä¸­çš„å¯¹è±¡å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–è€…URIï¼Œå­—ç¬¦ä¸²å€¼æ›´æ˜“è¯»ï¼Œä½†æ˜¯<strong>URIä½¿å¾—å°†è¯¥æ•°æ®å’Œå…¶å®ƒæ•°æ®é“¾æ¥èµ·æ¥æ›´åŠ å®¹æ˜“</strong></li><li>å¦‚æœä¸€ä¸ªæ•°æ®é›†ä¸­èµ„æºçš„URIå¯ä»¥å’Œå¦ä¸€ä¸ªæ•°æ®é›†ä¸­çš„URIå¯¹åº”èµ·æ¥ï¼Œå“ªæ€•æ•°æ®é›†æ¥è‡ªä¸åŒçš„åœ°æ–¹ï¼Œä¸æ¸…æ¥šç»„ç»‡å½¢å¼ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨SPARQLæŸ¥è¯¢åˆ°æ›´å¤šçš„ä¿¡æ¯</li><li><strong>é€—å·</strong>è¡¨ç¤ºâ€œæ¥ä¸‹æ¥çš„ä¸‰å…ƒç»„ä¸»è¯­è°“è¯­å’Œå‰ä¸€ä¸ªä¸‰å…ƒç»„çš„ç›¸åŒâ€</li><li>åˆ©ç”¨å±æ€§è·¯å¾„ï¼ˆproperty pathsï¼‰ï¼š  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># å€ŸåŠ©æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¦å·<span class="operator">+</span>ï¼ˆ<span class="keyword">one</span> <span class="keyword">or</span> moreï¼‰,è¿”å›ç›´æ¥å¼•ç”¨ã€é—´æ¥å¼•ç”¨äº†Açš„è®ºæ–‡</span><br><span class="line"><span class="keyword">SELECT</span> ?s </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{?s c:cites<span class="operator">+</span> :paperA.}</span><br><span class="line"># æŒ‡å®šå¼•ç”¨å±‚æ•°</span><br><span class="line">#{?s c:cites{<span class="number">3</span>} :paperA.}</span><br><span class="line">#ç›¸åŒæ•ˆæœ</span><br><span class="line">#{?s c:cites<span class="operator">/</span>c:cites<span class="operator">/</span>c:cites :paperA.}</span><br><span class="line">#<span class="operator">^</span>è¡¨ç¤ºå–ç›¸å,è¿”å›Aå¼•ç”¨çš„æ–‡ç« </span><br><span class="line">#{?s <span class="operator">^</span>c:cites :paperA.}</span><br><span class="line"># <span class="operator">^</span>ç»“åˆproperty pathçš„ä¾‹å­ï¼šå¼•ç”¨äº†Få¼•ç”¨çš„æ–‡ç« çš„æ–‡ç« </span><br><span class="line">#{</span><br><span class="line">#    ?s c:cites<span class="operator">/</span><span class="operator">^</span>c:cites :paperF .</span><br><span class="line">#    <span class="keyword">FILTER</span>(?s <span class="operator">!=</span> :paperF)</span><br><span class="line">#}</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Searching-With-Blank-Nodes"><a href="#Searching-With-Blank-Nodes" class="headerlink" title="Searching With Blank Nodes"></a>Searching With Blank Nodes</h4><ul><li>ç©ºç™½èŠ‚ç‚¹çš„ä»»ä½•åç§°éƒ½æ˜¯ä¸´æ—¶çš„ï¼Œé€šå¸¸ä¼šç»™ä¸€ä¸ªå˜é‡å</li><li>è¿‡æ¸¡çš„ä¸œè¥¿ï¼Œç”¨æ¥é“¾æ¥ä¸‰å…ƒç»„</li><li>æœ€ç»ˆçš„selectåˆ—è¡¨ä¸­ä¸€èˆ¬ä¸åŒ…å«ç©ºç™½èŠ‚ç‚¹</li></ul><h4 id="Eliminating-Redundant-Output"><a href="#Eliminating-Redundant-Output" class="headerlink" title="Eliminating Redundant Output"></a>Eliminating Redundant Output</h4><ul><li>DISTINCTå…³é”®å­—</li><li>DISTINCTå…³é”®å­—ä¸ä¼šå¢åŠ æŸ¥è¯¢ç»“æ„çš„å¤æ‚æ€§ï¼ˆå°±æ˜¯åœ¨SELECTå†…å®¹å‰é¢åŠ ä¸ªDISTINCT</li></ul><h4 id="Combining-Different-Search-Conditions"><a href="#Combining-Different-Search-Conditions" class="headerlink" title="Combining Different Search Conditions"></a>Combining Different Search Conditions</h4><ul><li>UNIONå…³é”®å­—ï¼šæŒ‡å®šå¤šä¸ªgraph patternsï¼Œè¿”å›æ»¡è¶³ä»»æ„ä¸€ä¸ªpatternçš„æ•°æ®çš„ç»„åˆ(a combination of all the data that fits any of those patterns) </li><li>æœ‰äº›SPARQLå¤„ç†å™¨åœ¨å…¶è¿”å›ç»“æœä¸­ä½¿ç”¨å£°æ˜çš„å‰ç¼€ï¼Œä½¿å¾—ç»“æœå¯è¯»æ€§æ›´å¼º</li></ul><h4 id="Filtering-Data-Based-On-Conditions"><a href="#Filtering-Data-Based-On-Conditions" class="headerlink" title="Filtering Data Based On Conditions"></a>Filtering Data Based On Conditions</h4><ul><li>FILTER() åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¡¨è¾¾å¼åªè¦è¿”å›çš„æ˜¯å¸ƒå°”å€¼å°±å¯ä»¥ä½œä¸ºå‚æ•°</li><li>RDFè§£æå™¨è¯»å…¥è¾“å…¥æ•°æ®æ—¶ï¼Œå®ƒå°†è¿™äº›å‰ç¼€æ˜ å°„åˆ°é€‚å½“çš„åç§°ç©ºé—´URIsï¼Œç„¶åå°†æ•°æ®äº¤ç»™æŸ¥è¯¢å¤„ç†å™¨</li><li>!isURI(?city): å¦‚æœ?cityä¸æ˜¯ä¸€ä¸ªæ­£å¸¸çš„URIï¼Œè¿”å›true</li><li>INå…³é”®å­—ï¼šæŸ¥è¯¢æŸä¸ªå˜é‡å±äºåˆ—è¡¨çš„ä¸‰å…ƒç»„ï¼ˆå‰é¢åŠ NOTå¯ä»¥è¡¨ç¤ºç›¸åçš„æ„æ€  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ask <span class="keyword">for</span> data <span class="keyword">where</span> the ?v <span class="keyword">is</span> either A <span class="keyword">or</span> B</span><br><span class="line"><span class="keyword">FILTER</span>(?v <span class="keyword">IN</span> (A,B))</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Retrieving-A-Specific-Number-Of-Results"><a href="#Retrieving-A-Specific-Number-Of-Results" class="headerlink" title="Retrieving A Specific Number Of Results"></a>Retrieving A Specific Number Of Results</h4><ul><li>LIMITå…³é”®å­—</li><li>æ”¾åœ¨èŠ±æ‹¬å·å¤–é¢</li><li>OFFSETå…³é”®å­—:è·³è¿‡å‡ ä¸ªç»“æœ</li></ul><h4 id="Querying-Named-Graphs"><a href="#Querying-Named-Graphs" class="headerlink" title="Querying Named Graphs"></a>Querying Named Graphs</h4><ul><li>å‘½åå›¾(named graph)ï¼šä¸ºä¸‰å…ƒç»„é›†åˆå‘½åï¼Œæ–¹ä¾¿ç®¡ç†ï¼ˆè¿›è¡Œæ›¿æ¢ä¹‹ç±»çš„æ“ä½œ</li><li>æŸ¥è¯¢çš„æ•°æ®é›†å¯ä»¥åœ¨æŸ¥è¯¢å†…éƒ¨ç”¨FROMæŒ‡å®šï¼Œä¹Ÿå¯ä»¥åœ¨å¤–éƒ¨åœ¨ARQå‘½ä»¤è¡Œä¸­æŒ‡å®šï¼Œåè€…ä¼šè¦†ç›–å‰è€…  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span><span class="operator">&lt;</span>xx.ttl<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">FROM</span><span class="operator">&lt;</span>yy.ttl<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{...}</span><br></pre></td></tr></tbody></table></figure></li><li>æŒ‡å®šçš„æŸ¥è¯¢æ•°æ®é›†æ„æˆäº†é»˜è®¤å›¾(default graph)ï¼Œå®ƒä¸å±äºä»»ä½•å‘½åå›¾</li><li>FROM NAMED :è¡¨ç¤ºæ•°æ®é›†ä¸ä¼šè¢«åŠ å…¥åˆ°é»˜è®¤å›¾ï¼ŒæŸ¥è¯¢æ—¶éœ€è¦æŒ‡å®šå…¶graph nameï¼ˆARQçš„çº¦å®šæ˜¯å°†URIä½œä¸ºå…¶nameï¼‰ï¼Œç¬¬å…­ç« ä¼šæœ‰SPARQL1.1æ ‡å‡†çš„ç›¸å…³å†…å®¹  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ?lname ?courseName</span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span>ex069.ttl<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">FROM</span> NAMED <span class="operator">&lt;</span>ex125.ttl<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">FROM</span> NAMED <span class="operator">&lt;</span>ex122.ttl<span class="operator">&gt;</span> # å³ä½¿è¿™é‡Œå†™äº†ï¼Œå¦‚æœåœ¨æŸ¥è¯¢ä¸­æ²¡æœ‰æŒ‡å®šï¼ˆGRAPH <span class="operator">&lt;</span>ex125.ttl<span class="operator">&gt;</span>ï¼‰ï¼Œå…¶æ•°æ®ä¸ä¼šè¢«ç”¨æ¥æ£€ç´¢</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    { ?student ab:lastName ?lname }</span><br><span class="line">    <span class="keyword">UNION</span></span><br><span class="line">    { GRAPH <span class="operator">&lt;</span>ex125.ttl<span class="operator">&gt;</span> { ?course ab:courseTitle ?courseName } }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li>GRAPHå…³é”®å­—ï¼šæŸ¥è¯¢ä¸­ä½¿ç”¨è¿™ä¸ªå…³é”®å­—è¡¨æ˜å¼•ç”¨ç‰¹å®šå‘½åå›¾ä¸­çš„æ•°æ®</li><li>GRAPHåé¢ä¹Ÿå¯ä»¥è·Ÿå˜é‡ï¼Œè®©SPARQLå¤„ç†å™¨å¯»æ‰¾æ»¡è¶³æŸä¸ªæ¨¡å¼çš„å›¾  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#è¿™é‡Œåªè®¾ç½®äº†ç‰¹å®šçš„å‘½åå›¾æ¥æŸ¥è¯¢ï¼Œå¦‚æœå­˜åœ¨é»˜è®¤å›¾ï¼Œåˆ™æ²¡æœ‰ä»»ä½•è¿”å›ç»“æœ</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> NAMED <span class="operator">&lt;</span>yyy.ttl<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">FROM</span> NAMED <span class="operator">&lt;</span>xxx.ttl<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{GRAPH ?g(?s ?p ?o)}</span><br></pre></td></tr></tbody></table></figure></li><li>SPARQLå¤„ç†å™¨æœ‰ä¸€äº›é¢„å®šä¹‰çš„å‘½åå›¾ï¼Œå½“ä½ åœ¨GRAPHä¸­æŒ‡å®šæ—¶ä¸éœ€è¦äº‹å…ˆæ ‡è¯†  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ?graph ?email </span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span>ex134.ttl<span class="operator">&gt;</span> </span><br><span class="line"><span class="keyword">FROM</span> NAMED <span class="operator">&lt;</span>ex125.ttl<span class="operator">&gt;</span> </span><br><span class="line"><span class="keyword">FROM</span> NAMED <span class="operator">&lt;</span>ex122.ttl<span class="operator">&gt;</span> </span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">{</span><br><span class="line">    ?graph dc:<span class="type">date</span> "2011-09-24" . </span><br><span class="line">    { GRAPH ?graph { ?s ab:email ?email } }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Queries-In-Your-Queries"><a href="#Queries-In-Your-Queries" class="headerlink" title="Queries In Your Queries"></a>Queries In Your Queries</h4><ul><li>å­æŸ¥è¯¢ç‰¹å¾ï¼šå¯ä»¥å°†å¤æ‚çš„æŸ¥è¯¢ç»†åˆ†ï¼Œåˆå¯ä»¥å°†æ¥è‡ªä¸åŒæŸ¥è¯¢çš„ç»“æœåˆå¹¶</li><li>æ¯ä¸ªå­æŸ¥è¯¢å¿…é¡»æ”¾åˆ°è‡ªå·±çš„èŠ±æ‹¬å·ä¸­</li></ul><h4 id="Combining-Values-And-Assigning-Values-To-Variables"><a href="#Combining-Values-And-Assigning-Values-To-Variables" class="headerlink" title="Combining Values And Assigning Values To Variables"></a>Combining Values And Assigning Values To Variables</h4><ul><li>sparqlæŸ¥è¯¢å‡ºæ¥çš„å€¼å¯ä»¥ç”¨äºæ•°å­¦è¿ç®—ï¼Œå‡½æ•°è°ƒç”¨</li><li>BINDå…³é”®å­—  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#æ•°å­¦è¿ç®—çš„ä¾‹å­</span><br><span class="line">#è¿™é‡Œåˆ©ç”¨amountåˆ›å»ºäº†å˜é‡tipå’Œtotal</span><br><span class="line"><span class="keyword">SELECT</span> ?description </span><br><span class="line">?amount </span><br><span class="line">((?amount <span class="operator">*</span> <span class="number">.2</span>) <span class="keyword">AS</span> ?tip) </span><br><span class="line">((?amount <span class="operator">+</span> ?tip) <span class="keyword">AS</span> ?total)</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    ?meal e:description ?description ;</span><br><span class="line">          e:amount ?amount .</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#å‡½æ•°è°ƒç”¨çš„ä¾‹å­</span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">(UCASE(SUBSTR(?description,<span class="number">1</span>,<span class="number">3</span>))<span class="keyword">as</span> ?mealCode) </span><br><span class="line">?amount </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    ?meal e:description ?description ;</span><br><span class="line">          e:amount ?amount .</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#æ”¹è¿›,expression calculation moved <span class="keyword">to</span> a subquery,åˆ©ç”¨BINDå…³é”®å­—ä¸ºå˜é‡èµ‹å€¼</span><br><span class="line"><span class="keyword">SELECT</span> ?mealCode ?amount</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    ?meal e:description ?description ;</span><br><span class="line">          e:amount ?amount .</span><br><span class="line">    BIND (UCASE(SUBSTR(?description,<span class="number">1</span>,<span class="number">3</span>)) <span class="keyword">as</span> ?mealCode)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Sorting-Aggregating-Finding-The-Biggest-And-Smallest-Andâ€¦"><a href="#Sorting-Aggregating-Finding-The-Biggest-And-Smallest-Andâ€¦" class="headerlink" title="Sorting, Aggregating, Finding The Biggest And Smallest Andâ€¦"></a>Sorting, Aggregating, Finding The Biggest And Smallest Andâ€¦</h4><ul><li>SPARQLä½¿ç”¨<strong>ORDER BY</strong>æ¥æ’åºï¼ˆé»˜è®¤ä»å°åˆ°å¤§ï¼‰.  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># æ ¹æ®amountæ’åº</span><br><span class="line"><span class="keyword">SELECT</span> ?description ?<span class="type">date</span> ?amount</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    ?meal e:description ?description ;</span><br><span class="line">    e:<span class="type">date</span> ?<span class="type">date</span> ;</span><br><span class="line">    e:amount ?amount .</span><br><span class="line">}</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> ?amount</span><br></pre></td></tr></tbody></table></figure></li><li>ä»å¤§åˆ°å°æ’åºï¼šåˆ©ç”¨DESC()ï¼Œæ‹¬å·é‡Œé¢æ˜¯æ’åºç”¨çš„æŒ‡æ ‡  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#æ ¹æ®amountä»å¤§åˆ°å°æ’åº</span><br><span class="line"><span class="keyword">SELECT</span> ?description ?<span class="type">date</span> ?amount </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    ?meal e:description ?description ;</span><br><span class="line">        e:<span class="type">date</span> ?<span class="type">date</span> ;</span><br><span class="line">        e:amount ?amount .</span><br><span class="line">}</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">DESC</span>(?amount)</span><br></pre></td></tr></tbody></table></figure></li><li>å¤šæ¡ä»¶æ’åºï¼Œå„ä¸ªæ¡ä»¶ç©ºæ ¼éš”å¼€  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># å…ˆæ ¹æ®descriptionæ’åºï¼ˆå­—æ¯è¡¨ï¼‰ï¼Œå†æ ¹æ®amountä»å¤§åˆ°å°æ’åº</span><br><span class="line"><span class="keyword">SELECT</span> ?description ?<span class="type">date</span> ?amount </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    ?meal e:description ?description ;</span><br><span class="line">        e:<span class="type">date</span> ?<span class="type">date</span> ;</span><br><span class="line">        e:amount ?amount .</span><br><span class="line">}</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> ?description <span class="keyword">DESC</span>(?amount)</span><br></pre></td></tr></tbody></table></figure></li><li>æ‰¾æœ€å€¼<ul><li>sparql1.0: å…ˆæ’åºï¼Œç„¶åLIMIT 1</li><li>sparql1.1: MAX(),MIN()</li></ul></li><li>å‡å€¼ï¼šAVG()  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> (<span class="built_in">AVG</span>(?amount) <span class="keyword">as</span> ?avgAmount)</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    ?meal e:amount ?amount .</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li>æ±‚å’ŒSUM(),è®¡æ•°COUNT()</li><li>GROUP_CONCAT(): å°†å¾ˆå¤šæ•°æ®ç»‘å®šåˆ°ä¸€ä¸ªå˜é‡ï¼Œé»˜è®¤çš„åˆ†éš”ç¬¦æ˜¯ç©ºæ ¼  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># è¿”å›ä¸€ä¸ªamountlistï¼Œå½¢å¦‚â€œ<span class="number">25.05</span>,<span class="number">10.00</span>,<span class="number">6.65</span>,<span class="number">31.45</span>â€</span><br><span class="line"><span class="keyword">SELECT</span> (GROUP_CONCAT(?amount;SEPARATOR <span class="operator">=</span> <span class="string">','</span>) <span class="keyword">AS</span> amountlist)</span><br><span class="line"><span class="keyword">WHERE</span> { ?meal e:amount ?amount.} </span><br></pre></td></tr></tbody></table></figure></li><li>GROUP BY: æ ¹æ®æŸå±æ€§åˆ†ç»„ï¼›ä»£å…¥SUM()å‡½æ•°å¯ä»¥æ±‚å’Œï¼Œç±»ä¼¼çš„ï¼Œå¯ä»¥ä»£å…¥åˆ«çš„å‡½æ•°  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># ç»Ÿè®¡æ—©ä¸­æ™šé¤æ€»æ•°</span><br><span class="line"><span class="keyword">SELECT</span> ?description (<span class="built_in">SUM</span>(?amount) <span class="keyword">AS</span> ?meanTotal)</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{...}</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> ?description</span><br></pre></td></tr></tbody></table></figure></li><li>HAVING å…³é”®å­—ï¼šé™å®šæ˜¾ç¤ºå‡ºæ¥çš„ç»“æœéœ€è¦æ»¡è¶³çš„æ¡ä»¶  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#æˆ‘ä»¬åªå¯¹æ€»æ•°è¶…è¿‡<span class="number">20</span>çš„æ„Ÿå…´è¶£</span><br><span class="line"><span class="keyword">SELECT</span> ?description (<span class="built_in">SUM</span>(?amount) <span class="keyword">AS</span> ?meanTotal)</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{...}</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> ?description</span><br><span class="line"><span class="keyword">HAVING</span> (<span class="built_in">SUM</span>(?amount)<span class="operator">&gt;</span><span class="number">20</span>)</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Query-A-Remote-SPARQL-Service"><a href="#Query-A-Remote-SPARQL-Service" class="headerlink" title="Query A Remote SPARQL Service"></a>Query A Remote SPARQL Service</h4><ul><li>æŸ¥è¯¢è¿œç¨‹sparqlæœåŠ¡<ul><li>FROM å…³é”®å­—(RDF file)  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ?title</span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span>xxx:<span class="operator">/</span><span class="operator">/</span>xxx.xxx.xxxx<span class="operator">/</span>xxx<span class="operator">&gt;</span></span><br><span class="line">{?s dc:title ?title}</span><br></pre></td></tr></tbody></table></figure></li><li>SERVICE å…³é”®å­—(SPARQL endpoint)  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># åœ¨SPAERQL endpointè¿è¡ŒæŸ¥è¯¢å¾—åˆ°ä¸€äº›å†…å®¹ï¼Œå†è¿›è¡Œæ£€ç´¢è¿”å›ç»“æœ</span><br><span class="line"><span class="keyword">SELECT</span> ?p ?o</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    SERVICE <span class="operator">&lt;</span>xxx:<span class="operator">/</span><span class="operator">/</span>xxx.xxx<span class="operator">/</span>xxx<span class="operator">&gt;</span></span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">SELECT</span> ?p ?o</span><br><span class="line">        <span class="keyword">WHERE</span> {xxx ?p ?o}</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul></li><li><strong>ARQ å¿…é¡»æŒ‡å®šâ€“dataå‚æ•°ï¼Œå³ä¾¿æŸ¥è¯¢å¯¹æ•°æ®æ²¡æœ‰ä»»ä½•æ“ä½œï¼ˆä¸Šé¢çš„æŸ¥è¯¢ï¼Œå…¶å®åªæ˜¯æŒ‡å®šäº†å¾…æŸ¥è¯¢çš„endpointï¼Œè€Œä¸æ˜¯æ•°æ®</strong></li><li>å¯ä»¥å€ŸåŠ©<strong>D2RQ</strong>ä½¿ç”¨SPARQLæŸ¥è¯¢å…³ç³»æ•°æ®åº“ï¼ˆRDBï¼‰</li></ul><h4 id="Federated-Queries-Searching-Multiple-Datasets-With-One-Query"><a href="#Federated-Queries-Searching-Multiple-Datasets-With-One-Query" class="headerlink" title="Federated Queries:Searching Multiple Datasets With One Query"></a>Federated Queries:Searching Multiple Datasets With One Query</h4><ul><li>è”åˆæŸ¥è¯¢(Federated Queries):ä¸€ä¸ªqueryæŸ¥è¯¢å¤šä¸ªæ•°æ®é›†<ul><li>ç¬¬ä¸€ä¸ªå­æŸ¥è¯¢ä¸­ç»‘å®šçš„å˜é‡ï¼Œåœ¨ä¹‹åçš„å­æŸ¥è¯¢ä¸­ä¾æ—§å¯ç”¨</li><li>å¦‚æœæ•°æ®é›†ä¹‹é—´å…³ç³»å¯†åˆ‡ï¼Œä¸Šé¢çš„ç‰¹ç‚¹å°±ä¼šå¾ˆæœ‰ç”¨ï¼ˆç”¨æ¥äº¤å‰å¼•ç”¨ï¼‰</li><li>å¦‚æœä¸€ä¸ªæŸ¥è¯¢ç”±ä¸¤ä¸ªå­æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢1è¿”å›aä¸ªç»“æœï¼Œå­æŸ¥è¯¢2è¿”å›bä¸ªç»“æœï¼Œé‚£ä¹ˆæ•´ä½“æŸ¥è¯¢å°±è¿”å›a*bä¸ªç»“æœï¼ˆcross-productï¼‰</li><li>å­æŸ¥è¯¢ä¾æ¬¡æ‰§è¡Œï¼Œå¯èƒ½ä¼šèŠ±ç‚¹æ—¶é—´</li></ul></li></ul><h3 id="Coping-Creating-And-Converting-Data"><a href="#Coping-Creating-And-Converting-Data" class="headerlink" title="Coping,Creating,And Converting Data"></a>Coping,Creating,And Converting Data</h3><p>é™¤äº†æŸ¥è¯¢å‡ºç»“æœè¿˜èƒ½åšæ›´å¤šçš„äº‹</p><h4 id="Query-Forms-SELECT-DESCRIBE-ASK-and-CONSTRUCT"><a href="#Query-Forms-SELECT-DESCRIBE-ASK-and-CONSTRUCT" class="headerlink" title="Query Forms: SELECT, DESCRIBE, ASK, and CONSTRUCT"></a>Query Forms: SELECT, DESCRIBE, ASK, and CONSTRUCT</h4><ul><li>CONSTRUCTè¿”å›ä¸‰å…ƒç»„ï¼›å¯ä»¥è¿”å›åŸæ•°æ®ä¹Ÿå¯ä»¥æŠ½å–å‡ºå€¼æ¥åˆ›å»ºæ–°çš„ä¸‰å…ƒç»„ï¼›å¯ä»¥ç”¨æ¥å¤åˆ¶ã€åˆ›å»ºã€è½¬æ¢</li><li>ASKè¯¢é—®å¤„ç†å™¨ç»™å®šçš„å›¾æ¨¡å¼æ˜¯å¦æè¿°ç‰¹å®šæ•°æ®é›†ä¸­çš„ä¸€ç»„ä¸‰å…ƒç»„ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼›å¯ä»¥ç”¨æ¥è‡ªåŠ¨åŒ–æ•°æ®å¤„ç†æµç¨‹ä¸­çš„è´¨é‡æ§åˆ¶ï¼›</li><li>DESCRIBEè¦æ±‚æä¾›æè¿°ç‰¹å®šèµ„æºçš„ä¸‰å…ƒç»„</li></ul><h4 id="Copying-Data"><a href="#Copying-Data" class="headerlink" title="Copying Data"></a>Copying Data</h4><ul><li>åˆ©ç”¨CONSTRUCTæŠ½å–ä¸‰å…ƒç»„ï¼›ç»“åˆGRAPHå…³é”®å­—å¯ä»¥ä»ç‰¹å®šå‘½åå›¾ä¸­æŠ½å–ï¼›SELECTåé¢è·Ÿçš„æ˜¯å˜é‡åˆ—è¡¨ï¼ŒCONSTRUCTåé¢è·Ÿçš„æ˜¯æƒ³è¦æ„é€ çš„ä¸‰å…ƒç»„      <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#constructåé¢è·Ÿçš„æ˜¯ä¸‰å…ƒç»„ï¼Œç”¨èŠ±æ‹¬å·åŒ…å›´,é‡Œé¢å¯ä»¥åŒ…å«ä»»æ„ä¸ªä¸‰å…ƒç»„æ¨¡å¼ï¼ˆtriple patternsï¼‰</span><br><span class="line">CONSTRUCT</span><br><span class="line">{?person ?p ?o}</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{...}</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Creating-New-Data"><a href="#Creating-New-Data" class="headerlink" title="Creating New Data"></a>Creating New Data</h4><ul><li>åˆ©ç”¨ä¸€äº›å‡½æ•°å¤„ç†æ•°æ®ï¼Œå¾—åˆ°æ–°çš„å­—æ®µ</li><li>æŒ‡æ˜èµ„æºæ‰€å±çš„ç±»ä¼šè®©ä¿¡æ¯æ¨æ–­æ›´åŠ å®¹æ˜“</li><li>æ‰€è°“çš„åˆ›å»ºä¿¡æ¯å…¶å®æ˜¯å°†éšå«çš„ä¿¡æ¯æ˜ç¡®åŒ–</li></ul><h4 id="Converting-Data"><a href="#Converting-Data" class="headerlink" title="Converting Data"></a>Converting Data</h4><ul><li>å°†ä¸€ä¸ªå‘½åç©ºé—´ä¸­çš„å±æ€§è½¬æ¢åˆ°éœ€è¦çš„å‘½åç©ºé—´</li><li>æ„å‘³ç€è§„èŒƒåŒ–URIä»¥ä¾¿æ›´åŠ å®¹æ˜“åœ°ç»„åˆæ•°æ®</li><li>owl:sameAsæ˜¯DBpediaä¸­ç”¨æ¥å°†ä¸åŒæ¥æºçš„èµ„æºè”ç³»èµ·æ¥çš„æ–¹å¼</li></ul><h4 id="Finding-Bad-Data"><a href="#Finding-Bad-Data" class="headerlink" title="Finding Bad Data"></a>Finding Bad Data</h4><ul><li>schemaæ˜¯ä¸€ç»„å…³äºæ•°æ®ç»“æ„å’Œæ•°æ®ç±»å‹çš„è§„åˆ™</li><li>å¦‚æœæ•°æ®éµå¾ªäº†æŸä¸ªschemaé‚£ä¹ˆå°±ä¸éœ€è¦ç¨‹åºå‘˜å†™ä»£ç åº”å¯¹â€œç»™å­—ç¬¦ä¸²åŠ äº†1â€è¿™æ ·çš„æƒ…å½¢äº†</li><li>è¯­ä¹‰ç½‘åº”ç”¨é‡‡ç”¨äº†åˆ«çš„æ–¹æ³•ï¼Œé€šè¿‡æ·»åŠ æ›´å¤šçš„metadata</li><li>ä½¿ç”¨SPARQLæ·»åŠ é™åˆ¶è€Œä¸æ˜¯OWL</li></ul><h4 id="Defining-Rules-with-SPARQL"><a href="#Defining-Rules-with-SPARQL" class="headerlink" title="Defining Rules with SPARQL"></a>Defining Rules with SPARQL</h4><ul><li>rules expressed as queries</li><li>ä¸€äº›å¸¸ç”¨çš„ï¼š<ul><li>isURI</li><li>datatype(?amount)) != xsd:integer</li><li>!(bound(?grade))</li><li>?grade &lt; 5</li></ul></li></ul><h4 id="Generating-Data-About-Broken-Rules"><a href="#Generating-Data-About-Broken-Rules" class="headerlink" title="Generating Data About Broken Rules"></a>Generating Data About Broken Rules</h4><ul><li>å°†ASKæ¢ä¸ºCONSTRUCT</li><li>é—®é¢˜å»ºæ¨¡ï¼šé—®é¢˜ç±»å‹ã€ç›¸å…³å±æ€§</li><li>å¯ä»¥ä½¿ç”¨Unionå°†ä¸åŒçš„è§„åˆ™åŠ åˆå¹¶ï¼Œä½†æ˜¯éšç€è§„åˆ™çš„å¢å¤šï¼Œè¿™ç§æ–¹å¼ä¼šäº§ç”Ÿè¶Šæ¥è¶Šå¤šçš„é”™è¯¯ï¼ˆ thereâ€™d be greater and greater room for error</li><li>å¥½çš„å¤„ç†æ–¹å¼æ˜¯ï¼šåˆ†å¼€å­˜å‚¨è§„åˆ™ï¼Œä½¿ç”¨æ˜¯æ—¶å€™pipeline</li></ul><h4 id="Using-Existing-SPARQL-Rules-Vocabularies"><a href="#Using-Existing-SPARQL-Rules-Vocabularies" class="headerlink" title="Using Existing SPARQL Rules Vocabularies"></a>Using Existing SPARQL Rules Vocabularies</h4><ul><li>Schemarama</li><li>SPIN</li><li>å…³ç³»æ•°æ®åº“â€“APIâ€“check for rule compliance using SPARQL</li></ul><h4 id="Asking-for-a-Description-of-a-Resource"><a href="#Asking-for-a-Description-of-a-Resource" class="headerlink" title="Asking for a Description of a Resource"></a>Asking for a Description of a Resource</h4><ul><li>DESCRIBE+URI :è¿”å›èµ„æºçš„ä¸€äº›ä¿¡æ¯ï¼Œå…·ä½“è¿”å›ç»“æœå’ŒSPARQLæŸ¥è¯¢å¼•æ“æœ‰å…³</li><li>CONSTRUCTå¯ä»¥å®Œæˆç›¸åŒçš„äº‹æƒ…ï¼Œwith better controlï¼Œå› æ­¤ä¸å¤ªæ¨èåœ¨seriousçš„åº”ç”¨å¼€å‘ä¸­ä½¿ç”¨</li></ul><h3 id="Datatypes-And-Functions"><a href="#Datatypes-And-Functions" class="headerlink" title="Datatypes And Functions"></a>Datatypes And Functions</h3><h4 id="Datatypes-and-Queries"><a href="#Datatypes-and-Queries" class="headerlink" title="Datatypes and Queries"></a>Datatypes and Queries</h4><ul><li>æ•°æ®ç±»å‹å…ƒæ•°æ®çš„å­˜å‚¨æ˜¯è®°å½•è¯­ä¹‰ä¿¡æ¯çš„æœ€æ—©æ–¹å¼ä¹‹ä¸€</li><li>æ ‡æ˜æ•°æ®ç±»å‹æ–¹ä¾¿ç†è§£ï¼Œä¸æ ‡æ˜çš„è¯ä¼šæœ‰é»˜è®¤è®¾ç½®</li><li>str()å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼šFILTER (str(?o) = â€œtwoâ€) #è¿”å›æ‰€æœ‰å€¼ä¸ºâ€twoâ€çš„</li></ul><h4 id="Representing-Strings"><a href="#Representing-Strings" class="headerlink" title="Representing Strings"></a>Representing Strings</h4><ul><li>å•å¼•å·ï¼ŒåŒå¼•å·ï¼Œä¸‰ä¸ªå•å¼•å·æˆ–è€…åŒå¼•å·</li><li>ARQè¾“å‡ºçš„æ—¶å€™:ä½¿ç”¨åŒå¼•å·åˆ†éš”å­—ç¬¦ä¸²ï¼›å›è½¦ä¸º/rï¼Œæ¢è¡Œä¸º/nï¼Œè½¬ä¹‰ä¸º/ï¼›è¾“å‡ºçš„é¡ºåºdoesnâ€™t matter</li></ul><h4 id="Comparing-Values-and-Doing-Arithmetic"><a href="#Comparing-Values-and-Doing-Arithmetic" class="headerlink" title="Comparing Values and Doing Arithmetic"></a>Comparing Values and Doing Arithmetic</h4><ul><li>å½“ä½¿ç”¨ä¸åŒçš„æ•°å­—ç±»å‹æ˜¾å¼é”®å…¥ä¸åŒçš„å€¼æ—¶ï¼Œä»ç„¶å¯ä»¥åœ¨æ‰§è¡Œç®—æœ¯æ—¶å°†å®ƒä»¬ä¸€èµ·ä½¿ç”¨ï¼šæ¯”å¦‚integerå’Œdecimalå¯ä»¥ä¹˜åˆ°ä¸€èµ·</li></ul><h4 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h4><ul><li>SPARQL 1.0è§„èŒƒæä¾›äº†ä¸€äº›åŸºæœ¬å‡½æ•°ï¼ŒSPARQL 1.1æä¾›äº†æ›´å¹¿æ³›çš„é€‰æ‹©ï¼Œå‡ ä¹æ‰€æœ‰éƒ½åŸºäºXPathå‡½æ•°</li><li>SPARQLå¤„ç†å™¨å¯ä»¥æä¾›å…¶å®æ–½è€…æƒ³è¦åŒ…å«çš„ä»»ä½•æ‰©å±•åŠŸèƒ½</li></ul><h4 id="Program-Logic-Functions"><a href="#Program-Logic-Functions" class="headerlink" title="Program Logic Functions"></a>Program Logic Functions</h4><ul><li>IF()å‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ã€‚ å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸ºtrueï¼Œåˆ™è¯¥å‡½æ•°è¿”å›ç¬¬äºŒä¸ªå‚æ•°çš„å€¼; å¦åˆ™è¿”å›ç¬¬ä¸‰ä¸ª</li><li>COALESCE():æ¥å—å¾ˆå¤šå‚æ•°ï¼Œè¿”å›the first one that doesnâ€™t result in an error  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ?<span class="keyword">first</span> ?<span class="keyword">last</span> </span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">{</span><br><span class="line">?s ab:lastName ?<span class="keyword">last</span>; </span><br><span class="line">   ab:firstName ?firstname . </span><br><span class="line">OPTIONAL{ ?s ab:nick ?nickname . } </span><br><span class="line">BIND (<span class="built_in">COALESCE</span>(?nickname,?firstname) <span class="keyword">AS</span> ?<span class="keyword">first</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Node-Type-and-Datatype-Checking-Functions"><a href="#Node-Type-and-Datatype-Checking-Functions" class="headerlink" title="Node Type and Datatype Checking Functions"></a>Node Type and Datatype Checking Functions</h4><ul><li>å‡½æ•°å‚æ•°å¯èƒ½éœ€è¦æ˜¯ç‰¹å®šç±»å‹ï¼Œæ•°æ®å­—æ®µä¹Ÿéœ€è¦æ˜¯ç‰¹å®šç±»å‹</li><li>datatype()å‡½æ•°å¯ä»¥ç”¨æ¥æ£€æµ‹ç±»å‹</li><li>isBlank(), isLiteral(), isNumeric(), isIRI(), and isURI()</li><li>æ•°å­—ï¼Œå­—ç¬¦ä¸²å’Œå…³é”®å­—trueå’Œfalseï¼ˆå…¨éƒ¨å†™æˆå°å†™ï¼‰éƒ½æ˜¯literalsï¼Œåªæœ‰URIå’Œç©ºç™½èŠ‚ç‚¹ä¸æ˜¯</li><li>datatype(params) è¿”å›ä¸€ä¸ªURIï¼Œæ ‡è¯†paramsçš„ç±»å‹,paramsä¸ºç©ºç™½èŠ‚ç‚¹å’ŒURIsæ—¶è¿”å›ä¸ºç©º</li><li>bound()å‘Šè¯‰æˆ‘ä»¬ä¸€ä¸ªå˜é‡æ˜¯å¦æœ‰ä¸€ä¸ªç»‘å®šçš„å€¼</li></ul><h4 id="Node-Type-Conversion-Functions"><a href="#Node-Type-Conversion-Functions" class="headerlink" title="Node Type Conversion Functions"></a>Node Type Conversion Functions</h4><ul><li>URI() function lets you convert values to URIs if possible</li><li>åœ¨å°†å€¼ä¼ é€’ç»™URI()æˆ–IRI()å‡½æ•°ä¹‹å‰ï¼Œä½¿ç”¨ENCODE_FOR_URI()å‡½æ•°é¢„å¤„ç†æ˜¯ä¸ªæ¨èçš„åšæ³•ï¼Œä½†è¦æ³¨æ„å®ƒåªæ¥å—simple literalsæˆ–xsdï¼šstring</li><li>str():è¿”å›ä¼ å…¥èµ„æºçš„å­—ç¬¦ä¸²å½¢å¼ï¼Œä¼ å…¥ä¸ºç©ºç™½èŠ‚ç‚¹æ—¶ä¸è¿”å›å€¼</li><li>ä¸€ä¸ªä¾‹å­ï¼š  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CONSTRUCT {?s ?p ?testURI.} </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{</span><br><span class="line">    ?s ?p ?o . </span><br><span class="line">    BIND( IF(isURI(?o), ?o, URI(ENCODE_FOR_URI(str(?o))) ) <span class="keyword">AS</span> ?testURI)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Datatype-Conversion"><a href="#Datatype-Conversion" class="headerlink" title="Datatype Conversion"></a>Datatype Conversion</h4><ul><li>conversion to boolean is pickier: xsd:boolean(?o)ä¸èƒ½è½¬æ¢Trueï¼Œå¯ä»¥è½¬æ¢true</li><li>xsd:dateTime()ä¸èƒ½è½¬æ¢â€œ2011-11-12â€ ï¼Œå¯ä»¥è½¬æ¢â€œ2011-11-12T14:30:00â€</li><li>STRDT()æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªliteralå€¼å’Œä¸€ä¸ªç±»å‹URIï¼Œåˆ›å»ºä¸€ä¸ªtyped literalï¼ˆè‡ªå®šä¹‰ç±»å‹ï¼‰  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CONSTRUCT { ?s u:amount ?newAmount . } </span><br><span class="line"><span class="keyword">WHERE</span> {</span><br><span class="line">    ?s im:product ?prodName ;</span><br><span class="line">       im:amount ?amount ; </span><br><span class="line">       im:units ?units .</span><br><span class="line">       BIND (STRDT(?amount, URI(CONCAT("http://learningsparql.com/ns/units#",?units))) <span class="keyword">AS</span> ?newAmount)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="Checking-Adding-and-Removing-Spoken-Language-Tags"><a href="#Checking-Adding-and-Removing-Spoken-Language-Tags" class="headerlink" title="Checking, Adding, and Removing Spoken Language Tags"></a>Checking, Adding, and Removing Spoken Language Tags</h4><ul><li>FILTER ( lang(?label) = â€œenâ€ ) #åªè¿”å›è‹±æ–‡æ ‡ç­¾</li><li>BIND (str(?label) AS ?strippedLabel) #å»æ‰@enï¼Œåªè¿”å›æ–‡å­—ä¿¡æ¯</li><li>STRLANG()å‡½æ•°å¯ä»¥ä¸ºå±æ€§åŠ æ ‡ç­¾ï¼Œæ¯”å¦‚ï¼šSTRLANG(?USTerm,â€en-USâ€)</li></ul><h4 id="String-Functions"><a href="#String-Functions" class="headerlink" title="String Functions"></a>String Functions</h4><ul><li>STRLEN(), SUBSTR(), UCASE(), and LCASE()</li><li>STRSTARTS(), STRENDS(), CONTAINS(),regex() #è¿”å›å¸ƒå°”å€¼</li><li>The regex() function expects its first argument to be either an xsd:string or a simple literal with no language tagã€‚å¯ä»¥str()ä¸€ä¸‹</li></ul><h4 id="Numeric-Functions"><a href="#Numeric-Functions" class="headerlink" title="Numeric Functions"></a>Numeric Functions</h4><ul><li>abs(),round(),ceil(),flloor()</li><li>rand()+CONSTRUCT :ç”Ÿæˆæ ·æœ¬æ•°æ®</li></ul><h4 id="Date-and-Time-Functions"><a href="#Date-and-Time-Functions" class="headerlink" title="Date and Time Functions"></a>Date and Time Functions</h4><ul><li>now(),timezone(),tz()</li></ul><h4 id="Hash-Functions"><a href="#Hash-Functions" class="headerlink" title="Hash Functions"></a>Hash Functions</h4><ul><li>MD5(),SHA1(),SHA224(),SHA256(),SHA384(),SHA512()</li></ul><h4 id="Extension-Functions"><a href="#Extension-Functions" class="headerlink" title="Extension Functions"></a>Extension Functions</h4><ul><li>ä¸åŒçš„SPARQLå¤„ç†å™¨æ”¯æŒçš„æ‹“å±•å‡½æ•°ä¸åŒ</li><li>less portable</li></ul><h3 id="Updating-Data-With-SPARQL"><a href="#Updating-Data-With-SPARQL" class="headerlink" title="Updating Data With SPARQL"></a>Updating Data With SPARQL</h3><p>query the data with the SPARQL query language and manage it with the update language.</p><h4 id="Getting-Started-with-Fuseki"><a href="#Getting-Started-with-Fuseki" class="headerlink" title="Getting Started with Fuseki"></a>Getting Started with Fuseki</h4><ul><li>ä¸‹è½½ã€å®‰è£…</li></ul><h4 id="Adding-Data-to-a-Dataset"><a href="#Adding-Data-to-a-Dataset" class="headerlink" title="Adding Data to a Dataset"></a>Adding Data to a Dataset</h4><ul><li>æ›´æ–°æ–‡ä»¶åç¼€ä¸º.ruï¼Œæ„æ€æ˜¯ä¸€ä¸ªæ’å…¥è¯·æ±‚ï¼Œnot a query<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">INSERT</span> DATAåé¢è·Ÿè¦æ’å…¥çš„triples</span><br><span class="line"># ç®€å•å¿«é€Ÿæ’å…¥æ•°æ®</span><br><span class="line"><span class="keyword">INSERT</span> DATA </span><br><span class="line">{d:i8301 ab:homeTel "(718) 440-9821" . ab:Person a rdfs:Class .}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">where</span>åé¢è·Ÿtriple patternsï¼Œå¯ä»¥å¼•ç”¨ä¸Šé¢çš„å˜é‡</span><br><span class="line"># çµæ´»åˆ›é€ </span><br><span class="line"><span class="keyword">INSERT</span> {d:i8301 ab:homeTel "(718) 440-9821" . ab:Person a rdfs:Class .}</span><br><span class="line"><span class="keyword">WHERE</span> {}</span><br></pre></td></tr></tbody></table></figure></li><li>ä¸‰å…ƒç»„æ¨¡å¼å°±æ˜¯ä»»æ„ä½ç½®éƒ½å¯ä»¥è¢«å˜é‡æ›¿æ¢çš„ä¸‰å…ƒç»„</li></ul><h4 id="Deleting-Data"><a href="#Deleting-Data" class="headerlink" title="Deleting Data"></a>Deleting Data</h4><ul><li>DELETE DATA{}å’ŒDELETE{}WHERE{}</li><li>DELETE WHERE{} :åˆ é™¤åŒ¹é…whereæ¡ä»¶çš„ä¸‰å…ƒç»„</li><li>CLEAR  DEFAULT</li></ul><h4 id="Changing-Existing-Data"><a href="#Changing-Existing-Data" class="headerlink" title="Changing Existing Data"></a>Changing Existing Data</h4><ul><li>åœ¨ä¸€æ¬¡æ›´æ–°æ“ä½œä¸­ï¼Œåˆ é™¤+æ’å…¥</li><li>å³ä½¿åˆ é™¤å‘ç”Ÿåœ¨æ’å…¥ä¹‹å‰ï¼ŒINSERTå›¾å½¢æ¨¡å¼ä»ç„¶å…·æœ‰WHEREå­å¥å­˜å‚¨çš„æ‰€æœ‰ä¿¡æ¯</li></ul><h4 id="Named-Graphs"><a href="#Named-Graphs" class="headerlink" title="Named Graphs"></a>Named Graphs</h4><ul><li>SPARQLæ›´æ–°å…è®¸ä½¿ç”¨åˆ†å·è¿æ¥å¤šä¸ªæ“ä½œ</li><li>å°†ä¸‰å…ƒç»„æ’å…¥ä¸å­˜åœ¨çš„å›¾æ—¶ï¼ŒSPARQLå¤„ç†å™¨ä¼šåˆ›å»ºè¯¥å›¾</li></ul><h4 id="Dropping-Graphs"><a href="#Dropping-Graphs" class="headerlink" title="Dropping Graphs"></a>Dropping Graphs</h4><ul><li>DROP GRAPH d:g1 #åˆ é™¤å›¾g1</li><li>DROP DEFAULT #æ¸…é™¤é»˜è®¤å›¾ï¼Œï¼ˆå› ä¸ºé»˜è®¤å›¾æ€»æ˜¯å­˜åœ¨ï¼Œå³ä½¿ä¸ºç©º</li><li>DROP NAMEDï¼šåˆ é™¤å‘½åå›¾</li><li>DROP ALL ï¼šåˆ é™¤æ‰€æœ‰å›¾</li><li>SPARQL Updateæ²¡æœ‰UNDOæ“ä½œï¼Œå› æ­¤DROP ALLæ˜¯ä¸ªéœ€è¦æ…é‡çš„åŠ¨ä½œ</li><li>è¿™é‡Œçš„DROPæ¢ä¸ºCLEARè¡¨ç¤ºå›¾ä¸­çš„æ¸…é™¤ä¸‰å…ƒç»„</li><li>CREATE GRAPHï¼šåˆ›å»ºä¸€ä¸ªç©ºç™½å›¾</li></ul><h4 id="Named-Graph-Syntax-Shortcuts-WITH-and-USING"><a href="#Named-Graph-Syntax-Shortcuts-WITH-and-USING" class="headerlink" title="Named Graph Syntax Shortcuts: WITH and USING"></a>Named Graph Syntax Shortcuts: WITH and USING</h4><ul><li>withè¯­å¥æŒ‡æ˜è¦æ“ä½œçš„å›¾ï¼Œæ¯”GRAPHèŠ‚çœ</li><li>USINGçš„ä½œç”¨ç±»ä¼¼äºSELECTè¯­å¥çš„FROM</li><li>USING NAMED === FROM NAMED  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">USING</span> NAMED d:g2 </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">{ </span><br><span class="line">    # è¿™é‡Œä¸€å®šè¦å£°æ˜GRAPH d:g2</span><br><span class="line">    GRAPH d:g2 {?s dm:tag "five" . ?s dm:tag "six" .}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li>ä½¿ç”¨USINGå°±ä¸è¦ä½¿ç”¨WITH</li></ul><h4 id="Deleting-and-Replacing-Triples-in-Named-Graphs"><a href="#Deleting-and-Replacing-Triples-in-Named-Graphs" class="headerlink" title="Deleting and Replacing Triples in Named Graphs"></a>Deleting and Replacing Triples in Named Graphs</h4>  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> DATA { GRAPH d:g2{ d:x dm:tag "six" }}</span><br></pre></td></tr></tbody></table></figure>  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># GRAPH<span class="operator">+</span>å›¾åæˆ–è€…å˜é‡å</span><br><span class="line"><span class="keyword">DELETE</span> { GRAPH ?g { ?s ?p "three" } } </span><br><span class="line"><span class="keyword">WHERE</span> { GRAPH ?g { ?s ?p "three" } }</span><br></pre></td></tr></tbody></table></figure>  <figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">WITH</span> d:g1 </span><br><span class="line"><span class="keyword">DELETE</span> { ?s ?p "four"}</span><br><span class="line"><span class="keyword">WHERE</span> { ?s ?p "four"}</span><br></pre></td></tr></tbody></table></figure><h3 id="Building-Applications-With-SPARQL"><a href="#Building-Applications-With-SPARQL" class="headerlink" title="Building Applications With SPARQL"></a>Building Applications With SPARQL</h3><ul><li>å°†æŸ¥è¯¢å‘é€åˆ°ç«¯ç‚¹çš„æœ€å¸¸è§æ–¹å¼æ˜¯å°†æŸ¥è¯¢çš„è½¬ä¹‰ç‰ˆæœ¬ä½œä¸ºå‚æ•°æ·»åŠ åˆ°ç«¯ç‚¹çš„URI</li><li>D2RQ</li><li>SPARQLWrapper for python</li><li>ARQ source code for java</li></ul><h3 id="Glossary"><a href="#Glossary" class="headerlink" title="Glossary"></a>Glossary</h3><ul><li><strong>blank node</strong>: A subject or object in an RDF graph that has no identity. These are typically used to group together other values</li><li><strong>default graph</strong>: The triples in an RDF dataset that donâ€™t belong to a named graph</li><li><strong>IRI</strong>: Internationalized Resource Identifier: a URI that allows a wider choice of characters,making it â€œinternationalized.â€</li><li><strong>literal</strong>: A value, as opposed to a URI, which is a name for something. A literal may have a datatype or a spoken language tag associated with it, but not both. A simple literal is a literal with no language tag or datatype</li><li><strong>N3</strong>: A non-XML RDF serialization format developed by Tim Berners-Lee. Turtle is a simplified version of N3</li><li><strong>N-Triples</strong>: A very simple RDF serialization format that shows complete URIs with no abbreviation and a triple on each line. Often used as a graph dump format</li><li><strong>named graph</strong>: A set of triples, typically within a larger collection of them, that can be referenced with a particular name. The name is a URI</li><li><strong>RDF/XML</strong>: RDFâ€™s original serialization format, based on XML</li><li><strong>RDFS</strong>: the RDF Schema (RDFS) specification lets you specify classes, properties, and metadata about those classes and properties. These serve as metadata to let you infer new facts about your data, not as validation rules to indicate correct versus incorrect data</li><li><strong>triplestore</strong>: A specialized database manager designed for storing triples</li><li><strong>Turtle</strong>: An increasingly popular RDF serialization format based on N3</li><li><strong>URI</strong>: â€œURIâ€ is used more often to refer to an identifier, and â€œURLâ€ to refer to a locator, or address.We use URIs to identify resources and property names in RDF</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çŸ¥è¯†å›¾è°±å°demo</title>
      <link href="/2018/03/10/kgdemo/"/>
      <url>/2018/03/10/kgdemo/</url>
      
        <content type="html"><![CDATA[<h2 id="å®éªŒç¯å¢ƒ"><a href="#å®éªŒç¯å¢ƒ" class="headerlink" title="å®éªŒç¯å¢ƒ"></a>å®éªŒç¯å¢ƒ</h2><p>ç³»ç»Ÿï¼š<br>ubuntu16.04</p><p>è½¯ä»¶ç›®å½•:</p><ul><li>é¡¹ç›®ç›®å½•/home/gao/software/kgdemo/</li><li>æ•°æ®åº“/home/gao/software/mysql</li><li>åº”ç”¨æ¡†æ¶/home/gao/software/apache-jena-3.6.0ï¼ˆè¿™é‡Œä½¿ç”¨äº†å®ƒçš„TDBç»„ä»¶</li><li>SPARQLæœåŠ¡å™¨/home/gao/software/apache-jena-fuseki-3.6.0</li><li>æ•°æ®è½¬åŒ–å·¥å…·/home/gao/software/d2rq-0.8.1</li><li>æœ¬ä½“æ„å»ºå·¥å…·/home/gao/software/Protege-5.2.0<span id="more"></span></li></ul><h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><h3 id="æ•°æ®"><a href="#æ•°æ®" class="headerlink" title="æ•°æ®"></a>æ•°æ®</h3><p>ä¸ç”µå½±ç›¸å…³çš„.åŸºæœ¬ç»Ÿè®¡æ•°æ®å¦‚ä¸‹ï¼š</p><ol><li>æ¼”å‘˜æ•°é‡ï¼š505äºº</li><li>ç”µå½±æ•°é‡ï¼š4518éƒ¨</li><li>ç”µå½±ç±»å‹ï¼š19ç±»</li><li>äººç‰©ä¸ç”µå½±çš„å…³ç³»ï¼š14451</li><li>ç”µå½±ä¸ç±»å‹çš„å…³ç³»ï¼š7898</li></ol><p>æ¼”å‘˜çš„åŸºæœ¬ä¿¡æ¯åŒ…æ‹¬ï¼šå§“åã€è‹±æ–‡åã€å‡ºç”Ÿæ—¥æœŸã€æ­»äº¡æ—¥æœŸã€å‡ºç”Ÿåœ°ã€ä¸ªäººç®€ä»‹.<br>ç”µå½±çš„åŸºæœ¬ä¿¡æ¯åŒ…æ‹¬ï¼šç”µå½±åç§°ã€ç”µå½±ç®€ä»‹ã€ç”µå½±è¯„åˆ†ã€ç”µå½±å‘è¡Œæ—¥æœŸã€ç”µå½±ç±»å‹.</p><img src="/2018/03/10/kgdemo/ErGraph.png" class=""><h3 id="æœ¬ä½“å»ºæ¨¡"><a href="#æœ¬ä½“å»ºæ¨¡" class="headerlink" title="æœ¬ä½“å»ºæ¨¡"></a>æœ¬ä½“å»ºæ¨¡</h3><img src="/2018/03/10/kgdemo/OntoGraph.png" class=""><ul><li><p>æ‰“å¼€protege,åœ¨Ontology IRIä¸­å¡«å†™æ–°å»ºæœ¬ä½“èµ„æºçš„IRIä¸ºâ€<a href="http://www.kgmovie.demo.com/">http://www.kgmovie.demo.com</a>â€œ</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿›å…¥protegeç›®å½•,æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤</span></span><br><span class="line">./run.sh</span><br></pre></td></tr></tbody></table></figure></li><li><p>ç‚¹å‡»â€œEntitiesâ€tabæ ‡ç­¾,é€‰æ‹©â€œClassesâ€æ ‡ç­¾.åœ¨è¿™ä¸ªç•Œé¢,æˆ‘ä»¬åˆ›å»ºç”µå½±çŸ¥è¯†å›¾è°±çš„ç±»/æ¦‚å¿µ.</p><p>åœ¨owl:Thingä¸‹åˆ›å»ºä¸‰ä¸ªå­ç±»,Person,Movie,Genre.ä¸‰ä¸ªç±»çš„é»˜è®¤å…³ç³»æ˜¯äº’æ–¥çš„.</p></li><li><p>åˆ‡æ¢åˆ°â€Object Propertiesâ€é¡µé¢åˆ›å»º<strong>ç±»ä¹‹é—´çš„å…³ç³»,å³,å¯¹è±¡å±æ€§</strong>ã€‚</p><p>åˆ›å»ºäº†ä¸‰ä¸ªå¯¹è±¡å±æ€§ï¼Œâ€hasActedInâ€è¡¨ç¤ºæŸäººå‚æ¼”äº†æŸç”µå½±,è¯¥å±æ€§çš„â€domainâ€æ˜¯äºº,â€rangeâ€æ˜¯ç”µå½±ã€‚(<em>â€œdomainâ€è¡¨ç¤ºè¯¥å±æ€§æ˜¯å±äºå“ªä¸ªç±»çš„ï¼Œâ€rangeâ€è¡¨ç¤ºè¯¥å±æ€§çš„å–å€¼èŒƒå›´</em>),è®¾ç½®è¯¥å±æ€§çš„é€†å±æ€§(Inverse of)æ˜¯â€hasActorâ€,å¯ç”¨äºæ¨ç†.å¦å¤–ä¸€ä¸ªå±æ€§â€hasGenreâ€è¡¨ç¤ºç”µå½±å±äºä»€ä¹ˆç±»å‹.</p></li><li><p>åˆ‡æ¢åˆ°â€Data propertiesâ€é¡µé¢åˆ›å»º<strong>ç±»çš„å±æ€§,å³,æ•°æ®å±æ€§</strong>.</p><p>å…¶å®åŒºåˆ†æ•°æ®å±æ€§å’Œå¯¹è±¡å±æ€§è¿˜æœ‰ä¸€ä¸ªå¾ˆç›´è§‚çš„æ–¹æ³•,æˆ‘ä»¬è§‚å¯Ÿå…¶â€rangeâ€å–å€¼èŒƒå›´å³å¯.</p><p><strong>å¯¹è±¡å±æ€§çš„å–å€¼èŒƒå›´æ˜¯ç±»,è€Œæ•°æ®å±æ€§çš„å–å€¼èŒƒå›´åˆ™æ˜¯å­—é¢é‡.</strong></p></li><li><p>ä¿å­˜æ–‡ä»¶,å‘½åä¸ºâ€kgdemo.owlâ€</p></li><li><p>æ³¨æ„åˆ°,<strong>mysqlä¸­æœ‰äº”ä¸ªè¡¨,æœ¬ä½“ä¸­åªæœ‰ä¸‰ä¸ªç±»</strong></p></li></ul><h2 id="æ•°æ®è½¬æ¢"><a href="#æ•°æ®è½¬æ¢" class="headerlink" title="æ•°æ®è½¬æ¢"></a>æ•°æ®è½¬æ¢</h2><h3 id="mysql-RDF"><a href="#mysql-RDF" class="headerlink" title="mysql -> RDF"></a>mysql -&gt; RDF</h3><ul><li><p>ä¸‹è½½D2RQï¼Œè¿›å…¥å…¶ç›®å½•ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ç”Ÿæˆ<strong>é»˜è®¤çš„</strong>mappingæ–‡ä»¶ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./generate-mapping -u &lt;username&gt; -p &lt;password&gt; -o ../kgdemo/kg_demo_movie_mapping.ttl jdbc:mysql:///kg_demo_movie</span><br></pre></td></tr></tbody></table></figure></li><li><p>æ ¹æ®æˆ‘ä»¬å®šä¹‰çš„æœ¬ä½“<strong>ä¿®æ”¹mappingæ–‡ä»¶</strong></p><p>ttlæ–‡ä»¶ä¸­æ·»åŠ å‰ç¼€: @prefix : <a href="http://www.kgmovie.demo.com/#">http://www.kgmovie.demo.com#</a> .(åŒ…æ‹¬æœ€åçš„è¿™ä¸ªå¥å·)</p><p>å»é™¤æ²¡ç”¨çš„genre__labelå’Œgenre_genre_idä¿¡æ¯</p><p>vocab:xxxx æ¢æˆäº†æœ¬ä½“æ„å»ºæ—¶å€™çš„ç±»</p><p>d2rq:propertyå±æ€§ä¿®æ”¹ä¸ºæœ¬ä½“ä¸­å®šä¹‰çš„å±æ€§(å¯¹è±¡å±æ€§æˆ–è€…æ•°æ®å±æ€§)</p></li><li><p>æ•°æ®è½¬ä¸ºRDF</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./dump-rdf -o ../kgdemo/kg_demo_movie.nt ../kgdemo/kg_demo_movie_mapping.ttl</span><br></pre></td></tr></tbody></table></figure></li><li><p>æŸ¥è¯¢ç¤ºä¾‹</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ?titles <span class="keyword">WHERE</span> {</span><br><span class="line">  ?p rdf:type :Person.</span><br><span class="line">  ?p :personEnglishName <span class="string">'Stephen Chow'</span>.</span><br><span class="line">  ?p :hasActedIn ?movies.</span><br><span class="line">  ?movies :movieTitle ?titles</span><br><span class="line">}</span><br><span class="line">limit <span class="number">10</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>è¿”å›ç»“æœä¸º:</p><table><thead><tr><th>titles</th></tr></thead><tbody><tr><td>â€œåŠŸå¤«â€</td></tr><tr><td>â€œï§Œç’ƒæ¨½â€</td></tr><tr><td>â€œè‹±é›„æœ¬è‰²â€</td></tr><tr><td>â€œå°‘æ—è¶³çƒâ€</td></tr><tr><td>â€œè¥¿æ¸¸è®°ç¬¬å£¹ä½°é›¶å£¹å›ä¹‹æœˆå…‰å®ç›’â€</td></tr><tr><td>â€œé•¿æ±Ÿä¸ƒå·â€</td></tr><tr><td>â€œè¥¿æ¸¸è®°å¤§ç»“å±€ä¹‹ä»™å±¥å¥‡ç¼˜â€</td></tr><tr><td>â€œå»ºå›½å¤§ä¸šâ€</td></tr><tr><td>â€œå®¡æ­»å®˜â€</td></tr><tr><td>â€œé¾™åœ¨å¤©æ¶¯â€</td></tr></tbody></table></li></ul><h3 id="Bug-To-Fix"><a href="#Bug-To-Fix" class="headerlink" title="Bug To Fix"></a>Bug To Fix</h3><p>ä½¿ç”¨ä¸­æ–‡å§“åæŸ¥è¯¢ä¸åˆ°person</p><h2 id="jena-SPARQL-endpointåŠæ¨ç†"><a href="#jena-SPARQL-endpointåŠæ¨ç†" class="headerlink" title="jena SPARQL endpointåŠæ¨ç†"></a>jena SPARQL endpointåŠæ¨ç†</h2><h3 id="jenaç¤ºä¾‹"><a href="#jenaç¤ºä¾‹" class="headerlink" title="jenaç¤ºä¾‹"></a>jenaç¤ºä¾‹</h3><ul><li>ä¸‹è½½apache-jenaå’Œapache-jena-fuseki</li><li>åœ¨apache-jenaç›®å½•ä¸‹,ä½¿ç”¨â€œtdbloaderâ€å°†ä¹‹å‰æˆ‘ä»¬çš„RDFæ•°æ®ä»¥TDBçš„æ–¹å¼å­˜å‚¨ã€‚å‘½ä»¤å¦‚ä¸‹ï¼š</li></ul><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">./tdbloader --loc="../../kgdemo/tdb" "../../kgdemo/kg_demo_movie.nt"</span><br><span class="line">16:15:50 INFO  loader               :: -- Start triples data phase</span><br><span class="line">16:15:50 INFO  loader               :: ** Load empty triples table</span><br><span class="line">16:15:50 INFO  loader               :: -- Start quads data phase</span><br><span class="line">16:15:50 INFO  loader               :: ** Load empty quads table</span><br><span class="line">16:15:50 INFO  loader               :: Load: ../../kgdemo/kg_demo_movie.nt -- 2018/03/19 16:15:50 CST</span><br><span class="line">16:15:52 INFO  loader               :: -- Finish triples data phase</span><br><span class="line">16:15:52 INFO  loader               :: ** Data: 47,144 triples loaded in 1.26 seconds [Rate: 37,327.00 per second]</span><br><span class="line">16:15:52 INFO  loader               :: -- Finish quads data phase</span><br><span class="line">16:15:52 INFO  loader               :: -- Start triples index phase</span><br><span class="line">16:15:52 INFO  loader               :: ** Index SPO-&gt;POS: 47,144 slots indexed in 0.14 seconds [Rate: 334,354.63 per second]</span><br><span class="line">16:15:52 INFO  loader               :: ** Index SPO-&gt;OSP: 47,144 slots indexed in 0.13 seconds [Rate: 374,158.72 per second]</span><br><span class="line">16:15:52 INFO  loader               :: -- Finish triples index phase</span><br><span class="line">16:15:52 INFO  loader               :: ** 47,144 triples indexed in 0.27 seconds [Rate: 172,688.64 per second]</span><br><span class="line">16:15:52 INFO  loader               :: -- Finish triples load</span><br><span class="line">16:15:52 INFO  loader               :: ** Completed: 47,144 triples loaded in 1.55 seconds [Rate: 30,356.73 per second]</span><br><span class="line">16:15:52 INFO  loader               :: -- Finish quads load</span><br></pre></td></tr></tbody></table></figure><ul><li>åœ¨fuseki-serverç›®å½•ä¸‹,è¿è¡Œ <em>./fuseki-server</em> æœåŠ¡,ä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆrunæ–‡ä»¶å¤¹,å°†æœ¬ä½“æ–‡ä»¶é‡å‘½åä¸ºâ€kgdemo.ttlâ€æ”¾å…¥run/database,ç„¶ååœ¨run/configurationé‡Œåˆ›å»ºconfig.ttlæ–‡ä»¶,å†…å®¹ä¸º:</li></ul><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">@prefix :      &lt;http://base/#&gt; .</span><br><span class="line">@prefix tdb:   &lt;http://jena.hpl.hp.com/2008/tdb#&gt; .</span><br><span class="line">@prefix rdf:   &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .</span><br><span class="line">@prefix ja:    &lt;http://jena.hpl.hp.com/2005/11/Assembler#&gt; .</span><br><span class="line">@prefix rdfs:  &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .</span><br><span class="line">@prefix fuseki: &lt;http://jena.apache.org/fuseki#&gt; .</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">:service1        a                fuseki:Service ;</span><br><span class="line">fuseki:dataset                    &lt;#dataset&gt; ;</span><br><span class="line">fuseki:name                       "kg_demo_movie" ;</span><br><span class="line">fuseki:serviceQuery               "query" , "sparql" ;</span><br><span class="line">fuseki:serviceReadGraphStore      "get" ;</span><br><span class="line">fuseki:serviceReadWriteGraphStore "data" ;</span><br><span class="line">fuseki:serviceUpdate              "update" ;</span><br><span class="line">fuseki:serviceUpload              "upload" .</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;#dataset&gt; rdf:type ja:RDFDataset ;</span><br><span class="line">    ja:defaultGraph &lt;#model_inf&gt; ;</span><br><span class="line">    .</span><br><span class="line"></span><br><span class="line">&lt;#model_inf&gt; a ja:InfModel ;</span><br><span class="line">    ja:baseModel &lt;#tdbGraph&gt; ;</span><br><span class="line"></span><br><span class="line">    #æœ¬ä½“æ–‡ä»¶çš„è·¯å¾„</span><br><span class="line">    ja:content [ja:externalContent &lt;file:////home/gao/software/apache-jena-fuseki-3.6.0/run/databases/kgdemo.ttl&gt; ] ;</span><br><span class="line">    </span><br><span class="line">    #å¯ç”¨OWLæ¨ç†æœº</span><br><span class="line">    ja:reasoner [ja:reasonerURL &lt;http://jena.hpl.hp.com/2003/OWLFBRuleReasoner&gt;] .</span><br><span class="line"></span><br><span class="line">&lt;#tdbGraph&gt; rdf:type tdb:GraphTDB ;</span><br><span class="line">    tdb:dataset &lt;#tdbDataset&gt; ;</span><br><span class="line">    .</span><br><span class="line"></span><br><span class="line">&lt;#tdbDataset&gt; rdf:type tdb:DatasetTDB ;</span><br><span class="line">    tdb:location "/home/gao/software/kgdemo/tdb" ;</span><br></pre></td></tr></tbody></table></figure><ul><li>é‡å¯è¿è¡Œ <em>./fuseki-server</em></li></ul><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[2018-03-19 16:39:13] Server     INFO  Apache Jena Fuseki 3.6.0</span><br><span class="line">[2018-03-19 16:39:13] Config     INFO  FUSEKI_HOME=/home/gao/software/apache-jena-fuseki-3.6.0</span><br><span class="line">[2018-03-19 16:39:13] Config     INFO  FUSEKI_BASE=/home/gao/software/apache-jena-fuseki-3.6.0/run</span><br><span class="line">[2018-03-19 16:39:13] Config     INFO  Shiro file: file:///home/gao/software/apache-jena-fuseki-3.6.0/run/shiro.ini</span><br><span class="line">[2018-03-19 16:39:13] Config     INFO  Configuration file: /home/gao/software/apache-jena-fuseki-3.6.0/run/config.ttl</span><br><span class="line">[2018-03-19 16:39:13] Config     INFO  Load configuration: file:///home/gao/software/apache-jena-fuseki-3.6.0/run/configuration/conf.ttl</span><br><span class="line">[2018-03-19 16:39:13] Config     INFO  Register: /kg_demo_movie</span><br><span class="line">[2018-03-19 16:39:13] Server     INFO  Started 2018/03/19 16:39:13 CST on port 3030</span><br></pre></td></tr></tbody></table></figure><ul><li>æ‰“å¼€é¡µé¢localhost:3030,æŸ¥è¯¢,è¿™é‡Œä½¿ç”¨ä¸­æ–‡ok</li></ul><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">PREFIX rdf: <span class="operator">&lt;</span>http:<span class="operator">/</span><span class="operator">/</span>www.w3.org<span class="operator">/</span><span class="number">1999</span><span class="operator">/</span><span class="number">02</span><span class="operator">/</span><span class="number">22</span><span class="operator">-</span>rdf<span class="operator">-</span>syntax<span class="operator">-</span>ns#<span class="operator">&gt;</span></span><br><span class="line">prefix rdfs: <span class="operator">&lt;</span>http:<span class="operator">/</span><span class="operator">/</span>www.w3.org<span class="operator">/</span><span class="number">2000</span><span class="operator">/</span><span class="number">01</span><span class="operator">/</span>rdf<span class="operator">-</span>schema#<span class="operator">&gt;</span></span><br><span class="line">prefix owl: <span class="operator">&lt;</span>http:<span class="operator">/</span><span class="operator">/</span>www.w3.org<span class="operator">/</span><span class="number">2002</span><span class="operator">/</span><span class="number">07</span><span class="operator">/</span>owl#<span class="operator">&gt;</span></span><br><span class="line">prefix : <span class="operator">&lt;</span>http:<span class="operator">/</span><span class="operator">/</span>www.kgmovie.demo.com#<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> ?titles <span class="keyword">WHERE</span> {</span><br><span class="line">  ?p rdf:type :Person.</span><br><span class="line">  ?p :personName <span class="string">'å‘¨æ˜Ÿé©°'</span>.</span><br><span class="line">  ?p :hasActedIn ?movies.</span><br><span class="line">  ?movies :movieTitle ?titles</span><br><span class="line">}</span><br><span class="line">limit <span class="number">10</span></span><br></pre></td></tr></tbody></table></figure><table><thead><tr><th></th><th>titles</th></tr></thead><tbody><tr><td>1</td><td>â€œï§Œç’ƒæ¨½â€</td></tr><tr><td>2</td><td>â€œè¥¿æ¸¸è®°ç¬¬å£¹ä½°é›¶å£¹å›ä¹‹æœˆå…‰å®ç›’â€</td></tr><tr><td>3</td><td>â€œå¤§å†…å¯†æ¢é›¶é›¶å‘â€</td></tr><tr><td>4</td><td>â€œåŠŸå¤«â€</td></tr><tr><td>5</td><td>â€œé•¿æ±Ÿä¸ƒå·â€</td></tr><tr><td>6</td><td>â€œå›é­‚å¤œâ€</td></tr><tr><td>7</td><td>â€œç™¾å˜æ˜Ÿå›â€</td></tr><tr><td>8</td><td>â€œè‹±é›„æœ¬è‰²â€</td></tr><tr><td>9</td><td>â€œå»ºå›½å¤§ä¸šâ€</td></tr><tr><td>10</td><td>â€œå”ä¼¯è™ç‚¹ç§‹é¦™â€</td></tr></tbody></table><h3 id="è‡ªå®šä¹‰æ¨ç†è§„åˆ™"><a href="#è‡ªå®šä¹‰æ¨ç†è§„åˆ™" class="headerlink" title="è‡ªå®šä¹‰æ¨ç†è§„åˆ™"></a>è‡ªå®šä¹‰æ¨ç†è§„åˆ™</h3><ul><li>åœ¨â€œdatabasesâ€æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶â€œrules.ttlâ€ï¼Œå¡«å…¥å¦‚ä¸‹å†…å®¹ï¼š</li></ul><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@prefix : &lt;http://www.kgmovie.demo.com#&gt; .</span><br><span class="line">@prefix owl: &lt;http://www.w3.org/2002/07/owl#&gt; .</span><br><span class="line">@prefix rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .</span><br><span class="line">@prefix xsd: &lt;XML Schema&gt; .</span><br><span class="line">@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .</span><br><span class="line"></span><br><span class="line">[ruleComedian: (?p :hasActedIn ?m) (?m :hasGenre ?g) (?g :genreName 'å–œå‰§') -&gt; (?p rdf:type :Comedian)]</span><br><span class="line">[ruleInverse: (?p :hasActedIn ?m) -&gt; (?m :hasActor ?p)]</span><br></pre></td></tr></tbody></table></figure><ul><li>ä¿®æ”¹juseki-serveré…ç½®æ–‡ä»¶:</li></ul><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">@prefix :      &lt;http://base/#&gt; .</span><br><span class="line">@prefix tdb:   &lt;http://jena.hpl.hp.com/2008/tdb#&gt; .</span><br><span class="line">@prefix rdf:   &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .</span><br><span class="line">@prefix ja:    &lt;http://jena.hpl.hp.com/2005/11/Assembler#&gt; .</span><br><span class="line">@prefix rdfs:  &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .</span><br><span class="line">@prefix fuseki: &lt;http://jena.apache.org/fuseki#&gt; .</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">:service1        a                fuseki:Service ;</span><br><span class="line">fuseki:dataset                    &lt;#dataset&gt; ;</span><br><span class="line">fuseki:name                       "kg_demo_movie" ;</span><br><span class="line">fuseki:serviceQuery               "query" , "sparql" ;</span><br><span class="line">fuseki:serviceReadGraphStore      "get" ;</span><br><span class="line">fuseki:serviceReadWriteGraphStore "data" ;</span><br><span class="line">fuseki:serviceUpdate              "update" ;</span><br><span class="line">fuseki:serviceUpload              "upload" .</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;#dataset&gt; rdf:type ja:RDFDataset ;</span><br><span class="line">    ja:defaultGraph &lt;#model_inf&gt; ;</span><br><span class="line">    .</span><br><span class="line"></span><br><span class="line">&lt;#model_inf&gt; a ja:InfModel ;</span><br><span class="line">    ja:baseModel &lt;#tdbGraph&gt; ;</span><br><span class="line"></span><br><span class="line">    #æœ¬ä½“æ–‡ä»¶çš„è·¯å¾„</span><br><span class="line">    ja:content [ja:externalContent &lt;file:////home/gao/software/apache-jena-fuseki-3.6.0/run/databases/kgdemo.ttl&gt; ] ;</span><br><span class="line">    </span><br><span class="line">    #å…³é—­OWLæ¨ç†æœº</span><br><span class="line">    #ja:reasoner [ja:reasonerURL &lt;http://jena.hpl.hp.com/2003/OWLFBRuleReasoner&gt;] .</span><br><span class="line">  </span><br><span class="line">  #å¼€å¯è§„åˆ™æ¨ç†æœºï¼Œå¹¶æŒ‡å®šè§„åˆ™æ–‡ä»¶è·¯å¾„</span><br><span class="line">    ja:reasoner [</span><br><span class="line">        ja:reasonerURL &lt;http://jena.hpl.hp.com/2003/GenericRuleReasoner&gt; ; </span><br><span class="line">        ja:rulesFrom &lt;file:////home/gao/software/apache-jena-fuseki-3.6.0/run/databases/rules.ttl&gt; ; ]</span><br><span class="line">    .</span><br><span class="line">&lt;#tdbGraph&gt; rdf:type tdb:GraphTDB ;</span><br><span class="line">    tdb:dataset &lt;#tdbDataset&gt; ;</span><br><span class="line">    .</span><br><span class="line"></span><br><span class="line">&lt;#tdbDataset&gt; rdf:type tdb:DatasetTDB ;</span><br><span class="line">    tdb:location "/home/gao/software/kgdemo/tdb" ;</span><br><span class="line">    .</span><br></pre></td></tr></tbody></table></figure><ul><li>æŸ¥è¯¢:</li></ul><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> n <span class="keyword">WHERE</span> {</span><br><span class="line">?x rdf:type :Comedian.</span><br><span class="line">?x :personName ?n.</span><br><span class="line">}</span><br><span class="line">limit <span class="number">10</span></span><br></pre></td></tr></tbody></table></figure><p>ç»“æœå¦‚ä¸‹:</p><table><thead><tr><th></th><th>n</th></tr></thead><tbody><tr><td>1</td><td>â€œé‚“æµ©å…‰â€</td></tr><tr><td>2</td><td>â€œæ¢æœä¼Ÿâ€</td></tr><tr><td>3</td><td>â€œæ¨æ­å¦‚â€</td></tr><tr><td>4</td><td>â€œæ¢éŸµè•Šâ€</td></tr><tr><td>5</td><td>â€œå´å®‡æ£®â€</td></tr><tr><td>6</td><td>â€œå¾é”¦æ±Ÿâ€</td></tr><tr><td>7</td><td>â€œé»„å®¶é©¹â€</td></tr><tr><td>8</td><td>â€œå¶è¿›â€</td></tr><tr><td>9</td><td>â€œåˆé©¬â€</td></tr><tr><td>10</td><td>â€œæ¢å’çªâ€</td></tr></tbody></table><h3 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h3><p>ä¸ç”¨sparqlï¼Œç”¨natural languageæŸ¥è¯¢ç»“æœ<br>query-answer</p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> çŸ¥è¯†å›¾è°± </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ„å»ºITé¢†åŸŸæ¦‚å¿µå›¾è°±</title>
      <link href="/2018/01/10/%E6%9E%84%E5%BB%BAIT%E9%A2%86%E5%9F%9F%E6%A6%82%E5%BF%B5%E5%9B%BE%E8%B0%B1/"/>
      <url>/2018/01/10/%E6%9E%84%E5%BB%BAIT%E9%A2%86%E5%9F%9F%E6%A6%82%E5%BF%B5%E5%9B%BE%E8%B0%B1/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.sciencedirect.com/science/article/pii/S0957417415005941">åŸæ–‡åœ°å€</a></p><h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>â€‹<strong>å…³è”å¼€æ”¾æ•°æ®</strong>ï¼ˆLODï¼‰ä¸­åŒ…å«ä¸°å¯Œçš„çŸ¥è¯†å’Œè¯­ä¹‰ï¼Œå®ƒçš„å‘å±•ä¿ƒä½¿äº†å¾ˆå¤šçŸ¥è¯†å‹åº”ç”¨çš„è¯ç”Ÿå’Œå…´èµ·ã€‚åœ¨è¿™äº›åº”ç”¨ä¸­ï¼Œå®ä½“é—´çš„ç›¸å…³æ€§ï¼ˆä¸åŒäºç›¸ä¼¼æ€§ï¼‰è¿™ä¸€æ¦‚å¿µæ‰®æ¼”äº†é‡è¦è§’è‰²ã€‚</p><p>â€‹åœ¨ç»™å®šä¸€ä¸ªæŸ¥è¯¢åæˆ‘ä»¬æ„Ÿå…´è¶£çš„ä¸åªæ˜¯ç¡®åˆ‡çš„è¿”å›å€¼ï¼ˆexact answers ï¼‰ï¼Œè¿˜æœ‰é‚£äº›ä¸æŸ¥è¯¢ç´§å¯†ç›¸å…³çš„ä¸œè¥¿ã€‚</p><p>â€‹åˆ©ç”¨DBpediaä¸­ITé¢†åŸŸæ•°æ®æ„å»ºæ¦‚å¿µå›¾è°±çš„æ–¹æ³•ï¼Œä¸ä»…åˆ©ç”¨å­—ç¬¦ä¸²åŒ¹é…ï¼Œè¿˜å¯ä»¥åˆ©ç”¨LODæ•°æ®é›†ä¸­ç¼–ç çš„æ˜¾ç¤ºæˆ–éšå¼è¯­ä¹‰ã€‚åœ¨æ­¤åŸºç¡€ä¸Šæ„å»ºçš„ä¸“å®¶ç³»ç»Ÿï¼Œå¯ä»¥å¸®åŠ©é‚£äº›åœ¨ITé¢†åŸŸè¿›è¡Œ<strong>å®ä½“æœç´¢</strong>ä»»åŠ¡çš„ç”¨æˆ·ã€‚</p><p>â€‹ä¸ºäº†å¯¹ç›¸å…³å®ä½“è¿›è¡Œ<strong>æ’åº</strong>éœ€è¦è®¡ç®—ç›¸å…³åº¦ï¼Œè¿™å°±æ¶‰åŠåˆ°ä¸åŒçš„<strong>ç›¸å…³æ€§åº¦é‡</strong>ï¼ˆrelatedness measuresï¼‰ã€‚</p><h3 id="å¯¼è¯»"><a href="#å¯¼è¯»" class="headerlink" title="å¯¼è¯»"></a>å¯¼è¯»</h3><p>â€‹åŸºäºå…³é”®è¯åŒ¹é…çš„æœç´¢åœ¨åŒä¹‰ã€æ­§ä¹‰å‘ç”Ÿæ—¶ï¼Œè¡¨ç°å¾—å¾ˆæŒ£æ‰ï¼ˆsufferï¼‰ã€‚å“ªæ€•æŸ¥è¯¢è¯­å¥ã€èµ„æºæè¿°éƒ½ç»“æ„åŒ–äº†ï¼ŒåŒæ ·çš„é—®é¢˜ä¾ç„¶å­˜åœ¨ã€‚å¯¼è‡´è¿™ä¸€é—®é¢˜çš„ä¸»è¦åŸå› æ˜¯ï¼Œå®ƒä»¬éƒ½<strong>æ— æ³•æ•è·</strong>æŸ¥è¯¢ã€èµ„æºæè¿°ä¸­çš„è¯è¯­çš„**è¯ä¹‰(meaning of terms)ä»¥åŠè¯­ä¹‰å…³è”(the semantic relation)**ã€‚</p><p>â€‹ç›¸å…³æ€§ï¼ˆrelatednessï¼‰æ˜¯è¯­ä¹‰ä¸Šçš„ï¼Œæ¯”ç›¸ä¼¼æ€§æ¦‚å¿µå®½æ³›ï¼ˆwiderï¼‰ã€‚ä¸¾ä¾‹æ¥è¯´ï¼ŒMySQLå’ŒPostgreSQLå¾ˆç›¸ä¼¼çš„ï¼ŒPHPå’ŒMySQLåˆ™æ˜¯å¾ˆç›¸å…³çš„ã€‚</p><p>â€‹æ„å»ºå›¾è°±çš„å…³é”®åœ¨äºï¼Œæ€ä¹ˆè¡¡é‡ä¸¤ä¸ªå®ä½“é—´çš„ç›¸å…³åº¦ã€‚</p><p>â€‹æœ¬æ–‡æå‡ºäº†ä¸€ç§è¯­ä¹‰æ„ŸçŸ¥çš„åº¦é‡æ¥è¯„ä¼°å®ä½“é—´ç›¸å…³åº¦ï¼Œå¹¶åˆ©ç”¨è¿™ä¸ªåº¦é‡æ„å»ºITé¢†åŸŸæ¦‚å¿µå›¾è°±ï¼Œå›¾ä¸Šæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ITæ¦‚å¿µï¼ˆç¼–ç¨‹è¯­è¨€ã€æ•°æ®åº“ã€æŠ€æœ¯ã€æ¡†æ¶ï¼Œç­‰ç­‰ï¼‰ã€‚</p><p>â€‹æ„å»ºå›¾è°±æ—¶ï¼Œåˆ©ç”¨äº†æ¥è‡ªwebçš„æ•°æ®çš„<strong>ç»Ÿè®¡ç‰¹å¾</strong>ä»¥åŠä»LODæ•°æ®é›†ä¸­æŠ½å–çš„<strong>è¯­ä¹‰çŸ¥è¯†</strong>ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> çŸ¥è¯†å›¾è°± </tag>
            
            <tag> å…³è”æ•°æ® </tag>
            
            <tag> DBpedia </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿æ€§æ¨¡å‹</title>
      <link href="/2017/11/11/%E7%BA%BF%E6%80%A7%E6%A8%A1%E5%9E%8B/"/>
      <url>/2017/11/11/%E7%BA%BF%E6%80%A7%E6%A8%A1%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<p>èƒ½ä¸èƒ½ä½¿ç”¨çº¿æ€§åˆ†ç±»å™¨å¾—åˆ°å½¢çŠ¶ä¸ºåœ†åœˆçš„å†³ç­–è¾¹ç•Œï¼Ÿ</p><span id="more"></span><ul><li>å¯ä»¥çš„ï¼æ‰€è°“çš„çº¿æ€§åˆ†ç±»å™¨ï¼Œ<strong>çº¿æ€§</strong>æŒ‡çš„æ˜¯æƒé‡å‘é‡<strong>w</strong>å’Œæ ‡ç­¾yçš„å…³ç³»ï¼Œè€Œå†³ç­–è¾¹ç•ŒæŒ‡çš„æ˜¯yå¦‚ä½•éšç€xçš„å˜åŒ–è€Œå˜åŒ–</li></ul><p>**the prediction is driven by the score w Â· Ï†(x)**ï¼Œå…¶ä¸­xæ˜¯åŸå§‹è¾“å…¥ï¼ŒÏ†(x)æ˜¯æå–åˆ°çš„ç‰¹å¾</p><p>æœºå™¨å­¦ä¹ é—®é¢˜ï¼šå®šä¹‰ä¼˜åŒ–é—®é¢˜ï¼Œæ±‚è§£å¾—åˆ°<strong>w</strong>ï¼ˆåœ¨ Ï†(x)å›ºå®šçš„æƒ…å†µä¸‹ï¼‰</p><p>æ„é€ ç‰¹å¾ï¼š</p><ul><li>å…ˆéªŒçŸ¥è¯†</li><li>ç‰¹å¾æ¨¡æ¿</li></ul><p>å®šä¹‰ç‰¹å¾ï¼š</p><ul><li>æ•°ç»„ï¼šé€‚ç”¨äºç‰¹å¾ç¨ å¯†çš„æƒ…å†µï¼Œå‡å®šç‰¹å¾æ’åºå›ºå®š</li><li>å­—å…¸ï¼šç‰¹å¾ç¨€ç–(few nonzeros)æ—¶ç”¨å­—å…¸è¡¨ç¤ºå­—æ®µåˆ°double<br>çš„æ˜ å°„æ›´æœ‰æ•ˆ</li></ul><p>å®šä¹‰ç‰¹å¾æ—¶ä¸€å®šè¦æ˜ç¡®ç‰¹å¾çš„å«ä¹‰</p><p>æ¨¡å‹çš„è¡¨è¾¾ï¼ˆè¡¨ç°ï¼‰èƒ½åŠ›â€”â€”Expressivityï¼š</p><ul><li>hypothesis classï¼šç‰¹å¾Ï†(x)å›ºå®šè€Œ<strong>w</strong>ä¸åŒçš„é¢„æµ‹å™¨çš„é›†åˆ<br>$$<br>F = {f_w : w âˆˆ R^d}<br>$$</li><li>å­¦ä¹ çš„ç›®çš„ï¼šåˆ©ç”¨è®­ç»ƒæ•°æ®ä»Fä¸­æ‰¾åˆ°ä¸€ä¸ªç‰¹å®šçš„é¢„æµ‹å™¨</li><li>å¦‚æœ<strong>Ï†(x)å®šä¹‰çš„F</strong>ä¸­çš„é¢„æµ‹å™¨éƒ½å¾ˆå·®åŠ²ï¼Œno amount of learning can help.</li><li>å…³é”®åœ¨äºï¼šÏ†(x)èƒ½ä¸èƒ½æŠŠå¥½çš„é¢„æµ‹å™¨è¡¨è¾¾å‡ºæ¥</li><li>Fæ˜¯ä¸æ˜¯<strong>è¶Šå¤§è¶Šå¥½ï¼Ÿ</strong></li></ul><p><strong>non-linearities in the original measurements(åŸå§‹åº¦é‡ä¸­çš„éçº¿æ€§)</strong> :</p><ul><li>Non-monotonicity(éå•è°ƒæ€§)ï¼š<ul><li>ä½“æ¸©å’Œå¥åº·ç¨‹åº¦çš„å…³ç³»å°±ä¸æ˜¯å•è°ƒçš„ï¼Œä½ ä¸èƒ½è¯´ä½“æ¸©è¶Šé«˜è¶Šå¥åº·ï¼Œåä¹‹äº¦ç„¶</li><li>Ï†(x) = [1, temperature(x)]   bad</li><li>Ï†(x) = [1, (temperature(x) âˆ’ 37)^2] è½¬æ¢ç‰¹å¾ï¼Œåˆ©ç”¨äº†å…ˆéªŒçŸ¥è¯†</li><li>Ï†(x) = [1, temperature(x), temperature(x)^2]   task to simple blocks</li></ul></li><li>Saturation(é¥±å’Œ)ï¼š<ul><li>äº§å“æ¨è</li><li>Ï†(x) = N(x) è´­ä¹°äº§å“çš„äººæ•°ï¼ˆå—æ¬¢è¿ç¨‹åº¦ï¼‰å’Œç›¸å…³æ€§ï¼Œä¸å…·æœ‰çº¿æ€§å…³ç³»</li><li>Ï†(x) = logN(x) è½¬æ¢ç‰¹å¾ï¼Œå–å¯¹æ•°ï¼ˆN with a large dynamic rangeï¼‰</li><li>Ï†(x) = [1[0 &lt; N(x) â‰¤ 10], 1[10 &lt; N(x) â‰¤ 100],â€¦]ç¦»æ•£åŒ–ï¼ŒèŒƒå›´è¶³å¤Ÿç²¾ç»†çš„è¯ï¼Œå¯ä»¥éå¸¸çµæ´»åœ°æ•æ‰å¸¸è§„å…³ç³»</li></ul></li><li>Interaction between features(ç‰¹å¾ç»„åˆ)ï¼š<ul><li>æ ¹æ®èº«é«˜ã€ä½“é‡é¢„æµ‹å¥åº·ç—…äººçŠ¶å†µ</li><li>Ï†(x) = [height(x), weight(x)] #æ²¡èƒ½æ•è·èº«é«˜ä½“é‡çš„å…³ç³»</li><li>Ï†(x) = (52 + 1.9(height(x) âˆ’ 60) âˆ’ weight(x))^2 #ç»„åˆè¾“å…¥å¾—åˆ°æ–°çš„ç‰¹å¾ï¼Œåˆ©ç”¨äº†å¤–ç•ŒçŸ¥è¯†</li><li>Ï†(x) = [1, height(x), weight(x), height(x)^2, weight(x)^2, height(x)weight(x)] #æ·»åŠ åŒ…å«å¤šä¸ªåº¦é‡çš„ç‰¹å¾</li></ul></li></ul><p>Linear in whatï¼Ÿ </p><ul><li>Linear in w?  Yes</li><li>Linear in Ï†(x)?  Yes </li><li>Linear in x?  No! (x not necessarily even a vectorï¼Œå¯ä»¥æ˜¯å›¾ç‰‡ã€æ–‡å­—)</li></ul><p>å°ç»“ï¼š</p><ul><li>ä»ç‰¹å¾æå–çš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰<strong>ä»»æ„</strong>ç‰¹å¾ï¼Œå¸¦æ¥xçš„æåº¦éçº¿æ€§çš„å‡½æ•°</li><li>ä»å­¦ä¹ çš„è§’åº¦æ¥çœ‹ï¼Œçº¿æ€§åœ¨æœ‰æ•ˆä¼˜åŒ–æƒé‡æ–¹é¢èµ·ç€é‡è¦ä½œç”¨ï¼ˆå› ä¸ºå®ƒä¼šå¯¼è‡´å‡¸ä¼˜åŒ–é—®é¢˜ï¼‰</li><li><strong>çº¿æ€§æ¨¡å‹å¾ˆå¼ºå¤§</strong>ï¼</li><li>å°†æ‰‹å·¥å®šä¹‰ç‰¹å¾è‡ªåŠ¨åŒ–â€”&gt; ç¥ç»ç½‘ç»œ</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> machine learning </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jupyter notebookæ·»åŠ kernel</title>
      <link href="/2017/08/03/jupyter%20notebook%E6%B7%BB%E5%8A%A0kernel/"/>
      <url>/2017/08/03/jupyter%20notebook%E6%B7%BB%E5%8A%A0kernel/</url>
      
        <content type="html"><![CDATA[<p>å®‰è£…jupyteræ—¶ä½¿ç”¨äº†æ¨èçš„Anacondaï¼Œpythoné»˜è®¤ç¯å¢ƒpython3ã€‚<br>æ·»åŠ python2çš„æ–¹æ³•å¦‚ä¸‹ï¼Œäº²æµ‹æœ‰æ•ˆ - 0-</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">conda create -n py27 python=<span class="number">2.7</span></span><br><span class="line">source activate py27</span><br><span class="line">conda install notebook ipykernel</span><br><span class="line">ipython kernel install --user</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šç¼–ç ã€‹è¯»åæ„Ÿ</title>
      <link href="/2017/07/31/%E7%BC%96%E7%A0%81%E8%AF%BB%E5%90%8E%E6%84%9F/"/>
      <url>/2017/07/31/%E7%BC%96%E7%A0%81%E8%AF%BB%E5%90%8E%E6%84%9F/</url>
      
        <content type="html"><![CDATA[<p>å¾ˆæœ‰è¶£çš„ä¹¦ã€‚</p><p>æ—©ç‚¹è¯»åˆ°è¿™æœ¬ä¹¦çš„è¯ï¼Œå­¦ä¹ è®¡ç®—æœºåŸºç¡€çŸ¥è¯†çš„æ—¶å€™åº”è¯¥ä¼šä¸€è¾¹å­¦ä¸€è¾¹æ„Ÿå¹â€œå“‡ï¼æœ‰æ„æ€ï¼â€å§ã€‚</p><p>è®¡ç®—æœºåœ¨ä»Šå¤©å¦‚æ­¤æ™®åŠï¼Œç°ä»£äººäº«å—ä¾¿åˆ©çš„æ—¶å€™å¦‚æœæƒ³æƒ³è¿™ä¸œè¥¿æ˜¯æ€ä¹ˆå‘æ˜å‡ºæ¥çš„ï¼Œä¸€å®šå¾—æƒŠå¹â€œä¸å¯æ€è®®â€ã€‚</p><p>ç›²æ–‡ã€æ‘©æ–¯ç ã€ç¯æ³¡ã€ç”µæ± ã€ç»§ç”µå™¨ã€åè¿›åˆ¶ã€bitã€äºŒè¿›åˆ¶ã€é—¨ç”µè·¯ç­‰ç­‰ï¼Œä¹¦ä¸­è®°å½•äº†è¿™äº›æ¢ç´¢æ˜¯å¦‚ä½•ä¸€æ­¥ä¸€æ­¥å½±å“ç€ç°ä»£ç§‘æŠ€çš„ã€‚</p><p><strong>æ¯ä¸€ç§è¯­è¨€éƒ½å¯ä»¥çœ‹ä½œæ˜¯ä¸€å¥—ç¼–ç </strong>ã€‚</p><p>ç¼–ç æ˜¯ä¸ºäº†æ»¡è¶³äººçš„æŸä¸ªéœ€æ±‚å‡ºç°çš„ï¼Œè€Œè¯­è¨€æ˜¯ä¸ºäº†äº¤æµã€‚</p><p>è§„åˆ™ä¸ä¸€æ ·æ—¶ï¼ŒåŒä¸€ä¸ªç‰©ä½“åœ¨ç¼–ç ç©ºé—´æ‰€å¤„çš„ä½ç½®å°±ä¸ä¸€æ ·äº†ã€‚</p><p>å¦‚æœåªæœ‰ä¸€é—¨è¯­è¨€ï¼Œä¸€ç§ç¼–ç ï¼Œå°±ä¸éœ€è¦ç¿»è¯‘äº†ã€‚</p><p>äººç±»èµ·åˆåœ¨ä¸åŒçš„åŒºåŸŸå½¢æˆäº†ä¸åŒçš„è¯­è¨€ï¼Œå¦‚ä»Šäº¤æµå¦‚æ­¤é¢‘ç¹ï¼Œå›å½’ä¸€ç§è¯­è¨€æ˜¯ä¸æ˜¯æœ‰ä¸€ç§å®¿å‘½çš„æ„Ÿè§‰ã€‚</p><p>God is watching you.</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ‚ </tag>
            
            <tag> è¯»ä¹¦ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çˆ¬è™«tipsï¼ˆ2ï¼‰</title>
      <link href="/2017/07/24/%E7%88%AC%E8%99%ABtips%EF%BC%882%EF%BC%89/"/>
      <url>/2017/07/24/%E7%88%AC%E8%99%ABtips%EF%BC%882%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h3 id="åŠ¨æ€å†…å®¹"><a href="#åŠ¨æ€å†…å®¹" class="headerlink" title="åŠ¨æ€å†…å®¹"></a>åŠ¨æ€å†…å®¹</h3><p>ä¾èµ–JavaScriptçš„åŠ¨æ€ç½‘ç«™ï¼Œä¸æ˜¯åœ¨ç¬¬ä¸€æ¬¡åŠ è½½æ—¶ä¸‹è½½å…¨éƒ¨å†…å®¹ï¼Œç½‘é¡µä¸­å±•ç¤ºçš„å†…å®¹å¹¶æ²¡æœ‰å‡ºç°åœ¨HTMLæºç ä¸­</p><h4 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h4><blockquote><p>Asynchronous JavaScript and XML<br>ç»¼åˆäº†å¤šé¡¹æŠ€æœ¯çš„æµè§ˆå™¨ç«¯ç½‘é¡µå¼€å‘æŠ€æœ¯<br>å…è®¸JavaScriptåˆ›å»ºåˆ°æœåŠ¡å™¨çš„HTTPè¯·æ±‚å¹¶è·å¾—å“åº”</p></blockquote><span id="more"></span><p>â€ƒâ€ƒä¼ ç»Ÿçš„Webåº”ç”¨å…è®¸ç”¨æˆ·ç«¯å¡«å†™è¡¨å•ï¼ˆformï¼‰ï¼Œå½“æäº¤è¡¨å•æ—¶å°±å‘ç½‘é¡µæœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚ã€‚æœåŠ¡å™¨æ¥æ”¶å¹¶å¤„ç†ä¼ æ¥çš„è¡¨å•ï¼Œç„¶åé€å›ä¸€ä¸ªæ–°çš„ç½‘é¡µï¼Œä½†è¿™ä¸ªåšæ³•æµªè´¹äº†è®¸å¤šå¸¦å®½ï¼Œå› ä¸ºåœ¨å‰åä¸¤ä¸ªé¡µé¢ä¸­çš„å¤§éƒ¨åˆ†HTMLç å¾€å¾€æ˜¯ç›¸åŒçš„ã€‚ç”±äºæ¯æ¬¡åº”ç”¨çš„æ²Ÿé€šéƒ½éœ€è¦å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œåº”ç”¨çš„å›åº”æ—¶é—´ä¾èµ–äºæœåŠ¡å™¨çš„å›åº”æ—¶é—´ã€‚è¿™å¯¼è‡´äº†ç”¨æˆ·ç•Œé¢çš„å›åº”æ¯”æœ¬æœºåº”ç”¨æ…¢å¾—å¤šã€‚<br>â€ƒâ€ƒä¸æ­¤ä¸åŒï¼ŒAJAXåº”ç”¨å¯ä»¥ä»…å‘æœåŠ¡å™¨å‘é€å¹¶å–å›å¿…é¡»çš„æ•°æ®ï¼Œå¹¶åœ¨å®¢æˆ·ç«¯é‡‡ç”¨JavaScriptå¤„ç†æ¥è‡ªæœåŠ¡å™¨çš„å›åº”ã€‚å› ä¸ºåœ¨æœåŠ¡å™¨å’Œæµè§ˆå™¨ä¹‹é—´äº¤æ¢çš„æ•°æ®å¤§é‡å‡å°‘ï¼ˆå¤§çº¦åªæœ‰åŸæ¥çš„5%ï¼‰[æ¥æºè¯·æ±‚],æœåŠ¡å™¨å›åº”æ›´å¿«äº†ã€‚åŒæ—¶ï¼Œå¾ˆå¤šçš„å¤„ç†å·¥ä½œå¯ä»¥åœ¨å‘å‡ºè¯·æ±‚çš„å®¢æˆ·ç«¯æœºå™¨ä¸Šå®Œæˆï¼Œå› æ­¤WebæœåŠ¡å™¨çš„è´Ÿè·ä¹Ÿå‡å°‘äº†ã€‚</p><h3 id="æŠ“å–æ–¹å¼"><a href="#æŠ“å–æ–¹å¼" class="headerlink" title="æŠ“å–æ–¹å¼"></a>æŠ“å–æ–¹å¼</h3><ul><li>JavaScripté€†å‘å·¥ç¨‹</li><li>æ¸²æŸ“ JavaScript</li></ul><h4 id="JavaScripté€†å‘å·¥ç¨‹"><a href="#JavaScripté€†å‘å·¥ç¨‹" class="headerlink" title="JavaScripté€†å‘å·¥ç¨‹"></a>JavaScripté€†å‘å·¥ç¨‹</h4><p>æ‰€è°“é€†å‘å·¥ç¨‹å°±æ˜¯å»äº†è§£æ•°æ®çš„è¯·æ±‚é“¾æ¥æ˜¯ä»€ä¹ˆå½¢å¼<br>AJAXæ•°æ®å¯ä»¥ç›´æ¥è¯·æ±‚ï¼Œæˆ‘ä»¬è¦åšçš„æ˜¯æ„å»ºè¯·æ±‚ï¼Œç„¶ååˆ†æè¿”å›çš„ç»“æœï¼ˆ ä¸€èˆ¬æ˜¯JSONæ•°æ®â€”â€”pythonæä¾›äº†jsonæ¨¡å—å¯ä»¥æ–¹ä¾¿åœ°è§£æresponseæ•°æ®<br>ä¸æŠ½å–htmlå†åˆ†æç›¸æ¯”ï¼Œè¿™ç§æ–¹å¼ä¸‹æ•°æ®çš„ç»“æ„å…¶å®æ›´å®¹æ˜“æŠ½å–<br><strong>æ„å»ºè¯·æ±‚æ—¶åˆ©ç”¨è¾¹ç•Œæƒ…å†µè¿›è¡Œç®€åŒ–</strong>ï¼š</p><ol><li>æé«˜æ¯ä¸ªé¡µé¢çš„æ˜¾ç¤ºæ•°é‡å¯ä»¥å‡å°‘ä¸‹è½½æ¬¡æ•°</li><li>å°è¯•åˆ©ç”¨æ­£åˆ™å‡å°‘è¯·æ±‚ï¼Œä½¿ç”¨ä¸€æ¬¡æœç´¢æŸ¥è¯¢å°±èƒ½åŒ¹é…æ‰€æœ‰ç»“æœ</li></ol><h4 id="æ¸²æŸ“JavaScript"><a href="#æ¸²æŸ“JavaScript" class="headerlink" title="æ¸²æŸ“JavaScript"></a>æ¸²æŸ“JavaScript</h4><p>æ¸²æŸ“å¼•æ“æ˜¯æµè§ˆå™¨åœ¨æ˜¾ç¤ºç½‘é¡µæ—¶è§£æHTMLã€åº”ç”¨cssæ ·å¼å¹¶æ‰§è¡ŒJavaScriptè¯­å¥çš„éƒ¨åˆ†<br>åˆ©ç”¨Selenium+PhantomJSå¯ä»¥æ¨¡æ‹Ÿ<strong>ä¸Šè¿°è¡Œä¸º</strong>ï¼ˆSeleniumä¹Ÿå¯ä»¥æ‰§è¡ŒJavaScriptè„šæœ¬ï¼‰æ²¡æœ‰å…³æ³¨<strong>é“¾æ¥æ„é€ </strong><br>è½®è¯¢ç½‘é¡µï¼šåˆ¤æ–­ç‰¹å®šå†…å®¹æœ‰æ²¡æœ‰å‡ºç°</p><h4 id="æ¯”è¾ƒ"><a href="#æ¯”è¾ƒ" class="headerlink" title="æ¯”è¾ƒ"></a>æ¯”è¾ƒ</h4><p>å‰è€…ä»é•¿æœŸæ¥çœ‹æ€§èƒ½å’Œå¯é æ€§æ›´é«˜<br>åè€…é€‚åˆä½œä¸ºçŸ­æœŸè§£å†³æ–¹æ¡ˆï¼Œä¸éœ€è¦æˆ‘ä»¬äº†è§£ç½‘ç«™çš„åç«¯å·¥ä½œåŸç†<br>ä¸è¶³åœ¨äºæ¸²æŸ“ç½‘é¡µå¢åŠ äº†å¼€é”€ï¼Œè½®è¯¢ç½‘é¡µåœ¨ç½‘ç»œè¾ƒæ…¢æ—¶ç»å¸¸å¤±è´¥</p><h4 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h4><p>è¡¨å•äº¤äº’</p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>selenium + phantomJS å°Demo</title>
      <link href="/2017/07/23/selenium%20+%20phantomJS%20%E5%B0%8FDemo/"/>
      <url>/2017/07/23/selenium%20+%20phantomJS%20%E5%B0%8FDemo/</url>
      
        <content type="html"><![CDATA[<p>å€ŸåŠ©seleniumå’ŒphantomJSæŠ“å–æ·˜å®ç¾é£Ÿä¿¡æ¯.</p><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>æ•°æ®åº“é…ç½®</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ ·ä¾‹</span></span><br><span class="line">MONGO_URL=<span class="string">'localhost'</span></span><br><span class="line">MONGO_DB=<span class="string">'taobao'</span></span><br><span class="line">MONGO_TABLE=<span class="string">'product'</span></span><br></pre></td></tr></tbody></table></figure><p>å£°æ˜æµè§ˆå™¨</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">browser=webdriver.PhantomJS(service_args=SERVICE_ARGS)</span><br></pre></td></tr></tbody></table></figure><p>æµè§ˆå™¨é…ç½®</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¸åŠ è½½å›¾ç‰‡ã€å¼€å¯ç¼“å­˜</span></span><br><span class="line">SERVICE_ARGS=[<span class="string">'--load-images=false'</span>,<span class="string">'--disk-cache=true'</span>]</span><br></pre></td></tr></tbody></table></figure><h4 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h4><span id="more"></span><ol><li>ç»™å®šurl,è¯·æ±‚é¡µé¢</li><li>åˆ¤æ–­åŠ è½½æˆåŠŸï¼Œå®šä½æœç´¢æ¡†inputï¼Œæœç´¢æŒ‰é’®submit</li><li>æœç´¢æ¡†ä¸­è¾“å…¥ä¿¡æ¯ï¼Œinput.send_keys(â€˜ç¾é£Ÿâ€™)ï¼›ç‚¹å‡»æœç´¢æŒ‰é’®ï¼Œsubmit.click()</li><li>ç­‰å¾…åŠ è½½ï¼Œè·å–ç»“æœæ€»é¡µæ•°ï¼ˆæ­£åˆ™æå–æ•°å­—)</li></ol><h4 id="ç¿»é¡µ"><a href="#ç¿»é¡µ" class="headerlink" title="ç¿»é¡µ"></a>ç¿»é¡µ</h4><p>é‡‡ç”¨é¡µé¢è·³è½¬ï¼Œå³è¾“å…¥åˆ°ç¬¬Xé¡µç„¶åç‚¹å‡»ç¡®å®šã€‚</p><ol><li>åˆ¤æ–­åŠ è½½æˆåŠŸï¼Œå®šä½è·³è½¬æŒ‰é’®ï¼Œé¡µç æ¡†</li><li>æ¸…é™¤é¡µç æ¡†ä¸­åŸå§‹ä¿¡æ¯ï¼Œè¾“å…¥é¡µç ï¼Œç‚¹å‡»è·³è½¬æŒ‰é’®</li><li>åˆ¤æ–­ç¿»é¡µæˆåŠŸï¼šé«˜äº®é¡µç  == é¡µç æ¡†ä¸­çš„æ•° ==&gt; text_to_be_present_in_element()</li></ol><h4 id="é¡µé¢è§£æ"><a href="#é¡µé¢è§£æ" class="headerlink" title="é¡µé¢è§£æ"></a>é¡µé¢è§£æ</h4><ol><li>åˆ¤æ–­åŠ è½½æ˜¯å¦æˆåŠŸ</li><li>è·å–page_source</li><li>åˆ©ç”¨cssè§£æå™¨æˆ–è€…xpathï¼Œå¯¹äºitemlistä¸­çš„æ¯ä¸€ä¸ªitemï¼Œæå–ç›¸å…³ä¿¡æ¯</li><li>å­˜å…¥æ•°æ®åº“</li></ol><h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><p>æŠ›å‡ºå¼‚å¸¸</p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çˆ¬è™«tips</title>
      <link href="/2017/07/21/%E7%88%AC%E8%99%ABtips/"/>
      <url>/2017/07/21/%E7%88%AC%E8%99%ABtips/</url>
      
        <content type="html"><![CDATA[<h3 id="é“¾æ¥æŠ“å–"><a href="#é“¾æ¥æŠ“å–" class="headerlink" title="é“¾æ¥æŠ“å–"></a>é“¾æ¥æŠ“å–</h3><ul><li>æ ¹æ®é¦–é¡µé“¾æ¥æŠ“å–å†…å®¹</li><li>é¡µé¢åŒ…å«çš„é“¾æ¥æ”¾å…¥ä¸€ä¸ªset,é¿å…é‡å¤</li><li>è§£ærobot.txt,é¿å…ä¸‹è½½ç¦æ­¢çˆ¬å–çš„é¡µé¢</li><li>å·²ç»æŠ“å–è¿‡çš„é“¾æ¥æ”¾åœ¨ä¸€ä¸ªset</li><li><span id="more"></span></li><li>æŠ½å–æ·±åº¦è¾¾åˆ°é™å®šå€¼ååœæ­¢,é¿å…çˆ¬è™«é™·é˜±</li><li>åŒä¸€åŸŸåçš„ä¸¤æ¬¡ä¸‹è½½ä¹‹é—´è®¾ç½®å»¶è¿Ÿ,é¿å…çˆ¬å–è¿‡å¿«</li><li>ä¸‹è½½å¤±è´¥æ—¶é‡è¯•ä¸‹è½½(è®¾ç½®ä¸€ä¸ªtry_timeså‚æ•°,é€’å½’è°ƒç”¨</li></ul><p>å¾—åˆ°ä¸€å †htmlé¡µé¢</p><h3 id="æ•°æ®æŠ“å–"><a href="#æ•°æ®æŠ“å–" class="headerlink" title="æ•°æ®æŠ“å–"></a>æ•°æ®æŠ“å–</h3><table><thead><tr><th>æ–¹æ³•</th><th>æ€§èƒ½</th><th>ä½¿ç”¨éš¾åº¦</th><th>å®‰è£…éš¾åº¦</th></tr></thead><tbody><tr><td>æ­£åˆ™</td><td>å¿«</td><td>å›°éš¾</td><td>ç®€å•</td></tr><tr><td>Beautiful Soup</td><td>æ…¢</td><td>ç®€å•</td><td>ç®€å•</td></tr><tr><td>Lxml</td><td>å¿«</td><td>ç®€å•</td><td>ç›¸å¯¹å›°éš¾</td></tr><tr><td>å¦‚æœçˆ¬è™«çš„ç“¶é¢ˆåœ¨ä¸‹è½½é¡µé¢,ä¸æ˜¯æ•°æ®æŠ“å–,é‚£ä¹ˆå¯ä»¥ä½¿ç”¨BS</td><td></td><td></td><td></td></tr><tr><td>å¦‚æœè¦æŠ“çš„æ•°æ®ä¸å¤š,ä½¿ç”¨æ­£åˆ™æ›´åŠ é«˜æ•ˆç‡</td><td></td><td></td><td></td></tr><tr><td>lxmlæ˜¯æœ€ä½³é€‰æ‹©</td><td></td><td></td><td></td></tr></tbody></table><h4 id="æ­£åˆ™"><a href="#æ­£åˆ™" class="headerlink" title="æ­£åˆ™"></a>æ­£åˆ™</h4><p>å¦‚æœè¦é€‰å–çš„ä¸œè¥¿,æ ¼å¼å¾ˆå¸¸è§,æœ‰å¾ˆå¤šç›¸ä¼¼é¡¹,å¯ä»¥å°è¯•æŒ‡æ˜å®ƒçš„çˆ¶å…ƒç´ æˆ–è€…ç¥–å…ˆå…ƒç´ ,æœ€å¥½æ˜¯æœ‰idå±æ€§ (:_&lt; idæ˜¯<strong>å”¯ä¸€</strong>çš„å§)  </p><h4 id="CSSé€‰æ‹©å™¨"><a href="#CSSé€‰æ‹©å™¨" class="headerlink" title="CSSé€‰æ‹©å™¨"></a>CSSé€‰æ‹©å™¨</h4><ul><li>é€‰æ‹©æ‰€æœ‰æ ‡ç­¾: *.</li><li>é€‰æ‹©aæ ‡ç­¾: a</li><li>é€‰æ‹©class=â€linkâ€çš„å…ƒç´ : .link</li><li>é€‰æ‹©class=â€linkâ€çš„aæ ‡ç­¾: a.link</li><li>é€‰æ‹©id=â€homeâ€çš„aæ ‡ç­¾: a#home</li><li>é€‰æ‹©çˆ¶å…ƒç´ ä¸ºaæ ‡ç­¾çš„æ‰€æœ‰spanæ ‡ç­¾: a &gt; span</li><li>é€‰æ‹©aæ ‡ç­¾å†…çš„æ‰€æœ‰spanæ ‡ç­¾: a span</li><li>é€‰æ‹©titleå±æ€§ä¸ºâ€homeâ€çš„æ‰€æœ‰aæ ‡ç­¾: a[title=home]</li></ul><h4 id="ç»™é“¾æ¥æŠ½å–æ·»åŠ æ•°æ®å¤„ç†å›è°ƒ"><a href="#ç»™é“¾æ¥æŠ½å–æ·»åŠ æ•°æ®å¤„ç†å›è°ƒ" class="headerlink" title="ç»™é“¾æ¥æŠ½å–æ·»åŠ æ•°æ®å¤„ç†å›è°ƒ"></a>ç»™é“¾æ¥æŠ½å–æ·»åŠ æ•°æ®å¤„ç†å›è°ƒ</h4><ul><li>æ„é€ å›è°ƒ<strong>å‡½æ•°</strong>æˆ–è€…å›è°ƒ<strong>ç±»</strong>(å®šä¹‰**_<em>call_</em>()**æ–¹æ³•)</li><li>æ•°æ®å†™å…¥æ–‡ä»¶</li></ul><h3 id="ä¸‹è½½ç¼“å­˜"><a href="#ä¸‹è½½ç¼“å­˜" class="headerlink" title="ä¸‹è½½ç¼“å­˜"></a>ä¸‹è½½ç¼“å­˜</h3><h4 id="ç£ç›˜ç¼“å­˜"><a href="#ç£ç›˜ç¼“å­˜" class="headerlink" title="ç£ç›˜ç¼“å­˜"></a>ç£ç›˜ç¼“å­˜</h4><ul><li><p>ä¸‹è½½å‰æ£€æŸ¥ç¼“å­˜</p></li><li><p>æ²¡æœ‰æ—¶å†è¯·æ±‚ç½‘é¡µä¸‹è½½,å¹¶å­˜è‡³ç¼“å­˜</p></li><li><p>è®¾è®¡URLåˆ°æ–‡ä»¶åçš„<strong>æ˜ å°„</strong> : æ³¨æ„å‘½åæ ¼å¼é™åˆ¶,ä¾‹å¦‚é•¿åº¦,å…è®¸çš„å­—ç¬¦</p></li><li><p>æ•°æ®(html)å¯ä»¥å‹ç¼©: zlib.compress|zlib.decompress</p></li><li><p>ä¿å­˜æ—¶é—´æˆ³,è¿‡æœŸç¼“å­˜å¤±æ•ˆ</p><p><strong>ç¼ºç‚¹</strong>: å—é™äºæ–‡ä»¶ç³»ç»Ÿ,æ•°é‡æœ‰é™</p></li></ul><h4 id="æ•°æ®åº“ç¼“å­˜"><a href="#æ•°æ®åº“ç¼“å­˜" class="headerlink" title="æ•°æ®åº“ç¼“å­˜"></a>æ•°æ®åº“ç¼“å­˜</h4><p>å­˜å‚¨å¤§é‡æ•°æ®,æ²¡æœ‰å¤æ‚çš„è¿æ¥æ“ä½œ,é€‰æ‹©æ˜“æ‹“å±•çš„NoSql<br>åŠ è½½æ—¶é—´æ¯”æ–‡ä»¶ç³»ç»Ÿå¤š,ä½†å…äºæ–‡ä»¶ç³»ç»Ÿçš„é™åˆ¶</p><h3 id="å¹¶å‘ä¸‹è½½"><a href="#å¹¶å‘ä¸‹è½½" class="headerlink" title="å¹¶å‘ä¸‹è½½"></a>å¹¶å‘ä¸‹è½½</h3><h4 id="å¤šçº¿ç¨‹çˆ¬è™«"><a href="#å¤šçº¿ç¨‹çˆ¬è™«" class="headerlink" title="å¤šçº¿ç¨‹çˆ¬è™«"></a>å¤šçº¿ç¨‹çˆ¬è™«</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¤„ç†urlçš„å‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">thread_crawler</span>:</span><br><span class="line">    ...</span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">process_url</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">    ...</span><br><span class="line">  </span><br><span class="line">    <span class="comment">#é€»è¾‘:è®¾å®šä¸€ä¸ªçº¿ç¨‹æ± ,æœ€å¤§çº¿ç¨‹æ•°ä¸ºmax_threads.å½“æœ‰URLçˆ¬å–æ—¶,æ£€æµ‹æ˜¯å¦æœ‰çº¿ç¨‹,æœ‰çš„è¯å¤„ç†æ‰å®Œæˆçš„çº¿ç¨‹,      å†åˆ¤æ–­æ˜¯å¦åˆ›å»ºæ–°çº¿ç¨‹</span></span><br><span class="line">    threads=[]</span><br><span class="line">    <span class="keyword">while</span> threads <span class="keyword">or</span> crawl_queue:</span><br><span class="line">        <span class="keyword">for</span> thread <span class="keyword">in</span> threads:</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> thread.is_allive():</span><br><span class="line">                <span class="comment">#remove</span></span><br><span class="line">                threads.remove(thread)</span><br><span class="line">        <span class="comment">#åœ¨å¤šä¸ªçº¿ç¨‹ä¸­å¯åŠ¨process_url,æ¡ä»¶æ˜¯å½“å‰çº¿ç¨‹æ•°å°äºè®¾å®šå€¼,å¹¶ä¸”å¾…çˆ¬é˜Ÿåˆ—ä¸ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">while</span> <span class="built_in">len</span>(threads)&lt;max_threads <span class="keyword">and</span> crawl_queue:</span><br><span class="line">            thread = threading.Thread(target=process_url)</span><br><span class="line">            thread.start()</span><br><span class="line">            threads.append(thread)</span><br></pre></td></tr></tbody></table></figure><h4 id="å¤šè¿›ç¨‹çˆ¬è™«"><a href="#å¤šè¿›ç¨‹çˆ¬è™«" class="headerlink" title="å¤šè¿›ç¨‹çˆ¬è™«"></a>å¤šè¿›ç¨‹çˆ¬è™«</h4><p>æœ‰å‡ ä¸ªcpuåˆ›å»ºå‡ ä¸ªè¿›ç¨‹</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">processes=[]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_cpus):</span><br><span class="line">    p=multiprocessing.Process(target=thread_crawler)</span><br><span class="line">    p.start()</span><br><span class="line">    processes.append(p)</span><br></pre></td></tr></tbody></table></figure><h3 id="åŠ¨æ€å†…å®¹"><a href="#åŠ¨æ€å†…å®¹" class="headerlink" title="åŠ¨æ€å†…å®¹"></a>åŠ¨æ€å†…å®¹</h3><p>todoâ€¦</p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>seleniumå­¦ä¹ </title>
      <link href="/2017/07/19/selenium%E5%AD%A6%E4%B9%A0/"/>
      <url>/2017/07/19/selenium%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h3 id="å£°æ˜æµè§ˆå™¨å¯¹è±¡"><a href="#å£°æ˜æµè§ˆå™¨å¯¹è±¡" class="headerlink" title="å£°æ˜æµè§ˆå™¨å¯¹è±¡"></a>å£°æ˜æµè§ˆå™¨å¯¹è±¡</h3><p>ubuntuä¸‹æ‰“ä¸å¼€chromeæµè§ˆå™¨ï¼Œé‡æ–°å®‰è£…äº†chromium-browserï¼Œå¹¶ä½¿ç”¨ä¸‹é¢çš„å£°æ˜è¯­å¥  </p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">browser = webdriver.Chrome(<span class="string">"/usr/lib/chromium-browser/chromedriver"</span>)</span><br></pre></td></tr></tbody></table></figure><p>æ–¹æ¡ˆæ¥æº<a href="https://stackoverflow.com/questions/22476112/using-chromedriver-with-selenium-python-ubuntu">https://stackoverflow.com/questions/22476112/using-chromedriver-with-selenium-python-ubuntu</a> </p><p>è²Œä¼¼æ·»åŠ chromeçš„pathä¹Ÿèƒ½è§£å†³ </p><h3 id="è·å–å…ƒç´ "><a href="#è·å–å…ƒç´ " class="headerlink" title="è·å–å…ƒç´ "></a>è·å–å…ƒç´ </h3><p>å¯ä»¥é€šè¿‡idï¼Œnameï¼Œclassnameï¼Œxpathï¼Œcss_selectorç­‰è·å¾—<br>ä¸¤ç§å†™æ³•ï¼š<span id="more"></span></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">elem = browser.find_element(By.ID,<span class="string">"kw"</span>)</span><br></pre></td></tr></tbody></table></figure><p>æˆ–è€…</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">elem = browser.find_element_by_id(<span class="string">"kw"</span>)</span><br></pre></td></tr></tbody></table></figure><h3 id="è·å–å¤šä¸ªå…ƒç´ "><a href="#è·å–å¤šä¸ªå…ƒç´ " class="headerlink" title="è·å–å¤šä¸ªå…ƒç´ "></a>è·å–å¤šä¸ªå…ƒç´ </h3><p>å°±æ˜¯elementå’Œelementsçš„å°åŒºåˆ«ï¼Œè¿”å›ä¸€ä¸ªåˆ—è¡¨ </p><h3 id="å…ƒç´ äº¤äº’"><a href="#å…ƒç´ äº¤äº’" class="headerlink" title="å…ƒç´ äº¤äº’"></a>å…ƒç´ äº¤äº’</h3><p>å…ˆè·å–ç‰¹å®šå…ƒç´ ï¼Œå†å¯¹å…¶è°ƒç”¨äº¤äº’<br>input.send_keys(â€œxxxâ€) ä¸ºå…ƒç´ èµ‹å€¼â€xxxâ€œ<br>button.click() ç‚¹å‡»buttonå…ƒç´ </p><h3 id="äº¤äº’åŠ¨ä½œ"><a href="#äº¤äº’åŠ¨ä½œ" class="headerlink" title="äº¤äº’åŠ¨ä½œ"></a>äº¤äº’åŠ¨ä½œ</h3><p>å°†åŠ¨ä½œé™„åŠ åˆ°åŠ¨ä½œé“¾ä¸­æ‰§è¡Œ,æ¯”å¦‚å¯ä»¥å®ç°å…ƒç´ æ‹–æ‹½ã€ç‚¹å‡»ã€åŒå‡»ç­‰</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> ActionChains</span><br></pre></td></tr></tbody></table></figure><h3 id="æ‰§è¡ŒJavaScript"><a href="#æ‰§è¡ŒJavaScript" class="headerlink" title="æ‰§è¡ŒJavaScript"></a>æ‰§è¡ŒJavaScript</h3><p>browser.execute_script(script_name)  </p><h3 id="è·å–å±æ€§å€¼"><a href="#è·å–å±æ€§å€¼" class="headerlink" title="è·å–å±æ€§å€¼"></a>è·å–å±æ€§å€¼</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">elem.get_attribute(<span class="string">'xxx'</span>) </span><br><span class="line">elem.get_property(<span class="string">'xxxx'</span>)  </span><br></pre></td></tr></tbody></table></figure><h3 id="è·å–æ–‡æœ¬å€¼"><a href="#è·å–æ–‡æœ¬å€¼" class="headerlink" title="è·å–æ–‡æœ¬å€¼"></a>è·å–æ–‡æœ¬å€¼</h3><p>elem.text  </p><h3 id="è·å–IDã€ä½ç½®ã€æ ‡ç­¾åã€å¤§å°"><a href="#è·å–IDã€ä½ç½®ã€æ ‡ç­¾åã€å¤§å°" class="headerlink" title="è·å–IDã€ä½ç½®ã€æ ‡ç­¾åã€å¤§å°"></a>è·å–IDã€ä½ç½®ã€æ ‡ç­¾åã€å¤§å°</h3><p>elem.id<br>elem.location<br>elem.tag_name<br>elem.size</p><h3 id="Frame"><a href="#Frame" class="headerlink" title="Frame"></a>Frame</h3><p>æå–å…ƒç´ æ—¶ï¼Œè¦æ³¨æ„frameçš„åˆ‡æ¢<br>ä½äºå­frameæ—¶ï¼Œæ‰¾ä¸åˆ°çˆ¶frameä¸­çš„å…ƒç´ </p><h3 id="ç­‰å¾…"><a href="#ç­‰å¾…" class="headerlink" title="ç­‰å¾…"></a>ç­‰å¾…</h3><p>éšå¼ç­‰å¾…<br>æ˜¾å¼ç­‰å¾…</p><h3 id="å‰è¿›åé€€"><a href="#å‰è¿›åé€€" class="headerlink" title="å‰è¿›åé€€"></a>å‰è¿›åé€€</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brower.back()</span><br><span class="line">brower.forward() </span><br></pre></td></tr></tbody></table></figure><h3 id="Cookies"><a href="#Cookies" class="headerlink" title="Cookies"></a>Cookies</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">browser.get_cookies()</span><br><span class="line">browser.add_cookie({<span class="built_in">dict</span>})</span><br></pre></td></tr></tbody></table></figure><h3 id="é€‰é¡¹å¡ç®¡ç†"><a href="#é€‰é¡¹å¡ç®¡ç†" class="headerlink" title="é€‰é¡¹å¡ç®¡ç†"></a>é€‰é¡¹å¡ç®¡ç†</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ‰“å¼€ä¸€ä¸ªé¡µé¢ï¼Œæ–°å»ºä¸€ä¸ªé€‰é¡¹å¡ï¼Œåˆ‡æ¢å›é¡µé¢</span></span><br><span class="line">url=<span class="string">"http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable"</span></span><br><span class="line">browser.get(url)</span><br><span class="line">browser.execute_script(<span class="string">'window.open()'</span>)</span><br><span class="line">browser.switch_to.window(browser.window_handles[<span class="number">0</span>])</span><br></pre></td></tr></tbody></table></figure><h3 id="å¼‚å¸¸"><a href="#å¼‚å¸¸" class="headerlink" title="å¼‚å¸¸"></a>å¼‚å¸¸</h3><p>è¶…æ—¶ã€å…ƒç´ ä¸å­˜åœ¨ç­‰</p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Integer Break</title>
      <link href="/2017/06/23/Integer%20Break/"/>
      <url>/2017/06/23/Integer%20Break/</url>
      
        <content type="html"><![CDATA[<p>Given a positive integer n, break it into the sum of at least two positive integers and maximize the product of those integers. Return the maximum product you can get.</p><p>For example, given n = 2, return 1 (2 = 1 + 1); given n = 10, return 36 (10 = 3 + 3 + 4).<br>Note: You may assume that n is not less than 2 and not larger than 58.</p><p><strong>æ€è·¯:<span id="more"></span> æœ€å€¼é—®é¢˜,æ±‚å¯¼.</strong><br>å‡è®¾ä¸€ä¸ªæ•°Nåˆ†æˆäº†N/xä»½,æ¯ä»½éƒ½æ˜¯x,åˆ™æœ‰<br>$$<br>y=x^{N/x},\<br>\ln y=(N/x)\ln x,\<br>\frac{1}{y}*y^{â€˜}=\frac{n}{x^2}(1-\ln x),<br>$$<br>å¦yâ€™=0,åˆ™æœ‰lnx=1,x=e.<br>é¢˜ä¸­è§„å®šxåªèƒ½æ˜¯æ­£æ•´æ•°,eçº¦ä¸º2.718,åˆ™å–ç¦»eè¾ƒè¿‘çš„æ•°3,æ­¤æ—¶yè¾ƒå¤§.<br>äºæ˜¯æœ‰é€’æ¨å¼: dp(i)=3dp(i-3) (i&gt;4 ),i&lt;=4æ—¶,dp[i]=[1,1,1,2,4].</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">integerBreak</span>(<span class="params">self, n</span>):</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type n: int</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        bottom to up dp.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        res=[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>]</span><br><span class="line">        <span class="keyword">if</span> n&lt;=<span class="number">4</span>:<span class="keyword">return</span> res[n]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            ans=<span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> n&gt;<span class="number">4</span>:</span><br><span class="line">                ans*=<span class="number">3</span></span><br><span class="line">                n-=<span class="number">3</span></span><br><span class="line">            ans*=n</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±ã€æµ…æ‹·è´</title>
      <link href="/2017/06/22/%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D/"/>
      <url>/2017/06/22/%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D/</url>
      
        <content type="html"><![CDATA[<p><strong>æ‹·è´æ˜¯å¯¹äºå¯å˜å¯¹è±¡listè€Œè¨€çš„ï¼Œéå®¹å™¨ç±»å‹ï¼ˆå¦‚æ•°å­—ã€å­—ç¬¦ä¸²ã€å’Œå…¶ä»–â€™åŸå­â€™ç±»å‹çš„å¯¹è±¡ï¼‰æ˜¯æ²¡æœ‰æ‹·è´è¿™ä¸ªè¯´æ³•çš„</strong></p><h3 id="èµ‹å€¼"><a href="#èµ‹å€¼" class="headerlink" title="èµ‹å€¼"></a>èµ‹å€¼</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,[<span class="number">4</span>,<span class="number">5</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = a</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></tbody></table></figure><p>bæ˜¯açš„åˆ«åï¼ŒæŒ‡å‘ä¸€ä¸ªåœ°å€<span id="more"></span></p><h3 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = a[:]              <span class="comment">#æˆ–è€…ä½¿ç”¨ b = list(a)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">0</span>] <span class="keyword">is</span> b[<span class="number">0</span>]</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.append([<span class="number">6</span>,<span class="number">7</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">3</span>].append(<span class="string">'x'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>, <span class="string">'x'</span>], [<span class="number">6</span>, <span class="number">7</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>, <span class="string">'x'</span>]]</span><br></pre></td></tr></tbody></table></figure><p>æµ…æ‹·è´æ„é€ äº†ä¸€ä¸ªæ–°çš„listå¯¹è±¡<br>bçš„å†…éƒ¨å…ƒç´ <strong>æ˜¯aå…ƒç´ çš„å¼•ç”¨</strong> ( the new list represents a sequence of references to the same elements as in the first )<br>ä¿®æ”¹bä¸­çš„å¯å˜å¯¹è±¡ä¼šå½±å“a ï¼›</p><h3 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> copy</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=copy.deepcopy(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a <span class="keyword">is</span> b</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>, <span class="string">'x'</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>, <span class="string">'x'</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b[<span class="number">3</span>].pop()</span><br><span class="line"><span class="string">'x'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>, <span class="string">'x'</span>]]</span><br></pre></td></tr></tbody></table></figure><p>ä¸ä»…listå¯¹è±¡æ˜¯æ–°çš„ï¼Œlisté‡Œçš„å…ƒç´ ä¹Ÿæ˜¯æ–°çš„ï¼›<br>è¿™é‡Œa[3] is not b[3] .</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dynamic programming</title>
      <link href="/2017/06/20/Dynamic-%20programming/"/>
      <url>/2017/06/20/Dynamic-%20programming/</url>
      
        <content type="html"><![CDATA[<img src="/2017/06/20/Dynamic-%20programming/dp1.JPG" class=""><img src="/2017/06/20/Dynamic-%20programming/dp2.JPG" class=""><p><strong>5 steps</strong> to solve DP:</p><p><strong>1.subprobs</strong><br><strong>2.guess</strong><br><strong>3.recurrence</strong><br><strong>4.order</strong><br><strong>5.orig prob</strong></p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">Find the contiguous subarray within an array (containing at least one number) which has the largest sum.</span></span><br><span class="line"><span class="string">For example, given the array [-2,1,-3,4,-1,2,1,-5,4],</span></span><br><span class="line"><span class="string">the contiguous subarray [4,-1,2,1] has the largest sum = 6.</span></span><br><span class="line"><span class="string">5 steps to DP:</span></span><br><span class="line"><span class="string">1.subprobs:  dp(i)-&gt; maxsubarray in nums[:i]</span></span><br><span class="line"><span class="string">2.guess:  for each nums[i] add it or not.</span></span><br><span class="line"><span class="string">3.recurrence:  dp(i)=max(nums[i]+dp(i-1),nums[i])</span></span><br><span class="line"><span class="string">4.order:  for i=1,..,n: dp(i)</span></span><br><span class="line"><span class="string">5.orig prob:  dp(n)</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maxSubArray</span>(<span class="params">self, nums</span>):</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        curSum = maxSum = nums[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> nums[<span class="number">1</span>:]:</span><br><span class="line">            curSum = <span class="built_in">max</span>(num, curSum + num)</span><br><span class="line">            maxSum = <span class="built_in">max</span>(maxSum, curSum)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> maxSum</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†³ç­–æ ‘</title>
      <link href="/2017/06/12/%E5%86%B3%E7%AD%96%E6%A0%91/"/>
      <url>/2017/06/12/%E5%86%B3%E7%AD%96%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h4 id="æ„é€ å†³ç­–æ ‘"><a href="#æ„é€ å†³ç­–æ ‘" class="headerlink" title="æ„é€ å†³ç­–æ ‘"></a>æ„é€ å†³ç­–æ ‘</h4><p>ç¬¬ä¸€ä¸ªé—®é¢˜:å½“å‰æ•°æ®é›†ä¸Šå“ªä¸ªç‰¹å¾åœ¨åˆ’åˆ†æ•°æ®åˆ†ç±»æ—¶èµ·å†³å®šä½œç”¨?ä¸ºæ­¤éœ€è¦ä¸€ä¸ªè¯„ä¼°æ ‡å‡†.</p><p>åˆ’åˆ†çš„å¤§åŸåˆ™æ˜¯:å°†æ— åºçš„æ•°æ®å˜å¾—æœ‰åº.</p><p>åˆ’åˆ†ä¹‹åæ¥ç€åˆ’åˆ†,é€’å½’.</p><p>é€’å½’ç»“æŸæ¡ä»¶:ç¨‹åºéå†å®Œæ‰€æœ‰åˆ’åˆ†æ•°æ®é›†çš„å±æ€§æˆ–è€…åˆ†æ”¯ä¸‹çš„æ•°æ®å‡ä¸ºä¸€ä¸ªç±»å‹.</p><p>ä¸ºäº†åº¦é‡å¼•å…¥äº†ä¿¡æ¯è®ºçš„ä¸œè¥¿,ä¹Ÿå°±æ˜¯ç†µ.</p><h4 id="ç†µ"><a href="#ç†µ" class="headerlink" title="ç†µ"></a>ç†µ</h4><p>ä¿¡æ¯çš„å®šä¹‰:å¦‚æœå¾…åˆ†ç±»çš„äº‹åŠ¡å¯èƒ½åˆ’åˆ†åœ¨å¤šä¸ªåˆ†ç±»ä¸­,åˆ™ç¬¦å·xiçš„ä¿¡æ¯å®šä¹‰ä¸º:<br>$$<br>l(x_i)=-\log_2 p(x_i),<br>$$</p><p>å…¶ä¸­p(xi)æ˜¯é€‰æ‹©è¯¥åˆ†ç±»çš„æ¦‚ç‡.</p><p>ç†µæ˜¯ä¿¡æ¯çš„æœŸæœ›å€¼.æˆ‘ä»¬éœ€è¦è®¡ç®—æ‰€æœ‰ç±»åˆ«æ‰€æœ‰å¯èƒ½å€¼åŒ…å«çš„ä¿¡æ¯æœŸæœ›å€¼:<br>$$<br>H=-\sum_{i=1}^n p(x_i)\log_2 p(x_i),<br>$$</p><p>å…¶ä¸­,nä¸ºæ ·æœ¬åˆ†ç±».</p><h4 id="å¦å¤–"><a href="#å¦å¤–" class="headerlink" title="å¦å¤–"></a>å¦å¤–</h4><p>æ•°æ®æœ€å¥½æ˜¯æ ‡ç§°å‹çš„ ï¼›(å¯¹äºID3ç®—æ³•,æ•°å€¼å‹æ•°æ®æœ€å¥½æ˜¯ç¦»æ•£çš„.</p><p>å‡ºç°è¿‡æ‹Ÿåˆæ—¶,å¯ä»¥å‰ªæ.</p><p>å‰ªæç­–ç•¥,é¢„å‰ªææˆ–è€…åå‰ªæ.</p><p>åˆ«çš„å†³ç­–æ•°ç®—æ³•,C4.5|CART.</p><p><a href="https://github.com/yikayiyo/machinelearninginaction/blob/master/Ch03/trees.py">https://github.com/yikayiyo/machinelearninginaction/blob/master/Ch03/trees.py</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> machine learning </tag>
            
            <tag> classification </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å€ŸåŠ©ä¹‰å…ƒæ”¹å–„è¯è¡¨ç¤ºå­¦ä¹ </title>
      <link href="/2017/06/09/%E5%80%9F%E5%8A%A9%E4%B9%89%E5%85%83%E6%94%B9%E5%96%84%E8%AF%8D%E8%A1%A8%E7%A4%BA%E5%AD%A6%E4%B9%A0/"/>
      <url>/2017/06/09/%E5%80%9F%E5%8A%A9%E4%B9%89%E5%85%83%E6%94%B9%E5%96%84%E8%AF%8D%E8%A1%A8%E7%A4%BA%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<img src="/2017/06/09/%E5%80%9F%E5%8A%A9%E4%B9%89%E5%85%83%E6%94%B9%E5%96%84%E8%AF%8D%E8%A1%A8%E7%A4%BA%E5%AD%A6%E4%B9%A0/HowNet.png" class="" title="HowNetä¸­çš„ä¸€ä¸ªä¾‹å­"><h4 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h4><p>â€ƒâ€ƒä¹‰å…ƒæ˜¯è¯­ä¹‰ä¸Šçš„æœ€å°å•ä½ï¼Œå•è¯çš„æ¯ä¸€ä¸ªå«ä¹‰é€šå¸¸éƒ½æ˜¯å¾ˆå¤šä¹‰å…ƒç»„åˆè€Œæˆçš„ã€‚ä¸ºäº†è®©æ¯ä¸ªè¯ä¹‰çš„ä¹‰å…ƒæ›´åŠ ç¡®åˆ‡ï¼Œäººä»¬è¿›è¡Œäº†æ‰‹å·¥æ ‡æ³¨ï¼Œå¹¶æ„å»ºäº†å¸¸è¯†æ€§çš„è¯­è¨€çŸ¥è¯†åº“ã€‚è¿™ç¯‡æ–‡ç« æŒ‡å‡ºï¼Œå•è¯çš„ä¹‰å…ƒä¿¡æ¯å¯ä»¥æ”¹å–„è¯è¡¨ç¤ºå­¦ä¹ ï¼ˆä¸€ç§å°†å•è¯æ˜ å°„åˆ°ä½ç»´è¯­ä¹‰ç©ºé—´çš„æŠ€æœ¯ï¼Œæ˜¯è®¸å¤šNLPä»»åŠ¡çš„ä¸€ä¸ªåŸºæœ¬æ­¥éª¤ï¼‰ã€‚å…³é”®ç‚¹åœ¨äºåˆ©ç”¨ä¹‰å…ƒä¿¡æ¯å‡†ç¡®æ•æ‰å•è¯åœ¨ç‰¹å®šè¯­å¢ƒä¸‹çš„ç¡®åˆ‡å«ä¹‰ã€‚å…·ä½“è¯´æ¥ï¼Œä½œè€…æ‹“å±•äº†skip-gramæ¡†æ¶ï¼Œæå‡ºäº†ä¸‰ç§ä¹‰å…ƒç¼–ç æ¨¡å‹æ¥å­¦ä¹ sememes-senses-wordsçš„è¡¨ç¤ºï¼Œ<span id="more"></span>è€Œä¸”åœ¨ä¸åŒçš„è¯­å¢ƒä¸­ç¡®å®šè¯ä¹‰æ—¶ç”¨åˆ°äº†æ³¨æ„åŠ›æœºåˆ¶ã€‚ä¸ºäº†æ£€éªŒå­¦åˆ°çš„è¯è¡¨ç¤ºçš„è´¨é‡ï¼Œè¿›è¡Œäº†ä¸¤ä¸ªå®éªŒï¼ŒåŒ…æ‹¬ç›¸ä¼¼åº¦è®¡ç®—å’Œå•è¯ç±»æ¨ï¼Œç»“æœæ–°æ¨¡å‹çš„æ•ˆæœæ˜¾è‘—å¥½äºè®¾ç½®çš„åŸºç¡€æ¨¡å‹ã€‚è¿™ä¹Ÿè¯´æ˜äº†ä½œè€…çš„æ¨¡å‹å¯ä»¥å¯¹ä¹‰å…ƒä¿¡æ¯æ­£ç¡®å»ºæ¨¡ï¼Œé€šè¿‡æ³¨æ„åŠ›æœºåˆ¶ä½¿ä¹‰å…ƒä½œç”¨äºè¯è¡¨ç¤ºå­¦ä¹ ã€‚</p><h4 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h4><p>â€ƒâ€ƒä¹‰å…ƒæ˜¯æœ€å°çš„è¯­ä¹‰å•å…ƒï¼Œç°æœ‰æ¦‚å¿µï¼ˆæ¯”å¦‚æŸä¸ªè¯çš„è¯ä¹‰ï¼‰éƒ½å¯ä»¥é€šè¿‡ä¸€ä¸ªæœ‰é™é›†åˆå†…çš„ä¹‰å…ƒç»„åˆè€Œæ¥ã€‚é—®é¢˜åœ¨äºï¼ŒæŸä¸ªè¯çš„ä¹‰å…ƒå¹¶ä¸æ˜ç¡®ï¼Œäºæ˜¯äººä»¬äººå·¥æ„å»ºäº†ä¸€ä¸ªå¸¸è¯†æ€§çš„è¯­è¨€çŸ¥è¯†åº“ã€‚<br>HowNetå°±æ˜¯è¿™æ ·çš„ä¸€ä¸ªçŸ¥è¯†åº“ï¼Œé‡Œé¢çš„æ¯ä¸€ä¸ªæ¦‚å¿µéƒ½ç”¨å’Œå®ƒç›¸å…³çš„ä¸€ä¸ªæˆ–å¤šä¸ªä¹‰å…ƒè¿›è¡Œäº†æ ‡æ³¨ã€‚ä¸WordNetä¸åŒï¼ŒHowNetå¼ºè°ƒç”±ä¹‰å…ƒè¡¨ç¤ºçš„partå’Œattributeçš„æ„ä¹‰ï¼Œåœ¨å•è¯ç›¸ä¼¼åº¦è®¡ç®—ã€è¯­ä¹‰åˆ†ææ–¹é¢è¢«å¹¿æ³›ä½¿ç”¨ã€‚<br>â€ƒâ€ƒä½œè€…çš„ç›®æ ‡åœ¨äºå°†ä¹‰å…ƒä¿¡æ¯çº³å…¥è¯è¡¨ç¤ºå­¦ä¹ ï¼Œä»è€Œå¾—åˆ°æ”¹è¿›çš„è¯åµŒå…¥ã€‚WRLæ˜¯è®¸å¤šNLPä»»åŠ¡ï¼ŒåŒ…æ‹¬è¯­è¨€å»ºæ¨¡ã€ç¥ç»æœºå™¨ç¿»è¯‘ï¼ŒåŸºæœ¬çš„ã€éå¸¸é‡è¦çš„æ­¥éª¤ã€‚<br>â€ƒâ€ƒå…³äºè¯è¡¨ç¤ºçš„ç ”ç©¶å·²ç»æœ‰å¾ˆå¤šï¼Œå…¶ä¸­word2vecå®ç°äº†æ•ˆç‡å’Œæœ‰æ•ˆæ€§éå¸¸ä¸é”™çš„å¹³è¡¡ã€‚åœ¨word2vecä¸­ï¼Œä¸€ä¸ªè¯å¯¹åº”ä¸€ä¸ªè¯åµŒå…¥ï¼Œå¿½ç•¥äº†è¯çš„å¤šä¹‰ã€‚(Huang et alï¼Œ2012)æå‡ºä¸€ç§å¤„ç†WRLçš„å¤šåŸå‹æ¨¡å‹ï¼Œæ ¹æ®ä¸Šä¸‹æ–‡èšç±»è¿›è¡Œæ— ç›‘ç£çš„è¯ä¹‰å½’çº³å’Œè¯åµŒå…¥ã€‚(Chen et al,2014)è¿›ä¸€æ­¥åˆ©ç”¨WordNetåŒä¹‰è¯é›†æŒ‡å¯¼è¯è¡¨ç¤ºå­¦ä¹ ã€‚<br>â€ƒâ€ƒä»ä¸Šå¾—å‡ºç»“è®ºï¼šè¯ä¹‰æ¶ˆæ­§åœ¨è¯è¡¨ç¤ºå­¦ä¹ ä¸­éå¸¸å…³é”®ã€‚ä½œè€…è®¤ä¸ºæ¯ä¸ªå•è¯ä¸‹çš„ä¹‰å…ƒæ ‡æ³¨å¯ä»¥å¸¦æ¥å¿…éœ€çš„è¯­ä¹‰ä¸Šçš„è°ƒæ•´ã€‚ä¸ºæ¢è®¨å…¶å¯è¡Œæ€§ï¼Œæå‡ºäº†SE-WRLæ¨¡å‹ï¼Œè¯¥æ¨¡å‹å¯ä»¥åœ¨æ£€æµ‹è¯ä¹‰çš„åŒæ—¶ï¼Œå­¦ä¹ è¯è¡¨ç¤ºã€‚å…·ä½“è¯´æ¥ï¼Œè¿™ä¸ªæ¡†æ¶æŠŠæ¯ä¸ªå•è¯çš„è¯ä¹‰çœ‹ä½œæ˜¯ä¹‰å…ƒçš„ç»„åˆï¼Œæ ¹æ®ä¸Šä¸‹æ–‡è¿­ä»£åœ°è¿›è¡Œè¯ä¹‰æ¶ˆæ­§ï¼Œé€šè¿‡æ‹“å±•skip-gramæ¨¡å‹å­¦ä¹ sememes-senses-wordsçš„è¡¨ç¤ºã€‚è¯¥æ¡†æ¶æå‡ºä¸€ç§åŸºäºæ³¨æ„åŠ›çš„æ–¹æ³•æ¥è‡ªåŠ¨æ ¹æ®ä¸Šä¸‹æ–‡é€‰æ‹©è¿‘ä¼¼çš„è¯ä¹‰ã€‚<br>å®éªŒä¸­ç”¨ä¸¤ä¸ªä»»åŠ¡è¯„ä¼°æ¨¡å‹ï¼ŒåŒ…æ‹¬è¯è¯­ç›¸ä¼¼åº¦å’Œè¯è¯­ç±»æ¯”ï¼Œæœ€åä¸¾å‡ ä¸ªä¾‹å­ã€‚ç»“æœè¡¨æ˜è¯¥æ¨¡å‹ç»“æœæ˜¾è‘—å¥½äºå…¶å®ƒæ¨¡å‹ï¼Œå°¤å…¶åœ¨å•è¯ç±»æ¯”æ–¹é¢ã€‚è¿™è¯´æ˜è¯¥æ¨¡å‹åœ¨ä¹‰å…ƒä¿¡æ¯çš„å¸®åŠ©ä¸‹å¯ä»¥æ„å»ºæ›´å¥½çš„çŸ¥è¯†è¡¨ç¤ºï¼Œåœ¨è¯ä¹‰æ¶ˆæ­§æ–¹é¢è¿˜æœ‰æ½œåŠ›ã€‚<br>æœ¬æ–‡è´¡çŒ®æ€»ç»“å¦‚ä¸‹ï¼š</p><ol><li>ç¬¬ä¸€ä¸ªåˆ©ç”¨çŸ¥ç½‘ä¹‰å…ƒæ”¹å–„è¯è¡¨ç¤ºå­¦ä¹ çš„å·¥ä½œï¼ˆas far asï¼‰</li><li>å€ŸåŠ©çŸ¥ç½‘çš„ä¹‰å…ƒä¿¡æ¯ï¼Œæ ¹æ®ä¸Šä¸‹æ–‡ï¼ŒæˆåŠŸåˆ©ç”¨æ³¨æ„åŠ›æœºåˆ¶æ£€æµ‹è¯ä¹‰ã€å­¦ä¹ è¯è¡¨ç¤º</li><li>å¤§é‡å®éªŒè¯æ˜æœ‰æ•ˆæ€§</li></ol><h4 id="ç›¸å…³å·¥ä½œ"><a href="#ç›¸å…³å·¥ä½œ" class="headerlink" title="ç›¸å…³å·¥ä½œ"></a>ç›¸å…³å·¥ä½œ</h4><p>â€ƒâ€ƒè¯è¡¨ç¤º<br>â€ƒâ€ƒè¯ä¹‰æ¶ˆæ­§å’Œè¡¨ç¤ºå­¦ä¹ </p><h4 id="ç³»ç»Ÿæ–¹æ³•"><a href="#ç³»ç»Ÿæ–¹æ³•" class="headerlink" title="ç³»ç»Ÿæ–¹æ³•"></a>ç³»ç»Ÿæ–¹æ³•</h4><p>â€ƒâ€ƒæœ¬èŠ‚ä»‹ç»SE-WRLæ¡†æ¶ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨ç»è¿‡è¯­ä¹‰æ­£åˆ™åŒ–çš„å¤§å‹è¯­æ–™åº“ä¸Šå­¦ä¹ æ¨¡å‹ï¼Œå¾—åˆ°ä¹‰å…ƒã€è¯ä¹‰ã€è¯åµŒå…¥ã€‚<br>ä¸‹é¢é¦–å…ˆä»‹ç»çŸ¥ç½‘ã€è¯è¯­ç»“æ„ã€‚æ¥ç€ä»‹ç»å¸¸è§„çš„WRLæ¨¡å‹skip-gramã€‚æœ€åè¯¦ç»†ä»‹ç»ä¸‰ç§ä¹‰å…ƒç¼–ç æ¨¡å‹ã€‚</p><h4 id="Sememesï¼ŒSenses-and-Words-in-HowNet"><a href="#Sememesï¼ŒSenses-and-Words-in-HowNet" class="headerlink" title="Sememesï¼ŒSenses and Words in HowNet"></a>Sememesï¼ŒSenses and Words in HowNet</h4><p>â€ƒâ€ƒçŸ¥ç½‘ä¸­æ ‡æ³¨äº†æ¯ä¸ªè¯çš„ç²¾ç¡®è¯ä¹‰ï¼Œå¯¹äºæ¯ä¸€ä¸ªè¯ä¹‰ï¼Œå…¶é‡è¦çš„éƒ¨åˆ†ã€å±æ€§éƒ½ä»¥ä¹‰å…ƒçš„å½¢å¼ç»™å‡ºã€‚<br>â€ƒâ€ƒä¹‰å…ƒä¹‹é—´å½¢æˆäº†å¤æ‚çš„å±‚æ¬¡ç»“æ„ï¼Œæœ¬æ–‡æ²¡æœ‰è€ƒè™‘è¿™ç§ç»“æ„ï¼ŒæŠŠä¹‰å…ƒè§†ä¸ºä¸€ä¸ªé›†åˆã€‚<br>â€ƒâ€ƒçº¦æŸï¼šW-S-X  ï¼ˆword-sense-sememeï¼‰C(w):ä¸Šä¸‹æ–‡é›†åˆ</p><h4 id="å¸¸è§„skip-gramæ¨¡å‹"><a href="#å¸¸è§„skip-gramæ¨¡å‹" class="headerlink" title="å¸¸è§„skip-gramæ¨¡å‹"></a>å¸¸è§„skip-gramæ¨¡å‹</h4><p>â€ƒâ€ƒè¯¥æ¨¡å‹è®¤ä¸ºè¯åµŒå…¥åº”è¯¥å’Œå…¶ä¸Šä¸‹æ–‡è¯è¯­ç›¸å…³ï¼›<br>â€ƒâ€ƒç»™å®šç›®æ ‡è¯ï¼Œæœ€å¤§é™åº¦åœ°æé«˜ä¸Šä¸‹æ–‡è¯è¯­çš„é¢„æµ‹æ¦‚ç‡ï¼›<br>â€ƒâ€ƒåˆ©ç”¨ä¸€ä¸ªæ»‘åŠ¨çª—å£é€‰æ‹©ä¸Šä¸‹æ–‡è¯è¯­ï¼›<br>â€ƒâ€ƒå¯¹äºè¯åºåˆ—H={w1,â€¦,wn}ï¼Œskip-gramæ¨¡å‹çš„ç›®çš„æ˜¯æœ€å¤§åŒ–ï¼š</p><img src="/2017/06/09/%E5%80%9F%E5%8A%A9%E4%B9%89%E5%85%83%E6%94%B9%E5%96%84%E8%AF%8D%E8%A1%A8%E7%A4%BA%E5%AD%A6%E4%B9%A0/max.png" class=""><p>â€ƒâ€ƒç»softmaxå½’ä¸€åŒ–ï¼š</p><img src="/2017/06/09/%E5%80%9F%E5%8A%A9%E4%B9%89%E5%85%83%E6%94%B9%E5%96%84%E8%AF%8D%E8%A1%A8%E7%A4%BA%E5%AD%A6%E4%B9%A0/softmax.png" class=""><h4 id="SE-WRL-Model"><a href="#SE-WRL-Model" class="headerlink" title="SE-WRL Model"></a>SE-WRL Model</h4><h5 id="SSA"><a href="#SSA" class="headerlink" title="SSA"></a>SSA</h5><p>â€ƒâ€ƒç®€å•èšåˆæ¨¡å‹ã€‚ä¸€ä¸ªè¯åµŒå…¥ï¼Œç”±ç»„æˆå®ƒçš„ä¹‰å…ƒå‘é‡å–å‡å€¼å¾—åˆ°ã€‚mä¸ºè¯è¯­wçš„ä¹‰å…ƒæ€»æ•°ã€‚</p><img src="/2017/06/09/%E5%80%9F%E5%8A%A9%E4%B9%89%E5%85%83%E6%94%B9%E5%96%84%E8%AF%8D%E8%A1%A8%E7%A4%BA%E5%AD%A6%E4%B9%A0/ssa.png" class=""><p>â€ƒâ€ƒåŒ…å«ç›¸åŒä¹‰å…ƒçš„ç›¸ä¼¼è¯è¯­å¯èƒ½ä¼šæœ€ç»ˆå½¢æˆç›¸ä¼¼çš„è¡¨ç¤ºã€‚</p><h5 id="SAC"><a href="#SAC" class="headerlink" title="SAC"></a>SAC</h5><p>â€ƒâ€ƒSSAæ¨¡å‹ä¸è¶³ï¼šæ¯ä¸€ä¸ªè¯åªæœ‰ä¸€ä¸ªè¡¨ç¤º<br>â€ƒâ€ƒåˆ©ç”¨attentionæœºåˆ¶ï¼Œè‡ªåŠ¨æ ¹æ®ç›®æ ‡è¯ä¸ºä¸Šä¸‹æ–‡è¯é€‰æ‹©åˆé€‚çš„è¯ä¹‰ï¼›é€šè¿‡å¯¹ä¸Šä¸‹æ–‡è¯æ¶ˆæ­§ï¼Œæ¥å­¦åˆ°æ›´å¥½çš„ç›®æ ‡è¯è¡¨ç¤ºã€‚<br>â€ƒâ€ƒ<img src="/2017/06/09/%E5%80%9F%E5%8A%A9%E4%B9%89%E5%85%83%E6%94%B9%E5%96%84%E8%AF%8D%E8%A1%A8%E7%A4%BA%E5%AD%A6%E4%B9%A0/sacp.png" class=""><br>â€ƒâ€ƒç›®æ ‡è¯ï¼ˆas an attentionï¼‰ï¼šoriginal word embedding<br>â€ƒâ€ƒä¸Šä¸‹æ–‡è¯ï¼šsememe embeddingsï¼Œå…¬å¼ä¸ºï¼š</p><img src="/2017/06/09/%E5%80%9F%E5%8A%A9%E4%B9%89%E5%85%83%E6%94%B9%E5%96%84%E8%AF%8D%E8%A1%A8%E7%A4%BA%E5%AD%A6%E4%B9%A0/sac1.png" class=""><p>â€ƒâ€ƒæ„æ€æ˜¯ï¼šæ¯ä¸ªsense embedding*attention scoreï¼Œç„¶åæ±‚å’Œ.</p><img src="/2017/06/09/%E5%80%9F%E5%8A%A9%E4%B9%89%E5%85%83%E6%94%B9%E5%96%84%E8%AF%8D%E8%A1%A8%E7%A4%BA%E5%AD%A6%E4%B9%A0/sac2.png" class=""><p>â€ƒâ€ƒæ¯ä¸€ä¸ªsenseç”±ç»„æˆå®ƒçš„sememe embeddingså–å‡å€¼å¾—åˆ°ï¼š</p><img src="/2017/06/09/%E5%80%9F%E5%8A%A9%E4%B9%89%E5%85%83%E6%94%B9%E5%96%84%E8%AF%8D%E8%A1%A8%E7%A4%BA%E5%AD%A6%E4%B9%A0/sac3.png" class=""><p>â€ƒâ€ƒattentionæœºåˆ¶è®¤ä¸ºï¼Œä¸Šä¸‹æ–‡è¯çš„sense embeddingå’Œç›®æ ‡è¯wè¶Šç›¸å…³ï¼Œåœ¨æ„å»ºä¸Šä¸‹æ–‡è¯çš„word embeddingæ—¶è¿™ä¸ªsenseå°±è¶Šè¯¥è¢«è€ƒè™‘ã€‚è¿™ç§æœºåˆ¶ä¸‹ï¼Œä¸Šä¸‹æ–‡ä¸­çš„æ¯ä¸ªè¯éƒ½è¡¨ç¤ºæˆäº†å…¶senseçš„ç‰¹å®šåˆ†å¸ƒã€‚</p><h5 id="SAT"><a href="#SAT" class="headerlink" title="SAT"></a>SAT</h5><p>â€ƒâ€ƒå’ŒSACç›¸åï¼ŒSATå°†å¾ˆå¤šçš„ä¸Šä¸‹æ–‡è¯è§†ä¸ºattentionï¼Œæ¥é€‰æ‹©ç›®æ ‡è¯çš„è¯ä¹‰ã€‚<br>â€ƒâ€ƒ<img src="/2017/06/09/%E5%80%9F%E5%8A%A9%E4%B9%89%E5%85%83%E6%94%B9%E5%96%84%E8%AF%8D%E8%A1%A8%E7%A4%BA%E5%AD%A6%E4%B9%A0/satp.png" class=""><br>â€ƒâ€ƒä¸Šä¸‹æ–‡è¯ï¼ˆas an attentionï¼‰ï¼šoriginal word embeddings<br>â€ƒâ€ƒç›®æ ‡è¯ï¼šsememe embeddingï¼Œå…¬å¼ï¼š</p><img src="/2017/06/09/%E5%80%9F%E5%8A%A9%E4%B9%89%E5%85%83%E6%94%B9%E5%96%84%E8%AF%8D%E8%A1%A8%E7%A4%BA%E5%AD%A6%E4%B9%A0/sat.png" class=""><p>â€ƒâ€ƒç›´è§‰ä¸Šï¼ŒSATæ•ˆæœåº”è¯¥å¥½äºSACã€‚</p><h4 id="æ€»ç»“å±•æœ›-æˆ‘çš„-0"><a href="#æ€»ç»“å±•æœ›-æˆ‘çš„-0" class="headerlink" title="æ€»ç»“å±•æœ›(æˆ‘çš„-0-)"></a>æ€»ç»“å±•æœ›(æˆ‘çš„-0-)</h4><p>â€ƒâ€ƒæ–‡ç« æå‡ºä¸€ä¸ªæ¨¡å‹,è¯¥æ¨¡å‹å¯ä»¥å¯¹ä¹‰å…ƒä¿¡æ¯è¾ƒå¥½åœ°å»ºæ¨¡,æ”¹å–„äº†è¯è¡¨ç¤º.åœ¨è¯è¯­ç±»æ¨å’Œç›¸ä¼¼åº¦è®¡ç®—ä¸­,ç›¸æ¯”ä¼ ç»Ÿæ¨¡å‹è¯¥æ¨¡å‹éƒ½å±•ç¤ºå‡ºäº†ä¼˜åŠ¿.<br>â€ƒâ€ƒåœ¨å¤„ç†ä¹‰å…ƒæ—¶å¿½ç•¥æ‰äº†å…¶å¤æ‚çš„å±‚æ¬¡ç»“æ„,å¹¶ä¸”åªå¯¹ä¸­æ–‡è¿›è¡Œå¤„ç†.å¯ä»¥æƒ³è±¡çš„æ˜¯,å¦‚æœå¯¹å±‚æ¬¡ç»“æ„æœ‰è¾ƒå¥½çš„å»ºæ¨¡,è¯è¡¨ç¤ºä¼šæ›´åŠ ç²¾ç¡®,å…¶è¡¨ç¤ºçš„å­¦ä¹ è¿‡ç¨‹ä¹Ÿä¼šæ›´åŠ å®¹æ˜“æ”¶æ•›.å¦å¤–,è¿™ç§æœºåˆ¶åº”è¯¥é€‚ç”¨äºå…¶å®ƒè¯­è¨€,å€¼å¾—å°è¯•.</p><h4 id="æ–‡ç« "><a href="#æ–‡ç« " class="headerlink" title="æ–‡ç« "></a>æ–‡ç« </h4><p><a href="http://nlp.csai.tsinghua.edu.cn/~lzy/publications/acl2017_sememe.pdf">Improved Word Representation Learning with Sememes</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> word embedding </tag>
            
            <tag> attention </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç®€æ´çš„python</title>
      <link href="/2017/06/05/%E7%AE%80%E6%B4%81%E7%9A%84python/"/>
      <url>/2017/06/05/%E7%AE%80%E6%B4%81%E7%9A%84python/</url>
      
        <content type="html"><![CDATA[<h4 id="æ¡ä»¶è¡¨è¾¾å¼"><a href="#æ¡ä»¶è¡¨è¾¾å¼" class="headerlink" title="æ¡ä»¶è¡¨è¾¾å¼"></a>æ¡ä»¶è¡¨è¾¾å¼</h4><p>ä¸€èˆ¬æƒ…å†µä¸‹,æ¡ä»¶åˆ†æ”¯åªæœ‰ç®€å•çš„è¿”å›æˆ–å¯¹åŒä¸€å˜é‡è¿›è¡Œèµ‹å€¼æ“ä½œæ—¶,å¯ä»¥è½¬ä¸ºæ¡ä»¶è¡¨è¾¾å¼.</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.æ”¹å†™æ¡ä»¶è¯­å¥</span></span><br><span class="line"><span class="keyword">if</span> x &gt; <span class="number">0</span>:</span><br><span class="line">    y = math.log(x)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    y = <span class="built_in">float</span>(<span class="string">'nan'</span>)</span><br><span class="line"><span class="comment">#ç®€æ´å†™æ³•</span></span><br><span class="line">y = math.log(x) <span class="keyword">if</span> x &gt; <span class="number">0</span> <span class="keyword">else</span> <span class="built_in">float</span>(<span class="string">'nan'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#2.æ”¹å†™é€’å½’å‡½æ•°</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fac</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">if</span> x == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> x * fac(x-<span class="number">1</span>)</span><br><span class="line"><span class="comment">#ç®€æ´å†™æ³•</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fac</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> <span class="keyword">if</span> x == <span class="number">0</span> <span class="keyword">else</span> x * fac(x-<span class="number">1</span>)</span><br></pre></td></tr></tbody></table></figure><p>åˆ—è¡¨è§£æ(list comprehension)</p><p>å°†ä¸€ä¸ªåˆ—è¡¨è½¬ä¸ºå¦ä¸€ä¸ªæ—¶ç”¨æ›´å°‘çš„ä»£ç </p><span id="more"></span><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.æ˜ å°„æ“ä½œ</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">capitalize_all</span>(<span class="params">t</span>):</span><br><span class="line">    res = []</span><br><span class="line">    <span class="keyword">for</span> s <span class="keyword">in</span> t:</span><br><span class="line">        res.append(s.capitalize())</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"><span class="comment">#ç®€æ´å†™æ³•</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">capitalize_all</span>(<span class="params">t</span>):</span><br><span class="line">    <span class="keyword">return</span> [s.capitalize() <span class="keyword">for</span> s <span class="keyword">in</span> t]</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.è¿‡æ»¤æ“ä½œ</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">only_upper</span>(<span class="params">t</span>):</span><br><span class="line">    res = []</span><br><span class="line">    <span class="keyword">for</span> s <span class="keyword">in</span> t:</span><br><span class="line">        <span class="keyword">if</span> s.isupper():</span><br><span class="line">            res.append(s)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"><span class="comment">#ç®€æ´å†™æ³•</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">only_upper</span>(<span class="params">t</span>):</span><br><span class="line">    <span class="keyword">return</span> [s <span class="keyword">for</span> s <span class="keyword">in</span> t <span class="keyword">if</span> s.isupper()]</span><br></pre></td></tr></tbody></table></figure><h4 id="ç”Ÿæˆå™¨è¡¨è¾¾å¼"><a href="#ç”Ÿæˆå™¨è¡¨è¾¾å¼" class="headerlink" title="ç”Ÿæˆå™¨è¡¨è¾¾å¼"></a>ç”Ÿæˆå™¨è¡¨è¾¾å¼</h4><p>ç±»ä¼¼äºåˆ—è¡¨è§£æä½†åˆä¸åŒ,ç»å¸¸å’Œsum,max,minä¹‹ç±»çš„å‡½æ•°é…åˆä½¿ç”¨</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>l=[x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g = (x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g</span><br><span class="line">&lt;generator <span class="built_in">object</span> &lt;genexpr&gt; at <span class="number">0x7f33f66f2780</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">sum</span>(g)</span><br><span class="line"><span class="number">30</span></span><br></pre></td></tr></tbody></table></figure><h4 id="anyå’Œall"><a href="#anyå’Œall" class="headerlink" title="anyå’Œall"></a>anyå’Œall</h4><p>anyæ¥æ”¶ä¸€ä¸ªå¸ƒå°”å€¼ç»„æˆçš„åºåˆ—,å…¶ä¸­ä»»ä½•å€¼æ˜¯Trueæ—¶è¿”å›True.</p><p>allæ¥æ”¶ä¸€ä¸ªå¸ƒå°”å€¼ç»„æˆçš„åºåˆ—,æ‰€æœ‰å€¼æ˜¯Trueæ—¶è¿”å›True.</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å‘ç°ç¦æ­¢å­—æ¯,è¿”å›False</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">avoids</span>(<span class="params">word,forbidden</span>):</span><br><span class="line">    <span class="keyword">for</span> letter <span class="keyword">in</span> word:</span><br><span class="line">        <span class="keyword">if</span> letter <span class="keyword">in</span> forbidden:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"><span class="comment">#æ”¹å†™</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">avoids</span>(<span class="params">word,forbidden</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">not</span> <span class="built_in">any</span>(letter <span class="keyword">in</span> forbidden <span class="keyword">for</span> letter <span class="keyword">in</span> word)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å•è¯å¿…é¡»ä½¿ç”¨requiredä¸­çš„å…¨éƒ¨å­—æ¯</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">uses_all</span>(<span class="params">word,required</span>):</span><br><span class="line">    <span class="keyword">for</span> letter <span class="keyword">in</span> required:</span><br><span class="line">        <span class="keyword">if</span> letter <span class="keyword">not</span> <span class="keyword">in</span> word:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"><span class="comment">#æ”¹å†™</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">uses_all</span>(<span class="params">word,required</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">all</span>(letter <span class="keyword">in</span> word <span class="keyword">for</span> letter <span class="keyword">in</span> required)</span><br></pre></td></tr></tbody></table></figure><h4 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h4><p>æœ‰äº›é—®é¢˜å¯ä»¥å€ŸåŠ©é›†åˆå¤„ç†.</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç¬¬ä¸€æ¬¡å‡ºç°æ—¶åŠ å…¥è¯å…¸,å†æ¬¡å‡ºç°æ—¶å‡½æ•°è¿”å›True</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">has_duplicates</span>(<span class="params">t</span>):</span><br><span class="line">    d={}</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> t:</span><br><span class="line">        <span class="keyword">if</span> x <span class="keyword">in</span> d:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        d[x] = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åŒä¸€å‡½æ•°å€ŸåŠ©é›†åˆçš„ç®€å†™å½¢å¼</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">has_duplicates</span>(<span class="params">t</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(<span class="built_in">set</span>(t))&lt;<span class="built_in">len</span>(t)</span><br></pre></td></tr></tbody></table></figure><h4 id="è®¡æ•°å™¨"><a href="#è®¡æ•°å™¨" class="headerlink" title="è®¡æ•°å™¨"></a>è®¡æ•°å™¨</h4><p>å°†æ¯ä¸ªé”®æ˜ å°„åˆ°å…¶å‡ºç°æ¬¡æ•°,é”®æ˜¯å¯æ•£åˆ—çš„.</p><p>ç±»ä¼¼äºé›†åˆ,æä¾›äº†ä¸€äº›åŠ æ³•,å‡æ³•,äº¤é›†,å¹¶é›†çš„æ“ä½œ.è¿˜æœ‰ä¸€ä¸ªå¸¸ç”¨çš„most_commonæ–¹æ³•,è¿”å›ä¸€ä¸ªå€¼-é¢‘ç‡å¯¹çš„åˆ—è¡¨,æŒ‰ç…§æœ€å¸¸è§åˆ°æœ€å°‘è§æ’åº.</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>count=Counter(<span class="string">'parrot'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>count</span><br><span class="line">Counter({<span class="string">'r'</span>: <span class="number">2</span>, <span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'p'</span>: <span class="number">1</span>, <span class="string">'t'</span>: <span class="number">1</span>, <span class="string">'o'</span>: <span class="number">1</span>})</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> val,freq <span class="keyword">in</span> count.most_common(<span class="number">3</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(val,freq)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">(<span class="string">'r'</span>, <span class="number">2</span>)</span><br><span class="line">(<span class="string">'a'</span>, <span class="number">1</span>)</span><br><span class="line">(<span class="string">'p'</span>, <span class="number">1</span>)</span><br></pre></td></tr></tbody></table></figure><h4 id="å‘½åå…ƒç»„"><a href="#å‘½åå…ƒç»„" class="headerlink" title="å‘½åå…ƒç»„"></a>å‘½åå…ƒç»„</h4><p>æä¾›äº†å¿«é€Ÿå®šä¹‰ç®€å•ç±»çš„æ–¹æ³•ï¼›å¦‚æœç±»å˜å¾—å¾ˆå¤æ‚,å¯ä»¥å®šä¹‰æ–°ç±»ç»§æ‰¿å½“å‰çš„å‘½åå…ƒç»„,æˆ–è€…ä½¿ç”¨åŸå§‹ç±»å®šä¹‰.</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®šä¹‰ä¸€ä¸ªPointå¯¹è±¡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,x=<span class="number">0</span>,y=<span class="number">0</span></span>):</span><br><span class="line">        self.x = x</span><br><span class="line">        self.y = y</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self,</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'(%g,%g)'</span>%(self.x,self.y)</span><br><span class="line">    </span><br><span class="line"><span class="comment">#æ”¹å†™</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br><span class="line">Point = namedtuple(<span class="string">'Point'</span>,[<span class="string">'x'</span>,<span class="string">'y'</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Point</span><br><span class="line">&lt;<span class="keyword">class</span> <span class="string">'__main__.Point'</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = Point(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p</span><br><span class="line">Point(x=<span class="number">1</span>,y=<span class="number">2</span>)</span><br></pre></td></tr></tbody></table></figure><h4 id="æ”¶é›†å‚æ•°"><a href="#æ”¶é›†å‚æ•°" class="headerlink" title="æ”¶é›†å‚æ•°"></a>æ”¶é›†å‚æ•°</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ”¶é›†ä»»æ„ä¸ªæ•°çš„æŒ‰ä½å®å‚å¹¶è¾“å‡º</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">printall</span>(<span class="params">*args</span>):</span><br><span class="line">    <span class="built_in">print</span>(args)</span><br><span class="line">    </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>printall(<span class="number">1</span>,<span class="number">2.0</span>,<span class="string">'3'</span>)</span><br><span class="line">(<span class="number">1</span>, <span class="number">2.0</span>, <span class="string">'3'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>printall(<span class="number">1</span>,<span class="number">2.0</span>,third=<span class="string">'3'</span>)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">TypeError: printall() got an unexpected keyword argument <span class="string">'third'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ”¶é›†å…³é”®è¯å®å‚    </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">printall</span>(<span class="params">*args,**kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(args,kwargs)</span><br><span class="line">    </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>printall(<span class="number">1</span>,<span class="number">2.0</span>,third=<span class="string">'3'</span>)</span><br><span class="line">((<span class="number">1</span>, <span class="number">2.0</span>), {<span class="string">'third'</span>: <span class="string">'3'</span>})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>å¤„ç†å‚æ•°å¾ˆå¤šçš„å‡½æ•°æ—¶,åˆ›å»ºå’Œä¼ é€’å­—å…¸æ¥æŒ‡å®šå¸¸ç”¨çš„é€‰é¡¹æ˜¯éå¸¸æœ‰ç”¨çš„.</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redisäº‹åŠ¡</title>
      <link href="/2017/06/03/redis%E4%BA%8B%E5%8A%A1/"/>
      <url>/2017/06/03/redis%E4%BA%8B%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>â€ƒâ€ƒä¸€ç»„å‘½ä»¤çš„é›†åˆ,è¦ä¹ˆéƒ½æ‰§è¡Œ,è¦ä¹ˆéƒ½ä¸æ‰§è¡Œ.åŒå‘½ä»¤ä¸€æ ·,æ˜¯Redisçš„æœ€å°æ‰§è¡Œå•ä½.<br>â€ƒâ€ƒ<span id="more"></span></p><h4 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h4><p>â€ƒâ€ƒå…ˆå°†å±äºåŒä¸€äº‹åŠ¡çš„å‘½ä»¤å‘é€ç»™Redis,ç„¶åè®©Redisä¾æ¬¡æ‰§è¡Œè¿™äº›å‘½ä»¤(FIFO).</p><h4 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h4><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">redis&gt; MULTI</span><br><span class="line">OK</span><br><span class="line">redis&gt; SADD "user:1:following" 2</span><br><span class="line">QUEUED</span><br><span class="line">redis&gt; SADD "user:2:followers" 1</span><br><span class="line">QUEUED</span><br><span class="line">redis&gt; EXEC</span><br><span class="line">1) (interger) 1</span><br><span class="line">2) (interger) 1</span><br></pre></td></tr></tbody></table></figure><p>â€ƒâ€ƒMULTIå‘½ä»¤å‘Šè¯‰Redis,ä¸‹é¢çš„å‘½ä»¤å±äºåŒä¸€äº‹åŠ¡.<br>â€ƒâ€ƒå½“è¾“å…¥ä¸€æ¡å‘½ä»¤,Redisè¿”å›QUEUED,è¡¨ç¤ºè¯¥å‘½ä»¤å·²ç»è¿›å…¥ç­‰å¾…æ‰§è¡Œçš„äº‹åŠ¡é˜Ÿåˆ—ä¸­äº†.<br>â€ƒâ€ƒå½“äº‹åŠ¡é˜Ÿåˆ—é‡Œçš„æ‰€æœ‰å‘½ä»¤è¢«æ‰§è¡Œå®Œä¹‹å,EXECå‘½ä»¤ä¼šå°†å›å¤é˜Ÿåˆ—ä½œä¸ºè‡ªå·±çš„æ‰§è¡Œç»“æœè¿”å›ç»™å®¢æˆ·ç«¯,å®¢æˆ·ç«¯ä»äº‹åŠ¡çŠ¶æ€è¿”å›åˆ°éäº‹åŠ¡çŠ¶æ€,è‡³æ­¤,äº‹åŠ¡æ‰§è¡Œå®Œæ¯•ã€‚<br>â€ƒâ€ƒå¦‚æœåœ¨å‘é€EXECå‘½ä»¤å‰å®¢æˆ·ç«¯æ‰çº¿äº†,åˆ™Redisä¼šè¯·ç©ºäº‹åŠ¡é˜Ÿåˆ—,æ‰€æœ‰å‘½ä»¤éƒ½ä¸æ‰§è¡Œï¼›ä¸€æ—¦æœåŠ¡å™¨ç«¯æ”¶åˆ°äº†EXEC,æ‰€æœ‰çš„å‘½ä»¤å°±éƒ½ä¼šè¢«æ‰§è¡Œ.</p><h4 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h4><p>â€ƒâ€ƒåŒ…æ‹¬<strong>è¯­æ³•é”™è¯¯</strong>å’Œ<strong>è¿è¡Œé”™è¯¯</strong>.<br>â€ƒâ€ƒå¦‚æœäº‹åŠ¡é˜Ÿåˆ—ä¸­çš„å‘½ä»¤å­˜åœ¨è¯­æ³•é”™è¯¯(æŒ‡ä»¤ä¸å­˜åœ¨æˆ–è€…å‚æ•°ä¸å¯¹),æ‰§è¡ŒEXECåRedisä¼šè¿”å›é”™è¯¯,è¿è¯­æ³•æ­£ç¡®çš„å‘½ä»¤ä¹Ÿä¸ä¼šæ‰§è¡Œ.è¿™ç§é”™è¯¯çš„å‘½ä»¤åœ¨è¾“å…¥æ—¶,Rediså°±ä¼šæç¤ºä½ errorä¿¡æ¯.<br>â€ƒâ€ƒè¿è¡Œé”™è¯¯,æ˜¯æŒ‡é‚£äº›åœ¨è¾“å…¥æ—¶Redisä¸ä¼šè¿”å›erroræç¤ºä¿¡æ¯çš„å‘½ä»¤.ä¾‹å¦‚,ä½¿ç”¨æ•£åˆ—å‘½ä»¤æ“ä½œé›†åˆç±»å‹çš„é”®,è¿™ç§é”™è¯¯åœ¨å®é™…æ‰§è¡Œä¹‹å‰Redisæ˜¯æ— æ³•å‘ç°çš„.å¦‚æœä¸€æ¡å‘½ä»¤å‡ºç°äº†è¿è¡Œé”™è¯¯,äº‹åŠ¡é‡Œçš„å…¶å®ƒå‘½ä»¤ä¾ç„¶ä¼šè¢«æ‰§è¡Œ.<br>â€ƒâ€ƒRedisäº‹åŠ¡æ²¡æœ‰å›æ»šåŠŸèƒ½.å¼€å‘è€…éœ€è¦è‡ªå·±å¤„ç†é”™è¯¯,æ¢å¤æ•°æ®åº“.</p><h4 id="é”™è¯¯é¢„é˜²"><a href="#é”™è¯¯é¢„é˜²" class="headerlink" title="é”™è¯¯é¢„é˜²"></a>é”™è¯¯é¢„é˜²</h4><p>â€ƒâ€ƒå¯¹äºè¯­æ³•é”™è¯¯,å®Œå…¨å¯ä»¥åœ¨å¼€å‘æ—¶æ‰¾åˆ°å¹¶è§£å†³ï¼›<br>â€ƒâ€ƒå¯¹äºè¿è¡Œé”™è¯¯,å¯ä»¥åšçš„æ˜¯,åˆç†è§„åˆ’æ•°æ®åº“(ä¿è¯é”®åè§„èŒƒç­‰)</p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> Redisäº‹åŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2!=True</title>
      <link href="/2017/05/23/2!=True/"/>
      <url>/2017/05/23/2!=True/</url>
      
        <content type="html"><![CDATA[<p>é—®é¢˜:ä¸ºä»€ä¹ˆ2!=Trueå‘¢?</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">num=<span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span> num==<span class="literal">True</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span> <span class="string">'True'</span></span><br><span class="line"><span class="meta">... </span><span class="keyword">else</span>:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span> <span class="string">'False'</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></tbody></table></figure><span id="more"></span><p>å…¶å®ä¹Ÿæ˜¯ä¸ªæ— èŠçš„ä¸œè¥¿â€¦æŸ¥å®˜æ–¹æ–‡æ¡£æ—¶å€™æ„Ÿè§‰è¿˜ä¸é”™,è‡³å°‘èƒ½çœ‹æ‡‚â€¦</p><h4 id="çœŸå€¼æµ‹è¯•"><a href="#çœŸå€¼æµ‹è¯•" class="headerlink" title="çœŸå€¼æµ‹è¯•"></a>çœŸå€¼æµ‹è¯•</h4><p>pythonä¸­çš„ä»»ä½•å¯¹è±¡éƒ½æœ‰çœŸå€¼ï¼Œä»¥ä¸‹å¯¹è±¡çš„çœŸå€¼ä¸º<strong>false</strong>ï¼š<br>    - None<br>    - False<br>    - zero of any numeric type,for example 0,0.0,0j.<br>    - any empty sequence,for example,â€™â€™,(),[].<br>    - any empty mapping,for example,{}<br>    - instances of user-defined classes, if the class defines a <strong>bool</strong>() or <strong>len</strong>() method, when that method returns the integer zero or bool value False.<br>å…¶å®ƒæ‰€æœ‰å¯¹è±¡çš„çœŸå€¼éƒ½è¢«è§†ä¸º <strong>true</strong> ã€‚ä¸€äº›è¿”å›å¸ƒå°”å€¼çš„æ“ä½œå’Œå†…ç½®å‡½æ•°ï¼Œæ€»æ˜¯è¿”å›0æˆ–è€…Falseæ¥è¡¨ç¤ºçœŸå€¼ä¸º<strong>false</strong>ï¼Œè¿”å›1æˆ–è€…Trueæ¥è¡¨ç¤ºçœŸå€¼ä¸º<strong>true</strong>. (ä¾‹å¤–: <strong>å¸ƒå°”æ“ä½œ</strong> or å’Œ and æ€»æ˜¯<strong>è¿”å›å…¶æ“ä½œæ•°</strong>)</p><h4 id="å¸ƒå°”æ“ä½œ"><a href="#å¸ƒå°”æ“ä½œ" class="headerlink" title="å¸ƒå°”æ“ä½œ"></a>å¸ƒå°”æ“ä½œ</h4><p>pythonä¸­çš„å¸ƒå°”æ“ä½œï¼Œæœ‰å¦‚ä¸‹è§„åˆ™ï¼š</p><table><thead><tr><th>Operations</th><th>Result</th><th>Notes</th></tr></thead><tbody><tr><td>x or y</td><td>if x is false,then y,else x</td><td>(1)</td></tr><tr><td>x and y</td><td>if x is false,then x,else y</td><td>(2)</td></tr><tr><td>not x</td><td>if x is false,then True,else False</td><td>(3)</td></tr><tr><td>Notes:</td><td></td><td></td></tr><tr><td>(1) This is a short-circuit operator, so it only evaluates the second argument if the first one is false.</td><td></td><td></td></tr><tr><td>åªä¼šåœ¨ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå‡çš„æ—¶å€™è€ƒè™‘ç¬¬äºŒä¸ªå‚æ•°.</td><td></td><td></td></tr><tr><td>(2) This is a short-circuit operator, so it only evaluates the second argument if the first one is true.</td><td></td><td></td></tr><tr><td>åªä¼šåœ¨ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºçœŸçš„æ—¶å€™è€ƒè™‘ç¬¬äºŒä¸ªå‚æ•°.</td><td></td><td></td></tr><tr><td>(3) not has a lower priority than non-Boolean operators, so <strong>not a == b</strong> is interpreted as <strong>not (a == b)</strong>, and <strong>a == not b</strong> is a syntax error.</td><td></td><td></td></tr></tbody></table><p>äºæ˜¯æœ‰:</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">True</span> <span class="keyword">and</span> <span class="number">0</span>    <span class="comment"># 0</span></span><br><span class="line"><span class="number">0</span> <span class="keyword">and</span> <span class="literal">True</span>    <span class="comment"># 0</span></span><br><span class="line"><span class="literal">True</span> <span class="keyword">and</span> <span class="number">1</span>    <span class="comment"># 1</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">and</span> <span class="literal">True</span>    <span class="comment"># True</span></span><br><span class="line"><span class="literal">True</span> <span class="keyword">and</span> <span class="number">2</span>    <span class="comment"># 2</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">and</span> <span class="literal">True</span>    <span class="comment"># True</span></span><br><span class="line"><span class="literal">False</span> <span class="keyword">and</span> <span class="number">0</span>    <span class="comment"># False</span></span><br><span class="line"><span class="number">0</span> <span class="keyword">and</span> <span class="literal">False</span>    <span class="comment"># 0</span></span><br><span class="line"><span class="literal">False</span> <span class="keyword">and</span> <span class="number">1</span>    <span class="comment"># False</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">and</span> <span class="literal">False</span>    <span class="comment"># False</span></span><br><span class="line"><span class="literal">False</span> <span class="keyword">and</span> <span class="number">2</span>    <span class="comment"># False</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">and</span> <span class="literal">False</span>    <span class="comment"># False</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">True</span> <span class="keyword">or</span> <span class="number">0</span>    <span class="comment"># True</span></span><br><span class="line"><span class="number">0</span> <span class="keyword">or</span> <span class="literal">True</span>    <span class="comment"># True</span></span><br><span class="line"><span class="literal">True</span> <span class="keyword">or</span> <span class="number">1</span>    <span class="comment"># True</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">or</span> <span class="literal">True</span>    <span class="comment"># 1</span></span><br><span class="line"><span class="literal">True</span> <span class="keyword">or</span> <span class="number">2</span>    <span class="comment"># True</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">or</span> <span class="literal">True</span>    <span class="comment"># 2</span></span><br><span class="line"><span class="literal">False</span> <span class="keyword">or</span> <span class="number">0</span>    <span class="comment"># 0</span></span><br><span class="line"><span class="number">0</span> <span class="keyword">or</span> <span class="literal">False</span>    <span class="comment"># False</span></span><br><span class="line"><span class="literal">False</span> <span class="keyword">or</span> <span class="number">1</span>    <span class="comment"># 1</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">or</span> <span class="literal">False</span>    <span class="comment"># 1</span></span><br><span class="line"><span class="literal">False</span> <span class="keyword">or</span> <span class="number">2</span>    <span class="comment"># 2</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">or</span> <span class="literal">False</span>    <span class="comment"># 2</span></span><br></pre></td></tr></tbody></table></figure><h4 id="å¸ƒå°”å€¼"><a href="#å¸ƒå°”å€¼" class="headerlink" title="å¸ƒå°”å€¼"></a>å¸ƒå°”å€¼</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">isinstance</span>(<span class="literal">True</span>,<span class="built_in">int</span>)  <span class="comment"># True</span></span><br><span class="line"><span class="built_in">isinstance</span>(<span class="literal">False</span>,<span class="built_in">int</span>)  <span class="comment"># True</span></span><br><span class="line"><span class="literal">True</span> <span class="keyword">is</span> <span class="number">1</span>    <span class="comment"># False</span></span><br><span class="line"><span class="literal">False</span> <span class="keyword">is</span> <span class="number">0</span>    <span class="comment"># False</span></span><br><span class="line"><span class="built_in">int</span>(<span class="literal">True</span>)    <span class="comment"># 1</span></span><br><span class="line"><span class="built_in">int</span>(<span class="literal">False</span>)    <span class="comment"># 0</span></span><br><span class="line"><span class="built_in">bool</span>(<span class="number">2</span>)     <span class="comment"># True</span></span><br><span class="line"><span class="built_in">bool</span>(<span class="number">0</span>)     <span class="comment"># False</span></span><br></pre></td></tr></tbody></table></figure><p>å¸ƒå°”å€¼åŒ…æ‹¬ä¸¤ä¸ªå¸¸é‡å¯¹è±¡ï¼Œåˆ†åˆ«æ˜¯Trueå’ŒFalseï¼Œæ¥è¡¨ç¤ºçœŸå€¼ï¼›<br>åœ¨æ•°å€¼ä¸Šä¸‹æ–‡ä¸­ï¼Œå¸ƒå°”å€¼Trueå’ŒFalseç­‰åŒäº1å’Œ0ï¼Œä¾‹å¦‚ï¼š5+Trueï¼Œè¿”å›6ï¼›<br>å†…ç½®å‡½æ•°bool()å¯ä»¥å°†ä»»ä½•å€¼è½¬æ¢ä¸ºå¸ƒå°”å€¼ï¼Œå‰ææ˜¯è¯¥å€¼å¯ä»¥è¢«è§£é‡Šä¸ºçœŸå€¼.<br>ç»“è®ºï¼š2 != True ï¼Œä½†æ˜¯ bool(2) == True.</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ä½“æ’åºè®ºæ–‡-2</title>
      <link href="/2017/05/21/%E5%AE%9E%E4%BD%93%E6%8E%92%E5%BA%8F%E8%AE%BA%E6%96%87-2/"/>
      <url>/2017/05/21/%E5%AE%9E%E4%BD%93%E6%8E%92%E5%BA%8F%E8%AE%BA%E6%96%87-2/</url>
      
        <content type="html"><![CDATA[<h3 id="çŸ¥è¯†å›¾è°±ä¸­å®ä½“ç›¸ä¼¼åº¦è®¡ç®—ç ”ç©¶"><a href="#çŸ¥è¯†å›¾è°±ä¸­å®ä½“ç›¸ä¼¼åº¦è®¡ç®—ç ”ç©¶" class="headerlink" title="çŸ¥è¯†å›¾è°±ä¸­å®ä½“ç›¸ä¼¼åº¦è®¡ç®—ç ”ç©¶"></a>çŸ¥è¯†å›¾è°±ä¸­å®ä½“ç›¸ä¼¼åº¦è®¡ç®—ç ”ç©¶</h3><h4 id="çŸ¥è¯†å›¾è°±"><a href="#çŸ¥è¯†å›¾è°±" class="headerlink" title="çŸ¥è¯†å›¾è°±"></a>çŸ¥è¯†å›¾è°±</h4><p>â€ƒâ€ƒæœ¬è´¨æ˜¯ä¸€ç§è¯­ä¹‰ç½‘ç»œ,ç»“ç‚¹ä»£è¡¨å®ä½“æˆ–æ¦‚å¿µ,è¾¹ä»£è¡¨å®ä½“æˆ–æ¦‚å¿µé—´çš„å„ç§è¯­ä¹‰å…³ç³».ä¸€ä¸ªå«æœ‰å¤§é‡å®ä½“çš„çŸ¥è¯†åº“,å¦‚æœæ„å»ºå¾—å½“,å®ä½“ä¿¡æ¯è¡¨ç¤ºå¾—å½“,å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¾›æˆ‘ä»¬åˆ†æå¤„ç†.</p><h4 id="ç›¸ä¼¼å®ä½“"><a href="#ç›¸ä¼¼å®ä½“" class="headerlink" title="ç›¸ä¼¼å®ä½“"></a>ç›¸ä¼¼å®ä½“</h4><p>â€ƒâ€ƒå¯¹äºå®ä½“é—´å…³ç³»çš„ç ”ç©¶,ç›®å‰è¾ƒå¤šçš„é›†ä¸­åœ¨ç›¸ä¼¼æ€§çš„åº¦é‡.åˆ¤æ–­å®ä½“ä¹‹é—´çš„ç›¸ä¼¼åº¦é¦–å…ˆè¦ç†è§£å®ä½“çš„è¯­ä¹‰ä¿¡æ¯,ä¼ ç»Ÿçš„å­—ç¬¦ä¸²åŒ¹é…ä¸å¯è¡Œ,ä¾‹å¦‚è®©ä½ ä»åˆ˜å¾·åå’Œé©¬å¾·åå’Œå¼ å­¦å‹ä¸­é€‰ä¸¤ä¸ªç›¸ä¼¼åº¦è¾ƒé«˜çš„,<span id="more"></span>ä½ è‚¯å®šä¼šè¯´æ˜¯åˆ˜å¾·åå’Œå¼ å­¦å‹,å°½ç®¡ä»å­—ç¬¦ä¸²åŒ¹é…çš„è§’åº¦çœ‹,åˆ˜å¾·åå’Œé©¬å¾·ååŒ¹é…åº¦æ›´é«˜.<br>â€ƒâ€ƒåœ¨æ•°æ®ç»“æ„åŒ–å­˜å‚¨çš„çŸ¥è¯†åº“ä¸­,å®ä½“å±æ€§å¯ä»¥ä½œä¸ºç›¸ä¼¼åº¦åˆ¤æ–­çš„ä¸»è¦ä¾æ®.è€Œå¦‚ä½•åº¦é‡å±æ€§ä¸Šçš„ç›¸ä¼¼åº¦æ˜¯è§£å†³é—®é¢˜çš„å…³é”®.æ–‡æœ¬å‹å±æ€§çš„ç›¸ä¼¼åº¦è®¡ç®—æ˜¯æ›´ç ”ç©¶é‡ç‚¹.</p><h4 id="æœ¬æ–‡è´¡çŒ®"><a href="#æœ¬æ–‡è´¡çŒ®" class="headerlink" title="æœ¬æ–‡è´¡çŒ®"></a>æœ¬æ–‡è´¡çŒ®</h4><ol><li>æå‡ºçŸ¥è¯†å›¾è°±ä¸­å®ä½“ç›¸ä¼¼åº¦çš„é€šç”¨æ–¹æ³•,å¯ä»¥å¤„ç†å„ç§ç±»å‹çš„å±æ€§å€¼,åŒ…æ‹¬æ•°å€¼å‹,åˆ—è¡¨å‹,æ–‡æœ¬å‹ï¼›</li><li>æ–‡æœ¬å‹æ•°æ®çš„ç›¸ä¼¼åº¦è®¡ç®—ä¸­ä½¿ç”¨äº†è¯­ä¹‰æ¨¡å‹,å¢åŠ äº†å®ä½“åœ¨è¯­ä¹‰ä¸Šçš„ç›¸ä¼¼åº¦ï¼›</li><li>å®ä½“çš„ç›¸ä¼¼åº¦è®¡ç®—ä¸­,ä½¿ç”¨äº†é›†æˆå­¦ä¹ çš„æ–¹æ³•,æé«˜åˆ†ç±»çš„æ­£ç¡®ç‡ï¼›</li></ol><h4 id="ç›¸å…³å·¥ä½œ"><a href="#ç›¸å…³å·¥ä½œ" class="headerlink" title="ç›¸å…³å·¥ä½œ"></a>ç›¸å…³å·¥ä½œ</h4><ol><li>ç›¸ä¼¼å®ä½“æ¨èåœ¨è¯¸å¤šé¢†åŸŸå¾—åˆ°å¹¿æ³›åº”ç”¨.å¦‚ç”µå•†å’Œæœç´¢å¼•æ“ä¸­çš„æ¨èç³»ç»Ÿï¼›åŒ»ç–—é¢†åŸŸå¯ä»¥è¯„æ³¨ç—…äººä¹‹é—´çš„ç›¸ä¼¼åº¦,è¾…åŠ©åŒ»ç”Ÿå†³ç­–.</li><li>å¯¹äºæ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—,æœ‰åŸºäºç»Ÿè®¡çš„æ–¹æ³•å’ŒåŸºäºè¯­ä¹‰åˆ†æçš„æ–¹æ³•.åŸºäºç»Ÿè®¡çš„æ–¹æ³•é€šå¸¸é‡‡ç”¨VSMè¿›è¡Œæ–‡æœ¬è¡¨ç¤º,å°†æ–‡æœ¬è¡¨ç¤ºä¸ºç‰¹å¾è¯é›†åˆ,æ ¹æ®è¯é¢‘æå–å…³é”®ç‰¹å¾è¯,è®¡ç®—åœ¨å…³é”®ç‰¹å¾è¯å‘é‡ç©ºé—´ä¸Šçš„ç›¸ä¼¼åº¦,æ¥ä»£è¡¨æ–‡æœ¬ç›¸ä¼¼åº¦.åŸºäºè¯­ä¹‰åˆ†æçš„æ–¹æ³•,è€ƒè™‘äº†è¯è¯­é—´çš„è¯­ä¹‰å…³ç³»,å³è¿‘ä¹‰è¯.</li></ol><h4 id="ç®—æ³•è®¾è®¡"><a href="#ç®—æ³•è®¾è®¡" class="headerlink" title="ç®—æ³•è®¾è®¡"></a>ç®—æ³•è®¾è®¡</h4><p>å‡è®¾:</p><ol><li>ä¸åŒç±»åˆ«å®ä½“å¯¹ç›¸ä¼¼åº¦ä¸º0ï¼›</li><li>å®ä½“ä¸è‡ªèº«ç›¸ä¼¼åº¦ä¸º4ï¼›</li><li>å®ä½“å¯¹ç›¸ä¼¼åº¦æ»¡è¶³å¯¹ç§°æ€§,å³å®ä½“1å’Œå®ä½“2çš„ç›¸ä¼¼åº¦ç­‰äºå®ä½“2å’Œå®ä½“1çš„ç›¸ä¼¼åº¦ï¼›</li></ol><h5 id="æ•°æ®é¢„å¤„ç†"><a href="#æ•°æ®é¢„å¤„ç†" class="headerlink" title="æ•°æ®é¢„å¤„ç†"></a>æ•°æ®é¢„å¤„ç†</h5><p>â€ƒâ€ƒå‰”é™¤ä¸æ»¡è¶³ä¸Šè¿°å‡è®¾çš„æ•°æ®,å æ¯”0.9%ï¼›<br>â€ƒâ€ƒåˆ—è¡¨å‹æ•°æ®ä¸­å±æ€§è¡¨è¾¾ä¸ä¸€è‡´çš„è¿›è¡Œå½’ä¸€åŒ–,ä¾‹å¦‚æ™®é€šè¯,ä¸­æ–‡,æ±‰è¯­,ç®€ä½“ä¸­æ–‡ç­‰å½’ä¸ºæ±‰è¯­ï¼›</p><h5 id="ç‰¹å¾ç”Ÿæˆ"><a href="#ç‰¹å¾ç”Ÿæˆ" class="headerlink" title="ç‰¹å¾ç”Ÿæˆ"></a>ç‰¹å¾ç”Ÿæˆ</h5><p>â€ƒâ€ƒå¯¹äºä¸åŒç±»å‹çš„å±æ€§å€¼,é‡‡ç”¨ä¸åŒçš„è®¡ç®—æ–¹æ³•:</p><ol><li>å¯¹äºæ•°å€¼å‹çš„å±æ€§:<br>$$<br>D(d_i,d_j)=\frac{|d_j-d_i|}{Max(d_n)-Min(d_n)}<br>$$<br>â€ƒâ€ƒDçš„å€¼åŸŸåœ¨[0,1],diå’Œdjå·®å€¼è¶Šå¤§Dè¶Šå¤§,è¡¨ç¤ºå®ƒä»¬ä¹‹é—´çš„ç›¸ä¼¼åº¦è¶Šå°.</li><li>å¯¹äºåˆ—è¡¨å‹çš„å±æ€§,é‡‡ç”¨Jaccardè®¡ç®—ç›¸ä¼¼åº¦:<br>$$<br>Jaccard(A,B)=\frac{|A\cap B|}{|A\cup B|}<br>$$<br>â€ƒâ€ƒJaccardçš„å€¼åŸŸåœ¨[0,1],è¶Šå¤§ç›¸ä¼¼åº¦è¶Šé«˜.</li><li>å¯¹äºæ–‡æœ¬å‹çš„å±æ€§,é¦–å…ˆè¿›è¡Œåˆ†è¯,è®¡ç®—å¾—åˆ°TF-IDFå‘é‡.ä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦è¡¡é‡ç›¸ä¼¼æ€§:<br>$$<br>CosSim=\frac{\sum_{i=1}^n(A_i*B_i)}{\sqrt{\sum_{i=1}^N(A_i)^2}*\sqrt{\sum_{i=1}^N(B_i)^2}}<br>$$</li></ol><p>â€ƒâ€ƒå¼•å…¥LDAå¾—åˆ°é™ç»´äº†çš„ä¸»é¢˜æ¨¡å‹å‘é‡,ä½¿ç”¨ä½™å¼¦ç›¸ä¼¼åº¦å’ŒHellingerè·ç¦»è¡¡é‡å‘é‡é—´çš„ç›¸ä¼¼æ€§:<br>$$<br>H(P,Q)=\frac1{\sqrt2}\sqrt{\sum_{i=1}^{k}(\sqrt{p_i}-\sqrt{q_i})^2}<br>$$</p><h5 id="æ¨¡å‹é€‰æ‹©"><a href="#æ¨¡å‹é€‰æ‹©" class="headerlink" title="æ¨¡å‹é€‰æ‹©"></a>æ¨¡å‹é€‰æ‹©</h5><p>â€ƒâ€ƒæåˆ°äº†æœºå™¨å­¦ä¹ ä¸­æ¶‰åŠåˆ°çš„ä¸€äº›åŸºæœ¬æ–¹æ³•.</p><h5 id="ç®—æ³•æ€»ç»“"><a href="#ç®—æ³•æ€»ç»“" class="headerlink" title="ç®—æ³•æ€»ç»“"></a>ç®—æ³•æ€»ç»“</h5><p>â€ƒâ€ƒä¸»è¦æ˜¯2ä¸ªæ¨¡å—:ç‰¹å¾ç”Ÿæˆå’Œåˆ†ç±»å™¨è®­ç»ƒ<br>â€ƒâ€ƒæ•°æ®çº¦æŸ:ä¸åŒç±»åˆ«ä¸‹çš„å®ä½“,å±æ€§ä¼šæœ‰ä¸åŒ,ç»´åº¦ä¹Ÿæœ‰å·®å¼‚ï¼›åŒç±»åˆ«ä¸‹çš„å®ä½“ç‰¹å¾ç»´åº¦ç›¸åŒï¼›<br>â€ƒâ€ƒéœ€è¦å¯¹ä¸åŒç±»åˆ«çš„å®ä½“è®­ç»ƒä¸åŒçš„åˆ†ç±»å™¨ï¼›</p><h4 id="å®éªŒç»“æœ"><a href="#å®éªŒç»“æœ" class="headerlink" title="å®éªŒç»“æœ"></a>å®éªŒç»“æœ</h4><p>â€ƒâ€ƒå¼•å…¥é›†æˆå­¦ä¹ æ•ˆæœå¹¶ä¸æ˜æ˜¾,ä½†æ˜¯æ¯”å•ä¸€åˆ†ç±»æ•ˆæœå¥½.</p><h4 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h4><p>â€ƒâ€ƒç‰¹å¾ä¹‹é—´åŠ åŒºåˆ†åº¦.</p>]]></content>
      
      
      
        <tags>
            
            <tag> å®ä½“æ’åº </tag>
            
            <tag> ç›¸ä¼¼åº¦è®¡ç®— </tag>
            
            <tag> é›†æˆå­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®ä½“æ’åºè®ºæ–‡-1</title>
      <link href="/2017/05/18/%E5%AE%9E%E4%BD%93%E6%8E%92%E5%BA%8F%E8%AE%BA%E6%96%87-1/"/>
      <url>/2017/05/18/%E5%AE%9E%E4%BD%93%E6%8E%92%E5%BA%8F%E8%AE%BA%E6%96%87-1/</url>
      
        <content type="html"><![CDATA[<h3 id="åŸºäºç»™å®šå®ä½“å’Œå±æ€§çš„ç›¸ä¼¼å®ä½“æ¨èæ–¹æ³•"><a href="#åŸºäºç»™å®šå®ä½“å’Œå±æ€§çš„ç›¸ä¼¼å®ä½“æ¨èæ–¹æ³•" class="headerlink" title="åŸºäºç»™å®šå®ä½“å’Œå±æ€§çš„ç›¸ä¼¼å®ä½“æ¨èæ–¹æ³•"></a>åŸºäºç»™å®šå®ä½“å’Œå±æ€§çš„ç›¸ä¼¼å®ä½“æ¨èæ–¹æ³•</h3><p>ç›¸ä¼¼å®ä½“æ¨èä¸»è¦ç”¨åœ¨é—®ç­”ç³»ç»Ÿå’Œæœç´¢å¼•æ“ä¸­.</p><p>ä¸€ä¸ªå®ä½“å¯èƒ½å¯¹åº”ç€å¤šä¸ªæ¦‚å¿µ,å¼•å…¥å±æ€§ä¹‹å,æˆ‘ä»¬æ›´å¯èƒ½æ¨æ–­å‡ºæŸ¥è¯¢æ„å›¾.ä¾‹å¦‚,è‹¹æœ+æ€»éƒ¨,æˆ‘ä»¬çŸ¥é“è‹¹æœæŒ‡çš„æ˜¯å…¬å¸;è‹¹æœ+å£æ„Ÿ,æˆ‘ä»¬çŸ¥é“è¯´çš„æ˜¯æ°´æœ.</p><p>è¿›è¡Œç›¸ä¼¼å®ä½“æ¨è,è¦åšä¸¤ä»¶äº‹:</p><ul><li>æ ¹æ®å®ä½“å’Œä¸åŒå±æ€§çš„ç»„åˆæ¦‚ç‡æ¨æ–­å®ä½“æ‰€å±çš„æ¦‚å¿µ</li><li>å¾—åˆ°è¯¥æ¦‚å¿µä¸‹å€™é€‰çš„ç›¸ä¼¼å®ä½“,æ’åºåè¾“å‡º<span id="more"></span></li></ul><h4 id="å®ä½“æ¦‚å¿µåŒ–"><a href="#å®ä½“æ¦‚å¿µåŒ–" class="headerlink" title="å®ä½“æ¦‚å¿µåŒ–"></a>å®ä½“æ¦‚å¿µåŒ–</h4><h5 id="å»ºç«‹æ¦‚å¿µçš„å±æ€§æ¨¡æ¿"><a href="#å»ºç«‹æ¦‚å¿µçš„å±æ€§æ¨¡æ¿" class="headerlink" title="å»ºç«‹æ¦‚å¿µçš„å±æ€§æ¨¡æ¿"></a>å»ºç«‹æ¦‚å¿µçš„å±æ€§æ¨¡æ¿</h5><p>åŸºäºå‡è®¾:å½“ä¸€ä¸ªæ¦‚å¿µçš„ä¸åŒå®ä½“ä¸‹é¢‘ç¹å‡ºç°æŸä¸ªå±æ€§æ—¶,è®¤ä¸ºè¿™ä¸ªå±æ€§å¯¹äºæœ¬æ¦‚å¿µæ˜¯å…¸å‹çš„.å…¸å‹å±æ€§çš„æƒé‡é«˜!</p><p>å…·ä½“åšæ³•:æŠŠæ¯ä¸ªå®ä½“æ‰€æœ‰å±æ€§åŠ å…¥å…¶æ‰€å±çš„æ¦‚å¿µä¸­,è®¡æ•°è¯¥å±æ€§å‡ºç°çš„æ¬¡æ•°å¹¶åšå½’ä¸€åŒ–.<br>$$<br>P(a_j|c_k) = \frac {count(a_j)}{max\lbrace count(a_i)|a_i \in attr(c_k)\rbrace}<br>$$</p><p>$$<br>Template(c_k)=\left\lbrace {(a_i,p(a_i|c_k))|a_i \in e_i \land e_i \in c_k}\right\rbrace<br>$$</p><h5 id="ç»™å®šå±æ€§æ¨æ–­å®ä½“æ¦‚å¿µ"><a href="#ç»™å®šå±æ€§æ¨æ–­å®ä½“æ¦‚å¿µ" class="headerlink" title="ç»™å®šå±æ€§æ¨æ–­å®ä½“æ¦‚å¿µ"></a>ç»™å®šå±æ€§æ¨æ–­å®ä½“æ¦‚å¿µ</h5><p>$$<br>P(c_k|e^s,A) = \sum_{i:a_i\in A}^{N}P(a_i|c_k)<br>$$</p><p>ç›´è§‰ä¸Š,æºå®ä½“å±æ€§åœ¨æŸä¸ªæ¦‚å¿µä¸­å‡ºç°çš„è¶Šå¤š,å±äºè¯¥æ¦‚å¿µçš„æ¦‚ç‡è¶Šé«˜ï¼›</p><h4 id="å®ä½“ç›¸ä¼¼æ€§"><a href="#å®ä½“ç›¸ä¼¼æ€§" class="headerlink" title="å®ä½“ç›¸ä¼¼æ€§"></a>å®ä½“ç›¸ä¼¼æ€§</h4><h5 id="å®ä½“é—´å…³ç³»çš„å…³è”æ–¹å¼"><a href="#å®ä½“é—´å…³ç³»çš„å…³è”æ–¹å¼" class="headerlink" title="å®ä½“é—´å…³ç³»çš„å…³è”æ–¹å¼:"></a>å®ä½“é—´å…³ç³»çš„å…³è”æ–¹å¼:</h5><ul><li>æ¦‚å¿µå…³è”: ç›¸åŒæ¦‚å¿µä¸‹çš„å®ä½“ç›¸ä¼¼,æ¯”å¦‚æ°´æœè¿™ä¸ªæ¦‚å¿µä¸‹,è‹¹æœ,æ¢¨,è‘¡è„å°±æ˜¯ç›¸ä¼¼çš„ï¼›</li><li>å±æ€§å…³è”: ç›¸ä¼¼å®ä½“é€šå¸¸å…·æœ‰ç›¸ä¼¼çš„å±æ€§é›†,æ¯”å¦‚è‹¹æœå’Œè‘¡è„,å°±ä¼šæœ‰å£æ„Ÿ,äº§åœ°,ä»·æ ¼ç­‰å…±æœ‰å±æ€§ï¼›</li><li>é“¾æ¥å…³è”: ä¸€ä¸ªå®ä½“é¡µé¢ä¸­å‡ºç°çš„å…¶å®ƒå®ä½“é€šå¸¸å’Œè¯¥å®ä½“æ˜¯ç±»ä¼¼çš„</li></ul><h5 id="æ ¹æ®ä¸Šé¢çš„å…³è”æ–¹å¼-å¾—åˆ°ä¸‰ä¸ªç›´è§‚çš„å‡è®¾"><a href="#æ ¹æ®ä¸Šé¢çš„å…³è”æ–¹å¼-å¾—åˆ°ä¸‰ä¸ªç›´è§‚çš„å‡è®¾" class="headerlink" title="æ ¹æ®ä¸Šé¢çš„å…³è”æ–¹å¼,å¾—åˆ°ä¸‰ä¸ªç›´è§‚çš„å‡è®¾:"></a>æ ¹æ®ä¸Šé¢çš„å…³è”æ–¹å¼,å¾—åˆ°ä¸‰ä¸ªç›´è§‚çš„å‡è®¾:</h5><ol><li>ä¸¤ä¸ªå®ä½“ç›¸ä¼¼,é¦–å…ˆè¿™ä¸¤ä¸ªå®ä½“å±äºåŒä¸€ä¸ªæ¦‚å¿µï¼›</li><li>ä¸€ä¸ªå®ä½“é¡µé¢é¢‘ç¹å‡ºç°å¦ä¸€ä¸ªå®ä½“,é‚£ä¹ˆè¿™ä¸¤ä¸ªå®ä½“è¾ƒç›¸ä¼¼ï¼›</li><li>å¦‚æœä¸¤ä¸ªå®ä½“å…±æœ‰å±æ€§è¾ƒå¤š,é‚£ä¹ˆè¿™ä¸¤ä¸ªå®ä½“è¾ƒç›¸ä¼¼ï¼›</li></ol><h5 id="æ¨¡å‹"><a href="#æ¨¡å‹" class="headerlink" title="æ¨¡å‹"></a>æ¨¡å‹</h5><p>$$<br>{ä½¿ç”¨æ¦‚ç‡}P(e^t|Q){è¡¨ç¤ºç»™å®šä¸€ä¸ªæŸ¥è¯¢}Q={ e^s,A},A={a_1,a_2,â€¦,a_N}(e^sè¡¨ç¤ºè¾“å…¥çš„æºå®ä½“,Aè¡¨ç¤ºè¾“å…¥çš„å±æ€§åˆ—è¡¨),æ¨èä¸€ä¸ªç›¸ä¼¼çš„å®ä½“e^tçš„æ¡ä»¶æ¦‚ç‡.<br>$$</p><p>$$<br>P(e^t|Q)=\frac{P(e^t,Q)}{P(Q)}\infty P(e^t,Q),P(Q)ä¸å—e^tçš„å½±å“,å¯ä»¥ä¸è€ƒè™‘<br>$$</p><p>$$<br>P(e^t,Q)=P(Q|e^t)P(e^t)=P(e^s,A|e^t)P(e^t)=P(e^s|e^t)P(A|e^t)P(e^t)=P(e^s,e^t)P(A|e^t)=P(e^t|e^s)P(e^s)P(A|e^t)<br>$$</p><p>$$<br>\infty P(e^t|e^s)P(A|e^t) {,å¼ä¸­å‡è®¾e^så’ŒAç›¸äº’ç‹¬ç«‹,P(e^s)ä¸å½±å“æœ€ç»ˆç»“æœå¯ä»¥å»æ‰}<br>$$</p><p>å¾—åˆ°çš„ä¸¤ä¸ªP,ä¸€ä¸ªè¡¨ç¤ºå®ä½“ç›¸å…³åº¦,å¦ä¸€ä¸ªè¡¨ç¤ºä¸å±æ€§é›†çš„é‡åˆåº¦.</p><h5 id="è®¡ç®—å®ä½“ç›¸å…³åº¦"><a href="#è®¡ç®—å®ä½“ç›¸å…³åº¦" class="headerlink" title="è®¡ç®—å®ä½“ç›¸å…³åº¦"></a>è®¡ç®—å®ä½“ç›¸å…³åº¦</h5><p>è€ƒè™‘äº†å€™é€‰å®ä½“åœ¨æºå®ä½“é¡µé¢å‡ºç°çš„é¢‘åº¦,ä»¥åŠå€™é€‰å®ä½“å’Œæºå®ä½“å±æ€§çš„Jaccardç›¸ä¼¼åº¦.<br>$$<br>P(e^t|e^s)=\alpha \frac{count(e^t)}{\sum_{i:e^i\in E}^{N}count(e^i)}+(1-\alpha) \frac{|A^s \bigcap A^t|}{|A^s \bigcup A^t|}<br>$$</p><h5 id="è®¡ç®—ä¸å±æ€§é›†çš„é‡åˆåº¦"><a href="#è®¡ç®—ä¸å±æ€§é›†çš„é‡åˆåº¦" class="headerlink" title="è®¡ç®—ä¸å±æ€§é›†çš„é‡åˆåº¦"></a>è®¡ç®—ä¸å±æ€§é›†çš„é‡åˆåº¦</h5><p>è€ƒè™‘å€™é€‰å®ä½“å±æ€§é›†ä¸æŸ¥è¯¢å±æ€§é›†çš„Jaccardç›¸ä¼¼åº¦.<br>$$<br>P(A|e^t)=\frac{|A^t \cap A|}{|A|}<br>$$</p><h4 id="ç»“æœåˆ†æ"><a href="#ç»“æœåˆ†æ" class="headerlink" title="ç»“æœåˆ†æ"></a>ç»“æœåˆ†æ</h4><table><thead><tr><th>æ–¹æ³•å</th><th>æ–¹æ³•</th></tr></thead><tbody><tr><td>Base_1</td><td>ä¸æ¨æ–­æ¦‚å¿µ,åªè€ƒè™‘å€™é€‰å®ä½“,æºå®ä½“çš„å±æ€§é‡åˆåº¦</td></tr><tr><td>Base_2</td><td>æ¦‚å¿µæ¨æ–­,ä¸è€ƒè™‘å€™é€‰å®ä½“å’ŒæŸ¥è¯¢å±æ€§é›†åˆçš„é‡åˆåº¦</td></tr><tr><td>Base_3</td><td>ä¸æ¨æ–­æ¦‚å¿µ,è€ƒè™‘å€™é€‰å®ä½“å’ŒæŸ¥è¯¢å±æ€§é›†åˆçš„é‡åˆåº¦</td></tr><tr><td>Ad</td><td>æ¦‚å¿µæ¨æ–­,è€ƒè™‘å€™é€‰å®ä½“å’ŒæŸ¥è¯¢å±æ€§é›†åˆçš„é‡åˆåº¦</td></tr></tbody></table><p>1,3éƒ½æ²¡æœ‰æ¨æ–­å®ä½“æ¦‚å¿µ,å¯¼è‡´æ¨èå®ä½“ä¸æœç´¢æ„å›¾æœ‰è¾ƒå¤§å·®è·,3ç”±äºè€ƒè™‘äº†æŸ¥è¯¢é‡åˆåº¦æ•ˆæœæ¯”1å¥½ï¼›</p><p>2,4éƒ½è¿›è¡Œäº†æ¦‚å¿µæ¨æ–­,å¯ä»¥åˆ¤æ–­æœç´¢è€…æ„å›¾,æé«˜äº†å‡†ç¡®ç‡,4ç”±äºè€ƒè™‘äº†æŸ¥è¯¢é‡åˆåº¦æ•ˆæœæ¯”2å¥½ï¼›</p><p>éšç€æŸ¥è¯¢è¾“å…¥çš„å±æ€§å¢å¤š,234æ–¹æ³•çš„ç»“æœéƒ½æœ‰æ‰€æé«˜,è¿™æ˜¯å› ä¸ºæŸ¥è¯¢çš„å±æ€§å¢å¤šæ—¶,å¯ä»¥æ¨æ–­å‡ºå®ä½“æ›´ç»†ç²’åº¦çš„æ¦‚å¿µ,æ›´å¥½åœ°æ¨æ–­æœç´¢è€…çš„æ„å›¾ï¼›</p><p>1æ²¡æœ‰è€ƒè™‘æŸ¥è¯¢å±æ€§,å› æ­¤ç»“æœå¹¶ä¸å› ä¸ºå±æ€§å¢å¤šè€Œæé«˜.</p>]]></content>
      
      
      
        <tags>
            
            <tag> å®ä½“æ’åº </tag>
            
            <tag> ç›¸ä¼¼åº¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çƒ¦</title>
      <link href="/2017/05/17/%E7%83%A6/"/>
      <url>/2017/05/17/%E7%83%A6/</url>
      
        <content type="html"><![CDATA[<p>â€‹å‰å‡ å¹´,æ‰“ç¯®çƒä¹Ÿå†·é™ä¸ä¸‹æ¥çš„æ—¶å€™,ä¼šå»å›´åˆä¸‹é¢ä¹°ä¸ªå¯ä¹,èƒŒèƒŒå•è¯.è¯´æ˜¯ä¸‹é¢å…¶å®æœ‰ç‚¹æç¬‘,æ¯•ç«Ÿä½åœ¨äºŒæ¥¼.ä¸´è¿‘æ¯•ä¸šæœ€çƒ¦çš„æ—¶å€™,ååœ¨ä¹’ä¹“çƒå°ä¸ŠæŠ½çƒŸ.åŸºå‹,è·¯è·¯è¿˜ä»–å¦ˆæ¥å‡‘çƒ­é—¹,ä¸çŸ¥é“ä»–ä»¬æœ‰ä»€ä¹ˆå¥½çƒ¦çš„.æ˜¯å› ä¸ºé€‰æ‹©å¤ªå¤šå˜›?å¾ˆæ°”!!è¿‡ä¸€ä¼š,å¸¦ç€åƒçš„çš„æ¸…åå›æ¥äº†,æ‹›å‘¼è¿‡æ¥æŠ½ä¸€æ ¹.ä¹Ÿè®°ä¸æ¸…ä»–æŠ½æ²¡æŠ½,æ€»ä¹‹å®Œäº†ä¹‹åçƒŸç»™é˜¿å¸ƒäº†,â€å‚»é€¼æ‰æŠ½çƒŸâ€å¥½åƒæ²¡ä»€ä¹ˆæ¯›ç—….</p><span id="more"></span><p>â€‹<img src="/2017/05/17/%E7%83%A6/IMG_2070.JPG" class=""></p><p>â€‹æœ€è¿‘æ¯å¤©éƒ½åœ¨çœ‹paper,çœ‹ä¹¦,å­¦ä¸œè¥¿,å¾ˆå¿™,ä½†æ˜¯å¾ˆéš¾å—.å®Œå…¨å†·é™ä¸ä¸‹æ¥.è‹±è¯­å·²ç»æ˜¯æˆ‘æœ€è®¨åŒçš„ä¸œè¥¿äº†,æ˜ŸæœŸä¸‰æ˜¯æˆ‘æœ€è®¨åŒçš„ä¸€å¤©.å°±æ˜¯ä»Šå¤©äº†!ä¸Šåˆè‹±è¯­è¯¾ä¸‹åˆç»„ä¼š,å…¨ä»–å¦ˆåœ¨æµªè´¹æ—¶é—´.å¿ƒæ€æœ‰ç‚¹å´©,æ„Ÿè§‰è¯»ç ”éƒ½åœ¨æµªè´¹æ—¶é—´äº†.æƒ³æ‰¾äººèŠå¤©,æŠŠé€šè®¯å½•ç¿»æ¥ç¿»å»,ç¿»ç€ç¿»ç€ç¡ç€äº†.å¥½åƒæ€»ä¼šç»™äººå®¶å¸¦å»è´Ÿèƒ½é‡,å¾ˆä¸å¥½æ„æ€.æœ‹å‹åœˆå…³äº†,å¾®åšåˆ äº†,æ¸¸æˆå¸äº†,ä¸çŸ¥é“èƒ½ä¸èƒ½å¥½ä¸€ç‚¹.</p><p>â€‹å–œæ¬¢ä¸€ä¸ªäººä¸éœ€è¦ç†ç”±å§.</p><p>â€‹æ¯•ç«Ÿæˆ‘ä¹Ÿè¯´ä¸æ¸…å–œæ¬¢ä»€ä¹ˆ.</p><p>â€‹å› ä¸ºå’Œå§‘å¨˜æ²¡ä»€ä¹ˆè¿›å±•,æ‰€ä»¥æ‰çƒ¦å§.</p><p>â€‹åˆšåˆšè¿˜åœ¨æ„Ÿä¼¤è¿‡å»åæ€ç°åœ¨,æ€ä¹ˆçªç„¶å‡ºæ¥ä¸ªå§‘å¨˜,çœŸä»–å¦ˆéº»ç“œå•Šæˆ‘.</p><p>â€‹è¯»paperçš„æ—¶å€™,ä¼šçªç„¶å‡ºæ¥ä¸ªå§‘å¨˜.</p><p>â€‹çœ‹ä¹¦çš„æ—¶å€™,ä¼šçªç„¶å‡ºæ¥ä¸ªå§‘å¨˜.</p><p>â€‹å­¦ä¸œè¥¿çš„æ—¶å€™,ä¼šçªç„¶å‡ºæ¥ä¸ªå§‘å¨˜.</p><p>â€‹æ˜¯åŒä¸€ä¸ªå§‘å¨˜.</p><p>â€‹çƒ¦çš„æ—¶å€™,çªç„¶å‡ºæ¥ä¸ªå§‘å¨˜.</p><p>â€‹æœ‰è¿™ç§äº‹å°±å¥½äº†.</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ‚ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºå™¨å­¦ä¹ tips</title>
      <link href="/2017/05/16/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0tips/"/>
      <url>/2017/05/16/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0tips/</url>
      
        <content type="html"><![CDATA[<h3 id="Part-1"><a href="#Part-1" class="headerlink" title="Part 1"></a>Part 1</h3><p>â€œA computer program is said to learn from experience <em>E</em> with respect to some class of tasks <em>T</em> and performance measure <em>P</em> if its performance at tasks in <em>T</em>, as measured by <em>P</em>, improves with experience <em>E</em>.â€</p><p>Machine learning is all about drawing lines through data and we decide what purpose the line services, such as <strong>a decision boundary</strong> in a classification algorithm, or <strong>a predictor</strong> that models real-world behavior. And these lines in turn just come from finding <strong>the minimum of a cost function</strong> using <strong>gradient descent</strong>.<span id="more"></span></p><p>The key to determining what parameters to choose to best approximate the data is to find a way to characterize how â€œwrongâ€ our boundary or predictor is. We do this by using a <strong>cost function</strong> (or a <strong>loss function</strong>).</p><p>The <strong>perceptron algorithm</strong> forms the basis for many modern day ML algorithms, most notably <strong>neural networks</strong>. </p><p>Like neurons, perceptrons take in several inputs and spit out an output. </p><p>We would want to use different weights for each input.</p><p>We use a bias as a measure of how difficult it is for the perceptron to say â€˜yesâ€™ or â€˜noâ€™</p><p>A logistic model can predict probabilities while a perceptron can only predict yes or no.</p><h3 id="Part-2"><a href="#Part-2" class="headerlink" title="Part 2"></a>Part 2</h3><p>A support vector is a vector from the data point with the smallest margin to the decision boundary.</p><p>The idea behind a support vector machine is to classify data by drawing a decision boundary such that it <strong><em>maximizes</em> the support vectors</strong>. By maximizing the support vectors, weâ€™re also maximizing the margins in a data set, and thus the decision boundary is as far away as possible from the data points.</p><p>The SVM algorithm fails when you have a <strong>linearly inseparable</strong> dataset.</p><p>Before, we wanted <em>every single</em> data point to be as far away (to the correct side) from the decision boundary as possible. Now, weâ€™ll allow a data point to stray toward the wrong side of the boundary, but weâ€™ll add a â€œcostâ€ to that happening (remember cost functions from the last post?). This is something that happens very often in machine learning and is called <strong>regularization</strong>.</p><p>You can think of a kernel as mapping a set data from one coordinate system to another coordinate system. In the original coordinate system the data may not be linearly separable at all, whereas in the new coordinate system if we choose the correct kernel, we should get a set a data set is very easily linearly separable.</p><h3 id="Part-3"><a href="#Part-3" class="headerlink" title="Part 3"></a>Part 3</h3><p>A neuron takes in any number of numerical inputs and spits out just one output. To get to this output, the neuron calculates an intermediate value called s by multiplying each input by a different weight, adding them all together, and adding an additional number called the bias.</p><p>An activation function is any function that takes in our s and gives the output of our neuron, called the <strong>activation</strong>.</p><p>Using a step function makes training very difficult because thereâ€™s no way to tell whether the neural network is getting closer or farther from the correct answer.But sigmoid function is a nice activation function because it is smooth everywhere, making it easier to figure out if youâ€™re getting closer to the top.</p><p>Artificial neural network are composed of <strong>layers</strong> of artificial neurons in a similar way. In general, there are three types of layers: an input layer, one or more hidden layers, and an output layer. </p><p>At its very core, training a neural network just means <strong>adjusting the parameters</strong>.</p><p>When the neural network outputs the wrong answer, you find the slopes of the output layer (the domino closest to the marble) first because it was the direct cause of the incorrect answer. And since the output layer depends on the hidden layer, youâ€™ll have to fix that too by finding the slopes and using gradient descent. Eventually youâ€™ll work your way back to the hidden layer closest to the input layer.</p><p>Changing the parameters in one layer will affect the outputs of the next layer which will affect the outputs of the next layer, and so on until the cost function itself is affected.It turns out that once we calculate the slopes of a given layer, we can easily find the slopes of a previous layer.</p><p>We calculate slopes by starting from the back and propagating our algorithm backwards through the neural network until we get all the slopes for gradient descent.This, in a nutshell, is the back-propagation algorithm.</p><h3 id="Part-4"><a href="#Part-4" class="headerlink" title="Part 4"></a>Part 4</h3><p>Todoâ€¦</p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> machine learning </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Logistic Regression</title>
      <link href="/2017/05/15/Logistic-Regression/"/>
      <url>/2017/05/15/Logistic-Regression/</url>
      
        <content type="html"><![CDATA[<img src="/2017/05/15/Logistic-Regression/Logistic-curve.svg.png" class="" title="sigmoidå‡½æ•°æ›²çº¿å›¾"><blockquote><p>Perhaps youâ€™ve seen some data points and then someone <strong>fit</strong> a line called the best-fit line to these points; <em>thatâ€™s regression</em>.What happens in logistic regression is we have a bunch of data, and with the data we try to build an equation to do classification for us. </p><footer><strong>Peter Harrington</strong><cite>Machine Learning in Action</cite></footer></blockquote><h4 id="Classification-with-logistic-regression-and-the-sigmoid-function"><a href="#Classification-with-logistic-regression-and-the-sigmoid-function" class="headerlink" title="Classification with logistic regression and the sigmoid function"></a>Classification with logistic regression and the sigmoid function</h4><p>â€ƒâ€ƒç†æƒ³å‡½æ•°: æ¥æ”¶æ‰€æœ‰ç‰¹å¾,è¿”å›é¢„æµ‹ç±»åˆ«.<span id="more"></span></p><p>â€ƒâ€ƒå¯¹äºä¸€ä¸ªé€»è¾‘å›å½’åˆ†ç±»å™¨,æˆ‘ä»¬åœ¨æ‰€æœ‰çš„ç‰¹å¾ä¸Šä¹˜ä»¥ä¸€ä¸ªå›å½’ç³»æ•°,æ±‚å’Œ,å¸¦å…¥sigmoidå‡½æ•°,è¿”å›ä¸€ä¸ªå±äº[0,1]çš„å€¼.ä»»ä½•å¤§äº0.5çš„æ•°æ®å½’ä¸º1ç±»,å°äº0.5çš„å½’ä¸º0ç±».</p><p>$$<br>\sigma(z)=\frac{1}{1+e^{-z}}<br>$$</p><h4 id="Using-optimization-to-find-the-best-regression-coefficients"><a href="#Using-optimization-to-find-the-best-regression-coefficients" class="headerlink" title="Using optimization to find the best regression coefficients"></a>Using optimization to find the best regression coefficients</h4><p>â€ƒâ€ƒæ¢¯åº¦ä¸Šå‡æ³•åŸºæœ¬æ€æƒ³:è¦æ‰¾åˆ°æŸå‡½æ•°çš„æœ€å¤§å€¼,æœ€å¥½çš„æ–¹æ³•æ˜¯æ²¿ç€è¯¥å‡½æ•°çš„æ¢¯åº¦æ–¹å‘æ¢å¯».</p><p>â€ƒâ€ƒå¯¹äºå‡½æ•°f(x,y),å…¶æ¢¯åº¦å¯ä»¥è¡¨ç¤ºä¸º:<br>$$<br>\nabla f(x,y)=\begin{pmatrix}\frac{\partial f(x,y)}{\partial x}\ \frac{\partial f(x,y)}{\partial y}\end{pmatrix}<br>$$<br>â€ƒâ€ƒè¿­ä»£å…¬å¼å¦‚ä¸‹:<br>$$<br>w:=w+\alpha \nabla _wf(w)<br>$$<br>â€ƒâ€ƒÎ±ç§°ä¸ºæ­¥é•¿,æˆ–è€…å­¦ä¹ ç‡.è¯¥å…¬å¼ä¸€ç›´è¿­ä»£,ç›´åˆ°è¿­ä»£æ¬¡æ•°è¾¾åˆ°è§„å®š,æˆ–è€…ç®—æ³•è¯¯å·®åˆ°è¾¾æŸä¸ªèŒƒå›´.</p><img src="/2017/05/15/Logistic-Regression/ga500.png" class="" title="æ¢¯åº¦ä¸Šå‡è¿­ä»£500æ¬¡å¾—åˆ°çš„decision boundary"><p>â€ƒâ€ƒæ¢¯åº¦ä¸Šå‡ç®—æ³•åœ¨æ¯æ¬¡æ›´æ–°å›å½’ç³»æ•°æ—¶,éƒ½è¦éå†æ•´ä¸ªæ•°æ®é›†.å¦‚æœæ ·æœ¬ç‰¹å¾å’Œæ•°é‡å¾ˆå¤šæ—¶,è®¡ç®—å¤æ‚åº¦å¤ªé«˜.æ”¹è¿›ç­–ç•¥æ˜¯,ä¸€æ¬¡åªç”¨ä¸€ä¸ªç‚¹æ¥æ›´æ–°å›å½’ç³»æ•°,è¯¥æ–¹æ³•ç§°ä¸ºéšæœºæ¢¯åº¦ä¸Šå‡ç®—æ³•.</p><img src="/2017/05/15/Logistic-Regression/sga01.png" class="" title="éšæœºæ¢¯åº¦ä¸Šå‡è¿­ä»£1æ¬¡å¾—åˆ°çš„decision boundary"><p>â€ƒâ€ƒæ•ˆæœæ›´ç³Ÿäº†?ä¸ä¸ä¸.å½“ä½ æ¯”è¾ƒè¿™ä¸¤ç§ä¼˜åŒ–ç®—æ³•æ—¶,ä½ å¿…é¡»ä¿è¯å¾—åˆ°çš„å›å½’ç³»æ•°æ˜¯æ”¶æ•›çš„.That is, are the parameters reaching a steady value, or are they constantly changing?</p><img src="/2017/05/15/Logistic-Regression/sga0200.png" class="" title="éšæœºæ¢¯åº¦ä¸Šå‡è¿­ä»£200æ¬¡å¾—åˆ°çš„decision boundary"><p>â€ƒâ€ƒå¯ä»¥çœ‹å‡º,æ•ˆæœä¸é”™.å¯å¦‚æœä½ æœ‰çœ‹è¿­ä»£è¿‡ç¨‹ä¸­å›å½’ç³»æ•°çš„å˜åŒ–æƒ…å†µ,ä¼šå‘ç°ä¸€äº›å‘¨æœŸæ€§çš„æ³¢åŠ¨.æ ·æœ¬ä¸­ä¸èƒ½åˆ†ç±»çš„ç‚¹(æ•°æ®é›†å¹¶éçº¿æ€§å¯åˆ†)åœ¨æ¯æ¬¡è¿­ä»£æ—¶éƒ½ä¼šå¼•å‘ç³»æ•°çš„å‰§çƒˆæ”¹å˜.<br>â€ƒâ€ƒæˆ‘ä»¬å¸Œæœ›ç®—æ³•èƒ½é¿å…æ¥å›æ³¢åŠ¨,æ›´å¿«åœ°æ”¶æ•›,äºæ˜¯æœ‰äº†æ”¹è¿›çš„éšæœºæ¢¯åº¦ä¸Šå‡ç®—æ³•:<br>â€ƒâ€ƒ1. æ­¥é•¿ä¸å†ä¸€æˆä¸å˜<br>â€ƒâ€ƒ2. éšæœºé€‰å–æ ·æœ¬æ›´æ–°å›å½’ç³»æ•°,é€‰è¿‡çš„æ ·æœ¬ä¸¢å¼ƒ<br>    éå†20æ¬¡çš„æ—¶å€™ç³»æ•°åŸºæœ¬ä¸Šå°±å·²ç»æ”¶æ•›äº†.ä»£ç ä¸­ç»™çš„é»˜è®¤è¿­ä»£æ¬¡æ•°æ˜¯150æ¬¡.<br>    <img src="/2017/05/15/Logistic-Regression/sga120.png" class="" title="æ”¹è¿›éšæœºæ¢¯åº¦ä¸Šå‡è¿­ä»£20æ¬¡å¾—åˆ°çš„decision boundary"><br>    <img src="/2017/05/15/Logistic-Regression/sga1150.png" class="" title="æ”¹è¿›éšæœºæ¢¯åº¦ä¸Šå‡è¿­ä»£150æ¬¡å¾—åˆ°çš„decision boundary"></p><p>â€ƒâ€ƒä»£ç é“¾æ¥<br><a href="https://github.com/yikayiyo/machinelearninginaction/blob/master/Ch05/logRegres.py">https://github.com/yikayiyo/machinelearninginaction/blob/master/Ch05/logRegres.py</a></p><h4 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h4><p>â€ƒâ€ƒé€»è¾‘å›å½’çš„ç›®çš„æ˜¯æ‰¾éçº¿æ€§å‡½æ•°sigmoidçš„æœ€ä½³æ‹Ÿåˆå‚æ•°.<br>â€ƒâ€ƒä¸ºæ‰¾æœ€ä½³,æœ€å¸¸ç”¨çš„æ˜¯æ¢¯åº¦ä¸Šå‡æ³•.<br>â€ƒâ€ƒç®€åŒ–ç‰ˆæœ¬ä¸ºéšæœºæ¢¯åº¦ä¸Šå‡ç®—æ³•,å ç”¨æ›´å°‘çš„è®¡ç®—æœºèµ„æº,æ˜¯ä¸€ä¸ªåœ¨çº¿ç®—æ³•.<br>â€ƒâ€ƒé€šè¿‡è°ƒæ•´æ­¥é•¿å’Œæ ·æœ¬é€‰å–æ–¹å¼å¯ä»¥ç»§ç»­æ”¹è¿›ç®—æ³•.</p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> machine learning </tag>
            
            <tag> classification </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Generative Model</title>
      <link href="/2017/05/10/Generative%20Model/"/>
      <url>/2017/05/10/Generative%20Model/</url>
      
        <content type="html"><![CDATA[<h2 id="Classification"><a href="#Classification" class="headerlink" title="Classification"></a>Classification</h2><p>â€‹è¾“å…¥ä¸€äº›å±æ€§(input sth),ç»è¿‡ä¸€ä¸ªfunctionå¤„ç†,è¾“å‡ºä¸€ä¸ªç»“æœ(output sth)ï¼›</p><p>â€‹åŒ…æ‹¬äºŒåˆ†ç±»(Credit sorting)æˆ–è€…å¤šåˆ†ç±»(Handwritten character recognition,face recognition).</p><h3 id="how-to-do-classification"><a href="#how-to-do-classification" class="headerlink" title="how to do classification?"></a>how to do classification?</h3><p>â€‹Binary classification as example: </p><span id="more"></span><p>â€‹traning : Class 1 means the target is 1,Class 2 means the target is -1.<br>â€‹Testing: closer to 1 -&gt; Class 1; closer to -1 -&gt; Class 2.<br>â€‹ç†æƒ³æƒ…å†µä¸‹,æˆ‘ä»¬è¦åšçš„æ˜¯æ‰¾åˆ°Lossæœ€å°çš„functionä½œä¸ºåˆ†ç±»å™¨,Lossæ ¹æ®å…·ä½“æƒ…å†µå®šä¹‰.</p><h4 id="Generative-model"><a href="#Generative-model" class="headerlink" title="Generative model"></a>Generative model</h4><p>â€‹ç”Ÿæˆæ¨¡å‹çš„åšæ³•,è¦æ±‚p(Y|X)å¾—å…ˆä»æ•°æ®ä¸­å­¦ä¹ è”åˆæ¦‚ç‡åˆ†å¸ƒp(Y,X),ç„¶ååˆ©ç”¨è´å¶æ–¯å…¬å¼æ±‚:<br>â€‹<br>$$<br>p(Y|X)={p(Y,X)\over \sum p(Y_i,X)}\tag{1}<br>$$<br>â€‹ä¸¾ä¸ªä¾‹å­,å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰ä¸¤ä¸ªç±»,Class 1å’ŒClass 2,å·²çŸ¥P(C1),P(C2),P(x|C1),P(x|C2).ç°åœ¨å¦‚æœæœ‰x,é‚£å®ƒå±äºæŸä¸€ç±»åˆ«çš„å¯èƒ½æ€§,å¯ç”±ä¸‹é¢çš„å…¬å¼ç®—å‡º:<br>$$<br>p(C_1|x) =\frac {p(C_1,x)}{p(C_1,x)+p(C_2,x)} \ = \frac{p(x|C_1)p(C_1)}{p(x|C_1)p(C_1)+p(x|C_2)p(C_2)}\tag{2}<br>$$</p><h4 id="Maximum-Likelihood"><a href="#Maximum-Likelihood" class="headerlink" title="Maximum Likelihood"></a>Maximum Likelihood</h4><p>â€‹å‡è®¾æ ·æœ¬ç‚¹å‡æ¥è‡ªé«˜æ–¯åˆ†å¸ƒ,æˆ‘ä»¬é¦–å…ˆæ ¹æ®è®­ç»ƒæ•°æ®æ¨å¯¼å‡ºè¿™ä¸ªé«˜æ–¯åˆ†å¸ƒ,ç„¶åå°±å¯ä»¥æ ¹æ®è¿™ä¸ªåˆ†å¸ƒè®¡ç®—æ–°æ ·æœ¬æ¥è‡ªäºè¿™ä¸ªåˆ†å¸ƒçš„æ¦‚ç‡äº†.æ¯”å¦‚è¯´æœ‰,</p><p>$$<br>f_{\mu,\Sigma}(x)=\frac{1}{(2\pi)^{1/2}}\frac{1}{|\Sigma|^{1/2}}\exp \left \lbrace -\frac12(x-\mu)^T \Sigma^{-1} (x-\mu) \right\rbrace\tag{3}<br>$$</p><p>$$<br>\mathrm {the\ function\ determines\ by\ mean\ \mu \ and\ covariance\ matrix\ \Sigma}<br>$$<br>å…¶å®ä»»ä½•ä¸€ä¸ªé«˜æ–¯åˆ†å¸ƒéƒ½å¯ä»¥äº§ç”Ÿè¿™äº›æ ·æœ¬ç‚¹,åªæ˜¯å¯èƒ½æ€§çš„å¤§å°ä¸åŒç½¢äº†(Diffierent Likelyhood.æˆ‘ä»¬çš„ç›®æ ‡æ˜¯,æ‰¾åˆ°æœ€å¯èƒ½äº§ç”Ÿè¿™äº›æ ·æœ¬ç‚¹çš„åˆ†å¸ƒ(å³æ±‚å‡ºå‚æ•°).<br>å…¶ä¸­Likelyhood of a Gaussian = the probability of the Gaussian samples x1,x2,â€¦,xN,è®°ä½œ:<br>$$<br>L(\mu,\Sigma)=\prod_{i=1}^Nf(x^i)\tag{4}<br>$$</p><p>æ ¹æ®maximum likelyhoodæœ‰:<br>$$<br>{\mu^*,\Sigma^*}=arg \max_{\mu,\Sigma} L(\mu,\Sigma)\tag{5}<br>$$</p><p>è®¡ç®—æ—¶,æ ¹æ®ä¸‹é¢çš„å¼å­æ±‚è§£:<br>$$<br>\mu^*=\frac1N \sum_{i=1}^{N}x^i\tag{6}<br>$$</p><p>$$<br>\Sigma^*=\frac1N \sum_{i=1}^{N}{(x^i-\mu^*)(x^i-\mu^*)^T}\tag{7}<br>$$</p><h4 id="Now-we-can-do-classification"><a href="#Now-we-can-do-classification" class="headerlink" title="Now we can do classification"></a>Now we can do classification</h4><p>ç°åœ¨æˆ‘ä»¬æœ‰äº†:<br>$$<br>f_{\mu^1,\Sigma^1}(x) = p(x|C_1)\tag{8.1}<br>$$</p><p>$$<br>f_{\mu^2,\Sigma^2}(x) = p(x|C_2)\tag{8.2}<br>$$</p><p>$$<br>p(C1)=\frac{count(C1)}{count(C1)+count(C2)}\tag{8.3}<br>$$</p><p>$$<br>p(C2)=\frac{count(C2)}{count(C1)+count(C2)}\tag{8.4}<br>$$</p><p>å°†(8)å¼ä»£å…¥(2)å¼å°±å¾—åˆ°äº†p=P(C1|x),å¦‚æœp&gt;0.5,xå±äºclass 1,åä¹‹å±äºclass 2.<br>è¿™é‡Œæˆ‘ä»¬å‡è®¾æ•°æ®åˆ†å¸ƒæ»¡è¶³é«˜æ–¯åˆ†å¸ƒ,å½“ç„¶ä¹Ÿå¯ä»¥æ˜¯å…¶å®ƒåˆ†å¸ƒ!!</p><h4 id="Posterior-Probability"><a href="#Posterior-Probability" class="headerlink" title="Posterior Probability"></a>Posterior Probability</h4><p>åœ¨è´å¶æ–¯ç»Ÿè®¡ä¸­ï¼Œä¸€ä¸ªéšæœºäº‹ä»¶æˆ–è€…ä¸€ä¸ªä¸ç¡®å®šäº‹ä»¶çš„åéªŒæ¦‚ç‡æ˜¯åœ¨è€ƒè™‘å’Œç»™å‡ºç›¸å…³è¯æ®æˆ–æ•°æ®åæ‰€å¾—åˆ°çš„æ¡ä»¶æ¦‚ç‡ã€‚<br>ä¸‹é¢æ˜¯æ¯”è¾ƒæœ‰è¶£çš„ä¸€ä»¶äº‹:<br>$$<br>p(C_1|x)={p(x|C_1)p(C_1)\over p(x|C_1)p(C_1)+p(x|C_2)p(C_2)}=\frac{1}{1+\frac{P(x|C_2)P(C_2)}{P(x|C_1)(C_1)}}=\frac{1}{1+\exp(-z)}=\sigma(z),è¿™é‡Œæœ‰z=\ln \frac{P(x|C_1)P(C_1)}{P(x|C_2)P(C_2)}<br>\tag{9}<br>$$<br>Sigmoidå‡½æ•°!æˆ‘ç¡®å®æ˜¯åœ¨å­¦æœºå™¨å­¦ä¹ !<br>å°†(3)(8)å¸¦å…¥(9)ä¸­,æœ‰<br>$$<br>z=\ln \frac{P(x|C_1)}{P(x|C_2)}+\ln \frac{P(C_1)}{P(C_2)}=\ln \frac{|\Sigma^2|^{0.5}}{|\Sigma^1|^{0.5}}-\frac12x^T(\Sigma^1)^{-1}x+\frac12x^T(\Sigma^2)^{-1}x-\frac12(\mu^1)^T(\Sigma^1)^{-1}\mu^1+\frac12(\mu^2)^T(\Sigma^2)^{-1}\mu^2+\ln \frac{count(C_1)}{count(C_1)}<br>$$<br>å¦‚æœcovariance matrixç›¸åŒ,åˆ™æœ‰,<br>$$<br>z=(\mu^1-\mu^2)^T\Sigma^{-1}x-\frac12(\mu^1)^T\Sigma^{-1}\mu^1+\frac12(\mu^2)^T\Sigma^{-1}\mu^2+\ln \frac{count(C_1)}{count(C_1)}=\omega^Tx+b,å…¶ä¸­,\omega^T=(\mu^1-\mu^2)^T\Sigma^{-1},b=-\frac12(\mu^1)^T\Sigma^{-1}\mu^1+\frac12(\mu^2)^T\Sigma^{-1}\mu^2+\ln \frac{count(C_1)}{count(C_1)}<br>\tag{10}<br>$$</p><p>$$<br>\left[\ \mathbf {in \ generative \ model \ , we \ estimate\ count(C_1),\ count(C_2),\mu^1,\mu^2,\Sigma,then\ we\ have \ \omega \ and\ b}\ \right]<br>$$</p><p>ç›´æ¥æ±‚wå’Œbä¼šæ€ä¹ˆæ ·?ä¹Ÿå°±æ˜¯æ‰€è°“çš„Logistic Regressionæ¨¡å‹äº†!</p><p>å‚è€ƒ<a href="https://www.youtube.com/watch?v=fZAZUYEeIMg">https://www.youtube.com/watch?v=fZAZUYEeIMg</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> machine learning </tag>
            
            <tag> classification </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>what`s overfitting in machine learning</title>
      <link href="/2017/04/30/what-s-overfitting-in-machine-learning/"/>
      <url>/2017/04/30/what-s-overfitting-in-machine-learning/</url>
      
        <content type="html"><![CDATA[<h4 id="è¿‡æ‹Ÿåˆ-æ¬ æ‹Ÿåˆ"><a href="#è¿‡æ‹Ÿåˆ-æ¬ æ‹Ÿåˆ" class="headerlink" title="è¿‡æ‹Ÿåˆ?æ¬ æ‹Ÿåˆ?"></a>è¿‡æ‹Ÿåˆ?æ¬ æ‹Ÿåˆ?</h4><p>â€‹ ä¸€èˆ¬æƒ…å†µæˆ‘ä»¬æŠŠå­¦ä¹ å™¨åœ¨è®­ç»ƒé›†ä¸Šçš„è¯¯å·®ç§°ä¸ºâ€™è®­ç»ƒè¯¯å·®â€™(training error),åœ¨æ–°æ ·æœ¬ä¸Šçš„è¯¯å·®ç§°ä¸ºâ€™æ³›åŒ–è¯¯å·®â€™(generalization error).è€Œæœºå™¨å­¦ä¹ çš„ç›®çš„æ˜¯å¾—åˆ°æ³›åŒ–è¯¯å·®å°çš„å­¦ä¹ å™¨.</p><p>â€‹ ä¸ºäº†å¾—åˆ°æ€§èƒ½è¾ƒå¥½çš„å­¦ä¹ å™¨,æˆ‘ä»¬å°½å¯èƒ½å¤šåœ°å­¦ä¹ é€‚ç”¨äºæ‰€æœ‰æ½œåœ¨æ ·æœ¬çš„æ™®éè§„å¾‹.(è€ƒè™‘å¾—å°½å¯èƒ½çš„å¤š)</p><p>â€‹ ç„¶è€Œ,å½“å­¦ä¹ å™¨æŠŠè®­ç»ƒæ ·æœ¬å­¦ä¹ å¾—â€™å¤ªå¥½â€™çš„æ—¶å€™,å¾ˆæœ‰å¯èƒ½æŠŠè®­ç»ƒæ ·æœ¬æœ¬èº«çš„ä¸€äº›ç‰¹ç‚¹å½“æˆäº†æ‰€æœ‰æ½œåœ¨æ ·æœ¬éƒ½ä¼šæœ‰çš„ä¸€èˆ¬æ€§è´¨.è¿™æ ·çš„å­¦ä¹ å™¨æ³›åŒ–æ€§èƒ½ä¸‹é™äº†,è¿™å°±æ˜¯â€™è¿‡æ‹Ÿåˆâ€™.ä¸ä¹‹ç›¸å¯¹çš„â€™æ¬ æ‹Ÿåˆâ€™,æŒ‡å¯¹è®­ç»ƒæ ·æœ¬çš„ä¸€èˆ¬æ€§è´¨å°šæœªå­¦å¥½.ä¸‹å›¾ä¸­çš„ 1,3 åˆ†åˆ«è¡¨ç¤ºäº†æ¬ æ‹Ÿåˆå’Œè¿‡æ‹Ÿåˆ.</p><span id="more"></span><img src="/2017/04/30/what-s-overfitting-in-machine-learning/underfitting_overfitting_001.png" class="" title="å›¾ç¤º"><p>(A more complex model yields lower error on training data.(if we can truly find the best function)But a more complex model does not always lead to better performance on testing data.This is <strong>Overfitting</strong>.)</p><hr><h4 id="å‘ç”ŸåŸå› "><a href="#å‘ç”ŸåŸå› " class="headerlink" title="å‘ç”ŸåŸå› ?"></a>å‘ç”ŸåŸå› ?</h4><h5 id="å¯¹äºè¿‡æ‹Ÿåˆ"><a href="#å¯¹äºè¿‡æ‹Ÿåˆ" class="headerlink" title="å¯¹äºè¿‡æ‹Ÿåˆ:"></a>å¯¹äºè¿‡æ‹Ÿåˆ:</h5><p>â€‹ (1) è®­ç»ƒ<strong>æ•°æ®</strong>æœ‰å™ªå£° (2) è®­ç»ƒ<strong>æ¨¡å‹</strong>è¿‡åº¦å¤æ‚</p><h5 id="å¯¹äºæ¬ æ‹Ÿåˆ"><a href="#å¯¹äºæ¬ æ‹Ÿåˆ" class="headerlink" title="å¯¹äºæ¬ æ‹Ÿåˆ:"></a>å¯¹äºæ¬ æ‹Ÿåˆ:</h5><p>â€‹ (1) è®­ç»ƒ<strong>æ¨¡å‹</strong>è¿‡åº¦ç®€å•</p><hr><h4 id="å¦‚ä½•å…‹æœ"><a href="#å¦‚ä½•å…‹æœ" class="headerlink" title="å¦‚ä½•å…‹æœ?"></a>å¦‚ä½•å…‹æœ?</h4><h5 id="å¯¹äºæ¬ æ‹Ÿåˆ-1"><a href="#å¯¹äºæ¬ æ‹Ÿåˆ-1" class="headerlink" title="å¯¹äºæ¬ æ‹Ÿåˆ:"></a>å¯¹äºæ¬ æ‹Ÿåˆ:</h5><p>â€‹ å¢å¼ºå­¦ä¹ èƒ½åŠ›,é‡æ–°è®¾è®¡æ¨¡å‹:</p><p>â€‹ æ¯”å¦‚åœ¨å†³ç­–æ ‘å­¦ä¹ ä¸­æ‹“å±•åˆ†æ”¯,åœ¨ç¥ç»ç½‘ç»œå­¦ä¹ ä¸­å¢åŠ è®­ç»ƒè½®æ•°ç­‰ï¼›</p><h5 id="å¯¹äºè¿‡æ‹Ÿåˆ-1"><a href="#å¯¹äºè¿‡æ‹Ÿåˆ-1" class="headerlink" title="å¯¹äºè¿‡æ‹Ÿåˆ:"></a>å¯¹äºè¿‡æ‹Ÿåˆ:</h5><p>â€‹ é¦–å…ˆå¿…é¡»è®¤è¯†åˆ°è¿‡æ‹Ÿåˆæ˜¯æ— æ³•é¿å…çš„,æˆ‘ä»¬èƒ½åšåˆ°åªèƒ½æ˜¯**â€ç¼“è§£â€**!</p><p>â€‹ å¯ä»¥è€ƒè™‘çš„æ˜¯: (1)æ›´å¤šçš„è®­ç»ƒæ•°æ® (æœ‰æ•ˆä½†æ˜¯å¹¶ä¸æ€»æ˜¯å¯è¡Œ) (2)æ­£åˆ™åŒ–</p>]]></content>
      
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> machine learning </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonè¿­ä»£å™¨(2)</title>
      <link href="/2017/04/19/python%E8%BF%AD%E4%BB%A3%E5%99%A8-2/"/>
      <url>/2017/04/19/python%E8%BF%AD%E4%BB%A3%E5%99%A8-2/</url>
      
        <content type="html"><![CDATA[<p>æ˜¨å¤©çš„é—®é¢˜è§£å†³äº†   -   -</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>i.__iter__()</span><br><span class="line">&lt;listiterator <span class="built_in">object</span> at <span class="number">0x7f5f9d3f2310</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i.__iter__()</span><br><span class="line">&lt;listiterator <span class="built_in">object</span> at <span class="number">0x7f5f9d3f22d0</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i.__iter__()</span><br><span class="line">&lt;listiterator <span class="built_in">object</span> at <span class="number">0x7f5f9d3f2350</span>&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>æ¯æ¬¡è°ƒç”¨ ***i._<em>iter</em>_()<em><strong>æ—¶æ€»ä¼šäº§ç”Ÿæ–°çš„iteratorå¯¹è±¡,è¿™æ ·è°ƒç”¨</strong></em>next()***æ—¶æ‰ä¼šæ€»æ˜¯è¾“å‡º1.</p><p>å»éº»çƒ¦äº†ä¸€ä¸‹å¤–å›½æœ‹å‹,é¡ºä¾¿å†™äº†å†™è‹±æ–‡ : )</p><p>æˆ‘ä¹‹å‰ä¸ºä»€ä¹ˆä¼šè§‰å¾—å››æ¬¡è°ƒç”¨æ˜¯ä½œç”¨åœ¨åŒä¸€ä¸ªå¯¹è±¡ä¸Šçš„å‘¢? å°´å°¬ -  -</p><p>[<a href="http://stackoverflow.com/questions/43487625/what-happend-when-i-assign-an-iterator-to-a-variable]">http://stackoverflow.com/questions/43487625/what-happend-when-i-assign-an-iterator-to-a-variable]</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è¿­ä»£å™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonè¿­ä»£å™¨(1)</title>
      <link href="/2017/04/18/python%E8%BF%AD%E4%BB%A3%E5%99%A8-1/"/>
      <url>/2017/04/18/python%E8%BF%AD%E4%BB%A3%E5%99%A8-1/</url>
      
        <content type="html"><![CDATA[<p>é€‰ç”¨ä¸€ä¸ªå¯è¿­ä»£çš„åˆ—è¡¨å¯¹è±¡å®éªŒ:</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>i=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> t <span class="keyword">in</span> i:</span><br><span class="line">  <span class="built_in">print</span> t</span><br><span class="line"></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i.__iter__</span><br><span class="line">&lt;method-wrapper <span class="string">'__iter__'</span> of <span class="built_in">list</span> <span class="built_in">object</span> at <span class="number">0x04040378</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i.__iter__()</span><br><span class="line">&lt;listiterator <span class="built_in">object</span> at <span class="number">0x040561F0</span>&gt;</span><br></pre></td></tr></tbody></table></figure><p>ä»ä¸Šé¢çš„ä»£ç å¯çŸ¥:</p><p>â€‹<strong>å¯è¿­ä»£å¯¹è±¡å®ç°äº†__iter__æ–¹æ³•</strong>æˆ–ä¸€ä¸ªå®ç°äº†__iter__æ–¹æ³•çš„å¯¹è±¡æ˜¯å¯è¿­ä»£çš„(iterable);</p><p>â€‹<strong>å¯è¿­ä»£å¯¹è±¡è°ƒç”¨__iter__æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨(iterator)</strong></p><p>æ¥ä¸‹æ¥ç»§ç»­å®éªŒ:</p><span id="more"></span><p>â€‹ä¹¦ä¸­è¯´åˆ°,æ‰€è°“çš„è¿­ä»£å™¨å°±æ˜¯å…·æœ‰next()æ–¹æ³•çš„å¯¹è±¡,è°ƒç”¨next()æ–¹æ³•ä¼šè¿”å›è¯¥å¯¹è±¡çš„ä¸‹ä¸€ä¸ªå€¼,å¦‚æœè¯¥æ–¹æ³•è¢«è°ƒç”¨,ä½†æ˜¯è¿­ä»£å™¨æ²¡æœ‰å€¼å¯ä»¥è¿”å›,å°±ä¼šå¼•å‘ä¸€ä¸ªStopIterationå¼‚å¸¸.</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>i.__iter__().<span class="built_in">next</span>()</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i.__iter__().<span class="built_in">next</span>()</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i.__iter__().<span class="built_in">next</span>()</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i.__iter__().<span class="built_in">next</span>()</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></tbody></table></figure><p>å¹¶æ²¡æœ‰æŒ‰ç…§æˆ‘çš„æƒ³æ³•æ‰“å°å‡º1,2,3,4.</p><p>å°è¯•ä¸‹é¢çš„ä»£ç :</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ite=i.__iter__()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ite</span><br><span class="line">&lt;listiterator <span class="built_in">object</span> at <span class="number">0x040564F0</span>&gt;</span><br><span class="line">&gt;&gt;&gt;ite.<span class="built_in">next</span>()</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ite.<span class="built_in">next</span>()</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ite.<span class="built_in">next</span>()</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ite.<span class="built_in">next</span>()</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ite.<span class="built_in">next</span>()</span><br><span class="line"></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;pyshell#23&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    ite.<span class="built_in">next</span>()</span><br><span class="line">StopIteration</span><br></pre></td></tr></tbody></table></figure><p>åŸå› è¿˜æ²¡æƒ³åˆ°å•Šâ€¦</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> è¿­ä»£å™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¼€ç¯‡</title>
      <link href="/2017/04/04/%E5%BC%80%E7%AF%87/"/>
      <url>/2017/04/04/%E5%BC%80%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<p>â€ƒâ€ƒæ˜¨å¤©çœ‹äº†ä¸­å­¦ç”Ÿçš„ä¸€ç¯‡ä½œæ–‡ï¼Œæ˜¯ç»™æœªæ¥è‡ªå·±çš„ä¸€äº›è¯ã€‚è™½ç„¶æ„Ÿè§‰å¥¹æ·±å—ç½‘ç»œæ–‡å­¦å½±å“ï¼Œä½†å­—é‡Œè¡Œé—´å¯¹æœªæ¥çš„å‘å¾€å´å«æˆ‘è¿™ä¸ªè€å¹´äººç™¾æ„Ÿäº¤é›†äº†ã€‚<br>â€ƒâ€ƒæ¥è¿™é‡Œå†™ç‚¹ä»€ä¹ˆï¼Œå¯èƒ½åä¸ªæ§½ï¼Œå¯èƒ½è€ä¸ªæœºçµï¼Œå¯èƒ½ç¿»è¯‘ä¸ªä¸œè¥¿ï¼Œä¹Ÿä¼šæŠŠå­¦ä¹ ç¬”è®°æ•´ç†ä¸Šæ¥ã€‚<br>â€ƒâ€ƒå¸Œæœ›å¤šå¹´ä¹‹åï¼Œè¿˜èƒ½çœ‹å¾—æ‡‚è‡ªå·±ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æ‚ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
