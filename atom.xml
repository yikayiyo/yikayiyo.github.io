<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Misbehavior</title>
  
  
  <link href="https://yikayiyo.github.io/atom.xml" rel="self"/>
  
  <link href="https://yikayiyo.github.io/"/>
  <updated>2023-11-22T10:18:22.751Z</updated>
  <id>https://yikayiyo.github.io/</id>
  
  <author>
    <name>yikayiyo</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ä¸€ç‚¹æ€ç´¢</title>
    <link href="https://yikayiyo.github.io/2023/01/17/%E4%B8%80%E7%82%B9%E6%80%9D%E7%B4%A2/"/>
    <id>https://yikayiyo.github.io/2023/01/17/%E4%B8%80%E7%82%B9%E6%80%9D%E7%B4%A2/</id>
    <published>2023-01-17T13:22:33.000Z</published>
    <updated>2023-11-22T10:18:22.751Z</updated>
    
    <content type="html"><![CDATA[<p>å‰å‡ å¤©çš„ä¸€ä¸ªæ™šä¸Šï¼Œå¿ƒé‡Œçªç„¶æ„Ÿè§‰å¾ˆä¸èˆ’æœï¼Œä¹Ÿä¸çŸ¥é“å•¥åŸå› ï¼Œå°±æ‹‰æœ‹å‹è§†é¢‘äº†ä¸€å°ä¼šå„¿ã€‚</p><p>åŠå¤œçªç„¶é†’æ¥ï¼Œæƒ³èµ·äº†åŸå› ã€‚</p><p>åŸæ¥æ˜¯å› ä¸ºå¹¿å·æ’äººçš„è§†é¢‘ã€‚</p><p>å¾ˆéš¾å—ã€‚</p><p>æœ¬æ¥åœ¨å»è´­ç‰©è·¯ä¸Šçš„äººï¼Œæœ¬æ¥åœ¨å»çœ‹æœ›æœ‹å‹è·¯ä¸Šçš„äººï¼Œæœ¬æ¥åœ¨å»è§æ‹äººè·¯ä¸Šçš„äººã€‚æœ¬æ¥å°±æ˜¯å¦‚å¸¸è¿‡é©¬è·¯çš„äººï¼Œäººç”Ÿå°±è¿™æ ·ç»“æŸäº†ï¼Œç•™ç»™äº²äººæœ‹å‹çš„ç—›è‹¦å´ä»è¦æŒç»­å¾ˆé•¿æ—¶é—´ã€‚å¿ä¸ä½è¦é—®ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿç”Ÿå‘½å¯ä»¥å†ä¸å…¬å¹³äº›ä¹ˆï¼Ÿ</p><p>æ²¡ä»€ä¹ˆæ–°é—»æŠ¥å¯¼ï¼Œèº«è¾¹ä¹Ÿæ²¡äººæèµ·ã€‚</p><p>ä»Šå¤©ä»¥åŠä»Šå¤©ä¹‹å‰ï¼Œæ¯å¤©éƒ½èƒ½è§åˆ°çš„è¿™äº›äººï¼Œå¯èƒ½ä»æ˜å¤©å¼€å§‹å°±å†ä¹Ÿè§ä¸åˆ°äº†ã€‚</p><p>åœ¨åˆ†å¼€ä¹‹å‰ï¼Œæˆ‘å¹¶æ²¡æœ‰çæƒœæˆ‘ä»¬ç›¸å¤„çš„æ—¶é—´ã€‚</p><p>æ²¡æœ‰å¯’æš„é—®å€™ï¼Œæ²¡æœ‰è®¤çœŸæ³¨è§†ï¼Œæ²¡æœ‰ä»”ç»†è†å¬ï¼Œæ²¡æœ‰åˆ†äº«å¿ƒæƒ…ï¼Œæ²¡æœ‰çº¦è¿‡é¥­ï¼Œæ²¡æœ‰ä¸€èµ·é€›è¡—ï¼Œæ²¡æœ‰åƒéå°åƒæ‘Šï¼Œæ²¡æœ‰ç´§ç´§åœ°æ‹¥æŠ±å½¼æ­¤ã€‚</p><p>ä¸ºä»€ä¹ˆä¸ä¸»åŠ¨åœ°å»èŠèŠå¤©å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸å¥½å¥½çœ‹å¯¹æ–¹çš„è„¸å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸å»åˆ¶é€ ç¾ç»Šå‘¢ï¼Ÿ</p><p>éš¾ä¸æˆæˆ‘æ˜¯ä¸ºäº†é‚£ä¸€å¤©ä¸é‚£ä¹ˆéš¾å—ï¼Œæ•…æ„å’Œæ¯ä¸€ä¸ªäººä¿æŒè·ç¦»ï¼Œæ—¢ç„¶é‚£ä¸€å¤©è¿Ÿæ—©éƒ½ä¼šåˆ°æ¥ã€‚</p><p>å¦‚æœæˆ‘ä¹Ÿæ˜¯é‚£å¤©çš„è·¯äººä¹‹ä¸€å‘¢ï¼Ÿ</p><p>æˆ‘ä¸å¸Œæœ›éš¾è¿‡çš„äººå¯èƒ½éš¾ä»¥æ¥å—äº‹å®ï¼Œæˆ‘å¸Œæœ›ä¸ºæˆ‘ä¼¤å¿ƒçš„äººå¿ƒé‡Œä¼šæœ‰æ³¢æ¾œå—ï¼Ÿ</p><p>æˆ‘æœ‰è¿™ä¸€ä¸çš„å¸Œæœ›ï¼Œç«Ÿç„¶ã€‚</p><p>äººæ­»äº†æˆ–è®¸ä¼šè½¬ç”Ÿæˆä¸€åªç‹—ï¼Œæ¥åˆ°å–œæ¬¢çš„äººèº«è¾¹ã€‚ä¸èƒ½è¯´è¯ï¼Œäºæ˜¯å°±ä½¿åŠ²åœ°å¾€äººèº«ä¸Šæ‰‘ï¼Œä¸€è¾¹å¼€å¿ƒåœ°æ‘‡ç€å°¾å·´ï¼Œä¸€è¾¹å¿ä¸ä½åœ°å“¼å”§ã€‚ç”¨å¤´é¡¶ä½ çš„æ‰‹ï¼Œæ„æ€æ˜¯å¿«æ¥æŠšæ‘¸ã€‚ä½ çœ‹å®ƒä¸€çœ¼ï¼Œå®ƒå°±è¿‡æ¥ç›¯ç€ä½ ï¼Œå¥½åƒè¦å¼¥è¡¥å‰ä¸–æ²¡æœ‰çœ‹å¤Ÿçš„é—æ†¾ã€‚ä½ å¤¸å®ƒä¸€å¥ï¼Œå®ƒå°±ç¬‘äº†ï¼Œä»¿ä½›åœ¨å‘Šè¯‰ä½ ï¼Œå®ƒå¬æ‡‚äº†ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å‰å‡ å¤©çš„ä¸€ä¸ªæ™šä¸Šï¼Œå¿ƒé‡Œçªç„¶æ„Ÿè§‰å¾ˆä¸èˆ’æœï¼Œä¹Ÿä¸çŸ¥é“å•¥åŸå› ï¼Œå°±æ‹‰æœ‹å‹è§†é¢‘äº†ä¸€å°ä¼šå„¿ã€‚&lt;/p&gt;
&lt;p&gt;åŠå¤œçªç„¶é†’æ¥ï¼Œæƒ³èµ·äº†åŸå› ã€‚&lt;/p&gt;
&lt;p&gt;åŸæ¥æ˜¯å› ä¸ºå¹¿å·æ’äººçš„è§†é¢‘ã€‚&lt;/p&gt;
&lt;p&gt;å¾ˆéš¾å—ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ¥åœ¨å»è´­ç‰©è·¯ä¸Šçš„äººï¼Œæœ¬æ¥åœ¨å»çœ‹æœ›æœ‹å‹è·¯ä¸Šçš„äººï¼Œæœ¬æ¥åœ¨å»è§æ‹äººè·¯ä¸Šçš„äºº</summary>
      
    
    
    
    
    <category term="æ‚" scheme="https://yikayiyo.github.io/tags/%E6%9D%82/"/>
    
  </entry>
  
  <entry>
    <title>é‡å†™duozhuavueä¹¦æ¶</title>
    <link href="https://yikayiyo.github.io/2022/03/26/%E9%87%8D%E5%86%99duozhuavue%E4%B9%A6%E6%9E%B6/"/>
    <id>https://yikayiyo.github.io/2022/03/26/%E9%87%8D%E5%86%99duozhuavue%E4%B9%A6%E6%9E%B6/</id>
    <published>2022-03-26T01:16:11.000Z</published>
    <updated>2023-11-22T10:18:22.940Z</updated>
    
    <content type="html"><![CDATA[<a href="/2022/03/14/Apollo%20Client%20%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86%E5%B0%8F%E7%BB%93/" title="Apollo Client ç¼“å­˜å¤„ç†å°ç»“">Apollo Client ç¼“å­˜å¤„ç†å°ç»“</a> ä¸­æåˆ°äº†ä¹¦æ¶åŠŸèƒ½å­˜åœ¨çš„é—®é¢˜ï¼š<p>æ¯ä¸€æœ¬ä¹¦ç±å¯¹åº”ä¸€ä¸ªæŸ¥è¯¢ï¼ˆå³ä¸€ä¸ª HTTP è¯·æ±‚ï¼‰ï¼Œå½“ä»æœªç™»å½•çŠ¶æ€åˆ‡æ¢åˆ°ç™»å½•çŠ¶æ€æ—¶ï¼Œä¸»é¡µæ‰€æœ‰å·²ç»åŠ è½½çš„ä¹¦ç±éƒ½ä¼šå‘é€è¯·æ±‚ï¼Œåˆ¤æ–­å®ƒæ˜¯å¦åœ¨å½“å‰ç”¨æˆ·çš„ä¹¦æ¶ä¸Šã€‚</p><p>ç†æƒ³çš„å®ç°ä¸­ï¼Œåœ¨ç”¨æˆ·ç™»å½•åï¼Œåº”è¯¥åªå‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œç”¨äºè·å–ä¹¦å•ä¿¡æ¯æµã€‚</p><h2 id="æ”¹è¿›"><a href="#æ”¹è¿›" class="headerlink" title="æ”¹è¿›"></a>æ”¹è¿›</h2><h3 id="åç«¯"><a href="#åç«¯" class="headerlink" title="åç«¯"></a>åç«¯</h3><ol><li>å°†æŸ¥è¯¢ <code>isBookInBookshelf</code> ç§»åŠ¨åˆ° <code>Book</code> ç±»å‹ä¸‹</li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bookType = <span class="string">`</span></span><br><span class="line"><span class="string">  type Book {</span></span><br><span class="line"><span class="string">    ...</span></span><br><span class="line"><span class="string">    isBookInBookshelf(userId: ID!): Boolean!</span></span><br><span class="line"><span class="string">  }</span></span><br><span class="line"><span class="string">`</span>;</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>å®ç°è¯¥å­—æ®µçš„ <code>resolver</code> å‡½æ•°</li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bookResolver = {</span><br><span class="line">  ...</span><br><span class="line">  <span class="title class_">Book</span>: {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">isBookInBookshelf</span>: <span class="title function_">async</span>({ id }, { userId } , { models }) =&gt; {</span><br><span class="line">      <span class="keyword">if</span>(userId === <span class="string">""</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">const</span> user = <span class="keyword">await</span> models.<span class="property">User</span>.<span class="title function_">findById</span>(userId);</span><br><span class="line">      <span class="keyword">return</span> user.<span class="property">bookShelf</span>.<span class="title function_">indexOf</span>(id) !== -<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure><span id="more"></span><h3 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h3><ol start="3"><li>ä¿®æ”¹ <code>GET_CATEGORY_FEED schema</code>ï¼Œæ¥æ”¶ <code>userId</code> å‚æ•°ï¼Œè¿”å›çš„ä¹¦ç±ä¸­åŒ…å« <code>isBookInBookshelf</code> å­—æ®µ</li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">GET_CATEGORY_FEED</span> = gql`<span class="language-graphql"></span></span><br><span class="line"><span class="language-graphql">  <span class="keyword">query</span> getCategoryFeed<span class="punctuation">(</span></span></span><br><span class="line"><span class="language-graphql">    <span class="punctuation">...</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$userId</span>: ID<span class="punctuation">!</span></span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">)</span> <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">    categoryFeed<span class="punctuation">(</span><span class="symbol">first</span><span class="punctuation">:</span> <span class="variable">$first</span>, <span class="symbol">after</span><span class="punctuation">:</span> <span class="variable">$after</span>) <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">      pageInfo <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">        hasNextPage</span></span><br><span class="line"><span class="language-graphql">        endCursor</span></span><br><span class="line"><span class="language-graphql">      <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">      edges <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">        node <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">          id</span></span><br><span class="line"><span class="language-graphql">          name</span></span><br><span class="line"><span class="language-graphql">          items<span class="punctuation">(</span><span class="symbol">first</span><span class="punctuation">:</span> <span class="variable">$itemsFirst</span>, <span class="symbol">after</span><span class="punctuation">:</span> <span class="variable">$itemsAfter</span>) <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">            pageInfo <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">              endCursor</span></span><br><span class="line"><span class="language-graphql">              hasNextPage</span></span><br><span class="line"><span class="language-graphql">            <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">            edges <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">              node <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">                id</span></span><br><span class="line"><span class="language-graphql">                <span class="punctuation">...</span></span></span><br><span class="line"><span class="language-graphql">                isBookInBookshelf<span class="punctuation">(</span><span class="symbol">userId</span><span class="punctuation">:</span> <span class="variable">$userId</span>)</span></span><br><span class="line"><span class="language-graphql">              <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">            <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">          <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">        <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">      <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">    <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">`</span>;</span><br></pre></td></tr></tbody></table></figure><ol start="4"><li>åœ¨ç»„ä»¶ä¸­ä¿®æ”¹æŸ¥è¯¢ï¼Œä¼ å…¥å‚æ•° <code>userId</code></li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> userId = <span class="title function_">useLoggedInUserId</span>();</span><br><span class="line"><span class="keyword">const</span> {</span><br><span class="line">  <span class="attr">result</span>: categoryFeedResult,</span><br><span class="line">  <span class="attr">loading</span>: categoryFeedLoading,</span><br><span class="line">  <span class="attr">error</span>: categoryFeedError,</span><br><span class="line">  fetchMore,</span><br><span class="line">  networkStatus,</span><br><span class="line">} = <span class="title function_">useQuery</span>(</span><br><span class="line">  <span class="variable constant_">GET_CATEGORY_FEED</span>,</span><br><span class="line">  <span class="function">() =&gt;</span> ({</span><br><span class="line">    <span class="attr">after</span>: after.<span class="property">value</span>,</span><br><span class="line">    <span class="attr">first</span>: first.<span class="property">value</span>,</span><br><span class="line">    <span class="attr">itemsAfter</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">itemsFirst</span>: <span class="number">3</span>,</span><br><span class="line">    userId</span><br><span class="line">  }),</span><br><span class="line">  {</span><br><span class="line">    <span class="attr">notifyOnNetworkStatusChange</span>: <span class="literal">true</span>,</span><br><span class="line">  }</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure><ol start="5"><li>ä¿®æ”¹ç¼“å­˜çš„å¤„ç†æ–¹å¼</li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cache = <span class="keyword">new</span> <span class="title class_">InMemoryCache</span>({</span><br><span class="line">  <span class="attr">typePolicies</span>: {</span><br><span class="line">    ...</span><br><span class="line">    <span class="title class_">Book</span>: {</span><br><span class="line">      <span class="attr">fields</span>: {</span><br><span class="line">        <span class="attr">isBookInBookshelf</span>: {</span><br><span class="line">          <span class="attr">keyArgs</span>: [<span class="string">"userId"</span>]</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><center style="display: flex; justify-content: space-between;"><div><img src="/2022/03/26/%E9%87%8D%E5%86%99duozhuavue%E4%B9%A6%E6%9E%B6/after.png" class="" width="300" title="ä¿®æ”¹åçš„è¯·æ±‚æ•°é‡"></div><div><img src="/2022/03/26/%E9%87%8D%E5%86%99duozhuavue%E4%B9%A6%E6%9E%B6/cache-after.png" class="" width="300" title="ä¿®æ”¹åçš„ç¼“å­˜"></div></center><ol start="6"><li>ä¿®æ”¹æ·»åŠ ä¹¦ç±æˆ–åˆ é™¤ä¹¦ç±æ—¶çš„é€»è¾‘<br> <strong>ä¹è§‚æ›´æ–°</strong>ï¼šå…ˆä¿®æ”¹å®¢æˆ·ç«¯çŠ¶æ€ï¼Œå†å‘é€ç½‘ç»œè¯·æ±‚ã€‚å¦‚æœè¯·æ±‚å¤±è´¥ï¼Œé‡ç½®å®¢æˆ·ç«¯çŠ¶æ€ã€‚</li></ol><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">addToBookShelf</span> = (<span class="params"></span>) =&gt; {</span><br><span class="line">  <span class="comment">// ä¹è§‚æ›´æ–°ï¼Œå…ˆä¿®æ”¹å®¢æˆ·ç«¯çŠ¶æ€</span></span><br><span class="line">  isInBookshelf.<span class="property">value</span> = !isInBookshelf.<span class="property">value</span>;</span><br><span class="line">  <span class="comment">// å†å‘é€è¯·æ±‚ï¼ˆsend mutation</span></span><br><span class="line">  <span class="title function_">toggleBookshelf</span>();</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> { <span class="attr">mutate</span>: toggleBookshelf, <span class="attr">onDone</span>: onToggle } = <span class="title function_">useMutation</span>(</span><br><span class="line">  <span class="variable constant_">TOGGLE_BOOKSHELF_MUTATION</span>,</span><br><span class="line">  <span class="function">() =&gt;</span> ({</span><br><span class="line">    <span class="attr">variables</span>: {</span><br><span class="line">      <span class="attr">bookId</span>: bookId.<span class="property">value</span>,</span><br><span class="line">      userId,</span><br><span class="line">    },</span><br><span class="line">  })</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="title function_">onToggle</span>(<span class="function">(<span class="params">{ data: { toggleBookshelf } }</span>) =&gt;</span> {</span><br><span class="line">  <span class="keyword">if</span> (toggleBookshelf.<span class="property">success</span> === <span class="literal">true</span>) {</span><br><span class="line">    toast.<span class="title function_">success</span>(toggleBookshelf.<span class="property">message</span>);</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">// è¯·æ±‚å¤±è´¥ï¼Œé‡ç½®å®¢æˆ·ç«¯çŠ¶æ€</span></span><br><span class="line">    isInBookshelf.<span class="property">value</span> = !isInBookshelf.<span class="property">value</span>;</span><br><span class="line">    toast.<span class="title function_">info</span>(toggleBookshelf.<span class="property">message</span>);</span><br><span class="line">  }</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;a href=&quot;/2022/03/14/Apollo%20Client%20%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86%E5%B0%8F%E7%BB%93/&quot; title=&quot;Apollo Client ç¼“å­˜å¤„ç†å°ç»“&quot;&gt;Apollo Client ç¼“å­˜å¤„ç†å°ç»“&lt;/a&gt; ä¸­æåˆ°äº†ä¹¦æ¶åŠŸèƒ½å­˜åœ¨çš„é—®é¢˜ï¼š

&lt;p&gt;æ¯ä¸€æœ¬ä¹¦ç±å¯¹åº”ä¸€ä¸ªæŸ¥è¯¢ï¼ˆå³ä¸€ä¸ª HTTP è¯·æ±‚ï¼‰ï¼Œå½“ä»æœªç™»å½•çŠ¶æ€åˆ‡æ¢åˆ°ç™»å½•çŠ¶æ€æ—¶ï¼Œä¸»é¡µæ‰€æœ‰å·²ç»åŠ è½½çš„ä¹¦ç±éƒ½ä¼šå‘é€è¯·æ±‚ï¼Œåˆ¤æ–­å®ƒæ˜¯å¦åœ¨å½“å‰ç”¨æˆ·çš„ä¹¦æ¶ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;ç†æƒ³çš„å®ç°ä¸­ï¼Œåœ¨ç”¨æˆ·ç™»å½•åï¼Œåº”è¯¥åªå‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œç”¨äºè·å–ä¹¦å•ä¿¡æ¯æµã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ”¹è¿›&quot;&gt;&lt;a href=&quot;#æ”¹è¿›&quot; class=&quot;headerlink&quot; title=&quot;æ”¹è¿›&quot;&gt;&lt;/a&gt;æ”¹è¿›&lt;/h2&gt;&lt;h3 id=&quot;åç«¯&quot;&gt;&lt;a href=&quot;#åç«¯&quot; class=&quot;headerlink&quot; title=&quot;åç«¯&quot;&gt;&lt;/a&gt;åç«¯&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;å°†æŸ¥è¯¢ &lt;code&gt;isBookInBookshelf&lt;/code&gt; ç§»åŠ¨åˆ° &lt;code&gt;Book&lt;/code&gt; ç±»å‹ä¸‹&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; bookType = &lt;span class=&quot;string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;  type Book {&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;    ...&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;    isBookInBookshelf(userId: ID!): Boolean!&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;  }&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;`&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;å®ç°è¯¥å­—æ®µçš„ &lt;code&gt;resolver&lt;/code&gt; å‡½æ•°&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; bookResolver = {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;title class_&quot;&gt;Book&lt;/span&gt;: {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;isBookInBookshelf&lt;/span&gt;: &lt;span class=&quot;title function_&quot;&gt;async&lt;/span&gt;({ id }, { userId } , { models }) =&amp;gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(userId === &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; user = &lt;span class=&quot;keyword&quot;&gt;await&lt;/span&gt; models.&lt;span class=&quot;property&quot;&gt;User&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;findById&lt;/span&gt;(userId);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; user.&lt;span class=&quot;property&quot;&gt;bookShelf&lt;/span&gt;.&lt;span class=&quot;title function_&quot;&gt;indexOf&lt;/span&gt;(id) !== -&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;};&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
    <category term="å‰ç«¯" scheme="https://yikayiyo.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="graphql" scheme="https://yikayiyo.github.io/tags/graphql/"/>
    
    <category term="duozhuavue" scheme="https://yikayiyo.github.io/tags/duozhuavue/"/>
    
  </entry>
  
  <entry>
    <title>Apollo Client ç¼“å­˜å¤„ç†å°ç»“</title>
    <link href="https://yikayiyo.github.io/2022/03/14/Apollo%20Client%20%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86%E5%B0%8F%E7%BB%93/"/>
    <id>https://yikayiyo.github.io/2022/03/14/Apollo%20Client%20%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86%E5%B0%8F%E7%BB%93/</id>
    <published>2022-03-14T14:01:27.000Z</published>
    <updated>2023-11-22T10:18:22.687Z</updated>
    
    <content type="html"><![CDATA[<p>è®°å½•å¼€å‘ <a href="https://duozhuavue.vercel.app/book">duozhuavueğŸ’š</a> æ—¶å¯¹ <a href="https://www.apollographql.com/docs/react/caching/overview/">Apollo Client</a> ç¼“å­˜çš„å¤„ç†æ–¹æ³•ã€‚</p><h2 id="ä¸ºä»€ä¹ˆè¦å¤„ç†ç¼“å­˜ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦å¤„ç†ç¼“å­˜ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å¤„ç†ç¼“å­˜ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦å¤„ç†ç¼“å­˜ï¼Ÿ</h2><p>ä¿®æ”¹æ•°æ®åï¼Œå¦‚æœä¸å¯¹ç¼“å­˜ä¸­çš„æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œé‚£ä¹ˆä¼šé€ æˆæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯çš„<strong>æ•°æ®ä¸ä¸€è‡´</strong>ï¼Œä¿®æ”¹ä¹Ÿä¸èƒ½åœ¨å‰ç«¯å¾—åˆ°ä½“ç°ã€‚</p><p>åœ¨ <a href="https://duozhuavue.vercel.app/book">duozhuavueğŸ’š</a> ä¸­ï¼Œéœ€è¦å¤„ç†ç¼“å­˜çš„åœ°æ–¹æœ‰ä¹¦ç±è¯„è®ºï¼Œç”¨æˆ·ä¹¦æ¶ï¼Œä¸»é¡µä¿¡æ¯æµåˆ†é¡µã€‚</p><h2 id="ç¼“å­˜å¤„ç†æ–¹æ³•"><a href="#ç¼“å­˜å¤„ç†æ–¹æ³•" class="headerlink" title="ç¼“å­˜å¤„ç†æ–¹æ³•"></a>ç¼“å­˜å¤„ç†æ–¹æ³•</h2><p> <a href="https://www.apollographql.com/docs/react/caching/overview/">Apollo Client</a> æä¾›äº†å‡ ç§æ–¹å¼ä¸ç¼“å­˜æ•°æ®äº¤äº’</p><ul><li><a href="https://www.apollographql.com/docs/react/caching/cache-interaction#using-graphql-queries">ä½¿ç”¨ GraphQL queries</a></li><li><a href="https://www.apollographql.com/docs/react/caching/cache-interaction#using-graphql-fragments">ä½¿ç”¨ GraphQL fragments</a></li><li><a href="https://www.apollographql.com/docs/react/caching/cache-interaction#using-cachemodify">ç›´æ¥ä¿®æ”¹ç¼“å­˜å¯¹è±¡çš„å­—æ®µ</a></li><li><a href="https://www.apollographql.com/docs/react/caching/cache-field-behavior">é…ç½®ç¼“å­˜å­—æ®µç­–ç•¥</a></li></ul><p>ç»“åˆå¼€å‘è¿‡ç¨‹ä¸­çš„å…·ä½“æƒ…å†µï¼Œå¤„ç†ç¼“å­˜æ•°æ®æ—¶å¯ä»¥é‡‡å–ä¸åŒçš„æ–¹å¼ã€‚</p><h2 id="ä¹¦ç±è¯„è®º"><a href="#ä¹¦ç±è¯„è®º" class="headerlink" title="ä¹¦ç±è¯„è®º"></a>ä¹¦ç±è¯„è®º</h2><h3 id="åç«¯å®šä¹‰"><a href="#åç«¯å®šä¹‰" class="headerlink" title="åç«¯å®šä¹‰"></a>åç«¯å®šä¹‰</h3><p>åç«¯ä»£ç ä¸­ <code>Book</code> çš„ <code>schema</code> å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Book</span> {</span><br><span class="line">  <span class="attr">id</span>: <span class="variable constant_">ID</span>!</span><br><span class="line">  <span class="attr">title</span>: <span class="title class_">String</span>!</span><br><span class="line">    ...</span><br><span class="line">  <span class="attr">comments</span>: [<span class="title class_">Comment</span>!]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>æœ‰ç”¨çš„ä¿¡æ¯æ˜¯ï¼Œ<code>Book</code> çš„ <code>comments</code> å­—æ®µè¿”å›è¯¥ä¹¦çš„è¯„è®ºåˆ—è¡¨ã€‚</p><span id="more"></span><p>å’Œè¯„è®ºç›¸å…³çš„å‡ ä¸ª <code>mutation</code> å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Mutation</span>{</span><br><span class="line">    ...</span><br><span class="line">    <span class="title function_">addComment</span>(<span class="attr">bookId</span>: <span class="variable constant_">ID</span>!, <span class="attr">userId</span>: <span class="variable constant_">ID</span>!, <span class="attr">content</span>: <span class="title class_">String</span>!, <span class="attr">rating</span>: <span class="title class_">Int</span>, <span class="attr">created</span>: <span class="title class_">DateTime</span>!): addCommentResponse!</span><br><span class="line">    <span class="title function_">deleteComment</span>(<span class="attr">bookId</span>: <span class="variable constant_">ID</span>!, <span class="attr">commentId</span>: <span class="variable constant_">ID</span>!): deleteCommentResponse!</span><br><span class="line">    <span class="title function_">updateComment</span>(<span class="attr">commentId</span>: <span class="variable constant_">ID</span>!, <span class="attr">rating</span>: <span class="title class_">Int</span>!, <span class="attr">content</span>: <span class="title class_">String</span>, <span class="attr">updatedAt</span>: <span class="title class_">DateTime</span>!): updateCommentResponse!</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">type addCommentResponse implements <span class="title class_">MutationResponse</span> {</span><br><span class="line">    <span class="attr">code</span>: <span class="title class_">String</span>!</span><br><span class="line">    <span class="attr">success</span>: <span class="title class_">Boolean</span>!</span><br><span class="line">    <span class="attr">message</span>: <span class="title class_">String</span>!</span><br><span class="line">    <span class="attr">book</span>: <span class="title class_">Book</span></span><br><span class="line">    <span class="attr">comment</span>: <span class="title class_">Comment</span></span><br><span class="line">}</span><br><span class="line">type deleteCommentResponse implements <span class="title class_">MutationResponse</span> {</span><br><span class="line">    <span class="attr">code</span>: <span class="title class_">String</span>!</span><br><span class="line">    <span class="attr">success</span>: <span class="title class_">Boolean</span>!</span><br><span class="line">    <span class="attr">message</span>: <span class="title class_">String</span>!</span><br><span class="line">    <span class="attr">book</span>: <span class="title class_">Book</span></span><br><span class="line">}</span><br><span class="line">type updateCommentResponse implements <span class="title class_">MutationResponse</span> {</span><br><span class="line">    <span class="attr">code</span>: <span class="title class_">String</span>!</span><br><span class="line">    <span class="attr">success</span>: <span class="title class_">Boolean</span>!</span><br><span class="line">    <span class="attr">message</span>: <span class="title class_">String</span>!</span><br><span class="line">    <span class="attr">comment</span>: <span class="title class_">Comment</span></span><br><span class="line">}</span><br><span class="line"> </span><br></pre></td></tr></tbody></table></figure><p>ä»ä»£ç å¯ä»¥çŸ¥é“ï¼š</p><ul><li><code>addComment</code> çš„è¿”å›å€¼ä¸­åŒ…å«æ–°ç”Ÿæˆçš„ <code>Comment</code> å¯¹è±¡å’Œæ›´æ–°åçš„ <code>Book</code> å¯¹è±¡</li><li><code>deleteComment</code> çš„è¿”å›å€¼ä¸­åŒ…å«æ›´æ–°åçš„ <code>Book</code> å¯¹è±¡</li><li><code>updateComment</code> çš„è¿”å›å€¼ä¸­åŒ…å«æ›´æ–°åçš„ <code>Comment</code> å¯¹è±¡</li></ul><h3 id="å‘é€-Mutation"><a href="#å‘é€-Mutation" class="headerlink" title="å‘é€ Mutation"></a>å‘é€ Mutation</h3><p>å®¢æˆ·ç«¯åˆ©ç”¨ <code>vue-apollo</code> å‘é€ <code>Mutation</code> è¯·æ±‚ã€‚</p><p>å¯¹ç¼“å­˜çš„æ“ä½œä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><ul><li><code>Comment</code> å¯¹è±¡</li><li><code>Book</code> å¯¹è±¡çš„ <code>comments</code> å­—æ®µ</li></ul><h4 id="æ·»åŠ è¯„è®º"><a href="#æ·»åŠ è¯„è®º" class="headerlink" title="æ·»åŠ è¯„è®º"></a>æ·»åŠ è¯„è®º</h4><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">ADD_COMMENT_MUTATION</span> = gql`<span class="language-graphql"></span></span><br><span class="line"><span class="language-graphql">  <span class="keyword">mutation</span> addComment<span class="punctuation">(</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$bookId</span>: ID<span class="punctuation">!</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$userId</span>: ID<span class="punctuation">!</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$content</span>: String<span class="punctuation">!</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$created</span>: DateTime<span class="punctuation">!</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$rating</span>: Int</span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">)</span> <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">    addComment<span class="punctuation">(</span></span></span><br><span class="line"><span class="language-graphql">      <span class="symbol">bookId</span><span class="punctuation">:</span> <span class="variable">$bookId</span></span></span><br><span class="line"><span class="language-graphql">      <span class="symbol">userId</span><span class="punctuation">:</span> <span class="variable">$userId</span></span></span><br><span class="line"><span class="language-graphql">      <span class="symbol">content</span><span class="punctuation">:</span> <span class="variable">$content</span></span></span><br><span class="line"><span class="language-graphql">      <span class="symbol">created</span><span class="punctuation">:</span> <span class="variable">$created</span></span></span><br><span class="line"><span class="language-graphql">      <span class="symbol">rating</span><span class="punctuation">:</span> <span class="variable">$rating</span></span></span><br><span class="line"><span class="language-graphql">    <span class="punctuation">)</span> <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">      code</span></span><br><span class="line"><span class="language-graphql">      success</span></span><br><span class="line"><span class="language-graphql">      message</span></span><br><span class="line"><span class="language-graphql">      comment <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">        id</span></span><br><span class="line"><span class="language-graphql">        content</span></span><br><span class="line"><span class="language-graphql">        commenter <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">          name</span></span><br><span class="line"><span class="language-graphql">        <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">      <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">      book <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">        id</span></span><br><span class="line"><span class="language-graphql">        comments <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">          content</span></span><br><span class="line"><span class="language-graphql">          createdAt</span></span><br><span class="line"><span class="language-graphql">        <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">      <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">    <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> {</span><br><span class="line">    <span class="attr">mutate</span>: addComment,</span><br><span class="line">    <span class="attr">loading</span>: addCommentLoading,</span><br><span class="line">    onDone,</span><br><span class="line">} = <span class="title function_">useMutation</span>(<span class="variable constant_">ADD_COMMENT_MUTATION</span>, <span class="function">() =&gt;</span> ({</span><br><span class="line">    <span class="attr">variables</span>: {</span><br><span class="line">        bookId,</span><br><span class="line">        userId,</span><br><span class="line">        <span class="attr">content</span>: content.<span class="property">value</span>,</span><br><span class="line">        <span class="attr">created</span>: <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toISOString</span>(),</span><br><span class="line">        <span class="attr">rating</span>: rating.<span class="property">value</span>,</span><br><span class="line">    },</span><br><span class="line">}));</span><br><span class="line"><span class="title function_">onDone</span>(<span class="function">(<span class="params">{ data: { addComment } }</span>) =&gt;</span> {</span><br><span class="line">    router.<span class="title function_">replace</span>(<span class="string">"/books/"</span> + bookId + <span class="string">"?target=book-comment-wrapper"</span>);</span><br><span class="line">    rating.<span class="property">value</span> = <span class="number">0</span>;</span><br><span class="line">    content.<span class="property">value</span> = <span class="string">""</span>;</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><p>è¿™é‡Œæ²¡æœ‰å®šä¹‰ç¼“å­˜å¤„ç†æ–¹æ³•ã€‚åŸå› æ˜¯ï¼š</p><ul><li>æ–°ç”Ÿæˆçš„ <code>Comment</code> å¯¹è±¡ï¼Œä¼šè‡ªåŠ¨ä¿å­˜åœ¨ç¼“å­˜ä¸­</li><li>å¯¹äº <code>Book</code> æ¥è¯´ï¼Œç”±äºè¿”å›äº†ä¸€ä¸ªç›¸åŒ <code>id</code> çš„ <code>Book</code> æ•°æ®ï¼Œè¯¥æ•°æ®ä¼šè‡ªåŠ¨è¦†ç›–ç¼“å­˜ä¸­çš„æ—§æ•°æ®ï¼ˆBook ä¸­çš„å„ä¸ªå­—æ®µéƒ½ä¼šè¢«è¦†ç›–</li></ul><blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ç¼“å­˜ä¸­ä½¿ç”¨å¯¹è±¡çš„ç±»å‹å+â€:â€+<code>id</code> å”¯ä¸€æ ‡è¯†ä¸€ä¸ªç¼“å­˜å¯¹è±¡</p></blockquote><img src="/2022/03/14/Apollo%20Client%20%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86%E5%B0%8F%E7%BB%93/%E7%BC%93%E5%AD%98%E6%A0%87%E8%AF%86%E7%AC%A6.png" class="" title="é»˜è®¤æƒ…å†µä¸‹ï¼Œç¼“å­˜æ ‡è¯†ç¬¦æœ‰ç±»å‹å+`:`+`id`æ„æˆ"><h4 id="åˆ é™¤è¯„è®º"><a href="#åˆ é™¤è¯„è®º" class="headerlink" title="åˆ é™¤è¯„è®º"></a>åˆ é™¤è¯„è®º</h4><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">DELETE_COMMENT_MUTATION</span> = gql`<span class="language-graphql"></span></span><br><span class="line"><span class="language-graphql">  <span class="keyword">mutation</span> deleteComment<span class="punctuation">(</span><span class="variable">$bookId</span>: ID<span class="punctuation">!</span>, <span class="variable">$commentId</span>: ID<span class="punctuation">!</span><span class="punctuation">)</span> <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">    deleteComment<span class="punctuation">(</span><span class="symbol">bookId</span><span class="punctuation">:</span> <span class="variable">$bookId</span>, <span class="symbol">commentId</span><span class="punctuation">:</span> <span class="variable">$commentId</span>) <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">      code</span></span><br><span class="line"><span class="language-graphql">      success</span></span><br><span class="line"><span class="language-graphql">      message</span></span><br><span class="line"><span class="language-graphql">      book <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">        id</span></span><br><span class="line"><span class="language-graphql">        comments <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">          id</span></span><br><span class="line"><span class="language-graphql">          content</span></span><br><span class="line"><span class="language-graphql">          createdAt</span></span><br><span class="line"><span class="language-graphql">        <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">      <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">    <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> { <span class="attr">mutate</span>: deleteComment, <span class="attr">onDone</span>: onCommentDelete } = <span class="title function_">useMutation</span>(</span><br><span class="line">    <span class="variable constant_">DELETE_COMMENT_MUTATION</span>,</span><br><span class="line">    <span class="function">() =&gt;</span> ({</span><br><span class="line">        <span class="attr">variables</span>: {</span><br><span class="line">            bookId,</span><br><span class="line">            commentId,</span><br><span class="line">        },</span><br><span class="line">        <span class="attr">update</span>: <span class="function">(<span class="params">cache</span>) =&gt;</span> {</span><br><span class="line">            <span class="comment">// åˆ é™¤cacheä¸­çš„è¯¥æ¡comment</span></span><br><span class="line">            <span class="keyword">const</span> normalizedId = cache.<span class="title function_">identify</span>({</span><br><span class="line">                <span class="attr">id</span>: commentId,</span><br><span class="line">                <span class="attr">__typename</span>: <span class="string">"Comment"</span>,</span><br><span class="line">            });</span><br><span class="line">            cache.<span class="title function_">evict</span>({ <span class="attr">id</span>: normalizedId });</span><br><span class="line">            cache.<span class="title function_">gc</span>();</span><br><span class="line">        },</span><br><span class="line">    })</span><br><span class="line">);</span><br><span class="line"><span class="title function_">onCommentDelete</span>(<span class="function">(<span class="params">{ data: { deleteComment } }</span>) =&gt;</span> {</span><br><span class="line">    toast.<span class="title function_">success</span>(deleteComment.<span class="property">message</span>);</span><br><span class="line">    router.<span class="title function_">go</span>(-<span class="number">1</span>);</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><p>è¿™é‡Œå®šä¹‰äº†ç¼“å­˜å¤„ç†æ–¹æ³•</p><ul><li>æ‰¾åˆ°è¯¥ <code>comment</code> åœ¨ç¼“å­˜ä¸­çš„å¯¹åº”æ•°æ®ï¼Œåˆ é™¤</li></ul><p>å¯¹äº <code>Book.comments</code> ç¼“å­˜ï¼Œè¿”å›çš„æ–°æ•°æ®ä¼šè‡ªåŠ¨è¦†ç›–æ—§æ•°æ®ã€‚</p><p><span class="emoji" alias="eye" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f441.png?v8">ğŸ‘</span> å½“ä½ è¿™æ ·å¤„ç†æ—¶ï¼Œæ§åˆ¶å°ä¼šå‘å‡ºè­¦å‘Šï¼Œæç¤º</p><img src="/2022/03/14/Apollo%20Client%20%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86%E5%B0%8F%E7%BB%93/console-warning.png" class="" title="æç¤ºç¼“å­˜æ•°æ®å¯èƒ½ä¸¢å¤±"><p><a href="https://community.apollographql.com/t/reasons-of-cache-data-may-be-lost-when-replacing-warning/1766">å…³äºæ§åˆ¶å°è­¦å‘Š</a>è¿™é‡Œæè¿°äº†ç±»ä¼¼çš„é—®é¢˜ï¼Œå› ä¸ºé»˜è®¤è¡Œä¸ºç¬¦åˆéœ€æ±‚ï¼Œæ‰€ä»¥ä¸éœ€è¦é¢å¤–çš„<a href="https://www.apollographql.com/docs/react/caching/cache-field-behavior/">å­—æ®µç­–ç•¥</a>è®¾ç½®ï¼Œå¯ä»¥å¿½ç•¥è¯¥è­¦å‘Šã€‚</p><h4 id="æ›´æ–°è¯„è®º"><a href="#æ›´æ–°è¯„è®º" class="headerlink" title="æ›´æ–°è¯„è®º"></a>æ›´æ–°è¯„è®º</h4><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">UPDATE_COMMENT_MUTATION</span> = gql`<span class="language-graphql"></span></span><br><span class="line"><span class="language-graphql">  <span class="keyword">mutation</span> UpdateComment<span class="punctuation">(</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$commentId</span>: ID<span class="punctuation">!</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$rating</span>: Int<span class="punctuation">!</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$updatedAt</span>: DateTime<span class="punctuation">!</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$content</span>: String</span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">)</span> <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">    updateComment<span class="punctuation">(</span></span></span><br><span class="line"><span class="language-graphql">      <span class="symbol">commentId</span><span class="punctuation">:</span> <span class="variable">$commentId</span></span></span><br><span class="line"><span class="language-graphql">      <span class="symbol">rating</span><span class="punctuation">:</span> <span class="variable">$rating</span></span></span><br><span class="line"><span class="language-graphql">      <span class="symbol">updatedAt</span><span class="punctuation">:</span> <span class="variable">$updatedAt</span></span></span><br><span class="line"><span class="language-graphql">      <span class="symbol">content</span><span class="punctuation">:</span> <span class="variable">$content</span></span></span><br><span class="line"><span class="language-graphql">    <span class="punctuation">)</span> <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">      code</span></span><br><span class="line"><span class="language-graphql">      success</span></span><br><span class="line"><span class="language-graphql">      message</span></span><br><span class="line"><span class="language-graphql">      comment <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">        id</span></span><br><span class="line"><span class="language-graphql">        rating</span></span><br><span class="line"><span class="language-graphql">        content</span></span><br><span class="line"><span class="language-graphql">        createdAt</span></span><br><span class="line"><span class="language-graphql">        updatedAt</span></span><br><span class="line"><span class="language-graphql">      <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">    <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">`</span>;</span><br><span class="line"><span class="keyword">const</span> {</span><br><span class="line">    <span class="attr">mutate</span>: updateComment,</span><br><span class="line">    <span class="attr">loading</span>: isUpdating,</span><br><span class="line">    <span class="attr">onDone</span>: onCommentUpdate,</span><br><span class="line">} = <span class="title function_">useMutation</span>(<span class="variable constant_">UPDATE_COMMENT_MUTATION</span>, <span class="function">() =&gt;</span> ({</span><br><span class="line">    <span class="attr">variables</span>: {</span><br><span class="line">        commentId,</span><br><span class="line">        <span class="attr">rating</span>: rating.<span class="property">value</span>,</span><br><span class="line">        <span class="attr">content</span>: content.<span class="property">value</span>,</span><br><span class="line">        <span class="attr">updatedAt</span>: <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toISOString</span>(),</span><br><span class="line">    },</span><br><span class="line">}));</span><br><span class="line"><span class="title function_">onCommentUpdate</span>(<span class="function">(<span class="params">{ data: { updateComment } }</span>) =&gt;</span> {</span><br><span class="line">    <span class="keyword">if</span> (updateComment.<span class="property">success</span>) {</span><br><span class="line">        content.<span class="property">value</span> = <span class="string">""</span>;</span><br><span class="line">        rating.<span class="property">value</span> = <span class="number">0</span>;</span><br><span class="line">        toast.<span class="title function_">success</span>(updateComment.<span class="property">message</span>);</span><br><span class="line">        router.<span class="title function_">go</span>(-<span class="number">1</span>);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        toast.<span class="title function_">warning</span>(updateComment.<span class="property">message</span>);</span><br><span class="line">    }</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure><p>è¿™é‡Œä¹Ÿæ²¡æœ‰å®šä¹‰ç¼“å­˜å¤„ç†æ–¹æ³•ï¼ŒåŸå› æ˜¯ï¼š</p><ul><li>æ›´æ–° <code>id</code> ä¸º <code>c1</code> çš„è¯„è®ºæˆåŠŸåï¼Œä¼šè¿”å› <code>c1</code> å¯¹åº”çš„æ–°æ•°æ®ï¼Œè¯¥æ•°æ®ä¼šè‡ªåŠ¨è¦†ç›–æ—§æ•°æ®</li><li>å¯¹äº <code>Book</code> ç¼“å­˜æ¥è¯´ï¼Œç”±äº <code>comments</code> å­—æ®µä¸­ä¿å­˜çš„æ˜¯éƒ½æ˜¯æ•°æ®å¼•ç”¨ï¼Œå› æ­¤ä¸éœ€è¦é¢å¤–çš„æ“ä½œ</li></ul><img src="/2022/03/14/Apollo%20Client%20%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86%E5%B0%8F%E7%BB%93/%E5%BC%95%E7%94%A8%E6%95%B0%E7%BB%84.png" class="" title="å­—æ®µå€¼ä¸ºå¯¹è±¡çš„ä¿å­˜çš„æ˜¯å¯¹è±¡å¼•ç”¨"><h2 id="æ›´æ–°ä¹¦æ¶"><a href="#æ›´æ–°ä¹¦æ¶" class="headerlink" title="æ›´æ–°ä¹¦æ¶"></a>æ›´æ–°ä¹¦æ¶</h2><h3 id="åç«¯å®šä¹‰-1"><a href="#åç«¯å®šä¹‰-1" class="headerlink" title="åç«¯å®šä¹‰"></a>åç«¯å®šä¹‰</h3><p><code>User</code> çš„ <code>schema</code> å®šä¹‰å¦‚ä¸‹</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">User</span> {</span><br><span class="line">    <span class="attr">id</span>: <span class="variable constant_">ID</span>!</span><br><span class="line">    <span class="attr">name</span>: <span class="title class_">String</span>!</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">bookShelf</span>: [<span class="title class_">Book</span>!]</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><code>Query</code> ä¸­å®šä¹‰äº†ä¸€ä¸ªæŸ¥è¯¢ï¼Œåˆ¤æ–­ä¹¦ç±æ˜¯å¦åœ¨ä¹¦æ¶ä¸­ï¼š</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Query</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="title function_">isBookInBookshelf</span>(<span class="attr">bookId</span>: <span class="variable constant_">ID</span>!, <span class="attr">userId</span>: <span class="variable constant_">ID</span>!): <span class="title class_">Boolean</span>!</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä¹¦æ¶ <code>Mutation</code> å®šä¹‰å¦‚ä¸‹</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">type <span class="title class_">Mutation</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="title function_">toggleBookshelf</span>(<span class="attr">userId</span>: <span class="variable constant_">ID</span>!, <span class="attr">bookId</span>: <span class="variable constant_">ID</span>!): toggleBookshelfResponse!</span><br><span class="line">}</span><br><span class="line">type toggleBookshelfResponse implements <span class="title class_">MutationResponse</span> {</span><br><span class="line">    <span class="attr">code</span>: <span class="title class_">String</span>!</span><br><span class="line">    <span class="attr">success</span>: <span class="title class_">Boolean</span>!</span><br><span class="line">    <span class="attr">message</span>: <span class="title class_">String</span>!</span><br><span class="line">    <span class="attr">user</span>: <span class="title class_">User</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä»å®šä¹‰å¯çŸ¥ï¼š</p><ul><li>æ›´æ–°ä¹¦æ¶åï¼Œä¼šè¿”å›ä¸€ä¸ªæ–°çš„ <code>user</code> æ•°æ®</li><li><code>user.bookShelf</code> ä¸­ä¿å­˜ç”¨æˆ·ä¹¦æ¶åˆ—è¡¨</li></ul><h3 id="å‘é€-Mutation-1"><a href="#å‘é€-Mutation-1" class="headerlink" title="å‘é€ Mutation"></a>å‘é€ Mutation</h3><p>éœ€è¦å¤„ç†çš„ç¼“å­˜å†…å®¹æœ‰ï¼š</p><ul><li><code>isBookInBookshelf</code> æŸ¥è¯¢çš„ç¼“å­˜ç»“æœ</li><li><code>User</code> çš„ <code>bookShelf</code> å­—æ®µ</li></ul><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">GET_IS_BOOK_IN_BOOKSHELF</span> = gql`<span class="language-graphql"></span></span><br><span class="line"><span class="language-graphql">  <span class="keyword">query</span> isBookInBookshelf<span class="punctuation">(</span><span class="variable">$bookId</span>: ID<span class="punctuation">!</span>, <span class="variable">$userId</span>: ID<span class="punctuation">!</span><span class="punctuation">)</span> <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">    isBookInBookshelf<span class="punctuation">(</span><span class="symbol">bookId</span><span class="punctuation">:</span> <span class="variable">$bookId</span>, <span class="symbol">userId</span><span class="punctuation">:</span> <span class="variable">$userId</span>)</span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">TOGGLE_BOOKSHELF_MUTATION</span> = gql`<span class="language-graphql"></span></span><br><span class="line"><span class="language-graphql">  <span class="keyword">mutation</span> toggleBookshelf<span class="punctuation">(</span><span class="variable">$bookId</span>: ID<span class="punctuation">!</span>, <span class="variable">$userId</span>: ID<span class="punctuation">!</span><span class="punctuation">)</span> <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">    toggleBookshelf<span class="punctuation">(</span><span class="symbol">bookId</span><span class="punctuation">:</span> <span class="variable">$bookId</span>, <span class="symbol">userId</span><span class="punctuation">:</span> <span class="variable">$userId</span>) <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">      message</span></span><br><span class="line"><span class="language-graphql">      success</span></span><br><span class="line"><span class="language-graphql">      user <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">          id</span></span><br><span class="line"><span class="language-graphql">        bookShelf <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">          title</span></span><br><span class="line"><span class="language-graphql">          id</span></span><br><span class="line"><span class="language-graphql">          rawAuthor</span></span><br><span class="line"><span class="language-graphql">          publisher</span></span><br><span class="line"><span class="language-graphql">          publishDate</span></span><br><span class="line"><span class="language-graphql">          doubanRating</span></span><br><span class="line"><span class="language-graphql">          summary</span></span><br><span class="line"><span class="language-graphql">          image</span></span><br><span class="line"><span class="language-graphql">          isbn13</span></span><br><span class="line"><span class="language-graphql">        <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">      <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">    <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> { <span class="attr">mutate</span>: toggleBookshelf, <span class="attr">onDone</span>: onToggle } = <span class="title function_">useMutation</span>(</span><br><span class="line">    <span class="variable constant_">TOGGLE_BOOKSHELF_MUTATION</span>,</span><br><span class="line">    <span class="function">() =&gt;</span> ({</span><br><span class="line">        <span class="attr">variables</span>: {</span><br><span class="line">            <span class="attr">bookId</span>: bookId.<span class="property">value</span>,</span><br><span class="line">            userId,</span><br><span class="line">        },</span><br><span class="line">        <span class="attr">update</span>: <span class="function">(<span class="params">cache, { data: { toggleBookshelf } }</span>) =&gt;</span> {</span><br><span class="line">            <span class="keyword">const</span> oldData = cache.<span class="title function_">readQuery</span>({</span><br><span class="line">                <span class="attr">query</span>: <span class="variable constant_">GET_IS_BOOK_IN_BOOKSHELF</span>,</span><br><span class="line">                <span class="attr">variables</span>: {</span><br><span class="line">                    <span class="attr">bookId</span>: bookId.<span class="property">value</span>,</span><br><span class="line">                    userId,</span><br><span class="line">                },</span><br><span class="line">            });</span><br><span class="line">            <span class="keyword">if</span> (toggleBookshelf.<span class="property">success</span> === <span class="literal">true</span>) {</span><br><span class="line">                cache.<span class="title function_">writeQuery</span>({</span><br><span class="line">                    <span class="attr">query</span>: <span class="variable constant_">GET_IS_BOOK_IN_BOOKSHELF</span>,</span><br><span class="line">                    <span class="attr">variables</span>: {</span><br><span class="line">                        <span class="attr">bookId</span>: bookId.<span class="property">value</span>,</span><br><span class="line">                        userId,</span><br><span class="line">                    },</span><br><span class="line">                    <span class="attr">data</span>: {</span><br><span class="line">                        <span class="attr">isBookInBookshelf</span>: !oldData.<span class="property">isBookInBookshelf</span>,</span><br><span class="line">                    },</span><br><span class="line">                });</span><br><span class="line">            }</span><br><span class="line">        },</span><br><span class="line">    })</span><br><span class="line">);</span><br></pre></td></tr></tbody></table></figure><p>æ›´æ–°å‘ç”Ÿååšäº†ä¸¤ä»¶äº‹ï¼š</p><ul><li>åˆ©ç”¨ <code>cache.writeQuery</code> æ›´æ–° <code>isBookInBookshelf</code> æŸ¥è¯¢çš„ç¼“å­˜ç»“æœ</li><li>å¯¹äº <code>User.bookShelf</code> å­—æ®µï¼Œç”±äºæ–°çš„ <code>user</code> æ•°æ®ä¼šè¦†ç›–ç¼“å­˜ä¸­çš„æ—§æ•°æ®ï¼Œå› æ­¤å¯ä»¥ä¸åšå¤„ç†</li></ul><h3 id="x1f4a5-å½“å‰å®ç°çš„é—®é¢˜"><a href="#x1f4a5-å½“å‰å®ç°çš„é—®é¢˜" class="headerlink" title="ğŸ’¥å½“å‰å®ç°çš„é—®é¢˜"></a><span class="emoji" alias="boom" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a5.png?v8">ğŸ’¥</span>å½“å‰å®ç°çš„é—®é¢˜</h3><ul><li>æ¯ä¸€æœ¬ä¹¦éƒ½éœ€è¦å‘é€ä¸€ä¸ªé¢å¤–çš„æŸ¥è¯¢ï¼Œåˆ¤æ–­å…¶æ˜¯å¦å·²ç»åœ¨ä¹¦æ¶ä¸­</li><li>ä»æœªç™»å½•çŠ¶æ€åˆ‡æ¢åˆ°ç™»å½•çŠ¶æ€æ—¶ï¼Œæ‰€æœ‰å·²ç»åŠ è½½çš„ä¹¦ç±éƒ½ä¼šå‘é€ <code>isBookInBookshelf</code> æŸ¥è¯¢ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·ç™»å½•ä¼´éšç€ N ä¸ªé¢å¤–è¯·æ±‚ï¼ˆä¸å¯æ¥å—ï¼</li></ul><img src="/2022/03/14/Apollo%20Client%20%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86%E5%B0%8F%E7%BB%93/checkBook.png" class="" title="ä¸€æœ¬ä¹¦ä¸€ä¸ªè¯·æ±‚"><a href="/2022/03/26/%E9%87%8D%E5%86%99duozhuavue%E4%B9%A6%E6%9E%B6/" title="é‡å†™duozhuavueä¹¦æ¶">é‡å†™duozhuavueä¹¦æ¶</a><h2 id="ä¸»é¡µä¿¡æ¯æµåˆ†é¡µ"><a href="#ä¸»é¡µä¿¡æ¯æµåˆ†é¡µ" class="headerlink" title="ä¸»é¡µä¿¡æ¯æµåˆ†é¡µ"></a>ä¸»é¡µä¿¡æ¯æµåˆ†é¡µ</h2><p>å¼€å‘<a href="/2021/12/09/%E5%88%86%E9%A1%B5/" title="åˆ†é¡µ">åˆ†é¡µ</a>åŠŸèƒ½æ—¶ï¼Œä¹Ÿè¿›è¡Œäº†ä¸€äº›ç¼“å­˜åˆå¹¶ã€‚ç­–ç•¥å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Query</span>: {</span><br><span class="line">    <span class="attr">fields</span>: {</span><br><span class="line">        <span class="attr">categoryFeed</span>: <span class="title function_">relayStylePagination</span>()</span><br><span class="line">    }</span><br><span class="line">},</span><br><span class="line"><span class="title class_">Category</span>: {</span><br><span class="line">    <span class="attr">fields</span>: {</span><br><span class="line">        <span class="attr">items</span>: <span class="title function_">relayStylePagination</span>()</span><br><span class="line">    }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p>è¿™é‡Œåˆ©ç”¨äº† <code>Apollo Client</code> æä¾›çš„ <code>relayStylePagination()</code> å·¥å…·å‡½æ•°ï¼Œå®ƒå·²ç»å®ç°äº†ç¼“å­˜åˆå¹¶ç­–ç•¥ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>å¯¹äºç¼“å­˜ä¸­çš„æŸ¥è¯¢ï¼Œå¯ä»¥åˆ©ç”¨ <code>cache.readQuery</code> å’Œ <code>cache.writeQuery</code> è¿›è¡Œæ›´æ–°</li><li>å¯¹äºç¼“å­˜ä¸­çš„å¯¹è±¡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¿”å›çš„æ–°æ•°æ®ä¼šè‡ªåŠ¨è¦†ç›–æ—§æ•°æ®ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨ <code>cache.modify</code> ä¿®æ”¹</li><li>ä¸ºäº†è®©è¿”å›çš„æ–°å¯¹è±¡è‡ªåŠ¨æ›¿ä»£ç¼“å­˜ä¸­çš„å¯¹è±¡ï¼Œå¿…é¡»åœ¨å®¢æˆ·ç«¯çš„ <code>schema</code> å®šä¹‰ä¸­è¿”å› <code>id</code> å­—æ®µ</li><li>å¯¹äºåˆ†é¡µä¿¡æ¯çš„ç¼“å­˜ï¼Œå°½å¯èƒ½åœ¨è®¾ç½®å­—æ®µç­–ç•¥æ—¶ä½¿ç”¨ <code>Apollo Client</code> æä¾›çš„å·¥å…·å‡½æ•°ï¼Œå¦‚ <code>offsetLimitPagination()</code>, <code>relayStylePagination()</code></li><li>åˆ é™¤ç¼“å­˜ä¸­çš„å¯¹è±¡æ—¶ï¼Œå…ˆåˆ©ç”¨ <code>cache.identify</code> ç¡®å®šç¼“å­˜å¯¹åº”çš„æ ‡è¯†ç¬¦ï¼Œç„¶åä½¿ç”¨ <code>cache.evict</code> å’Œ <code>cache.gc</code></li><li><code>useMutation</code> å¤„ç†ç¼“å­˜çš„é€»è¾‘å†™åœ¨ <code>update</code> å‡½æ•°ä¸­</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;è®°å½•å¼€å‘ &lt;a href=&quot;https://duozhuavue.vercel.app/book&quot;&gt;duozhuavueğŸ’š&lt;/a&gt; æ—¶å¯¹ &lt;a href=&quot;https://www.apollographql.com/docs/react/caching/overview/&quot;&gt;Apollo Client&lt;/a&gt; ç¼“å­˜çš„å¤„ç†æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸ºä»€ä¹ˆè¦å¤„ç†ç¼“å­˜ï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä¸ºä»€ä¹ˆè¦å¤„ç†ç¼“å­˜ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºä»€ä¹ˆè¦å¤„ç†ç¼“å­˜ï¼Ÿ&quot;&gt;&lt;/a&gt;ä¸ºä»€ä¹ˆè¦å¤„ç†ç¼“å­˜ï¼Ÿ&lt;/h2&gt;&lt;p&gt;ä¿®æ”¹æ•°æ®åï¼Œå¦‚æœä¸å¯¹ç¼“å­˜ä¸­çš„æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œé‚£ä¹ˆä¼šé€ æˆæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯çš„&lt;strong&gt;æ•°æ®ä¸ä¸€è‡´&lt;/strong&gt;ï¼Œä¿®æ”¹ä¹Ÿä¸èƒ½åœ¨å‰ç«¯å¾—åˆ°ä½“ç°ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ &lt;a href=&quot;https://duozhuavue.vercel.app/book&quot;&gt;duozhuavueğŸ’š&lt;/a&gt; ä¸­ï¼Œéœ€è¦å¤„ç†ç¼“å­˜çš„åœ°æ–¹æœ‰ä¹¦ç±è¯„è®ºï¼Œç”¨æˆ·ä¹¦æ¶ï¼Œä¸»é¡µä¿¡æ¯æµåˆ†é¡µã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç¼“å­˜å¤„ç†æ–¹æ³•&quot;&gt;&lt;a href=&quot;#ç¼“å­˜å¤„ç†æ–¹æ³•&quot; class=&quot;headerlink&quot; title=&quot;ç¼“å­˜å¤„ç†æ–¹æ³•&quot;&gt;&lt;/a&gt;ç¼“å­˜å¤„ç†æ–¹æ³•&lt;/h2&gt;&lt;p&gt; &lt;a href=&quot;https://www.apollographql.com/docs/react/caching/overview/&quot;&gt;Apollo Client&lt;/a&gt; æä¾›äº†å‡ ç§æ–¹å¼ä¸ç¼“å­˜æ•°æ®äº¤äº’&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.apollographql.com/docs/react/caching/cache-interaction#using-graphql-queries&quot;&gt;ä½¿ç”¨ GraphQL queries&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.apollographql.com/docs/react/caching/cache-interaction#using-graphql-fragments&quot;&gt;ä½¿ç”¨ GraphQL fragments&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.apollographql.com/docs/react/caching/cache-interaction#using-cachemodify&quot;&gt;ç›´æ¥ä¿®æ”¹ç¼“å­˜å¯¹è±¡çš„å­—æ®µ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.apollographql.com/docs/react/caching/cache-field-behavior&quot;&gt;é…ç½®ç¼“å­˜å­—æ®µç­–ç•¥&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç»“åˆå¼€å‘è¿‡ç¨‹ä¸­çš„å…·ä½“æƒ…å†µï¼Œå¤„ç†ç¼“å­˜æ•°æ®æ—¶å¯ä»¥é‡‡å–ä¸åŒçš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¹¦ç±è¯„è®º&quot;&gt;&lt;a href=&quot;#ä¹¦ç±è¯„è®º&quot; class=&quot;headerlink&quot; title=&quot;ä¹¦ç±è¯„è®º&quot;&gt;&lt;/a&gt;ä¹¦ç±è¯„è®º&lt;/h2&gt;&lt;h3 id=&quot;åç«¯å®šä¹‰&quot;&gt;&lt;a href=&quot;#åç«¯å®šä¹‰&quot; class=&quot;headerlink&quot; title=&quot;åç«¯å®šä¹‰&quot;&gt;&lt;/a&gt;åç«¯å®šä¹‰&lt;/h3&gt;&lt;p&gt;åç«¯ä»£ç ä¸­ &lt;code&gt;Book&lt;/code&gt; çš„ &lt;code&gt;schema&lt;/code&gt; å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;type &lt;span class=&quot;title class_&quot;&gt;Book&lt;/span&gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;id&lt;/span&gt;: &lt;span class=&quot;variable constant_&quot;&gt;ID&lt;/span&gt;!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;title&lt;/span&gt;: &lt;span class=&quot;title class_&quot;&gt;String&lt;/span&gt;!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;comments&lt;/span&gt;: [&lt;span class=&quot;title class_&quot;&gt;Comment&lt;/span&gt;!]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;æœ‰ç”¨çš„ä¿¡æ¯æ˜¯ï¼Œ&lt;code&gt;Book&lt;/code&gt; çš„ &lt;code&gt;comments&lt;/code&gt; å­—æ®µè¿”å›è¯¥ä¹¦çš„è¯„è®ºåˆ—è¡¨ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="å‰ç«¯" scheme="https://yikayiyo.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="graphql" scheme="https://yikayiyo.github.io/tags/graphql/"/>
    
    <category term="apollo client" scheme="https://yikayiyo.github.io/tags/apollo-client/"/>
    
    <category term="vue-apollo" scheme="https://yikayiyo.github.io/tags/vue-apollo/"/>
    
    <category term="duozhuavue" scheme="https://yikayiyo.github.io/tags/duozhuavue/"/>
    
  </entry>
  
  <entry>
    <title>æ–‡æœ¬æº¢å‡ºæ”»å‡»</title>
    <link href="https://yikayiyo.github.io/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/"/>
    <id>https://yikayiyo.github.io/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/</id>
    <published>2022-01-09T15:44:23.000Z</published>
    <updated>2023-11-22T10:18:22.820Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸»è¦è®°å½•å¼€å‘<a href="https://duozhuavue.vercel.app/book">duozhuavue<span class="emoji" alias="green_heart" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f49a.png?v8">ğŸ’š</span></a>æ—¶å¯¹ä¸€äº›æ–‡æœ¬è¿‡é•¿æƒ…å†µçš„å¤„ç†æ–¹æ³•ã€‚</p><h3 id="å‡è®¾"><a href="#å‡è®¾" class="headerlink" title="å‡è®¾"></a>å‡è®¾</h3><ul><li>åå°æœåŠ¡å™¨å¯¹æ•°æ®çš„æ–‡æœ¬é•¿åº¦æ²¡æœ‰é™åˆ¶ã€å¤„ç†</li><li>åœ¨å‰ç«¯é¡µé¢åˆ©ç”¨ CSS å¤„ç†æ–‡æœ¬æº¢å‡º</li></ul><h3 id="å¤šæŠ“é±¼"><a href="#å¤šæŠ“é±¼" class="headerlink" title="å¤šæŠ“é±¼"></a>å¤šæŠ“é±¼</h3><p>ä»¥ä¸‹æ˜¯<a href="www.duozhuayu.com">å¤šæŠ“é±¼</a>éƒ¨åˆ†é¡µé¢é‡åˆ°è¿‡é•¿ç”¨æˆ·åæ—¶çš„æƒ…å†µã€‚<br>æµ‹è¯•æ–‡æœ¬ï¼šâ€œè¿™æ˜¯ä¸€ä¸ªéå¸¸é•¿çš„IDç”¨æ¥æµ‹è¯•å¸ƒå±€æº¢å‡ºï¼Œæ­£å¸¸æƒ…å†µæœ€åä¼šå‡ºç°ä¸‰ä¸ªç‚¹ï¼Œè€Œä¸”ä¸ä¼šæŠŠå…¶å®ƒå†…å®¹æ¨å‡ºå±å¹•â€ã€‚</p><center style="display: flex; justify-content: space-between; flex-wrap: wrap;">  <div><img src="/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/duozhuayu-oc-page-header.png" class="" width="300" title="ä¹¦å•é¡µé¡¶éƒ¨"></div>  <div><img src="/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/duozhuayu-book-page-comment.png" class="" width="300" title="ä¹¦ç±é¡µè¯„è®ºåŒº"></div>  <div><img src="/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/duozhuayu-user-page-header.png" class="" width="300" title="ç”¨æˆ·é¡µé¡¶éƒ¨"></div>  <div><img src="/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/duozhuayu-user-page-activity.png" class="" width="300" title="ç”¨æˆ·é¡µæ´»åŠ¨åŒº"></div></center><span id="more"></span><h3 id="duozhuavue"><a href="#duozhuavue" class="headerlink" title="duozhuavue"></a>duozhuavue</h3><p>ä»¥ä¸‹æ˜¯<a href="https://duozhuavue.vercel.app/book">duozhuavue<span class="emoji" alias="green_heart" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f49a.png?v8">ğŸ’š</span></a>å¤„ç†åçš„æ ·å­</p><center style="display: flex; justify-content: space-between; flex-wrap: wrap;">  <div><img src="/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/oc-page-header.png" class="" width="300" title="ä¹¦å•é¡µé¡¶éƒ¨"></div>  <div><img src="/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/book-page-comment.png" class="" width="300" title="ä¹¦ç±é¡µè¯„è®ºåŒº"></div>  <div><img src="/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/user-page-header.png" class="" width="300" title="ç”¨æˆ·é¡µé¡¶éƒ¨"></div>  <div><img src="/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/user-page-douban-like.png" class="" width="300" title="ç”¨æˆ·é¡µä¹¦æ¶åŒºï¼ˆè‡ªå®šä¹‰ï¼‰"></div></center><h3 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h3><iframe src="https://codesandbox.io/embed/chu-li-wen-ben-yi-chu-94p4fk?fontsize=14&amp;theme=dark" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="å¤„ç†æ–‡æœ¬æº¢å‡º" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>å¯¹äºå—å…ƒç´ å†…çš„å•è¡Œæ–‡æœ¬ï¼Œæ³¨æ„æ–‡æœ¬æ‰€åœ¨å®¹å™¨çš„å®½åº¦</li><li>å¯¹äºå¼¹æ€§ç›’å­å†…çš„æ–‡æœ¬ï¼Œå¿…é¡»å…ˆç¡®å®šç›’å­çš„å®½åº¦ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæ‰èƒ½å¤„ç†æº¢å‡ºæƒ…å†µ</li><li>å¯¹äºå¤šè¡Œæ–‡æœ¬ï¼Œå¯ä»¥å‚è€ƒ <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/-webkit-line-clamp">MDN</a> çš„è¯´æ˜å’Œæ ·ä¾‹</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä¸»è¦è®°å½•å¼€å‘&lt;a href=&quot;https://duozhuavue.vercel.app/book&quot;&gt;duozhuavue&lt;span class=&quot;emoji&quot; alias=&quot;green_heart&quot; style=&quot;&quot; fallback-src=&quot;https://github.githubassets.com/images/icons/emoji/unicode/1f49a.png?v8&quot;&gt;ğŸ’š&lt;/span&gt;&lt;/a&gt;æ—¶å¯¹ä¸€äº›æ–‡æœ¬è¿‡é•¿æƒ…å†µçš„å¤„ç†æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å‡è®¾&quot;&gt;&lt;a href=&quot;#å‡è®¾&quot; class=&quot;headerlink&quot; title=&quot;å‡è®¾&quot;&gt;&lt;/a&gt;å‡è®¾&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;åå°æœåŠ¡å™¨å¯¹æ•°æ®çš„æ–‡æœ¬é•¿åº¦æ²¡æœ‰é™åˆ¶ã€å¤„ç†&lt;/li&gt;
&lt;li&gt;åœ¨å‰ç«¯é¡µé¢åˆ©ç”¨ CSS å¤„ç†æ–‡æœ¬æº¢å‡º&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;å¤šæŠ“é±¼&quot;&gt;&lt;a href=&quot;#å¤šæŠ“é±¼&quot; class=&quot;headerlink&quot; title=&quot;å¤šæŠ“é±¼&quot;&gt;&lt;/a&gt;å¤šæŠ“é±¼&lt;/h3&gt;&lt;p&gt;ä»¥ä¸‹æ˜¯&lt;a href=&quot;www.duozhuayu.com&quot;&gt;å¤šæŠ“é±¼&lt;/a&gt;éƒ¨åˆ†é¡µé¢é‡åˆ°è¿‡é•¿ç”¨æˆ·åæ—¶çš„æƒ…å†µã€‚&lt;br&gt;æµ‹è¯•æ–‡æœ¬ï¼šâ€œè¿™æ˜¯ä¸€ä¸ªéå¸¸é•¿çš„IDç”¨æ¥æµ‹è¯•å¸ƒå±€æº¢å‡ºï¼Œæ­£å¸¸æƒ…å†µæœ€åä¼šå‡ºç°ä¸‰ä¸ªç‚¹ï¼Œè€Œä¸”ä¸ä¼šæŠŠå…¶å®ƒå†…å®¹æ¨å‡ºå±å¹•â€ã€‚&lt;/p&gt;
&lt;center style=&quot;display: flex; justify-content: space-between; flex-wrap: wrap;&quot;&gt;
  &lt;div&gt;&lt;img src=&quot;/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/duozhuayu-oc-page-header.png&quot; class=&quot;&quot; width=&quot;300&quot; title=&quot;ä¹¦å•é¡µé¡¶éƒ¨&quot;&gt;&lt;/div&gt;
  &lt;div&gt;&lt;img src=&quot;/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/duozhuayu-book-page-comment.png&quot; class=&quot;&quot; width=&quot;300&quot; title=&quot;ä¹¦ç±é¡µè¯„è®ºåŒº&quot;&gt;&lt;/div&gt;
  &lt;div&gt;&lt;img src=&quot;/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/duozhuayu-user-page-header.png&quot; class=&quot;&quot; width=&quot;300&quot; title=&quot;ç”¨æˆ·é¡µé¡¶éƒ¨&quot;&gt;&lt;/div&gt;
  &lt;div&gt;&lt;img src=&quot;/2022/01/09/%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E6%94%BB%E5%87%BB/duozhuayu-user-page-activity.png&quot; class=&quot;&quot; width=&quot;300&quot; title=&quot;ç”¨æˆ·é¡µæ´»åŠ¨åŒº&quot;&gt;&lt;/div&gt;
&lt;/center&gt;</summary>
    
    
    
    
    <category term="å‰ç«¯" scheme="https://yikayiyo.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="duozhuavue" scheme="https://yikayiyo.github.io/tags/duozhuavue/"/>
    
    <category term="CSS" scheme="https://yikayiyo.github.io/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>åˆ†é¡µ</title>
    <link href="https://yikayiyo.github.io/2021/12/09/%E5%88%86%E9%A1%B5/"/>
    <id>https://yikayiyo.github.io/2021/12/09/%E5%88%86%E9%A1%B5/</id>
    <published>2021-12-09T05:53:39.000Z</published>
    <updated>2023-11-22T12:10:54.368Z</updated>
    
    <content type="html"><![CDATA[<p>è®°å½•å¼€å‘<a href="https://duozhuavue.vercel.app/book">duozhuavue<span class="emoji" alias="green_heart" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f49a.png?v8">ğŸ’š</span></a>ä¸»é¡µçš„åˆ†é¡µåŠŸèƒ½æ—¶çš„å®è·µã€‚</p><h1 id="å…³äºåˆ†é¡µ"><a href="#å…³äºåˆ†é¡µ" class="headerlink" title="å…³äºåˆ†é¡µ"></a>å…³äºåˆ†é¡µ</h1><h2 id="åˆ†é¡µçš„æ ·å­"><a href="#åˆ†é¡µçš„æ ·å­" class="headerlink" title="åˆ†é¡µçš„æ ·å­"></a>åˆ†é¡µçš„æ ·å­</h2><ol><li><p>æœ‰ç¼–å·çš„åˆ†é¡µ</p><img src="/2021/12/09/%E5%88%86%E9%A1%B5/page1.png" class="" width="500" title="æœ‰ç¼–å·çš„åˆ†é¡µ"></li><li><p>æ— ç¼–å·ï¼Œç‚¹å‡»åŠ è½½</p><img src="/2021/12/09/%E5%88%86%E9%A1%B5/page2.png" class="" width="500" title="ç‚¹å‡»è·å–ä¸‹ä¸€é¡µæ•°æ®"></li><li><p>æ— ç¼–å·ï¼Œæ»šåŠ¨åŠ è½½</p><img src="/2021/12/09/%E5%88%86%E9%A1%B5/page3.png" class="" width="500" title="æ»šåŠ¨åˆ°ç‰¹å®šä½ç½®è·å–ä¸‹ä¸€é¡µæ•°æ®"></li></ol><span id="more"></span><h2 id="è·³è½¬åˆ°ä¸‹ä¸€é¡µæ—¶è¦åšä»€ä¹ˆ"><a href="#è·³è½¬åˆ°ä¸‹ä¸€é¡µæ—¶è¦åšä»€ä¹ˆ" class="headerlink" title="è·³è½¬åˆ°ä¸‹ä¸€é¡µæ—¶è¦åšä»€ä¹ˆ"></a>è·³è½¬åˆ°ä¸‹ä¸€é¡µæ—¶è¦åšä»€ä¹ˆ</h2><ol><li><p>è·å–æ•°æ®</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ ¹æ®ä¼ å…¥çš„å‚æ•°è·å–æ–°æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> incoming = <span class="title function_">getNextPage</span>(...);</span><br></pre></td></tr></tbody></table></figure></li><li><p>æ›´æ–°ç¼“å­˜</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¯ä¸ªå­—æ®µéƒ½å¯ä»¥æœ‰è‡ªå·±çš„ merge() å‡½æ•°ç”¨äºé…ç½®ç¼“å­˜åˆå¹¶ç­–ç•¥</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">merge</span>(<span class="params">existing, incoming</span>) {</span><br><span class="line">    ...</span><br><span class="line">    existing = [...existing, ...incoming];</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> existing;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ol><h2 id="æƒ³è¦çš„åŠŸèƒ½"><a href="#æƒ³è¦çš„åŠŸèƒ½" class="headerlink" title="æƒ³è¦çš„åŠŸèƒ½"></a>æƒ³è¦çš„åŠŸèƒ½</h2><p>åœ¨å·²ç»<strong>æœ‰ç¼“å­˜</strong>çš„æƒ…å†µä¸‹ï¼Œ<strong>åˆ†é¡µè¯»å–ã€æ˜¾ç¤º</strong>ï¼ˆpaginated readï¼‰ç¼“å­˜æ•°æ®ã€‚</p><h1 id="å°è¯•"><a href="#å°è¯•" class="headerlink" title="å°è¯•"></a>å°è¯•</h1><h2 id="åŸºæœ¬é…ç½®"><a href="#åŸºæœ¬é…ç½®" class="headerlink" title="åŸºæœ¬é…ç½®"></a>åŸºæœ¬é…ç½®</h2><h3 id="graphql-æŸ¥è¯¢è®¾ç½®"><a href="#graphql-æŸ¥è¯¢è®¾ç½®" class="headerlink" title="graphql æŸ¥è¯¢è®¾ç½®"></a><code>graphql</code> æŸ¥è¯¢è®¾ç½®</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// first: è·å–å‡ ä¸ªåˆ†ç±»</span></span><br><span class="line"><span class="comment">// after: ä»å“ªä¸ªåˆ†ç±»å¼€å§‹è·å–åˆ†ç±»</span></span><br><span class="line"><span class="comment">// itemsFirst: æ¯ä¸ªåˆ†ç±»ä¸‹è·å–å‡ æœ¬å›¾ä¹¦</span></span><br><span class="line"><span class="comment">// itemsAfter: ä»å“ªä¸ªåœ°æ–¹å¼€å§‹è·å–å›¾ä¹¦</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">GET_CATEGORY_FEED</span> = gql`<span class="language-graphql"></span></span><br><span class="line"><span class="language-graphql">  <span class="keyword">query</span> getCategoryFeed<span class="punctuation">(</span></span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$first</span>: Int</span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$after</span>: String</span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$itemsFirst</span>: Int</span></span><br><span class="line"><span class="language-graphql">    <span class="variable">$itemsAfter</span>: String</span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">)</span> <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">    categoryFeed<span class="punctuation">(</span><span class="symbol">first</span><span class="punctuation">:</span> <span class="variable">$first</span>, <span class="symbol">after</span><span class="punctuation">:</span> <span class="variable">$after</span>) <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">      pageInfo <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">        hasNextPage</span></span><br><span class="line"><span class="language-graphql">        endCursor</span></span><br><span class="line"><span class="language-graphql">      <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">      edges <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">        node <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">          id</span></span><br><span class="line"><span class="language-graphql">          name</span></span><br><span class="line"><span class="language-graphql">          items<span class="punctuation">(</span><span class="symbol">first</span><span class="punctuation">:</span> <span class="variable">$itemsFirst</span>, <span class="symbol">after</span><span class="punctuation">:</span> <span class="variable">$itemsAfter</span>) <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">            pageInfo <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">              endCursor</span></span><br><span class="line"><span class="language-graphql">              hasNextPage</span></span><br><span class="line"><span class="language-graphql">            <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">            edges <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">              node <span class="punctuation">{</span></span></span><br><span class="line"><span class="language-graphql">                id</span></span><br><span class="line"><span class="language-graphql">                title</span></span><br><span class="line"><span class="language-graphql">                rawAuthor</span></span><br><span class="line"><span class="language-graphql">                doubanRating</span></span><br><span class="line"><span class="language-graphql">                originalPrice</span></span><br><span class="line"><span class="language-graphql">                image</span></span><br><span class="line"><span class="language-graphql">              <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">            <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">          <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">        <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">      <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">    <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">  <span class="punctuation">}</span></span></span><br><span class="line"><span class="language-graphql">`</span></span><br></pre></td></tr></tbody></table></figure><p>å…³äº <code>categoryFeed</code> ä¸­çš„ <code>pageInfo</code> å’Œ <code>edges</code>ï¼Œå¯ä»¥å‚è€ƒ <a href="https://relay.dev/graphql/connections.htm#">GraphQL Cursor Connections Specification</a></p><h3 id="è®¾ç½®ç¼“å­˜åˆå¹¶ç­–ç•¥"><a href="#è®¾ç½®ç¼“å­˜åˆå¹¶ç­–ç•¥" class="headerlink" title="è®¾ç½®ç¼“å­˜åˆå¹¶ç­–ç•¥"></a>è®¾ç½®ç¼“å­˜åˆå¹¶ç­–ç•¥</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Query</span>: {</span><br><span class="line">    <span class="attr">fields</span>: {</span><br><span class="line">        <span class="attr">categoryFeed</span>: {</span><br><span class="line">            ...<span class="title function_">relayStylePagination</span>(),</span><br><span class="line">            <span class="attr">keyArgs</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="comment">// è‡ªå®šä¹‰readå‡½æ•°ï¼Œå®ç°åˆ†é¡µè¯»å–ç¼“å­˜</span></span><br><span class="line">            <span class="title function_">read</span>(<span class="params">existing, {args: {first, after}}</span>) {</span><br><span class="line">                <span class="keyword">const</span> res = {};</span><br><span class="line">                <span class="comment">// æ ¹æ® after å‚æ•°é€‰æ‹©ç¼“å­˜ä¸­çš„æ•°æ®è¿”å›</span></span><br><span class="line">                res = {...}</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            }</span><br><span class="line">        },</span><br><span class="line">    },</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p>ç¼“å­˜çš„åˆå¹¶ç­–ç•¥ï¼Œå¯ä»¥å‚è€ƒ <a href="https://www.apollographql.com/docs/react/caching/cache-field-behavior/">Customizing the behavior of cached fields</a></p><p><code>relayStylePagination</code> å¯ä»¥å‚è€ƒ <a href="https://www.apollographql.com/docs/react/pagination/cursor-based/#relay-style-cursor-pagination">Relay-style cursor pagination</a></p><h2 id="ä½¿ç”¨-fetchMore"><a href="#ä½¿ç”¨-fetchMore" class="headerlink" title="ä½¿ç”¨ fetchMore()"></a>ä½¿ç”¨ fetchMore()</h2><h3 id="æŸ¥è¯¢è®¾ç½®"><a href="#æŸ¥è¯¢è®¾ç½®" class="headerlink" title="æŸ¥è¯¢è®¾ç½®"></a>æŸ¥è¯¢è®¾ç½®</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> after = <span class="title function_">ref</span>(<span class="string">''</span>) <span class="comment">// ä»å“ªé‡Œå¼€å§‹è·å–æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> first = <span class="title function_">ref</span>(<span class="number">1</span>) <span class="comment">// è·å–å‡ æ¡æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> {</span><br><span class="line">  <span class="attr">result</span>: categoryFeedResult,</span><br><span class="line">  <span class="attr">loading</span>: categoryFeedLoading,</span><br><span class="line">  <span class="attr">error</span>: categoryFeedError,</span><br><span class="line">  fetchMore</span><br><span class="line">} = <span class="title function_">useQuery</span>(<span class="variable constant_">GET_CATEGORY_FEED</span>, <span class="function">() =&gt;</span> ({</span><br><span class="line">  <span class="attr">after</span>: after.<span class="property">value</span>,</span><br><span class="line">  <span class="attr">first</span>: first.<span class="property">value</span>,</span><br><span class="line">  <span class="attr">itemsAfter</span>: <span class="string">''</span>,</span><br><span class="line">  <span class="attr">itemsFirst</span>: <span class="number">3</span></span><br><span class="line">}))</span><br></pre></td></tr></tbody></table></figure><h3 id="é¦–æ¬¡ä½¿ç”¨"><a href="#é¦–æ¬¡ä½¿ç”¨" class="headerlink" title="é¦–æ¬¡ä½¿ç”¨"></a>é¦–æ¬¡ä½¿ç”¨</h3><ol><li><p>é¡µé¢åŠ è½½</p><p>è¯·æ±‚ç¬¬ä¸€æ¡æ•°æ®ï¼Œç¼“å­˜ä¸ºç©ºï¼Œäºæ˜¯è¯·æ±‚æœåŠ¡å™¨ï¼Œè·å¾—ç¬¬ä¸€æ¡æ•°æ®ï¼Œå†™å…¥ç¼“å­˜ï¼Œè¿”å›ç»™é¡µé¢</p></li><li><p>ç‚¹å‡»<u>åŠ è½½æ›´å¤šåˆ†ç±»</u></p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loadMoreCategories = <span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">  <span class="title function_">fetchMore</span>({</span><br><span class="line">    <span class="attr">variables</span>: {</span><br><span class="line">      <span class="attr">after</span>: cursor.<span class="property">value</span> <span class="comment">// è¿™é‡Œçš„cursoræ˜¯ç¬¬ä¸€é¡µæ•°æ®çš„ pageInfo ä¸­çš„ä¿¡æ¯</span></span><br><span class="line">    }</span><br><span class="line">  }).<span class="title function_">then</span>(<span class="function">(<span class="params">{ data: { categoryFeed } }</span>) =&gt;</span> {</span><br><span class="line">    after.<span class="property">value</span> = categoryFeed.<span class="property">pageInfo</span>.<span class="property">endCursor</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">      <span class="string">'$after is updated, there will be a new categoryFeed query...'</span></span><br><span class="line">    )</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è°ƒç”¨ <code>loadMoreCategories()</code> ï¼Œæ‰§è¡Œå¸¦æœ‰æ–°å‚æ•°çš„ <code>fetchMore()</code></p><p>æ–°æ•°æ®ä¼šä¾ç…§åˆå¹¶ç­–ç•¥å†™å…¥ç¼“å­˜</p><p><span class="emoji" alias="eyes" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f440.png?v8">ğŸ‘€</span> ä¸ºäº†è¯»å–æ›´æ–°åçš„ç¼“å­˜ï¼Œéœ€è¦åœ¨ <code>then()</code> ä¸­æ›´æ–° <code>after</code> çš„å€¼ï¼ˆæ›´æ–°ä¼šè§¦å‘æŸ¥è¯¢æ‰§è¡Œï¼Œè¯¥ <code>after</code> å‚æ•°å¯ä»¥ç”¨äºè¯·æ±‚ç¼“å­˜ä¸­ç‰¹å®šéƒ¨åˆ†çš„æ•°æ®</p></li><li><p>å†æ¬¡ç‚¹å‡»<u>åŠ è½½æ›´å¤šåˆ†ç±»</u></p></li></ol><h3 id="åˆ·æ–°é¡µé¢å"><a href="#åˆ·æ–°é¡µé¢å" class="headerlink" title="åˆ·æ–°é¡µé¢å"></a>åˆ·æ–°é¡µé¢å</h3><ol><li>é¡µé¢åŠ è½½</li><li>ç‚¹å‡»<u>åŠ è½½æ›´å¤šåˆ†ç±»</u></li><li>å†æ¬¡ç‚¹å‡»<u>åŠ è½½æ›´å¤šåˆ†ç±»</u></li></ol><h3 id="æ•ˆæœåŠé—®é¢˜"><a href="#æ•ˆæœåŠé—®é¢˜" class="headerlink" title="æ•ˆæœåŠé—®é¢˜"></a>æ•ˆæœåŠé—®é¢˜</h3><center style="display: flex; justify-content: space-between;">  <div><img src="/2021/12/09/%E5%88%86%E9%A1%B5/fetchMore-no-cache.gif" class="" width="375" title="æ²¡æœ‰ç¼“å­˜çš„æƒ…å†µä¸‹è¯·æ±‚"></div>  <div style="margin-left: 10px;"><img src="/2021/12/09/%E5%88%86%E9%A1%B5/fetchMore-with-cache.gif" class="" width="375" title="æœ‰ç¼“å­˜çš„æƒ…å†µä¸‹è¯·æ±‚"></div></center><p>çœ‹èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜ï¼ä½†æ˜¯é—®é¢˜å‘ç”Ÿåœ¨<u>æœ‰ç¼“å­˜æ—¶çš„ç¬¬ä¸€æ¬¡ç‚¹å‡»</u>ä¹‹å</p><p>ç¼“å­˜ä¸­çš„åˆ†ç±»å¦‚ä»Šæœ‰ä¸‰æ¡æ•°æ®</p><p>åˆ·æ–°é¡µé¢ï¼Œé¡µé¢åŠ è½½ï¼Œokï¼</p><img src="/2021/12/09/%E5%88%86%E9%A1%B5/cache-ok.png" class="" width="500" title="okï¼ç¼“å­˜ä¸å—å½±å“ï¼"><p>ç‚¹å‡»<u>åŠ è½½æ›´å¤šåˆ†ç±»</u>ï¼Œopsï¼ç¼“å­˜ä¸­çš„åˆ†ç±»å˜æˆä¸¤æ¡äº†ï¼ï¼</p><img src="/2021/12/09/%E5%88%86%E9%A1%B5/cache-ops.png" class="" width="500" title="opsï¼cacheè¢«ä¿®æ”¹äº†ï¼"><h4 id="é—®é¢˜åˆ†æ"><a href="#é—®é¢˜åˆ†æ" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h4><p>åœ¨æœ‰ç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œæˆ‘çš„æœŸæœ›æ˜¯<strong>ä»ç¼“å­˜è¯»å–æ•°æ®</strong>ã€‚ä½†æ˜¯å®é™…æƒ…å†µæ˜¯ï¼Œæ¯æ¬¡è°ƒç”¨ <code>fetchMore()</code> éƒ½ä¼šè¯·æ±‚æœåŠ¡å™¨æ•°æ®ã€‚</p><p>çœ‹äº†ä¸€ä¸‹ <code>fetchMore()</code> çš„<a href="https://github.com/apollographql/apollo-client/blob/main/src/core/ObservableQuery.ts">æºç </a>ï¼Œå®ƒæ˜¯è¿™ä¹ˆå®šä¹‰çš„</p><img src="/2021/12/09/%E5%88%86%E9%A1%B5/fetchMore.png" class="" width="600" title="fetchMore() å¿…ç„¶è¯·æ±‚æœåŠ¡å™¨"><h4 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h4><ul><li><input checked="" disabled="" type="checkbox"> ä¸ç”¨<code>fetchMore()</code></li><li><input disabled="" type="checkbox"> é‡æ–°å®šä¹‰ç¼“å­˜åˆå¹¶ç­–ç•¥ï¼Œå¦‚æœæ–°ç»“æœå·²ç»è¢«ç¼“å­˜ï¼Œå°±ä¸æ‰§è¡Œ<code>merge()</code>å‡½æ•°ï¼ˆ<code>...relayStylePagination()</code>ä¸­æœ‰é»˜è®¤çš„ <code>merge()</code>å‡½æ•°</li></ul><h2 id="ä½¿ç”¨-useQuery"><a href="#ä½¿ç”¨-useQuery" class="headerlink" title="ä½¿ç”¨ useQuery"></a>ä½¿ç”¨ useQuery</h2><p>ä¸ºäº†ä¸ä½¿ç”¨ <code>fetchMore()</code> ï¼Œåˆšå¼€å§‹æˆ‘ä½¿ç”¨äº† <code>useLazyQuery()</code>, å®ƒä¼šè¿”å›ä¸€ä¸ªéœ€è¦ä¸»åŠ¨è°ƒç”¨è·å–æ•°æ®çš„ <code>load()</code> å‡½æ•°ã€‚æˆ‘åœ¨é¡µé¢æŒ‚è½½åï¼Œè°ƒç”¨ <code>load()</code> è·å–ç¬¬ä¸€é¡µæ•°æ®ï¼Œåœ¨ç‚¹å‡»å‘ç”Ÿæ—¶å†æ¬¡è°ƒç”¨ <code>load()</code> å¹¶ä¼ å…¥ç›¸åº”çš„å‚æ•°ï¼Œè·å–æ–°æ•°æ®ã€‚è¿™ç§å®ç°æ»¡è¶³äº†ä¸€äº›éœ€æ±‚ï¼Œä½†æ˜¯ä¹Ÿæœ‰å®ƒçš„é—®é¢˜ã€‚äºæ˜¯æˆ‘åˆå»è€ƒè™‘åˆ«çš„ç­–ç•¥ï¼Œå¾ˆå¿«å°±æ„è¯†åˆ°ï¼Œç›¸åŒçš„é€»è¾‘å…¶å®åˆ©ç”¨ <code>useQuery()</code> ä¹Ÿå¯ä»¥å®ç°ï¼Œå°½ç®¡å®ƒä»¬å­˜åœ¨ç›¸åŒçš„é—®é¢˜ã€‚</p><p>ç»™æŸ¥è¯¢ä¼ å…¥å“åº”å¼å˜é‡ï¼Œæƒ³è¦è·å–ä¸‹ä¸€é¡µæ•°æ®æ—¶ï¼Œåªéœ€è¦<strong>æ›´æ”¹å˜é‡çš„å€¼</strong>ï¼ˆæŸ¥è¯¢ä¼šè‡ªåŠ¨æ›´æ–°</p><h3 id="æŸ¥è¯¢è®¾ç½®-1"><a href="#æŸ¥è¯¢è®¾ç½®-1" class="headerlink" title="æŸ¥è¯¢è®¾ç½®"></a>æŸ¥è¯¢è®¾ç½®</h3><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> after = <span class="title function_">ref</span>(<span class="string">''</span>) <span class="comment">// ä»å“ªé‡Œå¼€å§‹è·å–æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> first = <span class="title function_">ref</span>(<span class="number">1</span>) <span class="comment">// è·å–å‡ æ¡æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> {</span><br><span class="line">  <span class="attr">result</span>: categoryFeedResult,</span><br><span class="line">  <span class="attr">loading</span>: categoryFeedLoading,</span><br><span class="line">  <span class="attr">error</span>: categoryFeedError</span><br><span class="line">} = <span class="title function_">useQuery</span>(<span class="variable constant_">GET_CATEGORY_FEED</span>, <span class="function">() =&gt;</span> ({</span><br><span class="line">  <span class="attr">after</span>: after.<span class="property">value</span>,</span><br><span class="line">  <span class="attr">first</span>: first.<span class="property">value</span>,</span><br><span class="line">  <span class="attr">itemsAfter</span>: <span class="string">''</span>,</span><br><span class="line">  <span class="attr">itemsFirst</span>: <span class="number">3</span></span><br><span class="line">}))</span><br></pre></td></tr></tbody></table></figure><h3 id="é¦–æ¬¡ä½¿ç”¨-1"><a href="#é¦–æ¬¡ä½¿ç”¨-1" class="headerlink" title="é¦–æ¬¡ä½¿ç”¨"></a>é¦–æ¬¡ä½¿ç”¨</h3><ol><li><p>é¡µé¢åŠ è½½</p><p>è¯·æ±‚ç¬¬ä¸€æ¡æ•°æ®ï¼Œç¼“å­˜ä¸ºç©ºï¼Œäºæ˜¯è¯·æ±‚æœåŠ¡å™¨ï¼Œè·å–ç¬¬ä¸€æ¡æ•°æ®ï¼Œå†™å…¥ç¼“å­˜ï¼Œè¿”å›åˆ°é¡µé¢</p></li><li><p>ç‚¹å‡»åŠ è½½æ›´å¤šåˆ†ç±»</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> loadMoreCategories = <span class="keyword">function</span> (<span class="params"></span>) {</span><br><span class="line">  after.<span class="property">value</span> = cursor.<span class="property">value</span> <span class="comment">// åªéœ€è¦æ›´æ–° after çš„å€¼</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è°ƒç”¨ <code>loadMoreCategories()</code></p><p>æŸ¥è¯¢å†æ¬¡æ‰§è¡Œï¼Œç¼“å­˜æœªå‘½ä¸­ï¼Œè¯·æ±‚æœåŠ¡å™¨ï¼Œå¾—åˆ°ç¬¬äºŒæ¡æ•°æ®ï¼Œå†™å…¥ç¼“å­˜ï¼Œè¿”å›åˆ°é¡µé¢</p></li></ol><h3 id="åˆ·æ–°é¡µé¢"><a href="#åˆ·æ–°é¡µé¢" class="headerlink" title="åˆ·æ–°é¡µé¢"></a>åˆ·æ–°é¡µé¢</h3><ol><li><p>é¡µé¢åŠ è½½</p><p><code>after</code> å‚æ•°ä¸º <code>""</code></p><p>è¯·æ±‚ç¬¬ä¸€æ¡æ•°æ®ï¼Œç¼“å­˜å‘½ä¸­ï¼Œè¿”å›åˆ°é¡µé¢</p></li><li><p>ç‚¹å‡»åŠ è½½æ›´å¤šåˆ†ç±»</p><p>è°ƒç”¨ <code>loadMoreCategories()</code></p><p>æŸ¥è¯¢å†æ¬¡æ‰§è¡Œï¼Œå‘½ä¸­ç¼“å­˜ï¼Œå¾—åˆ°ä¸¤æ¡æ•°æ®ï¼Œè¿”å›åˆ°é¡µé¢</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå®šä¹‰ç¼“å­˜çš„ read() å‡½æ•°</span></span><br><span class="line">res.<span class="property">edges</span> = [</span><br><span class="line">  ...existing.<span class="property">edges</span>.<span class="title function_">slice</span>(<span class="number">0</span>, startIndex + first); <span class="comment">// æ€»æ˜¯ä»å¤´å¼€å§‹è¯»å–æ•°æ®</span></span><br><span class="line">];</span><br></pre></td></tr></tbody></table></figure></li></ol><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p><span class="emoji" alias="raised_eyebrow" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f928.png?v8">ğŸ¤¨</span> åœ¨æ²¡æœ‰ç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œè¯·æ±‚æ–°æ•°æ®æ—¶ï¼Œè¯¥ç»„ä»¶ä¼šæ•´ä½“<strong>åˆ·æ–°</strong></p><center style="display: flex; justify-content: space-evenly;">  <div><img src="/2021/12/09/%E5%88%86%E9%A1%B5/without-cache.gif" class="" width="375" title="æ²¡æœ‰ç¼“å­˜çš„æƒ…å†µä¸‹è¯·æ±‚ä¸‹ä¸€æ¡æ•°æ®"></div>  <div style="margin-left: 10px;"><img src="/2021/12/09/%E5%88%86%E9%A1%B5/with-cache.gif" class="" width="375" title="æœ‰ç¼“å­˜çš„æƒ…å†µä¸‹è¯·æ±‚ä¸‹ä¸€æ¡æ•°æ®"></div></center><p>å› ä¸º <code>categoryFeed</code> æŸ¥è¯¢ç¡®å®æ˜¯é‡æ–°æ‰§è¡Œäº†ä¸€æ¬¡ï¼Œæ‰€ä»¥æ•´ä½“åˆ·æ–°æ˜¯æ­£å¸¸ç°è±¡ã€‚è¿™ç§æ­£å¸¸ç°è±¡ä¸æ˜¯æˆ‘è¦çš„æ•ˆæœã€‚</p><h2 id="é‡æ–°å®šä¹‰ç¼“å­˜åˆå¹¶ç­–ç•¥"><a href="#é‡æ–°å®šä¹‰ç¼“å­˜åˆå¹¶ç­–ç•¥" class="headerlink" title="é‡æ–°å®šä¹‰ç¼“å­˜åˆå¹¶ç­–ç•¥"></a>é‡æ–°å®šä¹‰ç¼“å­˜åˆå¹¶ç­–ç•¥</h2><ul><li><input disabled="" type="checkbox"> TODO</li></ul><h2 id="trade-off"><a href="#trade-off" class="headerlink" title="trade-off"></a>trade-off</h2><p><code>relayStylePagination()</code> çš„é»˜è®¤è®¾ç½®ä¸­ï¼Œå¯¹ç¼“å­˜çš„è¯»å–æ˜¯å…¨éƒ¨è¯»å–ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ ä»åˆ«çš„é¡µé¢å›åˆ°ä¸»é¡µï¼Œä½ å¯ä»¥çœ‹åˆ°ä¹‹å‰å¾—åˆ°çš„æ‰€æœ‰æ•°æ®ï¼Œå¹¶æ²¡æœ‰åˆ†é¡µåœ°è¯»å–ç¼“å­˜æ•°æ®ã€‚</p><p>æˆ‘ä¹Ÿåœ¨æƒ³ï¼Œåœ¨ä¸»é¡µè¿™æ ·æ»šåŠ¨æµè§ˆçš„æƒ…å¢ƒä¸‹ï¼Œ<strong>åˆ†é¡µè¯»å–</strong>åˆ°åº•æœ‰æ²¡æœ‰å¿…è¦ï¼Œæƒ³äº†åŠå¤©ï¼Œå¥½åƒæ˜¯æ²¡å¿…è¦å•Šï¼</p><h2 id="å›åˆ°æœ€åˆçš„èµ·ç‚¹"><a href="#å›åˆ°æœ€åˆçš„èµ·ç‚¹" class="headerlink" title="å›åˆ°æœ€åˆçš„èµ·ç‚¹"></a>å›åˆ°æœ€åˆçš„èµ·ç‚¹</h2><p>æœ€ç»ˆæˆ‘è¿˜æ˜¯å†³å®šé‡‡ç”¨ä½¿ç”¨ <code>fetchMore()</code> çš„æ–¹æ³•ã€‚è™½ç„¶ç»•äº†ä¸€åœˆï¼Œä½†æ˜¯è¿™æ®µæ—¶é—´ä¸ºäº†è§£å†³åˆ†é¡µé—®é¢˜ä¸åœæ¢ç´¢ï¼Œè¿˜æ˜¯å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ã€‚</p><p><span class="emoji" alias="flags" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f38f.png?v8">ğŸ</span> å†™å®Œ<a href="https://duozhuavue.vercel.app/book">duozhuavue</a>å°±å»é¢<a href="https://www.duozhuayu.com/">duozhuayu</a>ï¼</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.apollographql.com/docs/react/pagination/overview/">Doc - apollo åˆ†é¡µ</a></p><p><a href="https://www.apollographql.com/docs/react/caching/advanced-topics/#incremental-loading-fetchmore">Doc - apollo ä½¿ç”¨ <code>fetchMore</code> å¢é‡åŠ è½½</a></p><p><a href="https://v4.apollo.vuejs.org/zh-cn/guide-composable/pagination.html#%E4%BD%BF%E7%94%A8-fetchmore">Doc - Vue Apollo åˆ†é¡µ</a></p><p><a href="https://www.apollographql.com/blog/graphql/pagination/understanding-pagination-rest-graphql-and-relay/">Blog - Understanding pagination</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;è®°å½•å¼€å‘&lt;a href=&quot;https://duozhuavue.vercel.app/book&quot;&gt;duozhuavue&lt;span class=&quot;emoji&quot; alias=&quot;green_heart&quot; style=&quot;&quot; fallback-src=&quot;https://github.githubassets.com/images/icons/emoji/unicode/1f49a.png?v8&quot;&gt;ğŸ’š&lt;/span&gt;&lt;/a&gt;ä¸»é¡µçš„åˆ†é¡µåŠŸèƒ½æ—¶çš„å®è·µã€‚&lt;/p&gt;
&lt;h1 id=&quot;å…³äºåˆ†é¡µ&quot;&gt;&lt;a href=&quot;#å…³äºåˆ†é¡µ&quot; class=&quot;headerlink&quot; title=&quot;å…³äºåˆ†é¡µ&quot;&gt;&lt;/a&gt;å…³äºåˆ†é¡µ&lt;/h1&gt;&lt;h2 id=&quot;åˆ†é¡µçš„æ ·å­&quot;&gt;&lt;a href=&quot;#åˆ†é¡µçš„æ ·å­&quot; class=&quot;headerlink&quot; title=&quot;åˆ†é¡µçš„æ ·å­&quot;&gt;&lt;/a&gt;åˆ†é¡µçš„æ ·å­&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;æœ‰ç¼–å·çš„åˆ†é¡µ&lt;/p&gt;
&lt;img src=&quot;/2021/12/09/%E5%88%86%E9%A1%B5/page1.png&quot; class=&quot;&quot; width=&quot;500&quot; title=&quot;æœ‰ç¼–å·çš„åˆ†é¡µ&quot;&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æ— ç¼–å·ï¼Œç‚¹å‡»åŠ è½½&lt;/p&gt;
&lt;img src=&quot;/2021/12/09/%E5%88%86%E9%A1%B5/page2.png&quot; class=&quot;&quot; width=&quot;500&quot; title=&quot;ç‚¹å‡»è·å–ä¸‹ä¸€é¡µæ•°æ®&quot;&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æ— ç¼–å·ï¼Œæ»šåŠ¨åŠ è½½&lt;/p&gt;
&lt;img src=&quot;/2021/12/09/%E5%88%86%E9%A1%B5/page3.png&quot; class=&quot;&quot; width=&quot;500&quot; title=&quot;æ»šåŠ¨åˆ°ç‰¹å®šä½ç½®è·å–ä¸‹ä¸€é¡µæ•°æ®&quot;&gt;&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    
    <category term="graphql" scheme="https://yikayiyo.github.io/tags/graphql/"/>
    
    <category term="apollo client" scheme="https://yikayiyo.github.io/tags/apollo-client/"/>
    
    <category term="vue-apollo" scheme="https://yikayiyo.github.io/tags/vue-apollo/"/>
    
    <category term="duozhuavue" scheme="https://yikayiyo.github.io/tags/duozhuavue/"/>
    
    <category term="pagination" scheme="https://yikayiyo.github.io/tags/pagination/"/>
    
  </entry>
  
  <entry>
    <title>ç²˜æ€§å®šä½ç”Ÿæ•ˆæ—¶æ·»åŠ æ ·å¼</title>
    <link href="https://yikayiyo.github.io/2021/11/28/%E7%B2%98%E6%80%A7%E5%AE%9A%E4%BD%8D%E7%94%9F%E6%95%88%E6%97%B6%E6%B7%BB%E5%8A%A0%E6%A0%B7%E5%BC%8F/"/>
    <id>https://yikayiyo.github.io/2021/11/28/%E7%B2%98%E6%80%A7%E5%AE%9A%E4%BD%8D%E7%94%9F%E6%95%88%E6%97%B6%E6%B7%BB%E5%8A%A0%E6%A0%B7%E5%BC%8F/</id>
    <published>2021-11-28T03:56:07.000Z</published>
    <updated>2023-11-22T11:44:52.022Z</updated>
    
    <content type="html"><![CDATA[<p>å†™ <a href="https://duozhuavue.vercel.app/book">duozhuavue<span class="emoji" alias="green_heart" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f49a.png?v8">ğŸ’š</span></a> ä¸»é¡µé¢æ—¶ï¼Œå¸Œæœ›ä¹¦ç±ç±»åˆ«çš„ <code>Title</code> åœ¨ <code>sticky</code> ç”Ÿæ•ˆæ—¶ï¼Œæ·»åŠ ä¸€ä¸ª<u>ä¸‹è¾¹ç•Œ</u>ã€‚</p><h3 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h3><img src="/2021/11/28/%E7%B2%98%E6%80%A7%E5%AE%9A%E4%BD%8D%E7%94%9F%E6%95%88%E6%97%B6%E6%B7%BB%E5%8A%A0%E6%A0%B7%E5%BC%8F/duozhuavue.gif" class="" width="500" title="ç²˜æ€§å®šä½ç”Ÿæ•ˆæ—¶æ·»åŠ ä¸‹è¾¹ç•Œ"><!--  more  --><h3 id="æ ·ä¾‹é¢„è§ˆ"><a href="#æ ·ä¾‹é¢„è§ˆ" class="headerlink" title="æ ·ä¾‹é¢„è§ˆ"></a><a href="https://0uhwu.csb.app/">æ ·ä¾‹é¢„è§ˆ</a></h3><iframe src="https://codesandbox.io/embed/add-style-when-sticky-is-active-0uhwu?fontsize=14&amp;hidenavigation=1&amp;module=%2Fmain.js&amp;theme=dark&amp;view=editor" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="add style when sticky is active" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><blockquote><p>Intersection Observer API æä¾›äº†ä¸€ç§å¼‚æ­¥æ£€æµ‹ç›®æ ‡å…ƒç´ ä¸ç¥–å…ˆå…ƒç´ æˆ– viewport ç›¸äº¤æƒ…å†µå˜åŒ–çš„æ–¹æ³•ã€‚</p></blockquote><h3 id="åŸºæœ¬æ­¥éª¤"><a href="#åŸºæœ¬æ­¥éª¤" class="headerlink" title="åŸºæœ¬æ­¥éª¤"></a>åŸºæœ¬æ­¥éª¤</h3><ol><li>ç¡®å®šç›®æ ‡å…ƒç´ ã€æ ¹å…ƒç´ </li><li>è®¾ç½®ç›‘å¬å›è°ƒï¼ˆåˆ©ç”¨ç›¸äº¤çš„<u><strong>æ¯”ä¾‹</strong></u>æˆ–è€…<u><strong>å˜åŒ–</strong></u>ï¼‰</li><li>ç›‘å¬</li></ol><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><ul><li>è®¾ç½®æ ¹å…ƒç´ æ—¶ä½¿ç”¨äº†å›ºå®šå¤§å°çš„åƒç´ ï¼Œæ„å‘³ç€åªæœ‰åœ¨<strong>å…¨å±</strong>ä¸‹æ ·å¼æ‰ä¼šç”Ÿæ•ˆ</li><li>ç¬¬äºŒä¸ªç²˜æ€§å…ƒç´ ç”Ÿæ•ˆæ—¶ï¼Œç¬¬ä¸€ä¸ªç²˜æ€§å…ƒç´ çš„æ ·å¼å¹¶æ²¡æœ‰ç§»é™¤ï¼Œæ ·ä¾‹ä¸­å®ƒè—åœ¨äº† <code>.dogs</code> å…ƒç´ çš„ä¸‹é¢ï¼Œä¸ä¼šå½±å“è§‚æ„Ÿã€‚</li></ul><p>å‚è€ƒ</p><ul><li><a href="https://css-tricks.com/how-to-detect-when-a-sticky-element-gets-pinned/">css tricks</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API">Intersection Observer API</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserverEntry/isIntersecting">IntersectionObserverEntry.isIntersecting</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å†™ &lt;a href=&quot;https://duozhuavue.vercel.app/book&quot;&gt;duozhuavue&lt;span class=&quot;emoji&quot; alias=&quot;green_heart&quot; style=&quot;&quot; fallback-src=&quot;https://github.gi</summary>
      
    
    
    
    
    <category term="å‰ç«¯" scheme="https://yikayiyo.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="duozhuavue" scheme="https://yikayiyo.github.io/tags/duozhuavue/"/>
    
    <category term="CSS" scheme="https://yikayiyo.github.io/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³ç²˜æ€§å®šä½çš„ä¸€äº›é—®é¢˜</title>
    <link href="https://yikayiyo.github.io/2021/11/27/%E8%A7%A3%E5%86%B3%E7%B2%98%E6%80%A7%E5%AE%9A%E4%BD%8D%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/"/>
    <id>https://yikayiyo.github.io/2021/11/27/%E8%A7%A3%E5%86%B3%E7%B2%98%E6%80%A7%E5%AE%9A%E4%BD%8D%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/</id>
    <published>2021-11-27T14:39:43.000Z</published>
    <updated>2023-11-22T10:18:22.938Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ­£å¸¸å·¥ä½œçš„ç²˜æ€§å®šä½çš„ä¾‹å­ï¼Œå½“ä½ æ»šåŠ¨é¡µé¢ï¼Œ<code>sticky part1</code> å’Œ <code>sticky part2</code> ä¼šå›ºå®šåœ¨<u>é¡µé¢é¡¶éƒ¨</u>ã€‚</p><span id="more"></span><iframe src="https://codesandbox.io/embed/dang-position-sticky-bu-sheng-xiao-k6yl8?fontsize=14&amp;hidenavigation=1&amp;theme=dark&amp;view=preview" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="å½“ position: sticky; ä¸ç”Ÿæ•ˆ" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><p>ä½†æ˜¯å¸¦æœ‰èƒŒæ™¯çš„è¾¹æ¡†å‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™ä¸œè¥¿æº¢å‡ºäº†ã€‚å°è¯•éšè—è¿™äº›æº¢å‡ºï¼Œå»ä¸‹ä¸ªé¡µé¢çœ‹çœ‹æ•ˆæœã€‚</p><p>ç²˜æ€§å®šä½å¤±æ•ˆäº†ï¼ç›¸å…³å…ƒç´ å¹¶æ²¡æœ‰å›ºå®šåœ¨<strong>é¡µé¢é¡¶éƒ¨</strong>ã€‚</p><p>å½“ç„¶ï¼Œå¦‚æœå¤„ç†æº¢å‡ºæ—¶ï¼Œ<code>overflow</code> å±æ€§çš„å€¼è®¾ç½®ä¸º <code>scroll</code> æˆ–è€… <code>auto</code>ï¼Œä½ å†å»æ»šåŠ¨å†…éƒ¨å…ƒç´ æ—¶ä¼šå‘ç°ï¼šç›¸å…³å…ƒç´ ç²˜åœ¨äº†å®ƒä»¬çš„ç¥–å…ˆå…ƒç´  <code>&lt;div class="container overflow"&gt;</code> ä¸Šã€‚</p><p>å¯¹æ­¤ç°è±¡ï¼Œ<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/position">MDN</a> è¿™ä¹ˆè§£é‡Šï¼š</p><blockquote><p>a sticky element â€œsticksâ€ to its nearest ancestor that has a â€œscrolling mechanismâ€ (created when <code>overflow</code> is <code>hidden</code>, <code>scroll</code>, <code>auto</code>, or <code>overlay</code>), even if that ancestor isnâ€™t the nearest actually scrolling ancestor.</p></blockquote><p>æ€»ä¹‹ï¼š<br><span class="emoji" alias="star" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2b50.png?v8">â­</span> ä½¿ç”¨ <code>sticky</code> å®šä½å±æ€§æ—¶ï¼Œå°å¿ƒ <code>overflow</code></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªæ­£å¸¸å·¥ä½œçš„ç²˜æ€§å®šä½çš„ä¾‹å­ï¼Œå½“ä½ æ»šåŠ¨é¡µé¢ï¼Œ&lt;code&gt;sticky part1&lt;/code&gt; å’Œ &lt;code&gt;sticky part2&lt;/code&gt; ä¼šå›ºå®šåœ¨&lt;u&gt;é¡µé¢é¡¶éƒ¨&lt;/u&gt;ã€‚&lt;/p&gt;</summary>
    
    
    
    
    <category term="å‰ç«¯" scheme="https://yikayiyo.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="duozhuavue" scheme="https://yikayiyo.github.io/tags/duozhuavue/"/>
    
    <category term="CSS" scheme="https://yikayiyo.github.io/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>å½“flex-1æ²¡æœ‰æŒ‰é¢„æœŸå·¥ä½œ</title>
    <link href="https://yikayiyo.github.io/2021/09/29/%E5%BD%93flex-1%E6%B2%A1%E6%9C%89%E6%8C%89%E9%A2%84%E6%9C%9F%E5%B7%A5%E4%BD%9C/"/>
    <id>https://yikayiyo.github.io/2021/09/29/%E5%BD%93flex-1%E6%B2%A1%E6%9C%89%E6%8C%89%E9%A2%84%E6%9C%9F%E5%B7%A5%E4%BD%9C/</id>
    <published>2021-09-29T03:37:54.000Z</published>
    <updated>2023-11-22T10:18:22.819Z</updated>
    
    <content type="html"><![CDATA[<p>å†™<a href="https://duozhuavue.vercel.app/search/clothing">duozhuavue<span class="emoji" alias="green_heart" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f49a.png?v8">ğŸ’š</span></a>æœè£…æœç´¢é¡µé¢æ—¶é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼š<code>flex</code> å®¹å™¨å†…ï¼Œä¸¤ä¸ªè®¾ç½®äº† <code>flexï¼š1</code> çš„é¡¹ç›®ï¼Œæœ€åå®½åº¦ç«Ÿç„¶ä¸æ˜¯ç›¸ç­‰çš„ã€‚</p><img src="/2021/09/29/%E5%BD%93flex-1%E6%B2%A1%E6%9C%89%E6%8C%89%E9%A2%84%E6%9C%9F%E5%B7%A5%E4%BD%9C/flex-problem.png" class="" width="375" height="667" title="é—®é¢˜å¤§æ¦‚é•¿è¿™æ ·"><span id="more"></span><h3 id="é—®é¢˜å¤ç°"><a href="#é—®é¢˜å¤ç°" class="headerlink" title="é—®é¢˜å¤ç°"></a>é—®é¢˜å¤ç°</h3><iframe src="https://codesandbox.io/embed/du-shi-flex-1zen-me-kuan-du-bu-yi-yang-j3olm?fontsize=14&amp;hidenavigation=1&amp;theme=dark&amp;view=preview" style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;" title="éƒ½æ˜¯flex-1æ€ä¹ˆå®½åº¦ä¸ä¸€æ ·" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe><h3 id="æ ·ä¾‹ä»£ç "><a href="#æ ·ä¾‹ä»£ç " class="headerlink" title="æ ·ä¾‹ä»£ç "></a>æ ·ä¾‹ä»£ç </h3><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span>One<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span></span><br><span class="line">    Two has more content xxxxxxxxxxxxxxxxxxxxxxxxxx ssssss</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> {</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ç­‰ä»·äº flex: 1 1 0; */</span></span><br><span class="line"><span class="comment">/* å…ƒç´ å®½åº¦ç”±å†…å®¹å®½åº¦å†³å®šï¼Œä¸ä¸€å®šç­‰å®½ */</span></span><br><span class="line"><span class="selector-class">.inner</span> {</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å…ƒç´ å®½åº¦æ˜¾å¼è®¾ç½®ä¸º0ï¼Œè¦†ç›–äº†flex-basis: 0; ï¼Œflex-growèµ·ä½œç”¨ï¼Œå„ä¸ªåˆ—ç­‰å®½ï¼Œå†…å®¹å¯èƒ½æº¢å‡º */</span></span><br><span class="line"><span class="selector-class">.inner</span> {</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="comment">/* min-width: 0;*/</span></span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.inner</span> {</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="comment">/* flex-growèµ·ä½œç”¨ï¼Œå„ä¸ªåˆ—ç­‰å®½ */</span></span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="comment">/* ä¸‹é¢çš„ä»£ç è¯´æ˜ï¼Œåˆ›å»ºBFCåï¼Œå†…å®¹å®½åº¦ä¸å½±å“å®¹å™¨å®½åº¦ï¼Œå®¹å™¨å®½åº¦ä¸º0 */</span></span><br><span class="line">  <span class="comment">/* flex: 0 1 0; */</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ol><li>æ°´å¹³æ–¹å‘çš„ <code>flex</code> ç›’å­ï¼Œå¯ä»¥ç”¨æ¥åˆ›å»º<strong>ç­‰é«˜åˆ—</strong>ï¼Œå„ä¸ªåˆ—çš„å®½åº¦ï¼ˆå°ºå¯¸ï¼‰ä¸ä¸€å®šç›¸ç­‰ï¼›</li><li>å„ä¸ªåˆ—çš„æœ€ç»ˆå®½åº¦ç”±<code>åˆ—çš„åˆå§‹å°ºå¯¸</code>å’Œ<code>å®¹å™¨çš„å‰©ä½™å¯ç”¨ç©ºé—´</code>å…±åŒå†³å®šï¼›</li><li><strong>åˆå§‹å°ºå¯¸</strong>ç”±æ˜¾å¼è®¾ç½®çš„å®½åº¦å†³å®šã€‚å¦‚æœæ²¡æœ‰æ˜¾å¼è®¾ç½®å®½åº¦ï¼Œåˆ™ç”±å®ƒä»¬çš„å†…å®¹å®½åº¦å†³å®šã€‚å¦‚æœæ²¡æœ‰å†…å®¹ï¼Œåˆ™å®½åº¦ä¸º 0ï¼›</li><li><code>flex</code> <strong>å®¹å™¨çš„å‰©ä½™å¯ç”¨ç©ºé—´</strong>ï¼ˆå¯æ­£å¯è´Ÿï¼‰ï¼Œæ ¹æ®å„ä¸ªåˆ—çš„ <code>flex-grow</code> å’Œ <code>flex-shrink</code> å±æ€§åˆ†é…ç»™å„ä¸ªåˆ—ï¼›</li><li><code>overflow: hidden;</code> åˆ›å»º <code>BFC</code> å®¹å™¨åï¼Œ<code>BFC</code> å®¹å™¨å†…éƒ¨å†…å®¹çš„å®½åº¦ä¸ä¼šå½±å“å®¹å™¨å®½åº¦ï¼›</li></ol>]]></content>
    
    
    <summary type="html">&lt;p&gt;å†™&lt;a href=&quot;https://duozhuavue.vercel.app/search/clothing&quot;&gt;duozhuavue&lt;span class=&quot;emoji&quot; alias=&quot;green_heart&quot; style=&quot;&quot; fallback-src=&quot;https://github.githubassets.com/images/icons/emoji/unicode/1f49a.png?v8&quot;&gt;ğŸ’š&lt;/span&gt;&lt;/a&gt;æœè£…æœç´¢é¡µé¢æ—¶é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼š&lt;code&gt;flex&lt;/code&gt; å®¹å™¨å†…ï¼Œä¸¤ä¸ªè®¾ç½®äº† &lt;code&gt;flexï¼š1&lt;/code&gt; çš„é¡¹ç›®ï¼Œæœ€åå®½åº¦ç«Ÿç„¶ä¸æ˜¯ç›¸ç­‰çš„ã€‚&lt;/p&gt;
&lt;img src=&quot;/2021/09/29/%E5%BD%93flex-1%E6%B2%A1%E6%9C%89%E6%8C%89%E9%A2%84%E6%9C%9F%E5%B7%A5%E4%BD%9C/flex-problem.png&quot; class=&quot;&quot; width=&quot;375&quot; height=&quot;667&quot; title=&quot;é—®é¢˜å¤§æ¦‚é•¿è¿™æ ·&quot;&gt;</summary>
    
    
    
    
    <category term="å‰ç«¯" scheme="https://yikayiyo.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="duozhuavue" scheme="https://yikayiyo.github.io/tags/duozhuavue/"/>
    
    <category term="BFC" scheme="https://yikayiyo.github.io/tags/BFC/"/>
    
    <category term="flexbox" scheme="https://yikayiyo.github.io/tags/flexbox/"/>
    
    <category term="CSS" scheme="https://yikayiyo.github.io/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>æ¶ˆå¤±çš„XXX</title>
    <link href="https://yikayiyo.github.io/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/"/>
    <id>https://yikayiyo.github.io/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/</id>
    <published>2020-12-30T10:17:57.000Z</published>
    <updated>2023-11-22T10:18:22.826Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ¶ˆå¤±çš„æ’­å®¢"><a href="#æ¶ˆå¤±çš„æ’­å®¢" class="headerlink" title="æ¶ˆå¤±çš„æ’­å®¢"></a>æ¶ˆå¤±çš„æ’­å®¢</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/boke.png" class="" title="å‰©ä½™ä»·å€¼"><center>2020å¹´å¬åˆ°ä¸€åŠè¢«ä¸‹æ¶çš„æ’­å®¢ã€‚</center><ul><li><a href="https://www.youtube.com/watch?v=ghx4l0Cp9o0">ã€051ã€‘ç˜Ÿç–«ã€è¯­è¨€å’Œå…·ä½“çš„äººï¼šä¸å†å²å­¦å®¶ç½—æ–°çš„èŠå¤©</a></li><li><a href="https://www.youtube.com/watch?v=mdTxI-H59K0">ã€å‰©ä½™æ¦¨å€¼ 023ã€‘åœ¨å·¨å¤§çš„ shock åï¼Œæˆ‘ä»¬æ‰€æ€è€ƒçš„ã€æ‰€åšçš„ä¸€åˆ‡éƒ½å°†ä¸æ­¤æœ‰å…³</a></li></ul><span id="more"></span><h1 id="æ¶ˆå¤±çš„äºº"><a href="#æ¶ˆå¤±çš„äºº" class="headerlink" title="æ¶ˆå¤±çš„äºº"></a>æ¶ˆå¤±çš„äºº</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/haohd.png" class="" title="(1)"><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/yzy.png" class="" title="(2)"><center>2020å¹´6æœˆ4å·ä¹‹åï¼Œä¸­å›½æ²¡æœ‰äº†éƒå¶å¤«å¦‡ã€‚</center><h1 id="æ¶ˆå¤±çš„ç¤ºå¨"><a href="#æ¶ˆå¤±çš„ç¤ºå¨" class="headerlink" title="æ¶ˆå¤±çš„ç¤ºå¨"></a>æ¶ˆå¤±çš„ç¤ºå¨</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/hk.png" class="" title="2019å¹´é¦™æ¸¯è¡—å¤´ç¤ºå¨æ¸¸è¡Œ"><center>åæ¥ç—…æ¯’æ¥äº†ã€‚</center><h1 id="æ¶ˆå¤±çš„æˆ¿æº"><a href="#æ¶ˆå¤±çš„æˆ¿æº" class="headerlink" title="æ¶ˆå¤±çš„æˆ¿æº"></a>æ¶ˆå¤±çš„æˆ¿æº</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/dk.png" class="" title="åœ¨è›‹å£³Appæœç´¢æˆ¿æºå¾—åˆ°çš„ç»“æœ"><center>ç§Ÿå®¢ã€æˆ¿ä¸œéƒ½æ˜¯å—å®³è€…ã€‚</center><h1 id="æ¶ˆå¤±çš„çˆ±"><a href="#æ¶ˆå¤±çš„çˆ±" class="headerlink" title="æ¶ˆå¤±çš„çˆ±"></a>æ¶ˆå¤±çš„çˆ±</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/lwl.png" class="" title="ææ–‡äº®åŒ»ç”Ÿæœ€åä¸€æ¡å¾®åš"><center>ä»–çˆ±èº«è¾¹çš„äººï¼Œä¸æ­¢å°å®¶ï¼ŒåŒ…æ‹¬å¤§å®¶ã€‚</center><h1 id="æ¶ˆå¤±çš„å‹è°Š"><a href="#æ¶ˆå¤±çš„å‹è°Š" class="headerlink" title="æ¶ˆå¤±çš„å‹è°Š"></a>æ¶ˆå¤±çš„å‹è°Š</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/TAX.png" class="" title="(1)"><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/TAX2.png" class="" title="(2)"><center>æ³¨å®šè¦å‘ç”Ÿå—ï¼Ÿ</center><h1 id="æ¶ˆå¤±çš„å´‡æ‹œ"><a href="#æ¶ˆå¤±çš„å´‡æ‹œ" class="headerlink" title="æ¶ˆå¤±çš„å´‡æ‹œ"></a>æ¶ˆå¤±çš„å´‡æ‹œ</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/my1.png" class="" title="å¹´åˆ"><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/my2.png" class="" title="å¹´æœ«"><center>é©¬äº‘ï¼šå˜äº†çš„ä¸æ˜¯æˆ‘</center><h1 id="æ¶ˆå¤±çš„çº¢é˜Ÿ"><a href="#æ¶ˆå¤±çš„çº¢é˜Ÿ" class="headerlink" title="æ¶ˆå¤±çš„çº¢é˜Ÿ"></a>æ¶ˆå¤±çš„çº¢é˜Ÿ</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/rck09.png" class="" title="9æœˆä»½"><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/rck12.png" class="" title="12æœˆä»½"><center>ç«ç®­ã€çº¢é˜Ÿã€ç«ç®­â€¦â€¦ï¼Œå¸Œæœ›ä¸æ˜¯å¾ªç¯</center><h1 id="æ¶ˆå¤±çš„éŸ³ä¹-äºº"><a href="#æ¶ˆå¤±çš„éŸ³ä¹-äºº" class="headerlink" title="æ¶ˆå¤±çš„éŸ³ä¹(äºº)"></a>æ¶ˆå¤±çš„éŸ³ä¹(äºº)</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/lz.png" class="" title="qqéŸ³ä¹å¾ˆæŠ±æ­‰"><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/lz2.png" class="" title="ç½‘æ˜“äº‘å¾ˆæŠ±æ­‰"><center>å¤§å®¶éƒ½å¾ˆæŠ±æ­‰ï¼Œæˆ‘ä¹ŸçŸ¥é“ä¸æ€ªä½ ä»¬</center><h1 id="æ¶ˆå¤±çš„è‡ªä¿¡"><a href="#æ¶ˆå¤±çš„è‡ªä¿¡" class="headerlink" title="æ¶ˆå¤±çš„è‡ªä¿¡"></a>æ¶ˆå¤±çš„è‡ªä¿¡</h1><hr><img src="/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/bzx.png" class="" title="æŠµåˆ¶åœ£è¯èŠ‚">]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;æ¶ˆå¤±çš„æ’­å®¢&quot;&gt;&lt;a href=&quot;#æ¶ˆå¤±çš„æ’­å®¢&quot; class=&quot;headerlink&quot; title=&quot;æ¶ˆå¤±çš„æ’­å®¢&quot;&gt;&lt;/a&gt;æ¶ˆå¤±çš„æ’­å®¢&lt;/h1&gt;&lt;hr&gt;
&lt;img src=&quot;/2020/12/30/%E6%B6%88%E5%A4%B1%E7%9A%84XXX/boke.png&quot; class=&quot;&quot; title=&quot;å‰©ä½™ä»·å€¼&quot;&gt;

&lt;center&gt;2020å¹´å¬åˆ°ä¸€åŠè¢«ä¸‹æ¶çš„æ’­å®¢ã€‚&lt;/center&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=ghx4l0Cp9o0&quot;&gt;ã€051ã€‘ç˜Ÿç–«ã€è¯­è¨€å’Œå…·ä½“çš„äººï¼šä¸å†å²å­¦å®¶ç½—æ–°çš„èŠå¤©&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=mdTxI-H59K0&quot;&gt;ã€å‰©ä½™æ¦¨å€¼ 023ã€‘åœ¨å·¨å¤§çš„ shock åï¼Œæˆ‘ä»¬æ‰€æ€è€ƒçš„ã€æ‰€åšçš„ä¸€åˆ‡éƒ½å°†ä¸æ­¤æœ‰å…³&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    
    <category term="æ‚" scheme="https://yikayiyo.github.io/tags/%E6%9D%82/"/>
    
  </entry>
  
  <entry>
    <title>styled-components + formå°é—®é¢˜</title>
    <link href="https://yikayiyo.github.io/2020/09/01/styled-components%20+%20form%E5%B0%8F%E9%97%AE%E9%A2%98/"/>
    <id>https://yikayiyo.github.io/2020/09/01/styled-components%20+%20form%E5%B0%8F%E9%97%AE%E9%A2%98/</id>
    <published>2020-09-01T08:02:15.000Z</published>
    <updated>2023-11-22T10:18:22.747Z</updated>
    
    <content type="html"><![CDATA[<p>å¼‚å¸¸ä»£ç ï¼š</p><figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¡¨å•ä¸èƒ½è¾“å…¥å€¼</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">SignUp</span> = props =&gt; {</span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">Wrapper</span> = styled.<span class="property">div</span><span class="string">`</span></span><br><span class="line"><span class="string">    border: 1px solid #f5f4f0;</span></span><br><span class="line"><span class="string">    max-width: 500px;</span></span><br><span class="line"><span class="string">    padding: 1em;</span></span><br><span class="line"><span class="string">    margin: 0 auto;</span></span><br><span class="line"><span class="string">  `</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">Form</span> = styled.<span class="property">form</span><span class="string">`</span></span><br><span class="line"><span class="string">    label,</span></span><br><span class="line"><span class="string">    input {</span></span><br><span class="line"><span class="string">      display: block;</span></span><br><span class="line"><span class="string">      line-height: 2em;</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    input {</span></span><br><span class="line"><span class="string">      width: 100%;</span></span><br><span class="line"><span class="string">      margin-bottom: 1em;</span></span><br><span class="line"><span class="string">    }</span></span><br><span class="line"><span class="string">  `</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Wrapper</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Sign Up<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Form</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onSubmit</span>=<span class="string">{...}</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">"username"</span>&gt;</span>Username:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">"email"</span>&gt;</span>Email:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">"password"</span>&gt;</span>Password:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Button</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Wrapper</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure><p>å°† <code>styled-components</code> éƒ¨åˆ†çš„ä»£ç æ”¾åœ¨ç»„ä»¶çš„<strong>å¤–éƒ¨</strong>ï¼Œä»£ç å°±æ­£å¸¸äº†â€¦</p><p><a href="https://styled-components.com/docs/basics#define-styled-components-outside-of-the-render-method">å®˜æ–¹è¯´æ˜</a></p><blockquote><p>It is important to define your styled components outside of the render method, otherwise it will be recreated on every single render pass. Defining a styled component within the render method will thwart caching and drastically slow down rendering speed, and should be avoided.</p></blockquote><p>å°¤å…¶åœ¨å¤„ç†è¡¨å•æ—¶ï¼Œå¦‚æœæ¯è¾“å…¥ä¸€ä¸ªå­—ç¬¦å°±<code>re-render</code>ç»„ä»¶ï¼Œçš„ç¡®ä¼šå¾ˆå¥‡æ€ªã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å¼‚å¸¸ä»£ç ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line</summary>
      
    
    
    
    
    <category term="å‰ç«¯" scheme="https://yikayiyo.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="React" scheme="https://yikayiyo.github.io/tags/React/"/>
    
    <category term="styled-components" scheme="https://yikayiyo.github.io/tags/styled-components/"/>
    
    <category term="è¡¨å•" scheme="https://yikayiyo.github.io/tags/%E8%A1%A8%E5%8D%95/"/>
    
  </entry>
  
  <entry>
    <title>ç½‘ç«™æ€§èƒ½æå‡æœ€ä½³å®è·µå››</title>
    <link href="https://yikayiyo.github.io/2020/06/30/%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E5%9B%9B/"/>
    <id>https://yikayiyo.github.io/2020/06/30/%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E5%9B%9B/</id>
    <published>2020-06-30T03:08:45.000Z</published>
    <updated>2023-11-22T10:18:22.938Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink">https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink</a></p><ul><li>Content</li><li>Server</li><li>Cookie</li><li>CSS</li><li>JavaScript</li><li>Images</li><li>Mobile</li></ul><p>åŸæ–‡ä»ä¸ƒä¸ªæ–¹é¢æ€»ç»“ç½‘ç«™æ€§èƒ½æå‡ã€‚</p><p>æœ¬ç¯‡æ€»ç»“Javascriptã€Imagesæ–¹é¢ã€‚</p><h2 id="Javascript"><a href="#Javascript" class="headerlink" title="Javascript"></a>Javascript</h2><h3 id="Put-Scripts-at-Bottom-è„šæœ¬æ”¾åœ¨åº•éƒ¨"><a href="#Put-Scripts-at-Bottom-è„šæœ¬æ”¾åœ¨åº•éƒ¨" class="headerlink" title="Put Scripts at Bottom è„šæœ¬æ”¾åœ¨åº•éƒ¨"></a><a href="https://developer.yahoo.com/performance/rules.html#js_bottom">Put Scripts at Bottom</a> è„šæœ¬æ”¾åœ¨åº•éƒ¨</h3><p>è„šæœ¬ä¼šé˜»å¡å¹¶è¡Œä¸‹è½½</p><p><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1.4">HTTP / 1.1è§„èŒƒ</a>å»ºè®®æµè§ˆå™¨æ¯ä¸ªä¸»æœºåå¹¶è¡Œä¸‹è½½æœ€å¤šä¸¤ä¸ªç»„ä»¶</p><p>å¦‚æœæœ‰å¤šä¸ªä¸»æœºåæä¾›<strong>å›¾åƒ</strong>ï¼Œåˆ™å¯ä»¥å¹¶è¡Œè¿›è¡Œä¸¤ä¸ªä»¥ä¸Šçš„ä¸‹è½½ï¼Œä½†æ˜¯åœ¨ä¸‹è½½<strong>è„šæœ¬</strong>æ—¶ï¼Œå³ä½¿ä½¿ç”¨ä¸åŒçš„ä¸»æœºåï¼Œæµè§ˆå™¨ä¹Ÿä¸ä¼šå¯åŠ¨ä»»ä½•å…¶ä»–ä¸‹è½½</p><p>deferè„šæœ¬è¡¨ç¤ºè„šæœ¬ä¸åŒ…å«document.writeï¼Œæµè§ˆå™¨å¯ä»¥ç»§ç»­æ¸²æŸ“</p><p>é€šå¸¸ä¸€ä¸ªè„šæœ¬å¦‚æœå¯ä»¥deferedï¼Œé‚£å®ƒä¹Ÿå¯ä»¥ç§»åŠ¨åˆ°é¡µé¢åº•éƒ¨</p><h3 id="Make-JavaScript-and-CSS-External-ä»å¤–éƒ¨å¼•ç”¨jsè„šæœ¬å’Œcssæ–‡ä»¶"><a href="#Make-JavaScript-and-CSS-External-ä»å¤–éƒ¨å¼•ç”¨jsè„šæœ¬å’Œcssæ–‡ä»¶" class="headerlink" title="Make JavaScript and CSS External ä»å¤–éƒ¨å¼•ç”¨jsè„šæœ¬å’Œcssæ–‡ä»¶"></a><a href="https://developer.yahoo.com/performance/rules.html#external">Make JavaScript and CSS External</a> ä»å¤–éƒ¨å¼•ç”¨jsè„šæœ¬å’Œcssæ–‡ä»¶</h3><p>åœ¨HTMLæ–‡æ¡£ä¸­å†…åµŒçš„JavaScriptå’ŒCSSä¼šåœ¨æ¯æ¬¡è¯·æ±‚HTMLæ–‡æ¡£æ—¶è¢«ä¸‹è½½</p><p>ä½¿ç”¨å¤–éƒ¨æ–‡ä»¶é€šå¸¸ä¼šäº§ç”Ÿæ›´å¿«çš„é¡µé¢ï¼Œå› ä¸ºJavaScriptå’ŒCSSæ–‡ä»¶è¢«æµè§ˆå™¨ç¼“å­˜</p><p>å¦‚æœJavaScriptå’ŒCSSåœ¨å¤–éƒ¨æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”è¢«æµè§ˆå™¨ç¼“å­˜ï¼Œåˆ™åœ¨ä¸å¢åŠ HTTPè¯·æ±‚æ¬¡æ•°çš„æƒ…å†µä¸‹å‡å°äº†HTMLæ–‡æ¡£çš„å¤§å°</p><p>å¦‚æœç”¨æˆ·æ¯æ¬¡ä¼šè¯éƒ½æœ‰å¤šä¸ªé¡µé¢æµè§ˆï¼Œå¹¶ä¸”è®¸å¤šé¡µé¢é‡å¤ä½¿ç”¨ç›¸åŒçš„è„šæœ¬å’Œæ ·å¼è¡¨ï¼Œé‚£ä¹ˆç¼“å­˜å¤–éƒ¨æ–‡ä»¶çš„æ½œåœ¨å¥½å¤„å°±æ›´å¤§</p><p>å¯¹äºä¸»é¡µï¼Œè¿™ç§æ¯æ¬¡ä¼šè¯åªè®¿é—®ä¸€æ¬¡çš„é¡µé¢ï¼Œå°†jså’Œcsså†…è”å¯èƒ½æ›´å¥½</p><p>ä¸€ä¸ªæ ·ä¾‹ï¼š</p><p>å¯¹äºè®¸å¤šæµè§ˆé¡µé¢çš„ç¬¬ä¸€ä¸ªé¡µé¢ï¼Œå†…è”jså’Œcssï¼ˆå‡å°‘è¯·æ±‚æ¬¡æ•°ï¼Œè¯¥é¡µé¢<strong>åŠ è½½å®ŒååŠ¨æ€ä¸‹è½½</strong>å¤–éƒ¨æ–‡ä»¶ï¼Œéšåè®¿é—®çš„é¡µé¢ä¼šä½¿ç”¨è¿™äº›<strong>ç¼“å­˜</strong></p><h3 id="Minify-JavaScript-and-CSS-å‹ç¼©JavaScriptå’ŒCSS"><a href="#Minify-JavaScript-and-CSS-å‹ç¼©JavaScriptå’ŒCSS" class="headerlink" title="Minify JavaScript and CSS å‹ç¼©JavaScriptå’ŒCSS"></a><a href="https://developer.yahoo.com/performance/rules.html#minify">Minify JavaScript and CSS</a> å‹ç¼©JavaScriptå’ŒCSS</h3><p>å‹ç¼©ä»£ç æŒ‡çš„æ˜¯åˆ é™¤ä¸å¿…è¦çš„ä»£ç ï¼Œå‡å°ä»£ç ä½“ç§¯ï¼ˆå› æ­¤å¯ä»¥æå‡å“åº”æ€§èƒ½</p><p>æ··æ·†ä»£ç ä¹Ÿæ˜¯å‡å°ä»£ç ä½“ç§¯çš„æ–¹æ³•ï¼Œä½†æ˜¯is more risky</p><p>é™¤äº†å‹ç¼©å¤–éƒ¨è„šæœ¬å’Œæ ·å¼ä¹‹å¤–ï¼Œå¯ä»¥å¹¶ä¸”ä¹Ÿåº”è¯¥å‹ç¼©å†…è”çš„<code>&lt;script&gt;</code>å’Œ<code>&lt;style&gt;</code>å—ã€‚</p><p>å³ä½¿è„šæœ¬å’Œcssæ–‡ä»¶å·²ç»è¢«gzipäº†ï¼Œå‹ç¼©è¿˜èƒ½è®©å®ƒä»¬çš„ä½“ç§¯å‡å°‘5%ä»¥ä¸Š</p><p><a href="https://tool.oschina.net/jscompress">åœ¨çº¿å‹ç¼©å·¥å…·</a></p><span id="more"></span><h3 id="Remove-Duplicate-Scripts-åˆ é™¤é‡å¤è„šæœ¬"><a href="#Remove-Duplicate-Scripts-åˆ é™¤é‡å¤è„šæœ¬" class="headerlink" title="Remove Duplicate Scripts åˆ é™¤é‡å¤è„šæœ¬"></a><a href="https://developer.yahoo.com/performance/rules.html#js_dupes">Remove Duplicate Scripts</a> åˆ é™¤é‡å¤è„šæœ¬</h3><p>é‡å¤è„šæœ¬å‡ºç°çš„ä¸¤ä¸ªå…³é”®å› ç´ ï¼š</p><ul><li>è„šæœ¬æ•°é‡å¤ªå¤š</li><li>å›¢é˜Ÿäººæ•°å¤ªå¤š</li></ul><p>é‡å¤è„šæœ¬å› ä¸ºæµªè´¹HTTPè¯·æ±‚å’ŒJsæ‰§è¡Œè€ŒæŸå®³æ€§èƒ½</p><p>é¿å…æ–¹æ³•ï¼š</p><ul><li><p>ä½¿ç”¨scriptæ ‡ç­¾å¼•å…¥jsè„šæœ¬ï¼ˆä¸éƒ½æ˜¯è¿™ä¹ˆåšçš„å—ï¼Ÿ</p></li><li><p>phpä»£ç </p><figure class="highlight php"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">insertScript</span>(<span class="string">"menu.js"</span>) <span class="meta">?&gt;</span></span><br></pre></td></tr></tbody></table></figure></li></ul><h3 id="Minimize-DOM-Access-æœ€å°åŒ–DOMè®¿é—®"><a href="#Minimize-DOM-Access-æœ€å°åŒ–DOMè®¿é—®" class="headerlink" title="Minimize DOM Access æœ€å°åŒ–DOMè®¿é—®"></a><a href="https://developer.yahoo.com/performance/rules.html#dom_access">Minimize DOM Access</a> æœ€å°åŒ–DOMè®¿é—®</h3><p>ä½¿ç”¨JavaScriptè®¿é—®DOMå…ƒç´ çš„é€Ÿåº¦å¾ˆæ…¢ï¼Œå› æ­¤ï¼Œä¸ºäº†ä½¿é¡µé¢æ›´å…·å“åº”æ€§ï¼Œåº”è¯¥ï¼š</p><ul><li><p>ç¼“å­˜å¯¹å·²è®¿é—®å…ƒç´ çš„å¼•ç”¨</p></li><li><p>â€œç¦»çº¿â€æ›´æ–°èŠ‚ç‚¹ï¼Œç„¶åå°†å…¶æ·»åŠ åˆ°æ ‘ä¸­</p></li><li><p>é¿å…ä½¿ç”¨JavaScriptä¿®å¤å¸ƒå±€</p></li></ul><h3 id="Develop-Smart-Event-Handlers-å¼€å‘èªæ˜çš„äº‹ä»¶å¤„ç†ç¨‹åº"><a href="#Develop-Smart-Event-Handlers-å¼€å‘èªæ˜çš„äº‹ä»¶å¤„ç†ç¨‹åº" class="headerlink" title="Develop Smart Event Handlers å¼€å‘èªæ˜çš„äº‹ä»¶å¤„ç†ç¨‹åº"></a><a href="https://developer.yahoo.com/performance/rules.html#events">Develop Smart Event Handlers</a> å¼€å‘èªæ˜çš„äº‹ä»¶å¤„ç†ç¨‹åº</h3><p>å¦‚æœdivä¸­æœ‰10ä¸ªæŒ‰é’®ï¼Œåˆ™ä»…å°†ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºé™„åŠ åˆ°divåŒ…è£…å™¨ä¸Šï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªæŒ‰é’®é™„åŠ ä¸€ä¸ªå¤„ç†ç¨‹åº</p><p>æ— éœ€ç­‰å¾…onloadäº‹ä»¶å³å¯å¼€å§‹å¯¹DOMæ ‘è¿›è¡Œæ“ä½œ</p><p>DOMContentLoadedå¯èƒ½æ›´é€‚åˆä½¿ç”¨</p><h2 id="Images"><a href="#Images" class="headerlink" title="Images"></a>Images</h2><h3 id="Optimize-Images-ä¼˜åŒ–å›¾ç‰‡"><a href="#Optimize-Images-ä¼˜åŒ–å›¾ç‰‡" class="headerlink" title="Optimize Images ä¼˜åŒ–å›¾ç‰‡"></a><a href="https://developer.yahoo.com/performance/rules.html#opt_images">Optimize Images</a> ä¼˜åŒ–å›¾ç‰‡</h3><p>æ£€æŸ¥GIFï¼Œçœ‹çœ‹å®ƒä»¬æ˜¯å¦ä½¿ç”¨äº†ä¸å›¾åƒä¸­é¢œè‰²æ•°é‡ç›¸å¯¹åº”çš„è°ƒè‰²æ¿å¤§å°</p><p>å°è¯•å°†GIFsè½¬æ¢ä¸ºPNGs</p><p>ä½¿ç”¨<a href="https://pmt.sourceforge.io/pngcrush/">pngcrush</a>å‹ç¼©PNG</p><p>ä½¿ç”¨<a href="https://jpegclub.org/">jpegtran</a>å¤„ç†JPEG</p><h3 id="Optimize-CSS-Sprites-ä¼˜åŒ–CSS-Sprites"><a href="#Optimize-CSS-Sprites-ä¼˜åŒ–CSS-Sprites" class="headerlink" title="Optimize CSS Sprites ä¼˜åŒ–CSS Sprites"></a><a href="https://developer.yahoo.com/performance/rules.html#opt_sprites">Optimize CSS Sprites</a> ä¼˜åŒ–CSS Sprites</h3><p>å°†spriteä¸­çš„å›¾åƒæ°´å¹³æ’åˆ—ï¼Œè€Œä¸æ˜¯å‚ç›´æ’åˆ—ï¼Œé€šå¸¸ä¼šç”Ÿæˆè¾ƒå°çš„æ–‡ä»¶</p><p>å°†spriteä¸­ç›¸è¿‘çš„é¢œè‰²ç»„åˆï¼Œæœ‰åŠ©äºä¿æŒè¾ƒä½çš„é¢œè‰²æ•°é‡</p><p>â€œè¦mobile-friendlyâ€ï¼Œä¸è¦åœ¨spriteä¸­çš„å›¾åƒä¹‹é—´ç•™ä¸‹å¤§çš„ç©ºéš™</p><h3 id="Do-Not-Scale-Images-in-HTML-ä¸åœ¨HTMLä¸­ç¼©æ”¾å›¾ç‰‡"><a href="#Do-Not-Scale-Images-in-HTML-ä¸åœ¨HTMLä¸­ç¼©æ”¾å›¾ç‰‡" class="headerlink" title="Do Not Scale Images in HTML ä¸åœ¨HTMLä¸­ç¼©æ”¾å›¾ç‰‡"></a><a href="https://developer.yahoo.com/performance/rules.html#no_scale">Do Not Scale Images in HTML</a> ä¸åœ¨HTMLä¸­ç¼©æ”¾å›¾ç‰‡</h3><p>éœ€è¦å¤šå¤§çš„å›¾ç‰‡å°±ä½¿ç”¨å¤šå¤§çš„å›¾ç‰‡</p><p>ä¾‹å­ï¼š</p><p>éœ€è¦ä¸€ä¸ª100x100çš„å›¾ç‰‡ï¼Œä¸è¦æ¥ä¸ª500x500çš„å›¾ç‰‡ç„¶åå»å‹ç¼©å®ƒ</p><h3 id="Make-favicon-ico-Small-and-Cacheable-å›¾æ ‡è¦å°ã€å¯ç¼“å­˜"><a href="#Make-favicon-ico-Small-and-Cacheable-å›¾æ ‡è¦å°ã€å¯ç¼“å­˜" class="headerlink" title="Make favicon.ico Small and Cacheable å›¾æ ‡è¦å°ã€å¯ç¼“å­˜"></a><a href="https://developer.yahoo.com/performance/rules.html#favicon">Make favicon.ico Small and Cacheable</a> å›¾æ ‡è¦å°ã€å¯ç¼“å­˜</h3><p>favicon.ico å³ä½¿ä½ ä¸å…³å¿ƒå®ƒï¼Œæµè§ˆå™¨ä¹Ÿä¼šè¯·æ±‚å®ƒï¼Œæœ€å¥½ä¸è¦ä½¿ç”¨404å“åº”å®ƒ</p><p>ç”±äºå®ƒåœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œå› æ­¤æ¯æ¬¡è¯·æ±‚æ—¶éƒ½ä¼šå‘é€cookie</p><p>å®ƒè¿˜ä¼šå¹²æ‰°ä¸‹è½½é¡ºåº</p><p>ä¸ºäº†å…‹æœå¼Šç«¯ï¼š</p><ul><li>ä¿è¯å®ƒå°½å¯èƒ½å°ï¼Œæœ€å¥½å°äº1K</li><li>æ ¹æ®éœ€è¦è®¾ç½®Expiresè¿‡æœŸå¤´ï¼ˆå›¾æ ‡çš„åå­—ä¸èƒ½æ”¹</li></ul><p><a href="http://www.imagemagick.org/">Imagemagick</a> å¯ä»¥å¸®åŠ©ä½ åˆ›å»ºå°å›¾æ ‡</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink&quot;&gt;https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Content&lt;/li&gt;
&lt;li&gt;Server&lt;/li&gt;
&lt;li&gt;Cookie&lt;/li&gt;
&lt;li&gt;CSS&lt;/li&gt;
&lt;li&gt;JavaScript&lt;/li&gt;
&lt;li&gt;Images&lt;/li&gt;
&lt;li&gt;Mobile&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åŸæ–‡ä»ä¸ƒä¸ªæ–¹é¢æ€»ç»“ç½‘ç«™æ€§èƒ½æå‡ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡æ€»ç»“Javascriptã€Imagesæ–¹é¢ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Javascript&quot;&gt;&lt;a href=&quot;#Javascript&quot; class=&quot;headerlink&quot; title=&quot;Javascript&quot;&gt;&lt;/a&gt;Javascript&lt;/h2&gt;&lt;h3 id=&quot;Put-Scripts-at-Bottom-è„šæœ¬æ”¾åœ¨åº•éƒ¨&quot;&gt;&lt;a href=&quot;#Put-Scripts-at-Bottom-è„šæœ¬æ”¾åœ¨åº•éƒ¨&quot; class=&quot;headerlink&quot; title=&quot;Put Scripts at Bottom è„šæœ¬æ”¾åœ¨åº•éƒ¨&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://developer.yahoo.com/performance/rules.html#js_bottom&quot;&gt;Put Scripts at Bottom&lt;/a&gt; è„šæœ¬æ”¾åœ¨åº•éƒ¨&lt;/h3&gt;&lt;p&gt;è„šæœ¬ä¼šé˜»å¡å¹¶è¡Œä¸‹è½½&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1.4&quot;&gt;HTTP / 1.1è§„èŒƒ&lt;/a&gt;å»ºè®®æµè§ˆå™¨æ¯ä¸ªä¸»æœºåå¹¶è¡Œä¸‹è½½æœ€å¤šä¸¤ä¸ªç»„ä»¶&lt;/p&gt;
&lt;p&gt;å¦‚æœæœ‰å¤šä¸ªä¸»æœºåæä¾›&lt;strong&gt;å›¾åƒ&lt;/strong&gt;ï¼Œåˆ™å¯ä»¥å¹¶è¡Œè¿›è¡Œä¸¤ä¸ªä»¥ä¸Šçš„ä¸‹è½½ï¼Œä½†æ˜¯åœ¨ä¸‹è½½&lt;strong&gt;è„šæœ¬&lt;/strong&gt;æ—¶ï¼Œå³ä½¿ä½¿ç”¨ä¸åŒçš„ä¸»æœºåï¼Œæµè§ˆå™¨ä¹Ÿä¸ä¼šå¯åŠ¨ä»»ä½•å…¶ä»–ä¸‹è½½&lt;/p&gt;
&lt;p&gt;deferè„šæœ¬è¡¨ç¤ºè„šæœ¬ä¸åŒ…å«document.writeï¼Œæµè§ˆå™¨å¯ä»¥ç»§ç»­æ¸²æŸ“&lt;/p&gt;
&lt;p&gt;é€šå¸¸ä¸€ä¸ªè„šæœ¬å¦‚æœå¯ä»¥deferedï¼Œé‚£å®ƒä¹Ÿå¯ä»¥ç§»åŠ¨åˆ°é¡µé¢åº•éƒ¨&lt;/p&gt;
&lt;h3 id=&quot;Make-JavaScript-and-CSS-External-ä»å¤–éƒ¨å¼•ç”¨jsè„šæœ¬å’Œcssæ–‡ä»¶&quot;&gt;&lt;a href=&quot;#Make-JavaScript-and-CSS-External-ä»å¤–éƒ¨å¼•ç”¨jsè„šæœ¬å’Œcssæ–‡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;Make JavaScript and CSS External ä»å¤–éƒ¨å¼•ç”¨jsè„šæœ¬å’Œcssæ–‡ä»¶&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://developer.yahoo.com/performance/rules.html#external&quot;&gt;Make JavaScript and CSS External&lt;/a&gt; ä»å¤–éƒ¨å¼•ç”¨jsè„šæœ¬å’Œcssæ–‡ä»¶&lt;/h3&gt;&lt;p&gt;åœ¨HTMLæ–‡æ¡£ä¸­å†…åµŒçš„JavaScriptå’ŒCSSä¼šåœ¨æ¯æ¬¡è¯·æ±‚HTMLæ–‡æ¡£æ—¶è¢«ä¸‹è½½&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨å¤–éƒ¨æ–‡ä»¶é€šå¸¸ä¼šäº§ç”Ÿæ›´å¿«çš„é¡µé¢ï¼Œå› ä¸ºJavaScriptå’ŒCSSæ–‡ä»¶è¢«æµè§ˆå™¨ç¼“å­˜&lt;/p&gt;
&lt;p&gt;å¦‚æœJavaScriptå’ŒCSSåœ¨å¤–éƒ¨æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”è¢«æµè§ˆå™¨ç¼“å­˜ï¼Œåˆ™åœ¨ä¸å¢åŠ HTTPè¯·æ±‚æ¬¡æ•°çš„æƒ…å†µä¸‹å‡å°äº†HTMLæ–‡æ¡£çš„å¤§å°&lt;/p&gt;
&lt;p&gt;å¦‚æœç”¨æˆ·æ¯æ¬¡ä¼šè¯éƒ½æœ‰å¤šä¸ªé¡µé¢æµè§ˆï¼Œå¹¶ä¸”è®¸å¤šé¡µé¢é‡å¤ä½¿ç”¨ç›¸åŒçš„è„šæœ¬å’Œæ ·å¼è¡¨ï¼Œé‚£ä¹ˆç¼“å­˜å¤–éƒ¨æ–‡ä»¶çš„æ½œåœ¨å¥½å¤„å°±æ›´å¤§&lt;/p&gt;
&lt;p&gt;å¯¹äºä¸»é¡µï¼Œè¿™ç§æ¯æ¬¡ä¼šè¯åªè®¿é—®ä¸€æ¬¡çš„é¡µé¢ï¼Œå°†jså’Œcsså†…è”å¯èƒ½æ›´å¥½&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªæ ·ä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;å¯¹äºè®¸å¤šæµè§ˆé¡µé¢çš„ç¬¬ä¸€ä¸ªé¡µé¢ï¼Œå†…è”jså’Œcssï¼ˆå‡å°‘è¯·æ±‚æ¬¡æ•°ï¼Œè¯¥é¡µé¢&lt;strong&gt;åŠ è½½å®ŒååŠ¨æ€ä¸‹è½½&lt;/strong&gt;å¤–éƒ¨æ–‡ä»¶ï¼Œéšåè®¿é—®çš„é¡µé¢ä¼šä½¿ç”¨è¿™äº›&lt;strong&gt;ç¼“å­˜&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;Minify-JavaScript-and-CSS-å‹ç¼©JavaScriptå’ŒCSS&quot;&gt;&lt;a href=&quot;#Minify-JavaScript-and-CSS-å‹ç¼©JavaScriptå’ŒCSS&quot; class=&quot;headerlink&quot; title=&quot;Minify JavaScript and CSS å‹ç¼©JavaScriptå’ŒCSS&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://developer.yahoo.com/performance/rules.html#minify&quot;&gt;Minify JavaScript and CSS&lt;/a&gt; å‹ç¼©JavaScriptå’ŒCSS&lt;/h3&gt;&lt;p&gt;å‹ç¼©ä»£ç æŒ‡çš„æ˜¯åˆ é™¤ä¸å¿…è¦çš„ä»£ç ï¼Œå‡å°ä»£ç ä½“ç§¯ï¼ˆå› æ­¤å¯ä»¥æå‡å“åº”æ€§èƒ½&lt;/p&gt;
&lt;p&gt;æ··æ·†ä»£ç ä¹Ÿæ˜¯å‡å°ä»£ç ä½“ç§¯çš„æ–¹æ³•ï¼Œä½†æ˜¯is more risky&lt;/p&gt;
&lt;p&gt;é™¤äº†å‹ç¼©å¤–éƒ¨è„šæœ¬å’Œæ ·å¼ä¹‹å¤–ï¼Œå¯ä»¥å¹¶ä¸”ä¹Ÿåº”è¯¥å‹ç¼©å†…è”çš„&lt;code&gt;&amp;lt;script&amp;gt;&lt;/code&gt;å’Œ&lt;code&gt;&amp;lt;style&amp;gt;&lt;/code&gt;å—ã€‚&lt;/p&gt;
&lt;p&gt;å³ä½¿è„šæœ¬å’Œcssæ–‡ä»¶å·²ç»è¢«gzipäº†ï¼Œå‹ç¼©è¿˜èƒ½è®©å®ƒä»¬çš„ä½“ç§¯å‡å°‘5%ä»¥ä¸Š&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://tool.oschina.net/jscompress&quot;&gt;åœ¨çº¿å‹ç¼©å·¥å…·&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="å‰ç«¯" scheme="https://yikayiyo.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="ç¿»è¯‘" scheme="https://yikayiyo.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>ç½‘ç«™æ€§èƒ½æå‡æœ€ä½³å®è·µä¸‰</title>
    <link href="https://yikayiyo.github.io/2020/06/30/%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B8%89/"/>
    <id>https://yikayiyo.github.io/2020/06/30/%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B8%89/</id>
    <published>2020-06-30T02:08:46.000Z</published>
    <updated>2023-11-22T10:18:22.938Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink">https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink</a></p><ul><li>Content</li><li>Server</li><li>Cookie</li><li>CSS</li><li>JavaScript</li><li>Images</li><li>Mobile</li></ul><p>åŸæ–‡ä»ä¸ƒä¸ªæ–¹é¢æ€»ç»“ç½‘ç«™æ€§èƒ½æå‡ã€‚</p><p>æœ¬ç¯‡æ€»ç»“Cookieã€CSSã€Mobileæ–¹é¢ã€‚</p><h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><h3 id="Reduce-Cookie-Size-å‡å°cookieå¤§å°"><a href="#Reduce-Cookie-Size-å‡å°cookieå¤§å°" class="headerlink" title="Reduce Cookie Size å‡å°cookieå¤§å°"></a><a href="https://developer.yahoo.com/performance/rules.html#cookie_size">Reduce Cookie Size</a> å‡å°cookieå¤§å°</h3><p>ä½¿ç”¨HTTP cookieçš„åŸå› æœ‰å¤šç§ï¼Œä¾‹å¦‚èº«ä»½éªŒè¯å’Œä¸ªæ€§åŒ–</p><p>æœåŠ¡å™¨å’Œæµè§ˆå™¨é€šè¿‡HTTP headersäº¤æ¢æœ‰å…³cookieçš„ä¿¡æ¯</p><p>å°½å¯èƒ½å‡å°cookieçš„å¤§å°ï¼Œæœ‰åŠ©äºå‡å°‘å¯¹ç”¨æˆ·å“åº”æ—¶é—´çš„å½±å“</p><h3 id="Use-Cookie-Free-Domains-for-Components-å°½å¯èƒ½ä¸ä½¿ç”¨cookie"><a href="#Use-Cookie-Free-Domains-for-Components-å°½å¯èƒ½ä¸ä½¿ç”¨cookie" class="headerlink" title="Use Cookie-Free Domains for Components å°½å¯èƒ½ä¸ä½¿ç”¨cookie"></a><a href="https://developer.yahoo.com/performance/rules.html#cookie_free">Use Cookie-Free Domains for Components</a> å°½å¯èƒ½ä¸ä½¿ç”¨cookie</h3><p>ç¡®ä¿ä½¿ç”¨æ— Cookieçš„è¯·æ±‚æ¥è¯·æ±‚é™æ€ç»„ä»¶</p><p>åˆ›å»ºä¸€ä¸ªå­åŸŸå¹¶åœ¨å…¶ä¸­æ‰˜ç®¡æ‰€æœ‰é™æ€ç»„ä»¶</p><p>ä¸€äº›ä»£ç†å¯èƒ½æ‹’ç»ç¼“å­˜å¸¦cookieçš„è¯·æ±‚å¾—åˆ°çš„ç»„ä»¶</p><h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><h3 id="Put-Stylesheets-at-Top-æ ·å¼æ–‡ä»¶æ”¾åˆ°é¡¶éƒ¨"><a href="#Put-Stylesheets-at-Top-æ ·å¼æ–‡ä»¶æ”¾åˆ°é¡¶éƒ¨" class="headerlink" title="Put Stylesheets at Top æ ·å¼æ–‡ä»¶æ”¾åˆ°é¡¶éƒ¨"></a><a href="https://developer.yahoo.com/performance/rules.html#css_top">Put Stylesheets at Top</a> æ ·å¼æ–‡ä»¶æ”¾åˆ°é¡¶éƒ¨</h3><p>å°†æ ·å¼è¡¨æ”¾åˆ°HEADå¯ä»¥è®©é¡µé¢é€æ­¥å‘ˆç°</p><h3 id="Avoid-CSS-Expressions-é¿å…ä½¿ç”¨CSSè¡¨è¾¾å¼"><a href="#Avoid-CSS-Expressions-é¿å…ä½¿ç”¨CSSè¡¨è¾¾å¼" class="headerlink" title="Avoid CSS Expressions é¿å…ä½¿ç”¨CSSè¡¨è¾¾å¼"></a><a href="https://developer.yahoo.com/performance/rules.html#css_expressions">Avoid CSS Expressions</a> é¿å…ä½¿ç”¨CSSè¡¨è¾¾å¼</h3><p>cssè¡¨è¾¾å¼å¯ä»¥åŠ¨æ€çš„è®¾ç½®csså±æ€§</p><span id="more"></span><p>ä½†æ˜¯å…¶è°ƒç”¨æ¬¡æ•°è¿‡å¤šï¼Œä¾‹å¦‚é¼ æ ‡åœ¨é¡µé¢ä¸Šç§»åŠ¨ã€æ”¾å¤§ç¼©å°äº†çª—å£ã€é¡µé¢æ»šåŠ¨ç­‰</p><p>å¯ä»¥ä½¿ç”¨event handlersä½œä¸ºæ›¿ä»£</p><h3 id="Choose-Over-import-ä½¿ç”¨linkè€Œä¸æ˜¯-import"><a href="#Choose-Over-import-ä½¿ç”¨linkè€Œä¸æ˜¯-import" class="headerlink" title="Choose <link> Over @import ä½¿ç”¨linkè€Œä¸æ˜¯@import"></a><a href="https://developer.yahoo.com/performance/rules.html#csslink">Choose <code>&lt;link&gt;</code> Over @import</a> ä½¿ç”¨linkè€Œä¸æ˜¯@import</h3><p>In IE <code>@import</code> behaves the same as using <code>&lt;link&gt;</code> at the bottom of the page, so itâ€™s best not to use it.</p><h3 id="Avoid-Filters-é¿å…ä½¿ç”¨Filters"><a href="#Avoid-Filters-é¿å…ä½¿ç”¨Filters" class="headerlink" title="Avoid Filters é¿å…ä½¿ç”¨Filters"></a><a href="https://developer.yahoo.com/performance/rules.html#no_filters">Avoid Filters</a> é¿å…ä½¿ç”¨Filters</h3><p>IEä¸“æœ‰çš„AlphaImageLoaderè¿‡æ»¤å™¨æ—¨åœ¨è§£å†³IEç‰ˆæœ¬&lt;7çš„åŠé€æ˜çœŸå½©è‰²PNGçš„é—®é¢˜ã€‚è¯¥è¿‡æ»¤å™¨çš„é—®é¢˜æ˜¯ï¼Œå½“å›¾åƒè¢«ä¸‹è½½æ—¶ï¼Œå®ƒä¼šé˜»æ­¢æ¸²æŸ“å¹¶å†»ç»“æµè§ˆå™¨ã€‚å®ƒè¿˜ä¼šå¢åŠ å†…å­˜æ¶ˆè€—ï¼Œè€Œä¸”æ˜¯æŒ‰æ¯ä¸ªå…ƒç´ åº”ç”¨ï¼Œè€Œä¸æ˜¯æŒ‰æ¯å¼ å›¾ç‰‡åº”ç”¨ï¼Œæ‰€ä»¥é—®é¢˜ä¼šæˆå€å¢åŠ ã€‚</p><p>æœ€å¥½çš„åŠæ³•æ˜¯å®Œå…¨é¿å…ä½¿ç”¨AlphaImageLoaderï¼Œè€Œä½¿ç”¨ä¼˜é›…é™çº§çš„PNG8ä»£æ›¿ï¼Œè¿™äº›åœ¨IEä¸­éƒ½æ˜¯å¯ä»¥çš„ã€‚å¦‚æœä½ å®åœ¨éœ€è¦AlphaImageLoaderï¼Œè¯·ä½¿ç”¨<code>_filter</code>ï¼Œä»¥å…å½±å“IE7ä»¥ä¸Šç”¨æˆ·ã€‚</p><h2 id="Mobile"><a href="#Mobile" class="headerlink" title="Mobile"></a>Mobile</h2><h3 id="Keep-Components-Under-25-KB-ç»„ä»¶ä¸è¶…è¿‡25KB"><a href="#Keep-Components-Under-25-KB-ç»„ä»¶ä¸è¶…è¿‡25KB" class="headerlink" title="Keep Components Under 25 KB ç»„ä»¶ä¸è¶…è¿‡25KB"></a><a href="https://developer.yahoo.com/performance/rules.html#under25">Keep Components Under 25 KB</a> ç»„ä»¶ä¸è¶…è¿‡25KB</h3><p>æ­¤é™åˆ¶ä¸ä»¥ä¸‹äº‹å®æœ‰å…³ï¼šiPhoneä¸ä¼šç¼“å­˜å¤§äº25Kçš„ç»„ä»¶ã€‚</p><p>è¯·æ³¨æ„ï¼Œè¿™æ˜¯<strong>æœªå‹ç¼©çš„å¤§å°</strong>ã€‚</p><p>ç¼©å°åœ¨è¿™é‡Œéå¸¸é‡è¦ï¼Œå› ä¸ºä»…ä½¿ç”¨gzipå¯èƒ½è¿˜ä¸å¤Ÿã€‚</p><h3 id="Pack-Components-Into-a-Multipart-Document-æ‰“åŒ…ç»„ä»¶"><a href="#Pack-Components-Into-a-Multipart-Document-æ‰“åŒ…ç»„ä»¶" class="headerlink" title="Pack Components Into a Multipart Document æ‰“åŒ…ç»„ä»¶"></a><a href="https://developer.yahoo.com/performance/rules.html#multipart">Pack Components Into a Multipart Document</a> æ‰“åŒ…ç»„ä»¶</h3><p>å°†ç»„ä»¶æ‰“åŒ…åˆ°ä¸€ä¸ªå¤šéƒ¨åˆ†çš„æ–‡æ¡£ä¸­ï¼Œå°±åƒä¸€å°å¸¦æœ‰é™„ä»¶çš„ç”µå­é‚®ä»¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ <strong>ç”¨ä¸€ä¸ªHTTPè¯·æ±‚è·å–å¤šä¸ªç»„ä»¶</strong></p><p>HTTP requests are expensiveï¼</p><p>ä½¿ç”¨è¿™é¡¹æŠ€æœ¯æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥ç”¨æˆ·ä»£ç†æ˜¯å¦æ”¯æŒï¼ˆiphoneå°±ä¸æ”¯æŒ</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink&quot;&gt;https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Content&lt;/li&gt;
&lt;li&gt;Server&lt;/li&gt;
&lt;li&gt;Cookie&lt;/li&gt;
&lt;li&gt;CSS&lt;/li&gt;
&lt;li&gt;JavaScript&lt;/li&gt;
&lt;li&gt;Images&lt;/li&gt;
&lt;li&gt;Mobile&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åŸæ–‡ä»ä¸ƒä¸ªæ–¹é¢æ€»ç»“ç½‘ç«™æ€§èƒ½æå‡ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡æ€»ç»“Cookieã€CSSã€Mobileæ–¹é¢ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Cookie&quot;&gt;&lt;a href=&quot;#Cookie&quot; class=&quot;headerlink&quot; title=&quot;Cookie&quot;&gt;&lt;/a&gt;Cookie&lt;/h2&gt;&lt;h3 id=&quot;Reduce-Cookie-Size-å‡å°cookieå¤§å°&quot;&gt;&lt;a href=&quot;#Reduce-Cookie-Size-å‡å°cookieå¤§å°&quot; class=&quot;headerlink&quot; title=&quot;Reduce Cookie Size å‡å°cookieå¤§å°&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://developer.yahoo.com/performance/rules.html#cookie_size&quot;&gt;Reduce Cookie Size&lt;/a&gt; å‡å°cookieå¤§å°&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨HTTP cookieçš„åŸå› æœ‰å¤šç§ï¼Œä¾‹å¦‚èº«ä»½éªŒè¯å’Œä¸ªæ€§åŒ–&lt;/p&gt;
&lt;p&gt;æœåŠ¡å™¨å’Œæµè§ˆå™¨é€šè¿‡HTTP headersäº¤æ¢æœ‰å…³cookieçš„ä¿¡æ¯&lt;/p&gt;
&lt;p&gt;å°½å¯èƒ½å‡å°cookieçš„å¤§å°ï¼Œæœ‰åŠ©äºå‡å°‘å¯¹ç”¨æˆ·å“åº”æ—¶é—´çš„å½±å“&lt;/p&gt;
&lt;h3 id=&quot;Use-Cookie-Free-Domains-for-Components-å°½å¯èƒ½ä¸ä½¿ç”¨cookie&quot;&gt;&lt;a href=&quot;#Use-Cookie-Free-Domains-for-Components-å°½å¯èƒ½ä¸ä½¿ç”¨cookie&quot; class=&quot;headerlink&quot; title=&quot;Use Cookie-Free Domains for Components å°½å¯èƒ½ä¸ä½¿ç”¨cookie&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://developer.yahoo.com/performance/rules.html#cookie_free&quot;&gt;Use Cookie-Free Domains for Components&lt;/a&gt; å°½å¯èƒ½ä¸ä½¿ç”¨cookie&lt;/h3&gt;&lt;p&gt;ç¡®ä¿ä½¿ç”¨æ— Cookieçš„è¯·æ±‚æ¥è¯·æ±‚é™æ€ç»„ä»¶&lt;/p&gt;
&lt;p&gt;åˆ›å»ºä¸€ä¸ªå­åŸŸå¹¶åœ¨å…¶ä¸­æ‰˜ç®¡æ‰€æœ‰é™æ€ç»„ä»¶&lt;/p&gt;
&lt;p&gt;ä¸€äº›ä»£ç†å¯èƒ½æ‹’ç»ç¼“å­˜å¸¦cookieçš„è¯·æ±‚å¾—åˆ°çš„ç»„ä»¶&lt;/p&gt;
&lt;h2 id=&quot;CSS&quot;&gt;&lt;a href=&quot;#CSS&quot; class=&quot;headerlink&quot; title=&quot;CSS&quot;&gt;&lt;/a&gt;CSS&lt;/h2&gt;&lt;h3 id=&quot;Put-Stylesheets-at-Top-æ ·å¼æ–‡ä»¶æ”¾åˆ°é¡¶éƒ¨&quot;&gt;&lt;a href=&quot;#Put-Stylesheets-at-Top-æ ·å¼æ–‡ä»¶æ”¾åˆ°é¡¶éƒ¨&quot; class=&quot;headerlink&quot; title=&quot;Put Stylesheets at Top æ ·å¼æ–‡ä»¶æ”¾åˆ°é¡¶éƒ¨&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://developer.yahoo.com/performance/rules.html#css_top&quot;&gt;Put Stylesheets at Top&lt;/a&gt; æ ·å¼æ–‡ä»¶æ”¾åˆ°é¡¶éƒ¨&lt;/h3&gt;&lt;p&gt;å°†æ ·å¼è¡¨æ”¾åˆ°HEADå¯ä»¥è®©é¡µé¢é€æ­¥å‘ˆç°&lt;/p&gt;
&lt;h3 id=&quot;Avoid-CSS-Expressions-é¿å…ä½¿ç”¨CSSè¡¨è¾¾å¼&quot;&gt;&lt;a href=&quot;#Avoid-CSS-Expressions-é¿å…ä½¿ç”¨CSSè¡¨è¾¾å¼&quot; class=&quot;headerlink&quot; title=&quot;Avoid CSS Expressions é¿å…ä½¿ç”¨CSSè¡¨è¾¾å¼&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://developer.yahoo.com/performance/rules.html#css_expressions&quot;&gt;Avoid CSS Expressions&lt;/a&gt; é¿å…ä½¿ç”¨CSSè¡¨è¾¾å¼&lt;/h3&gt;&lt;p&gt;cssè¡¨è¾¾å¼å¯ä»¥åŠ¨æ€çš„è®¾ç½®csså±æ€§&lt;/p&gt;</summary>
    
    
    
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="å‰ç«¯" scheme="https://yikayiyo.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="ç¿»è¯‘" scheme="https://yikayiyo.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>ç½‘ç«™æ€§èƒ½æå‡æœ€ä½³å®è·µäºŒ</title>
    <link href="https://yikayiyo.github.io/2020/06/29/%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%BA%8C/"/>
    <id>https://yikayiyo.github.io/2020/06/29/%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%BA%8C/</id>
    <published>2020-06-29T07:33:05.000Z</published>
    <updated>2023-11-22T10:18:22.938Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink">https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink</a></p><ul><li>Content</li><li>Server</li><li>Cookie</li><li>CSS</li><li>JavaScript</li><li>Images</li><li>Mobile</li></ul><p>åŸæ–‡ä»ä¸ƒä¸ªæ–¹é¢æ€»ç»“ç½‘ç«™æ€§èƒ½æå‡ã€‚</p><p>æœ¬ç¯‡æ€»ç»“Serveræ–¹é¢ã€‚</p><h3 id="Use-a-Content-Delivery-Network-CDN-ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œ"><a href="#Use-a-Content-Delivery-Network-CDN-ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œ" class="headerlink" title="Use a Content Delivery Network (CDN)ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œ"></a><a href="https://developer.yahoo.com/performance/rules.html#cdn">Use a Content Delivery Network (CDN)</a>ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œ</h3><p>ç”¨æˆ·åˆ°æœåŠ¡å™¨çš„è·ç¦»ä¼šå½±å“å“åº”æ—¶é—´ï¼Œæ¯”å¦‚å½“æˆ‘ä»¬è®¿é—®ç¾å›½çš„æœåŠ¡å™¨å’Œä¸­å›½çš„æœåŠ¡å™¨<br>ç”¨æˆ·80%-90%çš„<strong>å“åº”æ—¶é—´</strong>ç”¨æ¥ä¸‹è½½é¡µé¢ä¸Šçš„å†…å®¹<br>ä¸ºäº†åŠ é€Ÿè¿™ä¸ªï¼š</p><ul><li><p>ä¸è¦è½»æ˜“å°è¯•å°†webåº”ç”¨æ”¹ä¸ºåˆ†å¸ƒå¼æ¶æ„</p></li><li><p>å¯ä»¥å°è¯•ä½¿ç”¨CDNï¼Œå°†é™æ€å†…å®¹åˆ†æ•£ï¼ˆåˆ‡æ¢åˆ°CDNæ˜¯ä¸ªç›¸å¯¹ç®€å•çš„ä»£ç å˜åŒ–ï¼Œå°†æå¤§åœ°æé«˜ç½‘ç«™é€Ÿåº¦</p></li></ul><p>ä¸€ä¸ªå†…å®¹åˆ†å‘ç½‘ç»œæ˜¯<strong>åˆ†å¸ƒåœ¨å¤šåœ°çš„æœåŠ¡å™¨é›†åˆ</strong>ï¼Œå¯ä»¥æ›´æœ‰æ•ˆåœ°å‘ç”¨æˆ·æä¾›å†…å®¹</p><h3 id="Add-Expires-or-Cache-Control-Headeræ·»åŠ Expiresæˆ–Cache-Controlå¤´"><a href="#Add-Expires-or-Cache-Control-Headeræ·»åŠ Expiresæˆ–Cache-Controlå¤´" class="headerlink" title="Add Expires or Cache-Control Headeræ·»åŠ Expiresæˆ–Cache-Controlå¤´"></a><a href="https://developer.yahoo.com/performance/rules.html#expires">Add Expires or Cache-Control Header</a>æ·»åŠ Expiresæˆ–Cache-Controlå¤´</h3><ol><li>å¯¹äºé™æ€ç»„ä»¶ï¼Œè®¾ç½®ä¸€ä¸ªé•¿æœŸçš„Expireså¤´ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚â€œæ°¸ä¸è¿‡æœŸâ€</li><li>å¯¹äºåŠ¨æ€ç»„ä»¶ï¼Œä½¿ç”¨é€‚å½“çš„Cache-Controlå¤´ï¼Œæ¥å¸®åŠ©æµè§ˆå™¨æœ‰æ¡ä»¶çš„è¿›è¡Œè¯·æ±‚</li></ol><p>ç½‘é¡µè¢«é¦–æ¬¡è®¿é—®æ—¶éœ€è¦å¤§é‡çš„HTTPè¯·æ±‚ï¼Œé€šè¿‡ä½¿ç”¨Expireså¤´ï¼Œå¯ä»¥ä½¿è¯·æ±‚è¿‡çš„ç»„ä»¶<u>å¯ç¼“å­˜</u>ï¼Œé¿å…åç»­è®¿é—®æ—¶çš„é‡å¤è¯·æ±‚ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªæ“ä½œæ˜¯å¯¹åç»­çš„è¯·æ±‚æœ‰å½±å“</p><p>å¯¹äºæ€§èƒ½çš„æå‡ï¼Œå–å†³ä½ å¯¹è¿™ä¸ªç½‘ç«™çš„è®¿é—®é¢‘ç‡</p><p>WebæœåŠ¡å™¨åœ¨<strong>HTTPå“åº”</strong>ä¸­æ·»åŠ çš„Expireså¤´å‘Šè¯‰å®¢æˆ·ç«¯å¯ä»¥å°†ç»„ä»¶ç¼“å­˜å¤šé•¿æ—¶é—´</p><p>å¦‚æœä½¿ç”¨äº†é•¿æœŸçš„Expireså¤´ï¼Œå½“ç»„ä»¶å‘ç”Ÿæ”¹å˜æ—¶ï¼Œç»„ä»¶ååº”è¯¥æ”¹å˜ï¼ˆæ„å»ºé˜¶æ®µå¤„ç†ï¼šå°†ç»„ä»¶ç‰ˆæœ¬å·åŠ åˆ°ç»„ä»¶åä¸­</p><h3 id="Gzip-Componentså‹ç¼©ç»„ä»¶"><a href="#Gzip-Componentså‹ç¼©ç»„ä»¶" class="headerlink" title="Gzip Componentså‹ç¼©ç»„ä»¶"></a><a href="https://developer.yahoo.com/performance/rules.html#gzip">Gzip Components</a>å‹ç¼©ç»„ä»¶</h3><p>é€šè¿‡<strong>å‹ç¼©HTTPå“åº”</strong>æ¥å‡å°‘å“åº”æ—¶é—´</p><span id="more"></span><p>HTTPè¯·æ±‚å¤´ä¸­è¦æ·»åŠ </p><figure class="highlight http"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Accept-Encoding</span><span class="punctuation">: </span>gzip, deflate</span><br></pre></td></tr></tbody></table></figure><p>æœåŠ¡å™¨æ ¹æ®ä¸Šé¢åˆ—å‡ºçš„æ–¹æ³•ä¹‹ä¸€å‹ç¼©å“åº”ï¼Œå¹¶åœ¨å“åº”å¤´ä¸­æ·»åŠ ä¸‹é¢çš„å­—æ®µæé†’å®¢æˆ·ç«¯</p><figure class="highlight http"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Content-Encoding</span><span class="punctuation">: </span>gzip</span><br></pre></td></tr></tbody></table></figure><p>æœåŠ¡å™¨æ ¹æ®æ–‡ä»¶ç±»å‹é€‰æ‹©è¦å‹ç¼©çš„å†…å®¹ï¼Œä½†é€šå¸¸éå¸¸æœ‰é™</p><p>ä»»ä½•æ–‡æœ¬ç±»å‹çš„å“åº”éƒ½å€¼å¾—å‹ç¼©</p><p>å›¾ç‰‡å’ŒPDFä¸åº”è¯¥å‹ç¼©ï¼ˆå› ä¸ºå·²ç»å‹ç¼©è¿‡äº†</p><p>å‹ç¼©å°½å¯èƒ½å¤šçš„æ–‡ä»¶ç±»å‹æ˜¯å‡å°‘é¡µé¢é‡é‡page weightï¼ŒåŠ é€Ÿç”¨æˆ·ä½“éªŒçš„ç®€å•æ–¹æ³•</p><h3 id="Configure-ETagsé…ç½®å®ä½“æ ‡ç­¾"><a href="#Configure-ETagsé…ç½®å®ä½“æ ‡ç­¾" class="headerlink" title="Configure ETagsé…ç½®å®ä½“æ ‡ç­¾"></a><a href="https://developer.yahoo.com/performance/rules.html#etags">Configure ETags</a>é…ç½®å®ä½“æ ‡ç­¾</h3><p>å½“è¦ç¡®å®šç¼“å­˜çš„å†…å®¹å’ŒæœåŠ¡å™¨ä¸­çš„å†…å®¹æ˜¯å¦ä¸€è‡´æ—¶ï¼Œå®ä½“æ ‡ç­¾æ˜¯æ¯”æœ€åä¿®æ”¹æ—¶é—´ï¼ˆlast-modified dateï¼‰æ›´å®Œå¤‡çš„æœºåˆ¶</p><p>å®ä½“æ ‡ç­¾æ˜¯å”¯ä¸€æ ‡è¯†ç‰¹å®šç‰ˆæœ¬ç»„ä»¶çš„å­—ç¬¦ä¸²ï¼Œå”¯ä¸€æ ¼å¼é™åˆ¶æ˜¯è¦ä½¿ç”¨å¼•å·å¼•èµ·æ¥</p><p>ä¸€ä¸ªä¾‹å­ï¼š</p><p>æœåŠ¡å™¨å‘å›å“åº”å¦‚ä¸‹</p><figure class="highlight http"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">200</span> OK</span><br><span class="line"><span class="attribute">Last-Modified</span><span class="punctuation">: </span>Tue, 12 Dec 2006 03:03:59 GMT</span><br><span class="line"><span class="attribute">ETag</span><span class="punctuation">: </span>"10c24bc-4ab-457e1c1f"</span><br><span class="line"><span class="attribute">Content-Length</span><span class="punctuation">: </span>12195</span><br></pre></td></tr></tbody></table></figure><p>è¿‡ä¸€ä¼šå®¢æˆ·ç«¯è¦éªŒè¯å†…å®¹ï¼Œå°±å‘é€ä¸‹é¢çš„è¯·æ±‚ï¼Œå…¶ä¸­If-None-Matchä¸­å°±æ˜¯è¦éªŒè¯çš„å®ä½“æ ‡ç­¾</p><figure class="highlight http"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/i/yahoo.gif</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>us.yimg.com</span><br><span class="line"><span class="attribute">If-Modified-Since</span><span class="punctuation">: </span>Tue, 12 Dec 2006 03:03:59 GMT</span><br><span class="line"><span class="attribute">If-None-Match</span><span class="punctuation">: </span>"10c24bc-4ab-457e1c1f"</span><br></pre></td></tr></tbody></table></figure><p>å¦‚æœæ ‡ç­¾å¾—åˆ°åŒ¹é…ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ª304å“åº”ï¼Œè¡¨ç¤ºNot Modified</p><p>ç½‘ç«™æœåŠ¡å™¨æ˜¯é›†ç¾¤çš„æƒ…å†µï¼Œè¿™é¡¹æŠ€æœ¯ä¸æ¨èä½¿ç”¨ï¼Œå› ä¸ºï¼š</p><blockquote><p>The problem with ETags is that they typically are constructed using attributes that make them unique to a specific server hosting a site. ETags wonâ€™t match when a browser gets the original component from one server and later tries to validate that component on a different server, a situation that is all too common on Web sites that use a cluster of servers to handle requests. By default, both Apache and IIS embed data in the ETag that dramatically reduces the odds of the validity test succeeding on web sites with multiple servers.</p></blockquote><p>ApacheæœåŠ¡å™¨åˆ é™¤ETagçš„æ–¹æ³•ï¼š</p><ul><li><p>åœ¨é…ç½®æ–‡ä»¶æ·»åŠ ä¸€è¡Œ </p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FileETag none</span><br></pre></td></tr></tbody></table></figure></li></ul><h3 id="Flush-Buffer-Earlyå°½æ—©åˆ·æ–°è¾“å‡ºç¼“å­˜"><a href="#Flush-Buffer-Earlyå°½æ—©åˆ·æ–°è¾“å‡ºç¼“å­˜" class="headerlink" title="Flush Buffer Earlyå°½æ—©åˆ·æ–°è¾“å‡ºç¼“å­˜"></a><a href="https://developer.yahoo.com/performance/rules.html#flush">Flush Buffer Early</a>å°½æ—©åˆ·æ–°è¾“å‡ºç¼“å­˜</h3><p><a href="https://www.php.net/flush">flush()</a> å‡½æ•°å…è®¸å°†éƒ¨åˆ†å°±ç»ªçš„HTMLå“åº”å‘é€å›æµè§ˆå™¨ï¼Œä»¥ä¾¿æµè§ˆå™¨å¯ä»¥åœ¨æœåŠ¡å™¨å¿™äºå¤„ç†å…¶å®ƒHTMLæ—¶å°±å¼€å§‹è·å–ç»„ä»¶</p><p>flushingçš„æœ€ä½³ä½ç½®æ˜¯headæ ‡ç­¾ä¹‹åï¼Œå¦‚ä¸‹</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  ... &lt;!-- css, js --&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;?php flush(); ?&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  ... &lt;!-- content --&gt;</span><br></pre></td></tr></tbody></table></figure><h3 id="Use-GET-for-Ajax-Requests-ä½¿ç”¨GETå¤„ç†Ajaxè¯·æ±‚"><a href="#Use-GET-for-Ajax-Requests-ä½¿ç”¨GETå¤„ç†Ajaxè¯·æ±‚" class="headerlink" title="Use GET for Ajax Requests ä½¿ç”¨GETå¤„ç†Ajaxè¯·æ±‚"></a><a href="https://developer.yahoo.com/performance/rules.html#ajax_get">Use GET for Ajax Requests</a> ä½¿ç”¨GETå¤„ç†Ajaxè¯·æ±‚</h3><p>åœ¨ä½¿ç”¨XMLHttpRequestæ—¶ï¼ŒPOSTåœ¨æµè§ˆå™¨ä¸­çš„å®ç°åˆ†ä¸ºä¸¤æ­¥ï¼šå…ˆå‘é€å¤´æ–‡ä»¶ï¼Œå†å‘é€æ•°æ®ã€‚</p><p>å› æ­¤æœ€å¥½ä½¿ç”¨GETè¯·æ±‚ï¼Œå®ƒåªä½¿ç”¨ä¸€ä¸ªTCPåŒ…å°±å¯ä»¥å‘é€ï¼ˆé™¤éæœ‰å¾ˆå¤šcookie</p><p>POST without posting any data behaves like GET.</p><h3 id="Avoid-Empty-Image-src-é¿å…ç©ºsrcå±æ€§"><a href="#Avoid-Empty-Image-src-é¿å…ç©ºsrcå±æ€§" class="headerlink" title="Avoid Empty Image src é¿å…ç©ºsrcå±æ€§"></a><a href="https://developer.yahoo.com/performance/rules.html#emptysrc">Avoid Empty Image src</a> é¿å…ç©ºsrcå±æ€§</h3><p>ä¸¤ç§å½¢å¼çš„ç©ºsrcå±æ€§</p><ol><li><p>html</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">""</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>js</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>();</span><br><span class="line">img.<span class="property">src</span> = <span class="string">""</span>;</span><br></pre></td></tr></tbody></table></figure></li></ol><p>éƒ½ä¼šå¯¼è‡´ï¼šæµè§ˆå™¨å†æ¬¡å‘æœåŠ¡å™¨å‘é€ä¸€æ¬¡è¯·æ±‚</p><p>é€ æˆè¿™ä¸ªè¡Œä¸ºçš„æ ¹æœ¬åŸå› æ˜¯ï¼šåœ¨æµè§ˆå™¨ä¸­æ‰§è¡ŒURIè§£æçš„æ–¹å¼ï¼Œæµè§ˆå™¨ä¼šå°†ç©ºå­—ç¬¦ä¸²è§†ä¸ºä¸€æ¡ç›¸å¯¹URIï¼Œç„¶åè¿›è¡Œè§£æ</p><p>HTML5å¢åŠ äº†çº¦æŸï¼Œsrcå±æ€§å¿…é¡»éç©º</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink&quot;&gt;https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Content&lt;/li&gt;
&lt;li&gt;Server&lt;/li&gt;
&lt;li&gt;Cookie&lt;/li&gt;
&lt;li&gt;CSS&lt;/li&gt;
&lt;li&gt;JavaScript&lt;/li&gt;
&lt;li&gt;Images&lt;/li&gt;
&lt;li&gt;Mobile&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åŸæ–‡ä»ä¸ƒä¸ªæ–¹é¢æ€»ç»“ç½‘ç«™æ€§èƒ½æå‡ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡æ€»ç»“Serveræ–¹é¢ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Use-a-Content-Delivery-Network-CDN-ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œ&quot;&gt;&lt;a href=&quot;#Use-a-Content-Delivery-Network-CDN-ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œ&quot; class=&quot;headerlink&quot; title=&quot;Use a Content Delivery Network (CDN)ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œ&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://developer.yahoo.com/performance/rules.html#cdn&quot;&gt;Use a Content Delivery Network (CDN)&lt;/a&gt;ä½¿ç”¨å†…å®¹åˆ†å‘ç½‘ç»œ&lt;/h3&gt;&lt;p&gt;ç”¨æˆ·åˆ°æœåŠ¡å™¨çš„è·ç¦»ä¼šå½±å“å“åº”æ—¶é—´ï¼Œæ¯”å¦‚å½“æˆ‘ä»¬è®¿é—®ç¾å›½çš„æœåŠ¡å™¨å’Œä¸­å›½çš„æœåŠ¡å™¨&lt;br&gt;ç”¨æˆ·80%-90%çš„&lt;strong&gt;å“åº”æ—¶é—´&lt;/strong&gt;ç”¨æ¥ä¸‹è½½é¡µé¢ä¸Šçš„å†…å®¹&lt;br&gt;ä¸ºäº†åŠ é€Ÿè¿™ä¸ªï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ä¸è¦è½»æ˜“å°è¯•å°†webåº”ç”¨æ”¹ä¸ºåˆ†å¸ƒå¼æ¶æ„&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å¯ä»¥å°è¯•ä½¿ç”¨CDNï¼Œå°†é™æ€å†…å®¹åˆ†æ•£ï¼ˆåˆ‡æ¢åˆ°CDNæ˜¯ä¸ªç›¸å¯¹ç®€å•çš„ä»£ç å˜åŒ–ï¼Œå°†æå¤§åœ°æé«˜ç½‘ç«™é€Ÿåº¦&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸€ä¸ªå†…å®¹åˆ†å‘ç½‘ç»œæ˜¯&lt;strong&gt;åˆ†å¸ƒåœ¨å¤šåœ°çš„æœåŠ¡å™¨é›†åˆ&lt;/strong&gt;ï¼Œå¯ä»¥æ›´æœ‰æ•ˆåœ°å‘ç”¨æˆ·æä¾›å†…å®¹&lt;/p&gt;
&lt;h3 id=&quot;Add-Expires-or-Cache-Control-Headeræ·»åŠ Expiresæˆ–Cache-Controlå¤´&quot;&gt;&lt;a href=&quot;#Add-Expires-or-Cache-Control-Headeræ·»åŠ Expiresæˆ–Cache-Controlå¤´&quot; class=&quot;headerlink&quot; title=&quot;Add Expires or Cache-Control Headeræ·»åŠ Expiresæˆ–Cache-Controlå¤´&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://developer.yahoo.com/performance/rules.html#expires&quot;&gt;Add Expires or Cache-Control Header&lt;/a&gt;æ·»åŠ Expiresæˆ–Cache-Controlå¤´&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;å¯¹äºé™æ€ç»„ä»¶ï¼Œè®¾ç½®ä¸€ä¸ªé•¿æœŸçš„Expireså¤´ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚â€œæ°¸ä¸è¿‡æœŸâ€&lt;/li&gt;
&lt;li&gt;å¯¹äºåŠ¨æ€ç»„ä»¶ï¼Œä½¿ç”¨é€‚å½“çš„Cache-Controlå¤´ï¼Œæ¥å¸®åŠ©æµè§ˆå™¨æœ‰æ¡ä»¶çš„è¿›è¡Œè¯·æ±‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç½‘é¡µè¢«é¦–æ¬¡è®¿é—®æ—¶éœ€è¦å¤§é‡çš„HTTPè¯·æ±‚ï¼Œé€šè¿‡ä½¿ç”¨Expireså¤´ï¼Œå¯ä»¥ä½¿è¯·æ±‚è¿‡çš„ç»„ä»¶&lt;u&gt;å¯ç¼“å­˜&lt;/u&gt;ï¼Œé¿å…åç»­è®¿é—®æ—¶çš„é‡å¤è¯·æ±‚ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªæ“ä½œæ˜¯å¯¹åç»­çš„è¯·æ±‚æœ‰å½±å“&lt;/p&gt;
&lt;p&gt;å¯¹äºæ€§èƒ½çš„æå‡ï¼Œå–å†³ä½ å¯¹è¿™ä¸ªç½‘ç«™çš„è®¿é—®é¢‘ç‡&lt;/p&gt;
&lt;p&gt;WebæœåŠ¡å™¨åœ¨&lt;strong&gt;HTTPå“åº”&lt;/strong&gt;ä¸­æ·»åŠ çš„Expireså¤´å‘Šè¯‰å®¢æˆ·ç«¯å¯ä»¥å°†ç»„ä»¶ç¼“å­˜å¤šé•¿æ—¶é—´&lt;/p&gt;
&lt;p&gt;å¦‚æœä½¿ç”¨äº†é•¿æœŸçš„Expireså¤´ï¼Œå½“ç»„ä»¶å‘ç”Ÿæ”¹å˜æ—¶ï¼Œç»„ä»¶ååº”è¯¥æ”¹å˜ï¼ˆæ„å»ºé˜¶æ®µå¤„ç†ï¼šå°†ç»„ä»¶ç‰ˆæœ¬å·åŠ åˆ°ç»„ä»¶åä¸­&lt;/p&gt;
&lt;h3 id=&quot;Gzip-Componentså‹ç¼©ç»„ä»¶&quot;&gt;&lt;a href=&quot;#Gzip-Componentså‹ç¼©ç»„ä»¶&quot; class=&quot;headerlink&quot; title=&quot;Gzip Componentså‹ç¼©ç»„ä»¶&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://developer.yahoo.com/performance/rules.html#gzip&quot;&gt;Gzip Components&lt;/a&gt;å‹ç¼©ç»„ä»¶&lt;/h3&gt;&lt;p&gt;é€šè¿‡&lt;strong&gt;å‹ç¼©HTTPå“åº”&lt;/strong&gt;æ¥å‡å°‘å“åº”æ—¶é—´&lt;/p&gt;</summary>
    
    
    
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="å‰ç«¯" scheme="https://yikayiyo.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="ç¿»è¯‘" scheme="https://yikayiyo.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>ç½‘ç«™æ€§èƒ½æå‡æœ€ä½³å®è·µä¸€</title>
    <link href="https://yikayiyo.github.io/2020/06/22/%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B8%80/"/>
    <id>https://yikayiyo.github.io/2020/06/22/%E7%BD%91%E7%AB%99%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B8%80/</id>
    <published>2020-06-22T14:51:53.000Z</published>
    <updated>2023-11-22T10:18:22.937Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink">https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink</a></p><ul><li>Content</li><li>Server</li><li>Cookie</li><li>CSS</li><li>JavaScript</li><li>Images</li><li>Mobile</li></ul><p>åŸæ–‡ä»ä¸ƒä¸ªæ–¹é¢æ€»ç»“ç½‘ç«™æ€§èƒ½æå‡ã€‚</p><p>æœ¬ç¯‡æ€»ç»“Contentæ–¹é¢ã€‚</p><h3 id="Make-Fewer-HTTP-Requests-å‡å°‘HTTPè¯·æ±‚"><a href="#Make-Fewer-HTTP-Requests-å‡å°‘HTTPè¯·æ±‚" class="headerlink" title="Make Fewer HTTP Requests å‡å°‘HTTPè¯·æ±‚"></a><a href="https://developer.yahoo.com/performance/rules.html#num_http">Make Fewer HTTP Requests</a> å‡å°‘HTTPè¯·æ±‚</h3><p>å‡å°‘é¡µé¢çš„ç»„ä»¶æ•°é‡ï¼Œå¯ä»¥å‡å°‘HTTPè¯·æ±‚æ•°é‡ã€‚</p><p>å‡å°‘é¡µé¢ç»„ä»¶çš„æ–¹æ³•ï¼š</p><ul><li><p>ç²¾ç®€é¡µé¢è®¾è®¡</p></li><li><p>ä¸ç®€åŒ–è®¾è®¡çš„æƒ…å†µä¸‹ï¼š</p><ul><li>æ–‡ä»¶ç»„åˆï¼ˆjsæ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªé‡Œé¢ï¼Œcssæ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªé‡Œé¢ï¼‰</li></ul></li><li><p><a href="https://css-tricks.com/css-sprites/">CSS Sprites</a>ï¼šèƒŒæ™¯å›¾ç‰‡åˆå¹¶æˆä¸€å¼ ï¼Œåˆ©ç”¨csså±æ€§è®¾ç½®å„ä¸ªéƒ¨åˆ†åˆ°ç›¸å¯¹åº”çš„é¡µé¢</p><ul><li><a href="https://css-tricks.com/examples/CSSClip/">CSS Sprites with Inline Images</a> ä¹Ÿå¯ä»¥ç”¨æ¥å¤„ç†å›¾ç‰‡</li></ul></li><li><p>å°†å†…è”å›¾ç‰‡æ”¾åˆ°cssæ–‡ä»¶ä¸­ï¼ˆ Combining inline images into your cached stylesheets is a way to reduce HTTP requests and avoid increasing the size of your pages ï¼ŸHow ? ( Todo: find demo</p></li></ul><h3 id="Reduce-DNS-Lookups-å‡å°‘DNSæŸ¥è¯¢"><a href="#Reduce-DNS-Lookups-å‡å°‘DNSæŸ¥è¯¢" class="headerlink" title="Reduce DNS Lookups å‡å°‘DNSæŸ¥è¯¢"></a><a href="https://developer.yahoo.com/performance/rules.html#dns_lookups">Reduce DNS Lookups</a> å‡å°‘DNSæŸ¥è¯¢</h3><p>å‡å°‘ç½‘ç«™çš„ä¸»æœºåï¼ˆhostnamesï¼‰ï¼Œå¯ä»¥å‡å°‘DNSæŸ¥è¯¢æ¬¡æ•°</p><p>ä½†æ˜¯å‡å°‘ç½‘ç«™ä¸»æœºåä¼šå‡å°‘é¡µé¢çš„å¹¶å‘ä¸‹è½½é‡</p><blockquote><p>Trade-offï¼šAvoiding DNS lookups cuts response times, but reducing parallel downloads may increase response times. </p></blockquote><p> Guideï¼šSplit components across <strong>at least two but no more than four</strong> hostnames.</p><h3 id="Avoid-Redirects-é¿å…ç½‘ç«™é‡å®šå‘"><a href="#Avoid-Redirects-é¿å…ç½‘ç«™é‡å®šå‘" class="headerlink" title="Avoid Redirects é¿å…ç½‘ç«™é‡å®šå‘"></a><a href="https://developer.yahoo.com/performance/rules.html#redirects">Avoid Redirects</a> é¿å…ç½‘ç«™é‡å®šå‘</h3><p>æœ€ç»å¸¸å‘ç”Ÿçš„é‡å®šå‘ï¼šåº”è¯¥åŠ /çš„åœ°æ–¹æ²¡æœ‰åŠ /</p><p>é‡å®šå‘å¯ä»¥ç”¨æ¥ä»æ—§ç½‘ç«™è·³è½¬åˆ°æ–°ç½‘ç«™</p><p>é‡å®šå‘ä¹Ÿå¯ä»¥ç”¨æ¥è¿æ¥ç½‘ç«™çš„ä¸åŒéƒ¨åˆ†ã€æ ¹æ®ç‰¹å®šæƒ…å†µè®©ç”¨æˆ·è·³è½¬</p><p>è§£å†³åŠæ³•ï¼š</p><ul><li><p>å¦‚æœä¸¤ä¸ªç½‘ç«™åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨ï¼Œä½¿ç”¨ <code>Alias and mod_rewrite</code></p></li><li><p>å¦‚æœæ˜¯ç½‘ç«™æ¢äº†ä¸ªæ–°åŸŸåï¼Œåˆ›å»ºä¸€ä¸ªCNAME (a DNS record that creates an alias pointing from one domain name to another)ï¼Œç»“åˆ<code>Alias or mod_rewrite</code></p></li></ul><h3 id="Make-Ajax-Cacheable-ç¼“å­˜Ajaxè¯·æ±‚"><a href="#Make-Ajax-Cacheable-ç¼“å­˜Ajaxè¯·æ±‚" class="headerlink" title="Make Ajax Cacheable ç¼“å­˜Ajaxè¯·æ±‚"></a><a href="https://developer.yahoo.com/performance/rules.html#cacheajax">Make Ajax Cacheable</a> ç¼“å­˜Ajaxè¯·æ±‚</h3><p><strong>å¼‚æ­¥ä¸ç­‰äºå³æ—¶</strong></p><p>ä¼˜åŒ–å¼‚æ­¥è¯·æ±‚ï¼š</p><ul><li>ç¼“å­˜Ajaxè¯·æ±‚</li></ul><span id="more"></span><h4 id="ä½•æ—¶ä½¿ç”¨æ—§çš„å“åº”ï¼Œä½•æ—¶å‘é€æ–°çš„è¯·æ±‚ï¼Ÿ"><a href="#ä½•æ—¶ä½¿ç”¨æ—§çš„å“åº”ï¼Œä½•æ—¶å‘é€æ–°çš„è¯·æ±‚ï¼Ÿ" class="headerlink" title="ä½•æ—¶ä½¿ç”¨æ—§çš„å“åº”ï¼Œä½•æ—¶å‘é€æ–°çš„è¯·æ±‚ï¼Ÿ"></a>ä½•æ—¶ä½¿ç”¨æ—§çš„å“åº”ï¼Œä½•æ—¶å‘é€æ–°çš„è¯·æ±‚ï¼Ÿ</h4><blockquote><p>This could be done by adding a timestamp to the address book Ajax URL indicating the last time the user modified her address book, for example, &amp;t=1190241612. If the address book hasnâ€™t been modified since the last download, the timestamp will be the same and the address book will be read from the browserâ€™s cache eliminating an extra HTTP roundtrip. If the user has modified her address book, the timestamp ensures the new URL doesnâ€™t match the cached response, and the browser will request the updated address book entries.</p></blockquote><h3 id="Postload-Components"><a href="#Postload-Components" class="headerlink" title="Postload Components"></a><a href="https://developer.yahoo.com/performance/rules.html#postload">Postload Components</a></h3><p>éå¿…é¡»çš„ç»„ä»¶å»¶è¿ŸåŠ è½½ï¼Œæ¯”å¦‚ä¸€äº›jsä»£ç ã€ç”¨æˆ·ç‚¹å‡»åæ‰æ˜¾ç¤ºçš„å†…å®¹ã€æ–‡ä»¶å¤¹é‡Œé¢çš„å›¾ç‰‡</p><p>ç¡®ä¿é¡µé¢æ­£å¸¸å·¥ä½œï¼Œç„¶åé€šè¿‡ä¸€äº›å»¶è¿ŸåŠ è½½çš„è„šæœ¬å¢å¼ºé¡µé¢ä¸Šçš„ä½“éªŒï¼Œæ¯”å¦‚åŠ¨ç”»ã€æ‹–æ”¾</p><h3 id="Preload-Components"><a href="#Preload-Components" class="headerlink" title="Preload Components"></a><a href="https://developer.yahoo.com/performance/rules.html#preload">Preload Components</a></h3><p>åˆ©ç”¨è®¡ç®—æœºçš„é—²ç½®æ—¶é—´ï¼Œé¢„åŠ è½½å°†æ¥éœ€è¦çš„å†…å®¹</p><ol><li><p>æ— æ¡ä»¶çš„</p><p>åªè¦æ‰“å¼€æŸç½‘ç«™å°±åŠ è½½ä¸€äº›é¢å¤–çš„ç»„ä»¶ã€‚</p><p>æ‰“å¼€google.comï¼Œæ€»ä¼šé¢„åŠ è½½ä¹‹åæœç´¢ç•Œé¢çš„å›¾ç‰‡</p></li><li><p>æœ‰æ¡ä»¶çš„</p><p>æœç´¢æ¡†è¾“å…¥å†…å®¹å°±ä¼šé¢„åŠ è½½å†…å®¹</p></li><li><p>é¢„æœŸä¸­çš„</p><p>ä¸Šçº¿ç½‘ç«™æ–°è®¾è®¡æ—¶é¢„åŠ è½½å¯ä»¥ä¸å½±å“ç”¨æˆ·ä½“éªŒ</p></li></ol><h3 id="Reduce-the-Number-of-DOM-Elements"><a href="#Reduce-the-Number-of-DOM-Elements" class="headerlink" title="Reduce the Number of DOM Elements"></a><a href="https://developer.yahoo.com/performance/rules.html#min_dom">Reduce the Number of DOM Elements</a></h3><p>é¡µé¢tagæ•°é‡</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">'*'</span>).<span class="property">length</span></span><br></pre></td></tr></tbody></table></figure><p>åªæœ‰åœ¨è¯­ä¹‰ä¸Šæœ‰æ„ä¹‰æ—¶ï¼Œæ‰ä½¿ç”¨<code>&lt;div&gt;</code>ï¼ˆ å› ä¸ºå®ƒæ€»ä¼šæ·»åŠ ä¸€è¡Œ</p><h4 id="æœ‰å¤šå°‘ä¸ªDOMå…ƒç´ æ‰ç®—å¤šå‘¢ï¼Ÿ"><a href="#æœ‰å¤šå°‘ä¸ªDOMå…ƒç´ æ‰ç®—å¤šå‘¢ï¼Ÿ" class="headerlink" title="æœ‰å¤šå°‘ä¸ªDOMå…ƒç´ æ‰ç®—å¤šå‘¢ï¼Ÿ"></a>æœ‰å¤šå°‘ä¸ªDOMå…ƒç´ æ‰ç®—å¤šå‘¢ï¼Ÿ</h4><p>æ£€æŸ¥å…¶ä»–ç±»ä¼¼çš„é¡µé¢ï¼Œç„¶åæ¯”è¾ƒã€‚</p><h3 id="Split-Components-Across-Domains"><a href="#Split-Components-Across-Domains" class="headerlink" title="Split Components Across Domains"></a><a href="https://developer.yahoo.com/performance/rules.html#split">Split Components Across Domains</a></h3><p>æ‹†åˆ†ç»„ä»¶å¯ä»¥æœ€å¤§é™åº¦åœ°å®ç°å¹¶è¡Œä¸‹è½½</p><p>ç¡®ä¿ä½¿ç”¨çš„åŸŸåæ•°é‡ä¸è¶…è¿‡2-4ä¸ªï¼Œå› ä¸ºDNSæŸ¥è¯¢æƒ©ç½š</p><p>ä¾‹å­ï¼š</p><p>å°†HTMLæ–‡ä»¶å’ŒåŠ¨æ€å†…å®¹æ‰˜ç®¡åœ¨<a href="http://www.example.org,å¹¶åœ¨static1.example.orgå’Œstatic2.example.orgä¸Šæ‹†åˆ†éƒ¨ç½²é™æ€ç»„ä»¶/">www.example.orgï¼Œå¹¶åœ¨static1.example.orgå’Œstatic2.example.orgä¸Šæ‹†åˆ†éƒ¨ç½²é™æ€ç»„ä»¶</a></p><h3 id="Minimize-Number-of-iframes"><a href="#Minimize-Number-of-iframes" class="headerlink" title="Minimize Number of iframes"></a><a href="https://developer.yahoo.com/performance/rules.html#iframes">Minimize Number of iframes</a></h3><p><code>&lt;iframe&gt;</code> ä¼˜ç‚¹ï¼š</p><ul><li>Helps with slow third-party content like badges and ads</li><li>Security sandbox</li><li>Download scripts in parallel</li></ul><p><code>&lt;iframe&gt;</code> ç¼ºç‚¹ï¼š</p><ul><li>Costly even if blank</li><li>Blocks page onload</li><li>Non-semantic</li></ul><h3 id="Avoid-404s"><a href="#Avoid-404s" class="headerlink" title="Avoid 404s"></a><a href="https://developer.yahoo.com/performance/rules.html#no404">Avoid 404s</a></h3><p>HTTPè¯·æ±‚æ˜¯å¾ˆæ˜‚è´µçš„ï¼Œæå‡ºHTTPè¯·æ±‚ï¼Œå¾—åˆ°ä¸€ä¸ªæ— ç”¨çš„å“åº”ï¼ˆå³404 Not Foundï¼‰æ˜¯å®Œå…¨æ²¡æœ‰å¿…è¦çš„ï¼Œè€Œä¸”ä¼šæ‹–æ…¢ç”¨æˆ·ä½“éªŒï¼Œæ²¡æœ‰ä»»ä½•å¥½å¤„ã€‚</p><p><strong>Particularly bad</strong> is when the link to an external JavaScript is wrong and the result is a 404. First, this download will block parallel downloads. Next the browser may try to parse the 404 response body as if it were JavaScript code, trying to find something usable in it.</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink&quot;&gt;https://developer.yahoo.com/performance/rules.html?guccounter=1#csslink&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Content&lt;/li&gt;
&lt;li&gt;Server&lt;/li&gt;
&lt;li&gt;Cookie&lt;/li&gt;
&lt;li&gt;CSS&lt;/li&gt;
&lt;li&gt;JavaScript&lt;/li&gt;
&lt;li&gt;Images&lt;/li&gt;
&lt;li&gt;Mobile&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åŸæ–‡ä»ä¸ƒä¸ªæ–¹é¢æ€»ç»“ç½‘ç«™æ€§èƒ½æå‡ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡æ€»ç»“Contentæ–¹é¢ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Make-Fewer-HTTP-Requests-å‡å°‘HTTPè¯·æ±‚&quot;&gt;&lt;a href=&quot;#Make-Fewer-HTTP-Requests-å‡å°‘HTTPè¯·æ±‚&quot; class=&quot;headerlink&quot; title=&quot;Make Fewer HTTP Requests å‡å°‘HTTPè¯·æ±‚&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://developer.yahoo.com/performance/rules.html#num_http&quot;&gt;Make Fewer HTTP Requests&lt;/a&gt; å‡å°‘HTTPè¯·æ±‚&lt;/h3&gt;&lt;p&gt;å‡å°‘é¡µé¢çš„ç»„ä»¶æ•°é‡ï¼Œå¯ä»¥å‡å°‘HTTPè¯·æ±‚æ•°é‡ã€‚&lt;/p&gt;
&lt;p&gt;å‡å°‘é¡µé¢ç»„ä»¶çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ç²¾ç®€é¡µé¢è®¾è®¡&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ä¸ç®€åŒ–è®¾è®¡çš„æƒ…å†µä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ–‡ä»¶ç»„åˆï¼ˆjsæ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªé‡Œé¢ï¼Œcssæ–‡ä»¶æ”¾åˆ°ä¸€ä¸ªé‡Œé¢ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://css-tricks.com/css-sprites/&quot;&gt;CSS Sprites&lt;/a&gt;ï¼šèƒŒæ™¯å›¾ç‰‡åˆå¹¶æˆä¸€å¼ ï¼Œåˆ©ç”¨csså±æ€§è®¾ç½®å„ä¸ªéƒ¨åˆ†åˆ°ç›¸å¯¹åº”çš„é¡µé¢&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://css-tricks.com/examples/CSSClip/&quot;&gt;CSS Sprites with Inline Images&lt;/a&gt; ä¹Ÿå¯ä»¥ç”¨æ¥å¤„ç†å›¾ç‰‡&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å°†å†…è”å›¾ç‰‡æ”¾åˆ°cssæ–‡ä»¶ä¸­ï¼ˆ Combining inline images into your cached stylesheets is a way to reduce HTTP requests and avoid increasing the size of your pages ï¼ŸHow ? ( Todo: find demo&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;Reduce-DNS-Lookups-å‡å°‘DNSæŸ¥è¯¢&quot;&gt;&lt;a href=&quot;#Reduce-DNS-Lookups-å‡å°‘DNSæŸ¥è¯¢&quot; class=&quot;headerlink&quot; title=&quot;Reduce DNS Lookups å‡å°‘DNSæŸ¥è¯¢&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://developer.yahoo.com/performance/rules.html#dns_lookups&quot;&gt;Reduce DNS Lookups&lt;/a&gt; å‡å°‘DNSæŸ¥è¯¢&lt;/h3&gt;&lt;p&gt;å‡å°‘ç½‘ç«™çš„ä¸»æœºåï¼ˆhostnamesï¼‰ï¼Œå¯ä»¥å‡å°‘DNSæŸ¥è¯¢æ¬¡æ•°&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å‡å°‘ç½‘ç«™ä¸»æœºåä¼šå‡å°‘é¡µé¢çš„å¹¶å‘ä¸‹è½½é‡&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Trade-offï¼šAvoiding DNS lookups cuts response times, but reducing parallel downloads may increase response times. &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; Guideï¼šSplit components across &lt;strong&gt;at least two but no more than four&lt;/strong&gt; hostnames.&lt;/p&gt;
&lt;h3 id=&quot;Avoid-Redirects-é¿å…ç½‘ç«™é‡å®šå‘&quot;&gt;&lt;a href=&quot;#Avoid-Redirects-é¿å…ç½‘ç«™é‡å®šå‘&quot; class=&quot;headerlink&quot; title=&quot;Avoid Redirects é¿å…ç½‘ç«™é‡å®šå‘&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://developer.yahoo.com/performance/rules.html#redirects&quot;&gt;Avoid Redirects&lt;/a&gt; é¿å…ç½‘ç«™é‡å®šå‘&lt;/h3&gt;&lt;p&gt;æœ€ç»å¸¸å‘ç”Ÿçš„é‡å®šå‘ï¼šåº”è¯¥åŠ /çš„åœ°æ–¹æ²¡æœ‰åŠ /&lt;/p&gt;
&lt;p&gt;é‡å®šå‘å¯ä»¥ç”¨æ¥ä»æ—§ç½‘ç«™è·³è½¬åˆ°æ–°ç½‘ç«™&lt;/p&gt;
&lt;p&gt;é‡å®šå‘ä¹Ÿå¯ä»¥ç”¨æ¥è¿æ¥ç½‘ç«™çš„ä¸åŒéƒ¨åˆ†ã€æ ¹æ®ç‰¹å®šæƒ…å†µè®©ç”¨æˆ·è·³è½¬&lt;/p&gt;
&lt;p&gt;è§£å†³åŠæ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;å¦‚æœä¸¤ä¸ªç½‘ç«™åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨ï¼Œä½¿ç”¨ &lt;code&gt;Alias and mod_rewrite&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å¦‚æœæ˜¯ç½‘ç«™æ¢äº†ä¸ªæ–°åŸŸåï¼Œåˆ›å»ºä¸€ä¸ªCNAME (a DNS record that creates an alias pointing from one domain name to another)ï¼Œç»“åˆ&lt;code&gt;Alias or mod_rewrite&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;Make-Ajax-Cacheable-ç¼“å­˜Ajaxè¯·æ±‚&quot;&gt;&lt;a href=&quot;#Make-Ajax-Cacheable-ç¼“å­˜Ajaxè¯·æ±‚&quot; class=&quot;headerlink&quot; title=&quot;Make Ajax Cacheable ç¼“å­˜Ajaxè¯·æ±‚&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://developer.yahoo.com/performance/rules.html#cacheajax&quot;&gt;Make Ajax Cacheable&lt;/a&gt; ç¼“å­˜Ajaxè¯·æ±‚&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;å¼‚æ­¥ä¸ç­‰äºå³æ—¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¼˜åŒ–å¼‚æ­¥è¯·æ±‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¼“å­˜Ajaxè¯·æ±‚&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="å‰ç«¯" scheme="https://yikayiyo.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="ç¿»è¯‘" scheme="https://yikayiyo.github.io/tags/%E7%BF%BB%E8%AF%91/"/>
    
  </entry>
  
  <entry>
    <title>surfaceæµ‹è¯•</title>
    <link href="https://yikayiyo.github.io/2020/06/18/surface%E6%B5%8B%E8%AF%95/"/>
    <id>https://yikayiyo.github.io/2020/06/18/surface%E6%B5%8B%E8%AF%95/</id>
    <published>2020-06-18T09:21:24.000Z</published>
    <updated>2023-11-22T10:18:22.747Z</updated>
    
    <content type="html"><![CDATA[<p>surfaceä¸Šå†™åšå®¢ï¼Œå®Œäº‹ä¹‹åå„ç«¯åŒæ­¥æµ‹è¯•ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;surfaceä¸Šå†™åšå®¢ï¼Œå®Œäº‹ä¹‹åå„ç«¯åŒæ­¥æµ‹è¯•ã€‚&lt;/p&gt;
</summary>
      
    
    
    
    
    <category term="æ‚" scheme="https://yikayiyo.github.io/tags/%E6%9D%82/"/>
    
  </entry>
  
  <entry>
    <title>gitä¿®æ”¹æœ€è¿‘ä¸€æ¬¡commitçš„ä¿¡æ¯</title>
    <link href="https://yikayiyo.github.io/2020/06/18/git%E4%BF%AE%E6%94%B9%E6%9C%80%E8%BF%91%E4%B8%80%E6%AC%A1commit%E7%9A%84%E4%BF%A1%E6%81%AF/"/>
    <id>https://yikayiyo.github.io/2020/06/18/git%E4%BF%AE%E6%94%B9%E6%9C%80%E8%BF%91%E4%B8%80%E6%AC%A1commit%E7%9A%84%E4%BF%A1%E6%81%AF/</id>
    <published>2020-06-18T05:29:00.000Z</published>
    <updated>2023-11-22T10:18:22.737Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘ä¸€æ¬¡æäº¤çš„ä¿¡æ¯ä¸å¤ªå¯¹ï¼Œå·²ç»pushåˆ°è¿œç«¯ã€‚</p><img src="/2020/06/18/git%E4%BF%AE%E6%94%B9%E6%9C%80%E8%BF%91%E4%B8%80%E6%AC%A1commit%E7%9A%84%E4%BF%A1%E6%81%AF/xiugaiqian.png" class="" title="ä¿®æ”¹å‰"><p>ä¿®æ”¹æ­¥éª¤ï¼š</p><ol><li><p>è¾“å…¥å‘½ä»¤ï¼Œä¼šè¿›å…¥ç¼–è¾‘å™¨</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend</span><br></pre></td></tr></tbody></table></figure></li><li><p>ä¿®æ”¹commitä¿¡æ¯ï¼Œé€€å‡ºç¼–è¾‘å™¨</p></li><li><p>å¼ºåˆ¶æ¨é€</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -f</span><br></pre></td></tr></tbody></table></figure></li></ol><p>ä¿®æ”¹åï¼š</p><img src="/2020/06/18/git%E4%BF%AE%E6%94%B9%E6%9C%80%E8%BF%91%E4%B8%80%E6%AC%A1commit%E7%9A%84%E4%BF%A1%E6%81%AF/xiugaihou.png" class="" title="ä¿®æ”¹å"><p>æ³¨æ„åˆ°ï¼š<strong>commitå·æ”¹å˜äº†</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ€è¿‘ä¸€æ¬¡æäº¤çš„ä¿¡æ¯ä¸å¤ªå¯¹ï¼Œå·²ç»pushåˆ°è¿œç«¯ã€‚&lt;/p&gt;
&lt;img src=&quot;/2020/06/18/git%E4%BF%AE%E6%94%B9%E6%9C%80%E8%BF%91%E4%B8%80%E6%AC%A1commit%E7%9A%84%E4%BF%A1%E6%81</summary>
      
    
    
    
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="git" scheme="https://yikayiyo.github.io/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>å‡ åˆ™ç¬‘è¯</title>
    <link href="https://yikayiyo.github.io/2020/02/22/%E5%87%A0%E5%88%99%E7%AC%91%E8%AF%9D/"/>
    <id>https://yikayiyo.github.io/2020/02/22/%E5%87%A0%E5%88%99%E7%AC%91%E8%AF%9D/</id>
    <published>2020-02-22T12:41:23.000Z</published>
    <updated>2023-11-22T10:18:22.757Z</updated>
    
    <content type="html"><![CDATA[<img src="/2020/02/22/%E5%87%A0%E5%88%99%E7%AC%91%E8%AF%9D/0222fig1.png" class="" title="weibo"><img src="/2020/02/22/%E5%87%A0%E5%88%99%E7%AC%91%E8%AF%9D/0222fig2.png" class="" title="weiboJinggao"><p>çœ‹åˆ°è¿™åˆ™ä¿¡æ¯ï¼Œä¸‹é¢æœ‰äººä¸¾äº†å‡ ä¸ªå‰è‹è”çš„ç¬‘è¯ï¼Œæ„Ÿè§‰å¾ˆæœ‰æ„æ€ï¼Œäºæ˜¯å°±å»æ‰¾äº†å‡ ä¸ªï¼Œç¬‘å¾—è‚šå­ç–¼ã€‚</p><blockquote><p>æœ‰ä¸ªäººåœ¨çº¢åœºæ•£å‘ä¼ å•ï¼Œè¢«å…‹æ ¼å‹ƒé€®ä½äº†ã€‚é‚£äººè¾©è§£ï¼Œæˆ‘å‘çš„éƒ½æ˜¯ç™½çº¸ã€‚å…‹æ ¼å‹ƒå†·ç¬‘é“ï¼Œä½ ä»¥ä¸ºæˆ‘ä¸çŸ¥é“ä½ ä»€ä¹ˆæ„æ€ï¼Ÿ</p></blockquote><blockquote><p>åœ¨è‹å…±äºŒåä¸‰æ¬¡ä»£è¡¨å¤§ä¼šä¸Šï¼Œå‹ƒåˆ—æ—¥æ¶…å¤«ä½œæŠ¥å‘Šï¼Œä»–é—®ï¼šâ€œæˆ‘ä»¬è¿™é‡Œæœ‰æ²¡æœ‰æ•Œäººï¼Ÿâ€ä¸€ä¸ªäººå›ç­”ï¼šâ€œæœ‰ä¸€ä¸ªï¼Œä»–ååœ¨ç¬¬å››æ’ç¬¬åå…«å·ä½å­ä¸Šã€‚â€å‹ƒé—®ï¼šâ€œä¸ºä»€ä¹ˆä»–æ˜¯æ•Œäººï¼Ÿâ€å›ç­”ï¼šâ€œåˆ—å®è¯´è¿‡æ•Œäººæ˜¯ä¸ä¼šæ‰“çŒç¡çš„ï¼Œæˆ‘å‘ç°å…¨åœºåªæœ‰ä»–ä¸€ä¸ªäººæ²¡æœ‰æ‰“çŒç¡ï¼â€</p></blockquote><blockquote><p>â€œåœ¨è‹è”æ˜¯å¦å¯ä»¥å­˜åœ¨ä¸¤å…šåˆ¶ï¼Ÿâ€â€œä¸ï¼Œä¸å¯èƒ½ï¼Œå› ä¸ºæˆ‘ä»¬å…»ä¸èµ·ã€‚â€</p></blockquote><blockquote><p>è‹è”ç‰¹å·¥å¯¹ç¾å›½ç‰¹å·¥å¤¸å£é“ï¼šâ€œæˆ‘ä»¬çŸ¥é“ä½ ä»¬å›½å®¶æ‰€æœ‰æ ¸å¯¼å¼¹å‘å°„äº•çš„ä½ç½®ã€‚â€ç¾å›½ç‰¹å·¥è¯´ï¼šâ€œé‚£åˆæœ‰ä»€ä¹ˆï¼Œæˆ‘ä»¬çŸ¥é“ä½ ä»¬æœªæ¥20å¹´å…¨ä½“æ”¿æ²»å±€å§”å‘˜åå•ã€‚â€</p></blockquote><blockquote><p>ä¸€å¤©æˆˆå°”å·´ä¹”å¤«åˆ°ä¸€ä¸ªå†œåœºè§†å¯Ÿï¼Œçœ‹åˆ°æœ‰å‡ å¤´çŒªï¼Œå°±åˆ°çŒªæ—è¾¹æ‹äº†ä¸€å¼ ç…§ç‰‡ã€‚éšè¡Œäººå‘˜åœ¨ç…§ç‰‡ä¸Šå†™ä¸Šï¼šæˆˆå°”å·´ä¹”å¤«å’ŒçŒªåœ¨ä¸€èµ·ï¼Œä½†åˆæ„Ÿåˆ°ä¸å¦¥ã€‚äºæ˜¯æ”¹æˆï¼šçŒªå’Œæˆˆå°”å·´ä¹”å¤«åœ¨ä¸€èµ·ï¼Œå¯è¿˜æ˜¯æ„Ÿè§‰ä¸å¯¹ã€‚æœ€åæŠŠç…§ç‰‡ä¸Šçš„å­—æ”¹æˆï¼šå·¦èµ·ç¬¬ä¸‰ä½æ˜¯æˆˆå°”å·´ä¹”å¤«ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;img src=&quot;/2020/02/22/%E5%87%A0%E5%88%99%E7%AC%91%E8%AF%9D/0222fig1.png&quot; class=&quot;&quot; title=&quot;weibo&quot;&gt;

&lt;img src=&quot;/2020/02/22/%E5%87%A0%E5%88%99%E</summary>
      
    
    
    
    
    <category term="æ‚" scheme="https://yikayiyo.github.io/tags/%E6%9D%82/"/>
    
  </entry>
  
  <entry>
    <title>å¥åº·çš„æ­¦æ±‰</title>
    <link href="https://yikayiyo.github.io/2020/02/11/%E5%81%A5%E5%BA%B7%E7%9A%84%E6%AD%A6%E6%B1%89/"/>
    <id>https://yikayiyo.github.io/2020/02/11/%E5%81%A5%E5%BA%B7%E7%9A%84%E6%AD%A6%E6%B1%89/</id>
    <published>2020-02-11T12:35:30.000Z</published>
    <updated>2023-11-22T10:18:22.757Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä¸€ä¸ªå¥åº·çš„ç¤¾ä¼šä¸è¯¥åªæœ‰ä¸€ç§å£°éŸ³ã€‚</p></blockquote><p>å“ªé‡Œä¹Ÿå»ä¸äº†ï¼Œå°±ä¸åœåœ°åˆ·å±ã€‚</p><p>åŒ»æŠ¤äººå‘˜åœ¨åŒ»é™¢ä¼‘æ¯å®¤åšå••å¤§å“­ï¼Œç«åŒ–å·¥äººåœ¨æ®¡ä»ªé¦†å”±æ­Œç»™è‡ªå·±æ‰“æ°”ï¼Œä¸»å¦‡åœ¨é˜³å°ä¸Šç»æœ›åœ°å“­å–Šæ•‘å‘½ï¼Œç”µè¯é‡Œå¿«è¦å´©æºƒçš„å‘è‡ªå…šæ€§çš„å’†å“®â€¦</p><p>æˆ¿é—´çš„é—¨è¢«ç„Šè¢«é”è¢«å µï¼Œå¤–å‡ºçš„è½¦é˜Ÿåœ¨é«˜é€Ÿä¸Šæ’æˆé•¿é¾™ï¼Œä¸ºäº†æ´»å‘½æƒ³å·æ¸¡åˆ°éš”å£çœå´å‘ç°æ²³å¯¹å²¸ä¸€æ’ä¸€æ’çš„äººåœ¨å›´è¿½å µæˆªâ€¦</p><p>å’Œæ–°é—»é‡Œçš„å®Œå…¨ä¸ä¸€æ ·ã€‚</p><p>æˆ‘å¬åˆ°äº†ä¸¤ç§å£°éŸ³ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ä¸€ä¸ªå¥åº·çš„ç¤¾ä¼šä¸è¯¥åªæœ‰ä¸€ç§å£°éŸ³ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å“ªé‡Œä¹Ÿå»ä¸äº†ï¼Œå°±ä¸åœåœ°åˆ·å±ã€‚&lt;/p&gt;
&lt;p&gt;åŒ»æŠ¤äººå‘˜åœ¨åŒ»é™¢ä¼‘æ¯å®¤åšå••å¤§å“­ï¼Œç«åŒ–å·¥äººåœ¨æ®¡ä»ªé¦†å”±æ­Œç»™è‡ªå·±æ‰“æ°”ï¼Œä¸»å¦‡åœ¨é˜³å°ä¸Šç»æœ›åœ°å“­å–Šæ•‘å‘½ï¼Œç”µè¯é‡Œå¿«è¦å´©æºƒçš„å‘è‡ªå…šæ€§çš„å’†å“®â€¦&lt;/p</summary>
      
    
    
    
    
    <category term="æ‚" scheme="https://yikayiyo.github.io/tags/%E6%9D%82/"/>
    
  </entry>
  
  <entry>
    <title>Data flow Synchronization and Pipelining</title>
    <link href="https://yikayiyo.github.io/2020/01/16/Pipelining/"/>
    <id>https://yikayiyo.github.io/2020/01/16/Pipelining/</id>
    <published>2020-01-16T04:02:58.000Z</published>
    <updated>2023-11-22T10:18:22.726Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://www.coursera.org/learn/parallel-programming-in-java/">https://www.coursera.org/learn/parallel-programming-in-java/</a></p><h3 id="Split-phase-Barriers-with-Java-Phasers"><a href="#Split-phase-Barriers-with-Java-Phasers" class="headerlink" title="Split-phase Barriers with Java Phasers"></a>Split-phase Barriers with Java Phasers</h3>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://www.coursera.org/learn/parallel-programming-in-java/&quot;&gt;https://www.coursera.org/learn/parallel-programming-in-java/&lt;/a&gt;&lt;/</summary>
      
    
    
    
    
    <category term="java" scheme="https://yikayiyo.github.io/tags/java/"/>
    
    <category term="å¹¶è¡Œç¼–ç¨‹" scheme="https://yikayiyo.github.io/tags/%E5%B9%B6%E8%A1%8C%E7%BC%96%E7%A8%8B/"/>
    
    <category term="å­¦ä¹ " scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>Loop Parallelism</title>
    <link href="https://yikayiyo.github.io/2020/01/13/Loop%20Parallelism/"/>
    <id>https://yikayiyo.github.io/2020/01/13/Loop%20Parallelism/</id>
    <published>2020-01-13T05:49:17.000Z</published>
    <updated>2023-11-22T10:18:22.726Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Parallel-Loops"><a href="#Parallel-Loops" class="headerlink" title="Parallel Loops"></a>Parallel Loops</h3><p>æœªçŸ¥å¾ªç¯æ¬¡æ•°ï¼Œåˆ©ç”¨äº†æŒ‡é’ˆçš„forå¾ªç¯<br>æ¯ä¸€ä¸ªè¿­ä»£å½“ä½œä¸€ä¸ªå­ä»»åŠ¡ï¼Œ<code>finish</code>çº¦æŸæ•´ä¸ªå¾ªç¯</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">finish {</span><br><span class="line">    <span class="keyword">for</span> (p = head; p != <span class="literal">null</span> ; p = p.next) </span><br><span class="line">        async <span class="title function_">compute</span><span class="params">(p)</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>å·²çŸ¥å¾ªç¯æ¬¡æ•°nï¼Œå¯ä»¥åˆ©ç”¨<code>forall</code></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vector addition</span></span><br><span class="line">forall (i : [<span class="number">0</span>:n-<span class="number">1</span>]) </span><br><span class="line">    a[i] = b[i] + c[i]</span><br></pre></td></tr></tbody></table></figure><p>åˆ©ç”¨ Java streamsï¼Œä¸Šè¿°åŠŸèƒ½æœ‰æ›´åŠ ç®€æ´çš„è¡¨è¾¾æ–¹å¼</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">a = IntStream.rangeClosed(<span class="number">0</span>, N-<span class="number">1</span>).parallel().toArray(i -&gt; b[i] + c[i]);</span><br></pre></td></tr></tbody></table></figure><span id="more"></span><h3 id="Parallel-Matrix-Multiplication"><a href="#Parallel-Matrix-Multiplication" class="headerlink" title="Parallel Matrix Multiplication"></a>Parallel Matrix Multiplication</h3><p>å‡è®¾ä¸¤ä¸ª<code>n*n</code>çš„çŸ©é˜µç›¸ä¹˜ï¼Œæœ‰</p><p>$$<br>c[i][j] = \sum_{k=0}^{n-1} a[i][k] * b[k][j]<br>$$<br>ä¼ªä»£ç è¡¨ç¤ºä¸º</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(i : [<span class="number">0</span>:n-<span class="number">1</span>]) {</span><br><span class="line">  <span class="keyword">for</span>(j : [<span class="number">0</span>:n-<span class="number">1</span>]) { c[i][j] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(k : [<span class="number">0</span>:n-<span class="number">1</span>]) {</span><br><span class="line">      c[i][j] = c[i][j] + a[i][k]*b[k][j]</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>è¦æ›¿æ¢æˆå¹¶è¡Œè®¡ç®—ï¼Œå¯ä»¥ç®€å•åœ°å°†å¤–ä¸¤å±‚çš„forå¾ªç¯æ”¹æˆ<code>forall</code></p><p>for-k å¿…é¡»æ˜¯çº¿æ€§çš„ï¼Œå› ä¸ºè¿™é‡Œæœ‰å†™æ•°æ®ï¼ˆdata race</p><h3 id="Barriers-in-Parallel-Loops"><a href="#Barriers-in-Parallel-Loops" class="headerlink" title="Barriers in Parallel Loops"></a>Barriers in Parallel Loops</h3><p>ä¸‹é¢æœ‰ä¸€ä¸ªç®€å•çš„å¹¶è¡Œä»»åŠ¡</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">forall (i : [<span class="number">0</span>:n-<span class="number">1</span>]) {</span><br><span class="line">    myId = lookup(i); <span class="comment">// convert int to a string </span></span><br><span class="line">    print HELLO, myId;</span><br><span class="line">    print BYE, myId;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>åœ¨ä¸åŒçš„æ‰§è¡Œä¸‹ä¼šæœ‰ä¸åŒé¡ºåºçš„ç»“æœï¼ˆç›¸åŒmyIdå¯¹åº”çš„HELLOä¸€å®šåœ¨BYEä¹‹å‰</p><p>barrierså¯ä»¥å°†ä¸€ä¸ªparallel loopåˆ†ä¸ºä¸åŒçš„é˜¶æ®µ</p><p>åœ¨ä¸¤ä¸ªprintä¹‹é—´æ’å…¥ä¸€ä¸ªbarrierï¼Œå¯ä»¥ä¿è¯æ‰€æœ‰çš„HELLOå‡ºç°åœ¨BYEä¹‹å‰</p><p>ä¸¤ç§å†™æ³•ï¼š</p><ul><li><p>åœ¨ä¸€ä¸ª<code>forall</code>å¾ªç¯ä¸­æ’å…¥barriersåˆ†ä¸ºä¸åŒçš„é˜¶æ®µ (ä¸¤ä¸ªå¯¹åº”çš„printå…±äº«myId</p></li><li><p>ä¸ºæ¯ä¸ªé˜¶æ®µå†™è‡ªå·±çš„<code>forall</code>å¾ªç¯ (å€ŸåŠ© intermediate data structure  to communicate the myId values from one <em>forall</em> to another <em>forall</em></p></li></ul><h3 id="Parallel-One-Dimensional-Iterative-Averaging"><a href="#Parallel-One-Dimensional-Iterative-Averaging" class="headerlink" title="Parallel One-Dimensional Iterative Averaging"></a>Parallel One-Dimensional Iterative Averaging</h3><p>Solve the recurrence<br>$$<br>X_i=\frac{X_{i-1}+X_{i+1}}2<br>$$</p><p>with boundary conditions<br>$$<br>X_0=0\ and\ X_n=1<br>$$</p><p><a href="https://en.wikipedia.org/wiki/Jacobi_method">Jacobi method</a>åˆ©ç”¨ä¸¤ä¸ªæ•°ç»„oldX[] and newX[]è¿­ä»£æ±‚è§£è¯¥é—®é¢˜ï¼Œå¹¶è¡Œä¼ªä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (iter: [<span class="number">0</span>:nsteps-<span class="number">1</span>]) {</span><br><span class="line">  forall (i: [<span class="number">1</span>:n-<span class="number">1</span>]) {</span><br><span class="line">    newX[i] = (oldX[i-<span class="number">1</span>] + oldX[i+<span class="number">1</span>]) / <span class="number">2</span>;</span><br><span class="line">  }</span><br><span class="line">  swap pointers newX and oldX;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä¸Šè¿°æ–¹æ³•åˆ›å»ºäº† <em>nsteps</em> <em>Ã—</em> (<em>n</em> <em>âˆ’</em> 1) ä¸ªä»»åŠ¡</p><p><strong>ä½¿ç”¨Barrierså¯ä»¥å‡å°‘éœ€è¦åˆ›å»ºçš„ä»»åŠ¡ä¸ªæ•°</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">forall ( i: [<span class="number">1</span>:n-<span class="number">1</span>]) {</span><br><span class="line">  <span class="keyword">for</span> (iter: [<span class="number">0</span>:nsteps-<span class="number">1</span>]) {</span><br><span class="line">    newX[i] = (oldX[i-<span class="number">1</span>] + oldX[i+<span class="number">1</span>]) / <span class="number">2</span>;</span><br><span class="line">    NEXT; <span class="comment">// Barrier</span></span><br><span class="line">    swap pointers newX and oldX;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>ä¸Šè¿°æ–¹æ³•åªéœ€è¦åˆ›å»º <em>(n-1)</em> ä¸ªä»»åŠ¡</p><p>This is a significant improvement since creating tasks is usually more expensive than performing barrier operations.</p><h3 id="Iteration-Grouping-Chunking-in-Parallel-Loops"><a href="#Iteration-Grouping-Chunking-in-Parallel-Loops" class="headerlink" title="Iteration Grouping/Chunking in Parallel Loops"></a>Iteration Grouping/Chunking in Parallel Loops</h3><p>å¯¹äºå‘é‡ç›¸åŠ é—®é¢˜</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">forall (i : [<span class="number">0</span>:n-<span class="number">1</span>]) a[i] = b[i] + c[i]</span><br></pre></td></tr></tbody></table></figure><p>ä¸Šè¿°æ–¹æ³•åˆ›å»ºäº†nä¸ªä»»åŠ¡ï¼Œå½“nå¾ˆå¤§æ—¶overheadsä¹Ÿä¼šå¾ˆå¤§</p><p>è§£å†³æ–¹æ³•</p><p><strong>åˆ†ç»„</strong>ï¼ˆ<em>loop</em> <em>chunking</em> or <em>iteration grouping</em></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">forall (g:[<span class="number">0</span>:ng-<span class="number">1</span>])</span><br><span class="line">  <span class="keyword">for</span> (i : mygroup(g, ng, [<span class="number">0</span>:n-<span class="number">1</span>])) a[i] = b[i] + c[i]</span><br></pre></td></tr></tbody></table></figure><p>ä¸Šè¿°æ–¹æ³•å°†ä»»åŠ¡ä¸ªæ•°ä» <strong>n</strong> é™åˆ°äº† <strong>ng</strong>ï¼ˆåˆ†ç»„ä¸ªæ•°</p><p>åˆ†ç»„æ–¹æ³•æœ‰ä¸¤ç§ï¼š</p><ul><li>block<ul><li>å°†è¿ç»­çš„è¿­ä»£åˆ†ä¸ºä¸€ç»„</li></ul></li><li>cyclic<ul><li>å°†åŒä½™ç±»è¿­ä»£ï¼ˆ iterations in the same congruence classï¼Œåˆ†ä¸ºä¸€ç»„</li></ul></li></ul>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;Parallel-Loops&quot;&gt;&lt;a href=&quot;#Parallel-Loops&quot; class=&quot;headerlink&quot; title=&quot;Parallel Loops&quot;&gt;&lt;/a&gt;Parallel Loops&lt;/h3&gt;&lt;p&gt;æœªçŸ¥å¾ªç¯æ¬¡æ•°ï¼Œåˆ©ç”¨äº†æŒ‡é’ˆçš„forå¾ªç¯&lt;br&gt;æ¯ä¸€ä¸ªè¿­ä»£å½“ä½œä¸€ä¸ªå­ä»»åŠ¡ï¼Œ&lt;code&gt;finish&lt;/code&gt;çº¦æŸæ•´ä¸ªå¾ªç¯&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;finish {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (p = head; p != &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt; ; p = p.next) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        async &lt;span class=&quot;title function_&quot;&gt;compute&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(p)&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;å·²çŸ¥å¾ªç¯æ¬¡æ•°nï¼Œå¯ä»¥åˆ©ç”¨&lt;code&gt;forall&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// vector addition&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;forall (i : [&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;:n-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    a[i] = b[i] + c[i]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;åˆ©ç”¨ Java streamsï¼Œä¸Šè¿°åŠŸèƒ½æœ‰æ›´åŠ ç®€æ´çš„è¡¨è¾¾æ–¹å¼&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a = IntStream.rangeClosed(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, N-&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;).parallel().toArray(i -&amp;gt; b[i] + c[i]);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    
    <category term="å­¦ä¹ ç¬”è®°" scheme="https://yikayiyo.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    <category term="java" scheme="https://yikayiyo.github.io/tags/java/"/>
    
    <category term="å¹¶è¡Œç¼–ç¨‹" scheme="https://yikayiyo.github.io/tags/%E5%B9%B6%E8%A1%8C%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
</feed>
